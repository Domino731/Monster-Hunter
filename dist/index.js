(()=>{var __webpack_modules__={3:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d,firebase:()=>l});var r=n(8261),i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o="[DEFAULT]",a=[],s=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t,this.options_=(0,r.deepCopy)(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){a.push(e),setTimeout((function(){return e(null)}),0)},removeAuthTokenListener:function(e){a=a.filter((function(t){return t!==e}))}}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach((function(n){Object.keys(e.services_[n]).forEach((function(r){t.push(e.services_[n][r])}))})),Promise.all(t.map((function(e){return e.INTERNAL.delete()})))})).then((function(){e.isDeleted_=!0,e.services_={}}))},e.prototype._getService=function(e,t){if(void 0===t&&(t=o),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==o?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;(0,r.deepExtend)(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(a.forEach((function(e){t.INTERNAL.addAuthTokenListener(e)})),a=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},e}();function u(e,t){throw c.create(e,t)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),l=function e(){var t={},n={},a={},c={__esModule:!0,initializeApp:function(e,n){void 0===n?n=o:"string"==typeof n&&""!==n||u("bad-app-name",{name:n+""}),i(t,n)&&u("duplicate-app",{name:n});var r=new s(e,n,c);return t[n]=r,h(r,"create"),r},app:l,apps:null,Promise,SDK_VERSION:"4.8.0",INTERNAL:{registerService:function(e,t,i,o,h){n[e]&&u("duplicate-service",{name:e}),n[e]=t,o&&(a[e]=o,d().forEach((function(e){o("create",e)})));var p=function(t){return void 0===t&&(t=l()),"function"!=typeof t[e]&&u("invalid-app-argument",{name:e}),t[e]()};return void 0!==i&&(0,r.deepExtend)(p,i),c[e]=p,s.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._getService.bind(this,e);return r.apply(this,h?t:[])},p},createFirebaseNamespace:e,extendNamespace:function(e){(0,r.deepExtend)(c,e)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(e){h(t[e],"delete"),delete t[e]},factories:n,useAsService:p,Promise,deepExtend:r.deepExtend}};function l(e){return i(t,e=e||o)||u("no-app",{name:e}),t[e]}function d(){return Object.keys(t).map((function(e){return t[e]}))}function h(e,t){Object.keys(n).forEach((function(n){var r=p(e,n);null!==r&&a[r]&&a[r](t,e)}))}function p(e,t){if("serverAuth"===t)return null;var n=t;return e.options,n}return(0,r.patchProperty)(c,"default",c),Object.defineProperty(c,"apps",{get:d}),(0,r.patchProperty)(l,"App",s),c}();const d=l},8818:(e,t,n)=>{(function(){var e,t=n(3).default,r=r||{},i=this;function o(e){return"string"==typeof e}function a(e){return"boolean"==typeof e}function s(){}function u(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function c(e){return null===e}function l(e){return"array"==u(e)}function d(e){var t=u(e);return"array"==t||"object"==t&&"number"==typeof e.length}function h(e){return"function"==u(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var f="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now||function(){return+new Date};function w(e,t){function n(){}n.prototype=t.prototype,e.ib=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Rc=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function S(e){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function E(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}w(S,Error),S.prototype.name="CustomError";var k=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function I(e){return D.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(T,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(C,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(A,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(P,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(R,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(N,"&#0;")),e):e}var T=/&/g,C=/</g,A=/>/g,P=/"/g,R=/'/g,N=/\x00/g,D=/[\x00&<>"']/;function O(e,t){return-1!=e.indexOf(t)}function L(e,t){return e<t?-1:e>t?1:0}function M(e,t){t.unshift(e),S.call(this,E.apply(null,t)),t.shift()}function x(e,t){throw new M("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}w(M,S),M.prototype.name="AssertionError";var F,q=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,o(e))return o(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},B=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=o(e)?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)},U=Array.prototype.map?function(e,t,n){return Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Array(r),a=o(e)?e.split(""):e,s=0;s<r;s++)s in a&&(i[s]=t.call(n,a[s],s,e));return i},j=Array.prototype.some?function(e,t,n){return Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=o(e)?e.split(""):e,a=0;a<r;a++)if(a in i&&t.call(n,i[a],a,e))return!0;return!1};function W(e,t){return 0<=q(e,t)}function V(e,t){var n;return(n=0<=(t=q(e,t)))&&Array.prototype.splice.call(e,t,1),n}function H(e,t){!function(e,t){var n=e.length,r=o(e)?e.split(""):e;for(--n;0<=n;--n)n in r&&t.call(void 0,r[n],n,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1).length}))}function G(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}e:{var $=i.navigator;if($){var Q=$.userAgent;if(Q){F=Q;break e}}F=""}function z(e){return O(F,e)}function Y(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function Z(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}function X(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n}function J(e){for(var t in e)return!1;return!0}function ee(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0}function te(e){var t,n={};for(t in e)n[t]=e[t];return n}var ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ne.length;o++)n=ne[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ie(e){return ie[" "](e),e}ie[" "]=s;var oe,ae,se=z("Opera"),ue=z("Trident")||z("MSIE"),ce=z("Edge"),le=ce||ue,de=z("Gecko")&&!(O(F.toLowerCase(),"webkit")&&!z("Edge"))&&!(z("Trident")||z("MSIE"))&&!z("Edge"),he=O(F.toLowerCase(),"webkit")&&!z("Edge");function pe(){var e=i.document;return e?e.documentMode:void 0}e:{var fe="",me=(ae=F,de?/rv\:([^\);]+)(\)|;)/.exec(ae):ce?/Edge\/([\d\.]+)/.exec(ae):ue?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ae):he?/WebKit\/(\S+)/.exec(ae):se?/(?:Version)[ \/]?(\S+)/.exec(ae):void 0);if(me&&(fe=me?me[1]:""),ue){var ge=pe();if(null!=ge&&ge>parseFloat(fe)){oe=String(ge);break e}}oe=fe}var ye,ve={};function _e(e){return function(e,t){var n=ve;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=k(String(oe)).split("."),r=k(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=L(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||L(0==a[2].length,0==s[2].length)||L(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var be=i.document;function we(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0}function Se(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function Ee(e,t,n){this.f=n,this.c=e,this.g=t,this.b=0,this.a=null}function ke(e,t){e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}ye=be&&ue?pe()||("CSS1Compat"==be.compatMode?parseInt(oe,10):5):void 0,Ee.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Ie,Te,Ce=new Ee((function(){return new Pe}),(function(e){e.reset()}),100);function Ae(){var e=Oe,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Re(e){i.setTimeout((function(){throw e}),0)}function Ne(e,t){Te||function(){if(-1!=String(i.Promise).indexOf("[native code]")){var e=i.Promise.resolve(void 0);Te=function(){e.then(Le)}}else Te=function(){var e=Le;!h(i.setImmediate)||i.Window&&i.Window.prototype&&!z("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(Ie||(Ie=function(){var e=i.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!z("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=v((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!z("Trident")&&!z("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).pb;n.pb=null,e()}},function(e){r.next={pb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){i.setTimeout(e,0)}}()),Ie(e)):i.setImmediate(e)}}(),De||(Te(),De=!0);var n=Oe,r=Ce.get();r.set(e,t),n.b?n.b.next=r:n.a=r,n.b=r}Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var De=!1,Oe=new function(){this.b=this.a=null};function Le(){for(var e;e=Ae();){try{e.a.call(e.b)}catch(e){Re(e)}ke(Ce,e)}De=!1}function Me(e,t){if(this.a=xe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=s)try{var n=this;e.call(t,(function(e){ze(n,Fe,e)}),(function(e){if(!(e instanceof nt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}ze(n,qe,e)}))}catch(e){ze(this,qe,e)}}var xe=0,Fe=2,qe=3;function Be(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Be.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ue=new Ee((function(){return new Be}),(function(e){e.reset()}),100);function je(e,t,n){var r=Ue.get();return r.g=e,r.b=t,r.f=n,r}function We(e){if(e instanceof Me)return e;var t=new Me(s);return ze(t,Fe,e),t}function Ve(e){return new Me((function(t,n){n(e)}))}function He(e,t,n){Ye(e,t,n,null)||Ne(_(t,e))}function Ge(e,t){return(t=je(t,t,void 0)).c=!0,$e(e,t),e}function Ke(e,t){if(e.a==xe)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==xe&&1==r?Ke(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Xe(n),Je(n,i,qe,t)))}e.c=null}else ze(e,qe,t)}function $e(e,t){e.b||e.a!=Fe&&e.a!=qe||Ze(e),e.f?e.f.next=t:e.b=t,e.f=t}function Qe(e,t,n,r){var i=je(null,null,null);return i.a=new Me((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof nt?o(t):e(i)}catch(e){o(e)}}:o})),i.a.c=e,$e(e,i),i.a}function ze(e,t,n){e.a==xe&&(e===n&&(t=qe,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ye(n,e.Ac,e.Bc,e)||(e.i=n,e.a=t,e.c=null,Ze(e),t!=qe||n instanceof nt||function(e,t){e.g=!0,Ne((function(){e.g&&tt.call(null,t)}))}(e,n)))}function Ye(e,t,n,r){if(e instanceof Me)return $e(e,je(t||s,n||null,r)),!0;if(Se(e))return e.then(t,n,r),!0;if(p(e))try{var i=e.then;if(h(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function Ze(e){e.h||(e.h=!0,Ne(e.Qb,e))}function Xe(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Je(e,t,n,r){if(n==qe&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,et(t,n,r);else try{t.c?t.g.call(t.f):et(t,n,r)}catch(e){tt.call(null,e)}ke(Ue,t)}function et(e,t,n){t==Fe?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Me.prototype.then=function(e,t,n){return Qe(this,h(e)?e:null,h(t)?t:null,n)},we(Me),(e=Me.prototype).s=function(e,t){return Qe(this,null,e,t)},e.cancel=function(e){this.a==xe&&Ne((function(){Ke(this,new nt(e))}),this)},e.Ac=function(e){this.a=xe,ze(this,Fe,e)},e.Bc=function(e){this.a=xe,ze(this,qe,e)},e.Qb=function(){for(var e;e=Xe(this);)Je(this,e,this.a,this.i);this.h=!1};var tt=Re;function nt(e){S.call(this,e)}w(nt,S),nt.prototype.name="cancel";var rt=!ue||9<=Number(ye);function it(){this.a="",this.b=at}function ot(e){return e instanceof it&&e.constructor===it&&e.b===at?e.a:(x("expected object of type Const, got '"+e+"'"),"type_error:Const")}it.prototype.la=!0,it.prototype.ja=function(){return this.a},it.prototype.toString=function(){return"Const{"+this.a+"}"};var at={};function st(e){var t=new it;return t.a=e,t}function ut(){this.a="",this.b=pt}function ct(e){return e instanceof ut&&e.constructor===ut&&e.b===pt?e.a:(x("expected object of type TrustedResourceUrl, got '"+e+"' of type "+u(e)),"type_error:TrustedResourceUrl")}function lt(e,t){return e=function(e,t){var n=ot(e);if(!ht.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return n.replace(dt,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof it?ot(e):encodeURIComponent(String(e))}))}(e,t),(t=new ut).a=e,t}st(""),ut.prototype.la=!0,ut.prototype.ja=function(){return this.a},ut.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var dt=/%{(\w+)}/g,ht=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,pt={};function ft(){this.a="",this.b=vt}function mt(e){return e instanceof ft&&e.constructor===ft&&e.b===vt?e.a:(x("expected object of type SafeUrl, got '"+e+"' of type "+u(e)),"type_error:SafeUrl")}ft.prototype.la=!0,ft.prototype.ja=function(){return this.a},ft.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var gt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function yt(e){return e instanceof ft?e:(e=e.la?e.ja():String(e),gt.test(e)||(e="about:invalid#zClosurez"),_t(e))}var vt={};function _t(e){var t=new ft;return t.a=e,t}function bt(){this.a="",this.b=wt}_t("about:blank"),bt.prototype.la=!0,bt.prototype.ja=function(){return this.a},bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var wt={};function St(e){var t=new bt;return t.a=e,t}function Et(e){var t=document;return o(e)?t.getElementById(e):e}function kt(e,t){Y(t,(function(t,n){t&&t.la&&(t=t.ja()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:It.hasOwnProperty(n)?e.setAttribute(It[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}St("<!DOCTYPE html>"),St(""),St("<br>");var It={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Tt(e,t,n){function r(n){n&&t.appendChild(o(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i];!d(a)||p(a)&&0<a.nodeType?r(a):B(Ct(a)?K(a):a,r)}}function Ct(e){if(e&&"number"==typeof e.length){if(p(e))return"function"==typeof e.item||"string"==typeof e.item;if(h(e))return"function"==typeof e.item}return!1}function At(e){var t=[];return Rt(new Pt,e,t),t.join("")}function Pt(){}function Rt(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(l(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),Rt(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(o=t[r])&&(n.push(i),Ot(r,n),n.push(":"),Rt(e,o,n),i=",");return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Ot(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}var Nt={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Dt=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Ot(e,t){t.push('"',e.replace(Dt,(function(e){var t=Nt[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Nt[e]=t),t})),'"')}function Lt(){0!=Mt&&(xt[this[f]||(this[f]=++m)]=this),this.oa=this.oa,this.Fa=this.Fa}var Mt=0,xt={};function Ft(e){e.oa||(e.oa=!0,e.ta(),0!=Mt&&(e=e[f]||(e[f]=++m),delete xt[e]))}Lt.prototype.oa=!1,Lt.prototype.ta=function(){if(this.Fa)for(;this.Fa.length;)this.Fa.shift()()};var qt=Object.freeze||function(e){return e},Bt=!ue||9<=Number(ye),Ut=ue&&!_e("9"),jt=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return i.addEventListener("test",s,t),i.removeEventListener("test",s,t),e}();function Wt(e,t){this.type=e,this.b=this.target=t,this.Bb=!0}function Vt(e,t){if(Wt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(de){e:{try{ie(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,null===r?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=o(e.pointerType)?e.pointerType:Ht[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.c()}}Wt.prototype.c=function(){this.Bb=!1},w(Vt,Wt);var Ht=qt({2:"touch",3:"pen",4:"mouse"});Vt.prototype.c=function(){Vt.ib.c.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ut)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},Vt.prototype.g=function(){return this.a};var Gt="closure_listenable_"+(1e6*Math.random()|0),Kt=0;function $t(e,t,n,r,i){this.listener=e,this.a=null,this.src=t,this.type=n,this.capture=!!r,this.La=i,this.key=++Kt,this.ma=this.Ha=!1}function Qt(e){e.ma=!0,e.listener=null,e.a=null,e.src=null,e.La=null}function zt(e){this.src=e,this.a={},this.b=0}function Yt(e,t,n,r,i,o){var a=t.toString();(t=e.a[a])||(t=e.a[a]=[],e.b++);var s=Xt(t,n,i,o);return-1<s?(e=t[s],r||(e.Ha=!1)):((e=new $t(n,e.src,a,!!i,o)).Ha=r,t.push(e)),e}function Zt(e,t){var n=t.type;n in e.a&&V(e.a[n],t)&&(Qt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Xt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ma&&o.listener==t&&o.capture==!!n&&o.La==r)return i}return-1}var Jt="closure_lm_"+(1e6*Math.random()|0),en={};function tn(e,t,n,r,i){if(r&&r.once)rn(e,t,n,r,i);else if(l(t))for(var o=0;o<t.length;o++)tn(e,t[o],n,r,i);else n=pn(n),e&&e[Gt]?gn(e,t,n,p(r)?!!r.capture:!!r,i):nn(e,t,n,!1,r,i)}function nn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=dn(e);if(s||(e[Jt]=s=new zt(e)),!(n=Yt(s,t,n,r,a,o)).a)if(r=function(){var e=ln,t=Bt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.a=r,r.src=e,r.listener=n,e.addEventListener)jt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else{if(!e.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");e.attachEvent(sn(t.toString()),r)}}function rn(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)rn(e,t[o],n,r,i);else n=pn(n),e&&e[Gt]?yn(e,t,n,p(r)?!!r.capture:!!r,i):nn(e,t,n,!0,r,i)}function on(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)on(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=pn(n),e&&e[Gt]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=Xt(o=e.a[t],n,r,i))&&(Qt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=dn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Xt(t,n,r,i)),(n=-1<e?t[e]:null)&&an(n))}function an(e){if("number"!=typeof e&&e&&!e.ma){var t=e.src;if(t&&t[Gt])Zt(t.u,e);else{var n=e.type,r=e.a;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent&&t.detachEvent(sn(n),r),(n=dn(t))?(Zt(n,e),0==n.b&&(n.src=null,t[Jt]=null)):Qt(e)}}}function sn(e){return e in en?en[e]:en[e]="on"+e}function un(e,t,n,r){var i=!0;if((e=dn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ma&&(o=cn(o,r),i=i&&!1!==o)}return i}function cn(e,t){var n=e.listener,r=e.La||e.src;return e.Ha&&an(e),n.call(r,t)}function ln(e,t){if(e.ma)return!0;if(!Bt){if(!t)e:{t=["window","event"];for(var n=i,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Vt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){o=!0}(o||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=t.b;o;o=o.parentNode)r.push(o);for(e=e.type,o=r.length-1;0<=o;o--){t.b=r[o];var a=un(r[o],e,!0,t);n=n&&a}for(o=0;o<r.length;o++)t.b=r[o],a=un(r[o],e,!1,t),n=n&&a}return n}return cn(e,new Vt(t,this))}function dn(e){return(e=e[Jt])instanceof zt?e:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(e){return h(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){Lt.call(this),this.u=new zt(this),this.Ib=this,this.Ra=null}function mn(e,t){var n,r=e.Ra;if(r)for(n=[];r;r=r.Ra)n.push(r);if(e=e.Ib,r=t.type||t,o(t))t=new Wt(t,e);else if(t instanceof Wt)t.target=t.target||e;else{var i=t;re(t=new Wt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var s=t.b=n[a];i=vn(s,r,!0,t)&&i}if(i=vn(s=t.b=e,r,!0,t)&&i,i=vn(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vn(s=t.b=n[a],r,!1,t)&&i}function gn(e,t,n,r,i){Yt(e.u,String(t),n,!1,r,i)}function yn(e,t,n,r,i){Yt(e.u,String(t),n,!0,r,i)}function vn(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&Zt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Bb}function _n(e,t,n){if(h(e))n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function bn(e){var t=null;return new Me((function(n,r){-1==(t=_n((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw i.clearTimeout(t),e}))}function wn(e,t,n,r,i){this.reset(e,t,n,r,i)}function Sn(e){this.f=e,this.b=this.c=this.a=null}function En(e,t){this.name=e,this.value=t}w(fn,Lt),fn.prototype[Gt]=!0,fn.prototype.removeEventListener=function(e,t,n,r){on(this,e,t,n,r)},fn.prototype.ta=function(){if(fn.ib.ta.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Qt(n[r]);delete t.a[e],t.b--}}this.Ra=null},wn.prototype.a=null,wn.prototype.reset=function(e,t,n,r,i){r||b(),this.b=t,delete this.a},En.prototype.toString=function(){return this.name};var kn=new En("SEVERE",1e3),In=new En("CONFIG",700),Tn=new En("FINE",500);function Cn(e){return e.c?e.c:e.a?Cn(e.a):(x("Root logger has no level set."),null)}Sn.prototype.log=function(e,t,n){if(e.value>=Cn(this).value)for(h(t)&&(t=t()),e=new wn(e,String(t),this.f),n&&(e.a=n),n="log:"+e.b,(e=i.console)&&e.timeStamp&&e.timeStamp(n),(e=i.msWriteProfilerMark)&&e(n),n=this;n;)n=n.a};var An={},Pn=null;function Rn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){e instanceof Rn?(n=e.S(),r=e.P()):(n=X(e),r=Z(e));for(var i=0;i<n.length;i++)this.set(n[i],r[i])}}function Nn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Dn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Dn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Dn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function On(e,t){e&&e.log(Tn,t,void 0)}(e=Rn.prototype).P=function(){Nn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.S=function(){return Nn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return Dn(this.b,e)?this.b[e]:t},e.set=function(e,t){Dn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.S(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Ln=null,Mn=null;function xn(e,t){this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Fn(e,t,n){e.a=!0,e.c=n,e.f=!t,jn(e)}function qn(e){if(e.a){if(!e.u)throw new Wn;e.u=!1}}function Bn(e,t,n,r){e.g.push([t,n,r]),e.a&&jn(e)}function Un(e){return j(e.g,(function(e){return h(e[1])}))}function jn(e){if(e.h&&e.a&&Un(e)){var t=e.h,n=Kn[t];n&&(i.clearTimeout(n.a),delete Kn[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var o=e.g.shift(),a=o[0],s=o[1];if(o=o[2],a=e.f?s:a)try{var u=a.call(o||e.o,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(Se(t)||"function"==typeof i.Promise&&t instanceof i.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,Un(e)||(n=!0)}}e.c=t,r&&(u=v(e.m,e,!0),r=v(e.m,e,!1),t instanceof xn?(Bn(t,u,r),t.w=!0):t.then(u,r)),n&&(t=new Hn(t),Kn[t.a]=t,e.h=t.a)}function Wn(){S.call(this)}function Vn(){S.call(this)}function Hn(e){this.a=i.setTimeout(v(this.c,this),0),this.b=e}xn.prototype.cancel=function(e){if(this.a)this.c instanceof xn&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new Vn,qn(this),Fn(this,!1,e))}},xn.prototype.m=function(e,t){this.i=!1,Fn(this,e,t)},xn.prototype.A=function(e){qn(this),Fn(this,!0,e)},xn.prototype.then=function(e,t,n){var r,i,o=new Me((function(e,t){r=e,i=t}));return Bn(this,r,(function(e){e instanceof Vn?o.cancel():i(e)})),o.then(e,t,n)},we(xn),w(Wn,S),Wn.prototype.message="Deferred has already fired",Wn.prototype.name="AlreadyCalledError",w(Vn,S),Vn.prototype.message="Deferred was canceled",Vn.prototype.name="CanceledError",Hn.prototype.c=function(){throw delete Kn[this.a],this.b};var Gn,Kn={};function $n(e,t){this.b=-1,this.b=Qn,this.f=i.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=i.Int32Array?new Int32Array(64):Array(64),Gn||(Gn=i.Int32Array?new Int32Array(tr):tr),this.reset()}w($n,(function(){this.b=-1}));for(var Qn=64,zn=Qn-1,Yn=[],Zn=0;Zn<zn;Zn++)Yn[Zn]=0;var Xn=G(128,Yn);function Jn(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],d=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var h=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&d)+(0|Gn[t])|0)+(0|n[t])|0)|0,o=d,d=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+h|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+d|0,e.a[7]=e.a[7]+o|0}function er(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(o(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Jn(e),i=0);else{if(!d(t))throw Error("message must be string or array");for(;r<n;){var a=t[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[i++]=a,i==e.b&&(Jn(e),i=0)}}e.c=i,e.g+=n}$n.prototype.reset=function(){this.g=this.c=0,this.a=i.Int32Array?new Int32Array(this.h):K(this.h)};var tr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function nr(){$n.call(this,8,rr)}w(nr,$n);var rr=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ir(e){if(e.P&&"function"==typeof e.P)return e.P();if(o(e))return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}return Z(e)}function or(e){if(e.S&&"function"==typeof e.S)return e.S();if(!e.P||"function"!=typeof e.P){if(d(e)||o(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}return X(e)}}var ar=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sr(e,t){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,e instanceof sr){this.f=void 0!==t?t:e.f,ur(this,e.c),this.l=e.l,this.b=e.b,cr(this,e.i),this.g=e.g,t=e.a;var n=new kr;n.c=t.c,t.a&&(n.a=new Rn(t.a),n.b=t.b),lr(this,n),this.h=e.h}else e&&(n=String(e).match(ar))?(this.f=!!t,ur(this,n[1]||"",!0),this.l=mr(n[2]||""),this.b=mr(n[3]||"",!0),cr(this,n[4]),this.g=mr(n[5]||"",!0),lr(this,n[6]||"",!0),this.h=mr(n[7]||"")):(this.f=!!t,this.a=new kr(null,0,this.f))}function ur(e,t,n){e.c=n?mr(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function cr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function lr(e,t,n){t instanceof kr?(e.a=t,function(e,t){t&&!e.f&&(Ir(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ar(this,t),Rr(this,n,e))}),e)),e.f=t}(e.a,e.f)):(n||(t=gr(t,Sr)),e.a=new kr(t,0,e.f))}function dr(e,t,n){e.a.set(t,n)}function hr(e,t){return e.a.get(t)}function pr(e){return e instanceof sr?new sr(e):new sr(e,void 0)}function fr(e,t){var n=new sr(null,void 0);return ur(n,"https"),e&&(n.b=e),t&&(n.g=t),n}function mr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function gr(e,t,n){return o(e)?(e=encodeURI(e).replace(t,yr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}sr.prototype.toString=function(){var e=[],t=this.c;t&&e.push(gr(t,_r,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(gr(t,_r,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(gr(n,"/"==n.charAt(0)?wr:br,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.h)&&e.push("#",gr(n,Er)),e.join("")};var vr,_r=/[#\/\?@]/g,br=/[\#\?:]/g,wr=/[\#\?]/g,Sr=/[\#\?@]/g,Er=/#/g;function kr(e,t,n){this.b=this.a=null,this.c=e||null,this.f=!!n}function Ir(e){e.a||(e.a=new Rn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){Cr(e,decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Tr(e){var t=or(e);if(void 0===t)throw Error("Keys are undefined");var n=new kr(null,0,void 0);e=ir(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];l(o)?Rr(n,i,o):Cr(n,i,o)}return n}function Cr(e,t,n){Ir(e),e.c=null,t=Nr(e,t);var r=e.a.get(t);r||e.a.set(t,r=[]),r.push(n),e.b+=1}function Ar(e,t){Ir(e),t=Nr(e,t),Dn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Dn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Nn(e)))}function Pr(e,t){return Ir(e),t=Nr(e,t),Dn(e.a.b,t)}function Rr(e,t,n){Ar(e,t),0<n.length&&(e.c=null,e.a.set(Nr(e,t),K(n)),e.b+=n.length)}function Nr(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Dr(){}function Or(e){return e.c||(e.c=e.b())}function Lr(){}function Mr(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function xr(e){fn.call(this),this.headers=new Rn,this.w=e||null,this.b=!1,this.v=this.a=null,this.g=this.I=this.i="",this.c=this.G=this.h=this.A=!1,this.f=0,this.m=null,this.l=Fr,this.o=this.N=!1}(e=kr.prototype).clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Ir(this),this.a.forEach((function(n,r){B(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.S=function(){Ir(this);for(var e=this.a.P(),t=this.a.S(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.P=function(e){Ir(this);var t=[];if(o(e))Pr(this,e)&&(t=G(t,this.a.get(Nr(this,e))));else{e=this.a.P();for(var n=0;n<e.length;n++)t=G(t,e[n])}return t},e.set=function(e,t){return Ir(this),this.c=null,Pr(this,e=Nr(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return 0<(e=e?this.P(e):[]).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.S(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.P(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},Dr.prototype.c=null,w(Lr,Dr),Lr.prototype.a=function(){var e=Mr(this);return e?new ActiveXObject(e):new XMLHttpRequest},Lr.prototype.b=function(){var e={};return Mr(this)&&(e[0]=!0,e[1]=!0),e},vr=new Lr,w(xr,fn);var Fr="",qr=xr.prototype,Br=function e(t){var n;if(Pn||(Pn=new Sn(""),An[""]=Pn,Pn.c=In),!(n=An[t])){n=new Sn(t);var r=t.lastIndexOf("."),i=t.substr(r+1);(r=e(t.substr(0,r))).b||(r.b={}),r.b[i]=n,n.a=r,An[t]=n}return n}("goog.net.XhrIo");qr.J=Br;var Ur=/^https?$/i,jr=["POST","PUT"];function Wr(e){return"content-type"==e.toLowerCase()}function Vr(e,t){e.b=!1,e.a&&(e.c=!0,e.a.abort(),e.c=!1),e.g=t,Hr(e),Kr(e)}function Hr(e){e.A||(e.A=!0,mn(e,"complete"),mn(e,"error"))}function Gr(e){if(e.b&&void 0!==r)if(e.v[1]&&4==Qr(e)&&2==zr(e))On(e.J,Yr(e,"Local request error detected and ignored"));else if(e.h&&4==Qr(e))_n(e.Ab,0,e);else if(mn(e,"readystatechange"),4==Qr(e)){On(e.J,Yr(e,"Request complete")),e.b=!1;try{var t,n=zr(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break e;default:o=!1}if(!(t=o)){var a;if(a=0===n){var s=String(e.i).match(ar)[1]||null;if(!s&&i.self&&i.self.location){var u=i.self.location.protocol;s=u.substr(0,u.length-1)}a=!Ur.test(s?s.toLowerCase():"")}t=a}if(t)mn(e,"complete"),mn(e,"success");else{try{var c=2<Qr(e)?e.a.statusText:""}catch(t){On(e.J,"Can not get status: "+t.message),c=""}e.g=c+" ["+zr(e)+"]",Hr(e)}}finally{Kr(e)}}}function Kr(e,t){if(e.a){$r(e);var n=e.a,r=e.v[0]?s:null;e.a=null,e.v=null,t||mn(e,"ready");try{n.onreadystatechange=r}catch(t){(e=e.J)&&e.log(kn,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function $r(e){e.a&&e.o&&(e.a.ontimeout=null),"number"==typeof e.m&&(i.clearTimeout(e.m),e.m=null)}function Qr(e){return e.a?e.a.readyState:0}function zr(e){try{return 2<Qr(e)?e.a.status:-1}catch(e){return-1}}function Yr(e,t){return t+" ["+e.I+" "+e.i+" "+zr(e)+"]"}(e=xr.prototype).Ea=function(){void 0!==r&&this.a&&(this.g="Timed out after "+this.f+"ms, aborting",On(this.J,Yr(this,this.g)),mn(this,"timeout"),this.abort(8))},e.abort=function(){this.a&&this.b&&(On(this.J,Yr(this,"Aborting")),this.b=!1,this.c=!0,this.a.abort(),this.c=!1,mn(this,"complete"),mn(this,"abort"),Kr(this))},e.ta=function(){this.a&&(this.b&&(this.b=!1,this.c=!0,this.a.abort(),this.c=!1),Kr(this,!0)),xr.ib.ta.call(this)},e.Ab=function(){this.oa||(this.G||this.h||this.c?Gr(this):this.jc())},e.jc=function(){Gr(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.l){case Fr:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.J;return e&&e.log(kn,"Response type "+this.l+" is not supported on this browser",void 0),null}catch(e){return On(this.J,"Can not get response: "+e.message),null}};var Zr=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Xr(e){var t={},n=t.document||document,r=ct(e),i=document.createElement("SCRIPT"),o={Cb:i,Ea:void 0},a=new xn(Jr,o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){ei(i,!0);var e=new ri(ni,"Timeout reached for loading script "+r);qn(a),Fn(a,!1,e)}),u),o.Ea=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ei(i,t.Sc||!1,s),a.A(null))},i.onerror=function(){ei(i,!0,s);var e=new ri(ti,"Error while loading script "+r);qn(a),Fn(a,!1,e)},re(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),kt(i,o),i.src=ct(e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Jr(){if(this&&this.Cb){var e=this.Cb;e&&"SCRIPT"==e.tagName&&ei(e,!0,this.Ea)}}function ei(e,t,n){null!=n&&i.clearTimeout(n),e.onload=s,e.onerror=s,e.onreadystatechange=s,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var ti=0,ni=1;function ri(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),S.call(this,n),this.code=e}function ii(){}function oi(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.a.onload=v(this.Wb,this),this.a.onerror=v(this.xb,this),this.a.onprogress=v(this.Xb,this),this.a.ontimeout=v(this.Yb,this)}function ai(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function si(){var e=Ii();return ue&&!!ye&&11==ye||/Edge\/\d+/.test(e)}function ui(){return i.window&&i.window.location.href||""}function ci(e,t){t=t||i.window;var n="about:blank";e&&(n=mt(yt(e))),t.location.href=n}function li(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):l(e[n])?ee(e[n],t[n])||r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<li(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function di(e){return!!((e=(e||Ii()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function hi(e){e=e||i.window;try{e.close()}catch(e){}}function pi(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ii().toLowerCase(),r&&(t.target=r,O(n,"crios/")&&(t.target="_blank")),Si(Ii())==bi&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(r=t)||(r={}),e=window,t=n instanceof ft?n:yt(void 0!==n.href?n.href:String(n)),n=r.target||n.target,i=[],r)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+r[a]);break;case"target":case"noreferrer":break;default:i.push(a+"="+(r[a]?1:0))}var a=i.join(",");if((z("iPhone")&&!z("iPod")&&!z("iPad")||z("iPad")||z("iPod"))&&e.navigator&&e.navigator.standalone&&n&&"_self"!=n?(a=e.document.createElement("A"),t instanceof ft||t instanceof ft||(t=t.la?t.ja():String(t),gt.test(t)||(t="about:invalid#zClosurez"),t=_t(t)),a.href=mt(t),a.setAttribute("target",n),r.noreferrer&&a.setAttribute("rel","noreferrer"),(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,e,1),a.dispatchEvent(r),a={}):r.noreferrer?(a=e.open("",n,a),e=mt(t),a&&(le&&O(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,st("b/12014412, meta tag with sanitized URL"),e=St(e='<META HTTP-EQUIV="refresh" content="0; url='+I(e)+'">'),a.document.write(function(e){return e instanceof bt&&e.constructor===bt&&e.b===wt?e.a:(x("expected object of type SafeHtml, got '"+e+"' of type "+u(e)),"type_error:SafeHtml")}(e)),a.document.close())):a=e.open(mt(t),n,a),a)try{a.focus()}catch(e){}return a}w(ri,S),w(ii,Dr),ii.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new oi;throw Error("Unsupported browser")},ii.prototype.b=function(){return{}},(e=oi.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.Wb=function(){this.status=200,this.responseText=this.a.responseText,ai(this,4)},e.xb=function(){this.status=500,this.responseText="",ai(this,4)},e.Yb=function(){this.xb()},e.Xb=function(){this.status=200,ai(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};var fi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function mi(){var e=null;return new Me((function(t){"complete"==i.document.readyState?t():(e=function(){t()},rn(window,"load",e))})).s((function(t){throw on(window,"load",e),t}))}function gi(e){return e=e||Ii(),!("file:"!==Ri()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function yi(){var e=i.window;try{return!(!e||e==e.top)}catch(e){return!1}}function vi(){return t.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.INTERNAL.hasOwnProperty("node")?"Node":"Browser"}function _i(){var e=vi();return"ReactNative"===e||"Node"===e}var bi="Firefox",wi="Chrome";function Si(e){var t=e.toLowerCase();return O(t,"opera/")||O(t,"opr/")||O(t,"opios/")?"Opera":O(t,"iemobile")?"IEMobile":O(t,"msie")||O(t,"trident/")?"IE":O(t,"edge/")?"Edge":O(t,"firefox/")?bi:O(t,"silk/")?"Silk":O(t,"blackberry")?"Blackberry":O(t,"webos")?"Webos":!O(t,"safari/")||O(t,"chrome/")||O(t,"crios/")||O(t,"android")?!O(t,"chrome/")&&!O(t,"crios/")||O(t,"edge/")?O(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":wi:"Safari"}var Ei={Gc:"FirebaseCore-web",Ic:"FirebaseUI-web"};function ki(e,t){t=t||[];var n,r=[],i={};for(n in Ei)i[Ei[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),i="",(i="Browser"===(r=vi())?Si(Ii()):r)+"/JsCore/"+e+"/"+t.join(",")}function Ii(){return i.navigator&&i.navigator.userAgent||""}function Ti(e,t){e=e.split("."),t=t||i;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Ci(){try{var e=i.localStorage,t=Mi();if(e)return e.setItem(t,"1"),e.removeItem(t),!si()||!!i.indexedDB}catch(e){}return!1}function Ai(){return(Pi()||"chrome-extension:"===Ri()||gi())&&!_i()&&Ci()}function Pi(){return"http:"===Ri()||"https:"===Ri()}function Ri(){return i.location&&i.location.protocol||null}function Ni(e){return!di(e=e||Ii())&&Si(e)!=bi}function Di(e){return void 0===e?null:At(e)}function Oi(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Li(e){if(null!==e)return JSON.parse(e)}function Mi(e){return e||""+Math.floor(1e9*Math.random()).toString()}function xi(e){return"Safari"!=Si(e=e||Ii())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Fi(){var e=i.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function qi(){var e=i.navigator;return!e||"boolean"!=typeof e.onLine||!Pi()&&"chrome-extension:"!==Ri()&&void 0===e.connection||e.onLine}function Bi(e,t,n,r){if(e>t)throw Error("Short delay should be less than long delay!");this.c=e,this.b=t,e=n||Ii(),r=r||vi(),this.a=di(e)||"ReactNative"===r}function Ui(){var e=i.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function ji(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}Bi.prototype.get=function(){return this.a?this.b:this.c};var Wi,Vi={};try{var Hi={};Object.defineProperty(Hi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Hi,"abcd",{configurable:!0,enumerable:!0,value:2}),Wi=2==Hi.abcd}catch(ae){Wi=!1}function Gi(e,t,n){Wi?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Ki(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Gi(e,n,t[n])}function $i(e){var t={};return Ki(t,e),t}function Qi(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Gi(t,n,Qi(e[n]));return t}function zi(e){var t={},n=e[Yi],r=e[Zi];if(e=e[Xi],!n||!e)throw Error("Invalid provider user info!");t[eo]=r||null,t[Ji]=n,Gi(this,no,e),Gi(this,to,Qi(t))}var Yi="email",Zi="newEmail",Xi="requestType",Ji="email",eo="fromEmail",to="data",no="operation";function ro(e,t){this.code=oo+e,this.message=t||ao[e]||""}function io(e){var t=e&&e.code;return t?new ro(t.substring(oo.length),e.message):null}w(ro,Error),ro.prototype.B=function(){return{code:this.code,message:this.message}},ro.prototype.toJSON=function(){return this.B()};var oo="auth/",ao={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function so(e){var t=e[ho];if(void 0===t)throw new ro("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new ro("invalid-continue-uri");this.h=t,this.c=this.a=null,this.g=!1;var n=e[uo];if(n&&"object"==typeof n){t=n[mo];var r=n[po];if(n=n[fo],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new ro("argument-error",po+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new ro("argument-error",fo+" property must be a non empty string when specified.");this.c=n||null}else{if(void 0!==t)throw new ro("argument-error",mo+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new ro("missing-android-pkg-name")}}else if(void 0!==n)throw new ro("argument-error",uo+" property must be a non null object when specified.");if(this.b=null,(t=e[lo])&&"object"==typeof t){if("string"==typeof(t=t[go])&&t.length)this.b=t;else if(void 0!==t)throw new ro("argument-error",go+" property must be a non empty string when specified.")}else if(void 0!==t)throw new ro("argument-error",lo+" property must be a non null object when specified.");if(void 0!==(e=e[co])&&"boolean"!=typeof e)throw new ro("argument-error",co+" property must be a boolean when specified.");if((this.f=!!e)&&!this.b&&!this.a)throw new ro("argument-error",co+" property can't be true when no mobile application is provided.")}var uo="android",co="handleCodeInApp",lo="iOS",ho="url",po="installApp",fo="minimumVersion",mo="packageName",go="bundleId";function yo(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.f,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.c,t.androidInstallApp=e.g),t.iOSBundleId=e.b,t)null===t[n]&&delete t[n];return t}function vo(e){this.b=e.sub,b(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null}function _o(e){if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Mn[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Ln){Ln={},Mn={};for(var e=0;65>e;e++)Ln[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Mn[Ln[e]]=e,62<=e&&(Mn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t+=String.fromCharCode(e)})),t}(e));if(r.sub&&r.iss&&r.aud&&r.exp)return new vo(r)}catch(e){}return null}var bo="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),wo=["client_id","response_type","scope","redirect_uri","state"],So={Hc:{Ma:"locale",za:500,ya:600,Na:"facebook.com",$a:wo},Jc:{Ma:null,za:500,ya:620,Na:"github.com",$a:wo},Kc:{Ma:"hl",za:515,ya:680,Na:"google.com",$a:wo},Qc:{Ma:"lang",za:485,ya:705,Na:"twitter.com",$a:bo}};function Eo(e){for(var t in So)if(So[t].Na==e)return So[t];return null}function ko(e){var t={};t["facebook.com"]=Po,t["google.com"]=No,t["github.com"]=Ro,t["twitter.com"]=Do;var n=e&&e[To];try{if(n)return t[n]?new t[n](e):new Ao(e);if(void 0!==e[Io])return new Co(e)}catch(e){}return null}var Io="idToken",To="providerId";function Co(e){var t=e[To];if(!t&&e[Io]){var n=_o(e[Io]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Gi(this,"providerId",t),Gi(this,"isNewUser",n)}function Ao(e){Co.call(this,e),Gi(this,"profile",Qi((e=Li(e.rawUserInfo||"{}"))||{}))}function Po(e){if(Ao.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ro(e){if(Ao.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Gi(this,"username",this.profile&&this.profile.login||null)}function No(e){if(Ao.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Do(e){if(Ao.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Gi(this,"username",e.screenName||null)}function Oo(e,t){return e.then((function(e){if(e[ua]){var n=_o(e[ua]);if(!n||t!=n.b)throw new ro("user-mismatch");return e}throw new ro("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==oo+"user-not-found"?new ro("user-mismatch"):e}))}function Lo(e,t){if(t.idToken||t.accessToken)t.idToken&&Gi(this,"idToken",t.idToken),t.accessToken&&Gi(this,"accessToken",t.accessToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new ro("internal-error","failed to construct a credential");Gi(this,"accessToken",t.oauthToken),Gi(this,"secret",t.oauthTokenSecret)}Gi(this,"providerId",e)}function Mo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,{postBody:Tr(t).toString(),requestUri:"http://localhost"}}function xo(e,t){this.rc=t||[],Ki(this,{providerId:e,isOAuthProvider:!0}),this.rb={},this.Wa=(Eo(e)||{}).Ma||null,this.Ua=null}function Fo(e){xo.call(this,e,wo),this.a=[]}function qo(){Fo.call(this,"facebook.com")}function Bo(e){if(!e)throw new ro("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new qo).credential(null,t)}function Uo(){Fo.call(this,"github.com")}function jo(e){if(!e)throw new ro("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new Uo).credential(null,t)}function Wo(){Fo.call(this,"google.com"),this.sa("profile")}function Vo(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new Wo).credential(n,t)}function Ho(){xo.call(this,"twitter.com",bo)}function Go(e,t){var n=e;if(p(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new ro("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Lo("twitter.com",n)}function Ko(e,t){this.a=e,this.f=t,Gi(this,"providerId","password")}function $o(){Ki(this,{providerId:"password",isOAuthProvider:!1})}function Qo(e){if(!(e.Pa&&e.Oa||e.Da&&e.Y))throw new ro("internal-error");this.a=e,Gi(this,"providerId","phone")}function zo(e){return e.a.Da&&e.a.Y?{temporaryProof:e.a.Da,phoneNumber:e.a.Y}:{sessionInfo:e.a.Pa,code:e.a.Oa}}function Yo(e){try{this.a=e||t.auth()}catch(e){throw new ro("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ki(this,{providerId:"phone",isOAuthProvider:!1})}function Zo(e,t){if(!e)throw new ro("missing-verification-id");if(!t)throw new ro("missing-verification-code");return new Qo({Pa:e,Oa:t})}function Xo(e){if(e.temporaryProof&&e.phoneNumber)return new Qo({Da:e.temporaryProof,Y:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret;e=e&&e.oauthIdToken;try{switch(t){case"google.com":return Vo(e,n);case"facebook.com":return Bo(n);case"github.com":return jo(n);case"twitter.com":return Go(n,r);default:return new Fo(t).credential(e,n)}}catch(e){return null}}function Jo(e){if(!e.isOAuthProvider)throw new ro("invalid-oauth-provider")}function ea(e,t,n,r,i){if(this.b=e,this.c=t||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new ro("invalid-auth-event");if(this.f&&this.a)throw new ro("invalid-auth-event");if(this.f&&!this.g)throw new ro("invalid-auth-event")}function ta(e){return(e=e||{}).type?new ea(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&io(e.error)):null}function na(e){var t="unauthorized-domain",n=void 0,r=pr(e);e=r.b,"chrome-extension"==(r=r.c)?n=E("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=E("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",ro.call(this,t,n)}function ra(e,t,n){ro.call(this,e,n),(e=t||{}).sb&&Gi(this,"email",e.sb),e.Y&&Gi(this,"phoneNumber",e.Y),e.credential&&Gi(this,"credential",e.credential)}function ia(e){if(e.code){var t=e.code||"";0==t.indexOf(oo)&&(t=t.substring(oo.length));var n={credential:Xo(e)};if(e.email)n.sb=e.email;else{if(!e.phoneNumber)return new ro(t,e.message||void 0);n.Y=e.phoneNumber}return new ra(t,n,e.message)}return null}function oa(e){this.f=e}function aa(e,n,r){var o="Node"==vi();if(!(o=i.XMLHttpRequest||o&&t.INTERNAL.node&&t.INTERNAL.node.XMLHttpRequest))throw new ro("internal-error","The XMLHttpRequest compatibility library was not found.");this.b=e,e=n||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=e.secureTokenTimeout||ca,this.c=te(e.secureTokenHeaders||la),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||da,this.a=te(e.firebaseHeaders||ha),r&&(this.a["X-Client-Version"]=r,this.c["X-Client-Version"]=r),this.f=new ii,this.o=new oa(o)}w(Ao,Co),w(Po,Ao),w(Ro,Ao),w(No,Ao),w(Do,Ao),Lo.prototype.wa=function(e){return Ia(e,Mo(this))},Lo.prototype.b=function(e,t){var n=Mo(this);return n.idToken=t,Ta(e,n)},Lo.prototype.c=function(e,t){return Oo(Ca(e,Mo(this)),t)},Lo.prototype.B=function(){var e={providerId:this.providerId};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),e},xo.prototype.Ba=function(e){return this.rb=te(e),this},w(Fo,xo),Fo.prototype.sa=function(e){return W(this.a,e)||this.a.push(e),this},Fo.prototype.wb=function(){return K(this.a)},Fo.prototype.credential=function(e,t){if(!e&&!t)throw new ro("argument-error","credential failed: must provide the ID token and/or the access token.");return new Lo(this.providerId,{idToken:e||null,accessToken:t||null})},w(qo,Fo),Gi(qo,"PROVIDER_ID","facebook.com"),w(Uo,Fo),Gi(Uo,"PROVIDER_ID","github.com"),w(Wo,Fo),Gi(Wo,"PROVIDER_ID","google.com"),w(Ho,xo),Gi(Ho,"PROVIDER_ID","twitter.com"),Ko.prototype.wa=function(e){return Ja(e,za,{email:this.a,password:this.f})},Ko.prototype.b=function(e,t){return Ja(e,Va,{idToken:t,email:this.a,password:this.f})},Ko.prototype.c=function(e,t){return Oo(this.wa(e),t)},Ko.prototype.B=function(){return{email:this.a,password:this.f}},Ki($o,{PROVIDER_ID:"password"}),Qo.prototype.wa=function(e){return e.Qa(zo(this))},Qo.prototype.b=function(e,t){var n=zo(this);return n.idToken=t,Ja(e,Za,n)},Qo.prototype.c=function(e,t){var n=zo(this);return n.operation="REAUTH",Oo(e=Ja(e,Xa,n),t)},Qo.prototype.B=function(){var e={providerId:"phone"};return this.a.Pa&&(e.verificationId=this.a.Pa),this.a.Oa&&(e.verificationCode=this.a.Oa),this.a.Da&&(e.temporaryProof=this.a.Da),this.a.Y&&(e.phoneNumber=this.a.Y),e},Yo.prototype.Qa=function(e,t){var n=this.a.c;return We(t.verify()).then((function(r){if(!o(r))throw new ro("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===t.type)return function(e,t){return Ja(e,ja,t)}(n,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));throw new ro("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},Ki(Yo,{PROVIDER_ID:"phone"}),ea.prototype.B=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.B()}},w(na,ro),w(ra,ro),ra.prototype.B=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.B();return t&&re(e,t),e},ra.prototype.toJSON=function(){return this.B()},w(oa,Dr),oa.prototype.a=function(){return new this.f},oa.prototype.b=function(){return{}};var sa,ua="idToken",ca=new Bi(3e4,6e4),la={"Content-Type":"application/x-www-form-urlencoded"},da=new Bi(3e4,6e4),ha={"Content-Type":"application/json"};function pa(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function fa(e,t){t?(e.a["X-Client-Version"]=t,e.c["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.c["X-Client-Version"])}function ma(e,t,n,r,o,a,s){qi()?(function(){var e=Ii();return!((e=Si(e)!=wi?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||ue&&ye&&!(9<ye))}()?e=v(e.m,e):(sa||(sa=new Me((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(i[ya]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Bn(e,null,t,void 0)}(Xr(lt(ga,{onload:ya})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)}))),e=v(e.u,e)),e(t,n,r,o,a,s)):n&&n(null)}aa.prototype.m=function(e,t,n,r,a,s){var u="Node"==vi(),c=_i()?u?new xr(this.o):new xr:new xr(this.f);if(s){c.f=Math.max(0,s);var l=setTimeout((function(){mn(c,"timeout")}),s)}gn(c,"complete",(function(){l&&clearTimeout(l);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return On(e.J,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)})),yn(c,"ready",(function(){l&&clearTimeout(l),Ft(this)})),yn(c,"timeout",(function(){l&&clearTimeout(l),Ft(this),t&&t(null)})),function(e,t,n,r,a){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.i+"; newUri="+t);n=n?n.toUpperCase():"GET",e.i=t,e.g="",e.I=n,e.A=!1,e.b=!0,e.a=e.w?e.w.a():vr.a(),e.v=e.w?Or(e.w):Or(vr),e.a.onreadystatechange=v(e.Ab,e);try{On(e.J,Yr(e,"Opening Xhr")),e.G=!0,e.a.open(n,String(t),!0),e.G=!1}catch(t){return On(e.J,Yr(e,"Error opening Xhr: "+t.message)),void Vr(e,t)}t=r||"";var s=new Rn(e.headers);a&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||o(e))B(e,t,void 0);else for(var n=or(e),r=ir(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(a,(function(e,t){s.set(t,e)})),a=function(e){e:{for(var t=Wr,n=e.length,r=o(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:o(e)?e.charAt(t):e[t]}(s.S()),r=i.FormData&&t instanceof i.FormData,!W(jr,n)||a||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.l&&(e.a.responseType=e.l),"withCredentials"in e.a&&e.a.withCredentials!==e.N&&(e.a.withCredentials=e.N);try{$r(e),0<e.f&&(e.o=function(e){return ue&&_e(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),On(e.J,Yr(e,"Will abort after "+e.f+"ms if incomplete, xhr2 "+e.o)),e.o?(e.a.timeout=e.f,e.a.ontimeout=v(e.Ea,e)):e.m=_n(e.Ea,e.f,e)),On(e.J,Yr(e,"Sending request")),e.h=!0,e.a.send(t),e.h=!1}catch(t){On(e.J,Yr(e,"Send error: "+t.message)),Vr(e,t)}}(c,e,n,r,a)};var ga=st("https://apis.google.com/js/client.js?onload=%{onload}"),ya="__fcb"+Math.floor(1e6*Math.random()).toString();function va(e){if(!Zr.test(e.email))throw new ro("invalid-email")}function _a(e){"email"in e&&va(e)}function ba(e){if(!e[ua])throw new ro("internal-error")}function wa(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new ro("internal-error")}else{if(!e.sessionInfo)throw new ro("missing-verification-id");if(!e.code)throw new ro("missing-verification-code")}}aa.prototype.u=function(e,t,n,r,i){var o=this;sa.then((function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},aa.prototype.gb=function(){return Ja(this,Ha,{})},aa.prototype.kb=function(e,t){return Ja(this,Wa,{idToken:e,email:t})},aa.prototype.lb=function(e,t){return Ja(this,Va,{idToken:e,password:t})};var Sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ea(e){if(!e.requestUri||!e.sessionId&&!e.postBody)throw new ro("internal-error")}function ka(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=ia(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=ia(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=ia(e)):e.errorMessage&&(t=es(e.errorMessage)),t)throw t;if(!e[ua])throw new ro("internal-error")}function Ia(e,t){return t.returnIdpCredential=!0,Ja(e,Ga,t)}function Ta(e,t){return t.returnIdpCredential=!0,Ja(e,$a,t)}function Ca(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Ja(e,Ka,t)}function Aa(e){if(!e.oobCode)throw new ro("invalid-action-code")}(e=aa.prototype).mb=function(e,t){var n={idToken:e},r=[];return Y(Sa,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ja(this,Wa,n)},e.cb=function(e,t){return re(e={requestType:"PASSWORD_RESET",email:e},t),Ja(this,Fa,e)},e.bb=function(e,t){return re(e={requestType:"VERIFY_EMAIL",idToken:e},t),Ja(this,xa,e)},e.Qa=function(e){return Ja(this,Ya,e)},e.Ta=function(e,t){return Ja(this,Ua,{oobCode:e,newPassword:t})},e.Ia=function(e){return Ja(this,Ra,{oobCode:e})},e.Sa=function(e){return Ja(this,Pa,{oobCode:e})};var Pa={endpoint:"setAccountInfo",D:Aa,ga:"email"},Ra={endpoint:"resetPassword",D:Aa,O:function(e){if(!e.email||!e.requestType)throw new ro("internal-error")}},Na={endpoint:"signupNewUser",D:function(e){if(va(e),!e.password)throw new ro("weak-password")},O:ba,T:!0},Da={endpoint:"createAuthUri"},Oa={endpoint:"deleteAccount",ea:["idToken"]},La={endpoint:"setAccountInfo",ea:["idToken","deleteProvider"],D:function(e){if(!l(e.deleteProvider))throw new ro("internal-error")}},Ma={endpoint:"getAccountInfo"},xa={endpoint:"getOobConfirmationCode",ea:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new ro("internal-error")},ga:"email"},Fa={endpoint:"getOobConfirmationCode",ea:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new ro("internal-error");va(e)},ga:"email"},qa={nb:!0,endpoint:"getProjectConfig",zb:"GET"},Ba={nb:!0,endpoint:"getRecaptchaParam",zb:"GET",O:function(e){if(!e.recaptchaSiteKey)throw new ro("internal-error")}},Ua={endpoint:"resetPassword",D:Aa,ga:"email"},ja={endpoint:"sendVerificationCode",ea:["phoneNumber","recaptchaToken"],ga:"sessionInfo"},Wa={endpoint:"setAccountInfo",ea:["idToken"],D:_a,T:!0},Va={endpoint:"setAccountInfo",ea:["idToken"],D:function(e){if(_a(e),!e.password)throw new ro("weak-password")},O:ba,T:!0},Ha={endpoint:"signupNewUser",O:ba,T:!0},Ga={endpoint:"verifyAssertion",D:Ea,O:ka,T:!0},Ka={endpoint:"verifyAssertion",D:Ea,O:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new ro("user-not-found");if(e.errorMessage)throw es(e.errorMessage);if(!e[ua])throw new ro("internal-error")},T:!0},$a={endpoint:"verifyAssertion",D:function(e){if(Ea(e),!e.idToken)throw new ro("internal-error")},O:ka,T:!0},Qa={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new ro("invalid-custom-token")},O:ba,T:!0},za={endpoint:"verifyPassword",D:function(e){if(va(e),!e.password)throw new ro("wrong-password")},O:ba,T:!0},Ya={endpoint:"verifyPhoneNumber",D:wa,O:ba},Za={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new ro("internal-error");wa(e)},O:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",ia(e);ba(e)}},Xa={Pb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:wa,O:ba};function Ja(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.ea))return Ve(new ro("internal-error"));var r,i=t.zb||"POST";return We(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),function(e,t,n,r,i,o){var a=pr(e.g+t);dr(a,"key",e.b),o&&dr(a,"cb",b().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&dr(a,u,r[u]);return new Me((function(t,o){ma(e,a.toString(),(function(e){e?e.error?o(ts(e,i||{})):t(e):o(new ro("network-request-failed"))}),n,s?void 0:At(Oi(r)),e.a,e.h.get())}))}(e,t.endpoint,i,n,t.Pb,t.nb||!1)})).then((function(e){return r=e})).then(t.O).then((function(){if(!t.ga)return r;if(!(t.ga in r))throw new ro("internal-error");return r[t.ga]}))}function es(e){return ts({error:{errors:[{message:e}],code:400,message:e}})}function ts(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new ro(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",re(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new ro(r[i],t);return!t&&e&&(t=Di(e)),new ro("internal-error",t)}var ns,rs={Mc:{Va:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://securetoken.googleapis.com/v1/token",id:"p"},Oc:{Va:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Pc:{Va:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ab:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function is(e){for(var t in rs)if(rs[t].id===e)return{firebaseEndpoint:(e=rs[t]).Va,secureTokenEndpoint:e.ab};return null}function os(e){this.b=e,this.a=null,this.Ya=function(e){return(ls||(ls=new Me((function(e,t){if(qi()){var n=function(){Fi(),Ti("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Fi(),t(Error("Network Error"))},timeout:us.get()})};if(Ti("gapi.iframes.Iframe"))e();else if(Ti("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){Ti("gapi.load")?n():t(Error("Network Error"))},We(Xr(r=lt(ss,{onload:r}))).s((function(){t(Error("Network Error"))}))}}else t(Error("Network Error"))})).s((function(e){throw ls=null,e})))).then((function(){return new Me((function(t,n){Ti("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cs.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}ns=is("__EID__")?"__EID__":void 0;var as,ss=st("https://apis.google.com/js/api.js?onload=%{onload}"),us=new Bi(3e4,6e4),cs=new Bi(5e3,15e3),ls=null;function ds(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=fr(this.i,"/__/auth/iframe"),dr(this.a,"apiKey",this.g),dr(this.a,"appName",this.h),this.b=null,this.c=[]}function hs(e,t,n,r,i){this.m=e,this.u=t,this.c=n,this.l=r,this.i=this.g=this.h=null,this.a=i,this.f=null}function ps(e){try{return t.app(e).auth().Ka()}catch(e){return[]}}function fs(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function ms(e){var t=ui();return function(e){return Ja(e,qa,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=pr(t),r=n.c;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=pr(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:fi.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new na(ui())}))}function gs(e){return e.l||(e.l=mi().then((function(){if(!e.o){var t=e.c,n=e.h,r=ps(e.b),i=new ds(e.u,e.f,e.b);i.f=t,i.b=n,i.c=K(r||[]),e.o=i.toString()}e.i=new os(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.Ya.then((function(){e.a.register("authEvent",t,Ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=ta(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",We(n)}return n.status="ERROR",We(n)}))}(e)}))),e.l}function ys(e){return e.m||(e.v=e.c?ki(e.c,ps(e.b)):null,e.m=new aa(e.f,is(e.h),e.v)),e.m}function vs(e,t,n,r,i,o,a,s,u,c){return(e=new hs(e,t,n,r,i)).h=o,e.g=a,e.i=s,e.b=te(u||null),e.f=c,e.toString()}function _s(e){if(this.a=e||t.INTERNAL.reactNative&&t.INTERNAL.reactNative.AsyncStorage,!this.a)throw new ro("internal-error","The React Native compatibility library was not found.")}function bs(){this.a={}}function ws(e,t,n,r,o,a){try{var s=!!i.indexedDB}catch(e){s=!1}if(!s)throw new ro("web-storage-unsupported");this.u=e,this.h=t,this.g=n,this.l=r,this.m=o,this.f={},this.c=[],this.a=0,this.o=a||i.indexedDB}function Ss(e){return e.i||(e.i=function(e){return new Me((function(t,n){var r=e.o.open(e.u,e.m);r.onerror=function(e){n(Error(e.target.errorCode))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore(e.h,{keyPath:e.g})}catch(e){n(e)}},r.onsuccess=function(e){t(e.target.result)}}))}(e)),e.i}function Es(e,t){return t.objectStore(e.h)}function ks(e,t,n){return t.transaction([e.h],n?"readwrite":"readonly")}function Is(e){return new Me((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(Error(e.target.errorCode))}}))}function Ts(){if(!function(){var e="Node"==vi();if(!(e=Cs()||e&&t.INTERNAL.node&&t.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==vi())throw new ro("internal-error","The LocalStorage compatibility library was not found.");throw new ro("web-storage-unsupported")}this.a=Cs()||t.INTERNAL.node.localStorage}function Cs(){try{var e=i.localStorage,t=Mi();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function As(){}function Ps(){if(!function(){var e="Node"==vi();if(!(e=Rs()||e&&t.INTERNAL.node&&t.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==vi())throw new ro("internal-error","The SessionStorage compatibility library was not found.");throw new ro("web-storage-unsupported")}this.a=Rs()||t.INTERNAL.node.sessionStorage}function Rs(){try{var e=i.sessionStorage,t=Mi();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Ns(){var e={};e.Browser=Ls,e.Node=Ms,e.ReactNative=xs,this.a=e[vi()]}ds.prototype.toString=function(){return this.f?dr(this.a,"v",this.f):Ar(this.a.a,"v"),this.b?dr(this.a,"eid",this.b):Ar(this.a.a,"eid"),this.c.length?dr(this.a,"fw",this.c.join(",")):Ar(this.a.a,"fw"),this.a.toString()},hs.prototype.toString=function(){var e=fr(this.m,"/__/auth/handler");if(dr(e,"apiKey",this.u),dr(e,"appName",this.c),dr(e,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=t.app(this.c).auth().$()}catch(e){r=null}for(var i in n.Ua=r,dr(e,"providerId",this.a.providerId),r=Oi((n=this.a).rb))r[i]=r[i].toString();i=n.rc,r=te(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.Wa&&n.Ua&&!r[n.Wa]&&(r[n.Wa]=n.Ua),J(r)||dr(e,"customParameters",Di(r))}if("function"==typeof this.a.wb&&(n=this.a.wb()).length&&dr(e,"scopes",n.join(",")),this.h?dr(e,"redirectUrl",this.h):Ar(e.a,"redirectUrl"),this.g?dr(e,"eventId",this.g):Ar(e.a,"eventId"),this.i?dr(e,"v",this.i):Ar(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!hr(e,s)&&dr(e,s,this.b[s]);return this.f?dr(e,"eid",this.f):Ar(e.a,"eid"),(s=ps(this.c)).length&&dr(e,"fw",s.join(",")),e.toString()},(e=fs.prototype).Ca=function(e,t,n){var r=new ro("popup-closed-by-user"),i=new ro("web-storage-unsupported"),o=this,a=!1;return this.ba().then((function(){(function(e){var t={type:"webStorageSupport"};return gs(e).then((function(){return function(e,t){return e.Ya.then((function(){return new Me((function(n){e.a.send(t.type,t,n,Ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&hi(e),t(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(e){return new Me((function(t){return function n(){bn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return bn(n).then((function(){t(r)}))}))},e.Db=function(){var e=Ii();return!Ni(e)&&!xi(e)},e.yb=function(){return!1},e.vb=function(e,t,n,r,i,o,a){if(!e)return Ve(new ro("popup-blocked"));if(a&&!Ni())return this.ba().s((function(t){hi(e),i(t)})),r(),We();this.a||(this.a=ms(ys(this)));var s=this;return this.a.then((function(){var t=s.ba().s((function(t){throw hi(e),i(t),t}));return r(),t})).then((function(){Jo(n),a||ci(vs(s.u,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e}))},e.Aa=function(e,t,n){this.a||(this.a=ms(ys(this)));var r=this;return this.a.then((function(){Jo(t),ci(vs(r.u,r.f,r.b,e,t,ui(),n,r.c,void 0,r.h))})).s((function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e}))},e.ba=function(){var e=this;return gs(this).then((function(){return e.i.Ya})).s((function(){throw e.a=null,new ro("network-request-failed")}))},e.Hb=function(){return!0},e.ua=function(e){this.g.push(e)},e.Ja=function(e){H(this.g,(function(t){return t==e}))},(e=_s.prototype).get=function(e){return We(this.a.getItem(e)).then((function(e){return e&&Li(e)}))},e.set=function(e,t){return We(this.a.setItem(e,Di(t)))},e.X=function(e){return We(this.a.removeItem(e))},e.ia=function(){},e.da=function(){},(e=bs.prototype).get=function(e){return We(this.a[e])},e.set=function(e,t){return this.a[e]=t,We()},e.X=function(e){return delete this.a[e],We()},e.ia=function(){},e.da=function(){},(e=ws.prototype).set=function(e,t){var n,r=!1,i=this;return Ge(Ss(this).then((function(t){return Is((t=Es(i,ks(i,n=t,!0))).get(e))})).then((function(o){var a=Es(i,ks(i,n,!0));return o?(o.value=t,Is(a.put(o))):(i.a++,r=!0,(o={})[i.g]=e,o[i.l]=t,Is(a.add(o)))})).then((function(){i.f[e]=t})),(function(){r&&i.a--}))},e.get=function(e){var t=this;return Ss(this).then((function(n){return Is(Es(t,ks(t,n,!1)).get(e))})).then((function(e){return e&&e.value}))},e.X=function(e){var t=!1,n=this;return Ge(Ss(this).then((function(r){return t=!0,n.a++,Is(Es(n,ks(n,r,!0)).delete(e))})).then((function(){delete n.f[e]})),(function(){t&&n.a--}))},e.zc=function(){var e=this;return Ss(this).then((function(t){var n=Es(e,ks(e,t,!1));return n.getAll?Is(n.getAll()):new Me((function(e,t){var r=[],i=n.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){t(Error(e.target.errorCode))}}))})).then((function(t){var n={},r=[];if(0==e.a){for(r=0;r<t.length;r++)n[t[r][e.g]]=t[r][e.l];r=li(e.f,n),e.f=n}return r}))},e.ia=function(e){0==this.c.length&&function(e){e.b&&e.b.cancel("STOP_EVENT"),function t(){return e.b=bn(800).then(v(e.zc,e)).then((function(t){0<t.length&&B(e.c,(function(e){e(t)}))})).then(t).s((function(e){"STOP_EVENT"!=e.message&&t()})),e.b}()}(this),this.c.push(e)},e.da=function(e){H(this.c,(function(t){return t==e})),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")},(e=Ts.prototype).get=function(e){var t=this;return We().then((function(){return Li(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return We().then((function(){var r=Di(t);null===r?n.X(e):n.a.setItem(e,r)}))},e.X=function(e){var t=this;return We().then((function(){t.a.removeItem(e)}))},e.ia=function(e){i.window&&tn(i.window,"storage",e)},e.da=function(e){i.window&&on(i.window,"storage",e)},(e=As.prototype).get=function(){return We(null)},e.set=function(){return We()},e.X=function(){return We()},e.ia=function(){},e.da=function(){},(e=Ps.prototype).get=function(e){var t=this;return We().then((function(){return Li(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return We().then((function(){var r=Di(t);null===r?n.X(e):n.a.setItem(e,r)}))},e.X=function(e){var t=this;return We().then((function(){t.a.removeItem(e)}))},e.ia=function(){},e.da=function(){};var Ds,Os,Ls={C:Ts,jb:Ps},Ms={C:Ts,jb:Ps},xs={C:_s,jb:As},Fs={Lc:"local",NONE:"none",Nc:"session"};function qs(e,t,n,r,i){this.i=e,this.g=t,this.A=n,this.u=r,this.v=i,this.a={},Ds||(Ds=new Ns),e=Ds;try{if(si()){as||(as=new ws("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1));var o=as}else o=new e.a.C;this.l=o}catch(e){this.l=new bs,this.u=!0}try{this.o=new e.a.jb}catch(e){this.o=new bs}this.w=new bs,this.h=v(this.m,this),this.b={}}function Bs(){return Os||(Os=new qs("firebase",":",!(xi(Ii())||!yi()),Ni(),Ci())),Os}function Us(e,t){switch(t){case"session":return e.o;case"none":return e.w;default:return e.l}}function js(e,t,n){return e.i+e.g+t.name+(n?e.g+n:"")}function Ws(e,t,n){return n=js(e,t,n),"local"==t.C&&(e.b[n]=null),Us(e,t.C).X(n)}function Vs(e,t,n,r){t=js(e,t,n),e.v&&(e.b[t]=i.localStorage.getItem(t)),J(e.a)&&(Us(e,"local").ia(e.h),e.u||si()||!e.v||function(e){Hs(e),e.f=setInterval((function(){for(var t in e.a){var n=i.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Vt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.m(n))}}),1e3)}(e)),e.a[t]||(e.a[t]=[]),e.a[t].push(r)}function Hs(e){e.f&&(clearInterval(e.f),e.f=null)}function Gs(e){this.a=e,this.b=Bs()}qs.prototype.get=function(e,t){return Us(this,e.C).get(js(this,e,t))},qs.prototype.set=function(e,t,n){var r=js(this,e,n),i=this,o=Us(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},qs.prototype.m=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var o=i.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.c(n))}else if(0==t.indexOf(this.i+this.g)&&this.a[t]){if(void 0!==e.a.a?Us(this,"local").da(this.h):Hs(this),this.A)if(n=i.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?i.localStorage.setItem(t,r):i.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var a=this;n=function(){void 0===e.a.a&&a.b[t]===i.localStorage.getItem(t)||(a.b[t]=i.localStorage.getItem(t),a.c(t))},ue&&ye&&10==ye&&i.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else B(e,v(this.c,this))},qs.prototype.c=function(e){this.a[e]&&B(this.a[e],(function(e){e()}))};var Ks={name:"authEvent",C:"local"};function $s(){this.a=Bs()}function Qs(e,t,n,r,i,o,a){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=a||null,this.h=t+":"+n,this.A=new $s,this.g=new Gs(this.h),this.f=null,this.b=[],this.v=i||500,this.w=o||2e3,this.a=this.c=null}function zs(e){return new ro("invalid-cordova-configuration",e)}function Ys(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Zs(e){return e.f||(e.f=e.ba().then((function(){return new Me((function(t){e.ua((function n(r){return t(r),e.Ja(n),!1})),function(e){function t(t){o=!0,a&&a.cancel(),Xs(e).then((function(n){var i=r;if(n&&t&&t.url){i=null;var o=t.url,a=pr(o),s=hr(a,"link"),u=hr(pr(s),"link");a=hr(a,"deep_link_id"),-1!=(o=hr(pr(a),"link")||a||u||s||o).indexOf("/__/auth/callback")&&(i=(i="object"==typeof(i=Li(hr(i=pr(o),"firebaseError")||null))?io(i):null)?new ea(n.b,n.c,null,null,i):new ea(n.b,n.c,o,n.g)),i=i||r}Ys(e,i)}))}var n=Ti("universalLinks.subscribe",i);if("function"!=typeof n)throw new ro("invalid-cordova-configuration");var r=new ea("unknown",null,null,null,new ro("no-auth-event")),o=!1,a=bn(e.v).then((function(){return Xs(e).then((function(){o||Ys(e,r)}))})),s=i.handleOpenURL;i.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Ti("BuildInfo.packageName",i).toLowerCase()+"://")&&t({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}},n(null,t)}(e)}))}))),e.f}function Xs(e){var t=null;return function(e){return e.b.get(Ks,e.a).then((function(e){return ta(e)}))}(e.g).then((function(n){return t=n,Ws((n=e.g).b,Ks,n.a)})).then((function(){return t}))}function Js(e){this.a=e,this.b=Bs()}(e=Qs.prototype).ba=function(){return this.xa?this.xa:this.xa=(gi(void 0)?mi().then((function(){return new Me((function(e,t){var n=i.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Ve(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ti("universalLinks.subscribe",i))throw zs("cordova-universal-links-plugin is not installed");if(void 0===Ti("BuildInfo.packageName",i))throw zs("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ti("cordova.plugins.browsertab.openUrl",i))throw zs("cordova-plugin-browsertab is not installed");if("function"!=typeof Ti("cordova.InAppBrowser.open",i))throw zs("cordova-plugin-inappbrowser is not installed")}),(function(){throw new ro("cordova-not-ready")}))},e.Ca=function(e,t){return t(new ro("operation-not-supported-in-this-environment")),We()},e.vb=function(){return Ve(new ro("operation-not-supported-in-this-environment"))},e.Hb=function(){return!1},e.Db=function(){return!0},e.yb=function(){return!0},e.Aa=function(e,t,n){if(this.c)return Ve(new ro("redirect-operation-pending"));var r=this,o=i.document,a=null,s=null,u=null,c=null;return this.c=Ge(We().then((function(){return Jo(t),Zs(r)})).then((function(){return function(e,t,n,r){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new ea(t,r,null,o,new ro("no-auth-event")),s=Ti("BuildInfo.packageName",i);if("string"!=typeof s)throw new ro("invalid-cordova-configuration");var u=Ti("BuildInfo.displayName",i),c={};if(Ii().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Ii().toLowerCase().match(/android/))return Ve(new ro("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=function(e){var t=new nr;er(t,e),e=[];var n=8*t.g;56>t.c?er(t,Xn,56-t.c):er(t,Xn,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Jn(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return U(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(o),c.sessionId=o;var l=vs(e.u,e.i,e.l,t,n,null,r,e.m,c,e.o);return e.ba().then((function(){var t=e.h;return e.A.a.set(Ks,a.B(),t)})).then((function(){var t=Ti("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof t)throw new ro("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=Ti("cordova.plugins.browsertab.openUrl",i)))throw new ro("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Ti("cordova.InAppBrowser.open",i)))throw new ro("invalid-cordova-configuration");t=!(!(t=Ii()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),e.a=n(l,t?"_blank":"_system","location=yes")}}))}))}(r,e,t,n)})).then((function(){return new Me((function(e,t){s=function(){var t=Ti("cordova.plugins.browsertab.close",i);return e(),"function"==typeof t&&t(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.ua(s),u=function(){a||(a=bn(r.w).then((function(){t(new ro("redirect-cancelled-by-user"))})))},c=function(){Ui()&&u()},o.addEventListener("resume",u,!1),Ii().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).s((function(e){return Xs(r).then((function(){throw e}))}))})),(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&r.Ja(s),r.c=null}))},e.ua=function(e){this.b.push(e),Zs(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ea("unknown",null,null,null,new ro("no-auth-event")),e(t))}))},e.Ja=function(e){H(this.b,(function(t){return t==e}))};var eu={name:"pendingRedirect",C:"session"};function tu(e){return Ws(e.b,eu,e.a)}function nu(e,t,n){this.v=e,this.l=t,this.u=n,this.h=[],this.f=!1,this.i=v(this.m,this),this.c=new hu,this.o=new gu,this.g=new Js(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.o,this.b.linkViaPopup=this.o,this.b.reauthViaPopup=this.o,this.a=ru(this.v,this.l,this.u,ns)}function ru(e,n,r,i){var o=t.SDK_VERSION||null;return gi()?new Qs(e,n,r,o,void 0,void 0,i):new fs(e,n,r,o,i)}function iu(e){e.f||(e.f=!0,e.a.ua(e.i));var t=e.a;return e.a.ba().s((function(n){throw e.a==t&&e.reset(),n}))}function ou(e){e.a.Db()&&iu(e).s((function(t){var n=new ea("unknown",null,null,null,new ro("operation-not-supported-in-this-environment"));cu(t)&&e.m(n)})),e.a.yb()||pu(e.c)}nu.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=ru(this.v,this.l,this.u)},nu.prototype.subscribe=function(e){if(W(this.h,e)||this.h.push(e),!this.f){var t=this;(function(e){return e.b.get(eu,e.a).then((function(e){return"pending"==e}))})(this.g).then((function(e){e?tu(t.g).then((function(){iu(t).s((function(e){var n=new ea("unknown",null,null,null,new ro("operation-not-supported-in-this-environment"));cu(e)&&t.m(n)}))})):ou(t)})).s((function(){ou(t)}))}},nu.prototype.unsubscribe=function(e){H(this.h,(function(t){return t==e}))},nu.prototype.m=function(e){if(!e)throw new ro("invalid-auth-event");for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.ob(e.b,e.c)){(t=this.b[e.b])&&t.h(e,r),t=!0;break}}return pu(this.c),t};var au=new Bi(2e3,1e4),su=new Bi(3e4,6e4);function uu(e,t,n,r,i,o){return e.a.vb(t,n,r,(function(){e.f||(e.f=!0,e.a.ua(e.i))}),(function(){e.reset()}),i,o)}function cu(e){return!(!e||"auth/cordova-not-ready"!=e.code)}nu.prototype.aa=function(){return this.c.aa()},nu.prototype.Aa=function(e,t,n){var r,i=this;return function(e){return e.b.set(eu,"pending",e.a)}(this.g).then((function(){return i.a.Aa(e,t,n).s((function(e){if(cu(e))throw new ro("operation-not-supported-in-this-environment");return r=e,tu(i.g).then((function(){throw r}))})).then((function(){return i.a.Hb()?new Me((function(){})):tu(i.g).then((function(){return i.aa()})).then((function(){})).s((function(){}))}))}))},nu.prototype.Ca=function(e,t,n,r){return this.a.Ca(n,(function(n){e.fa(t,null,n,r)}),au.get())};var lu={};function du(e,t,n){var r=t+":"+n;return lu[r]||(lu[r]=new nu(e,t,n)),lu[r]}function hu(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function pu(e){e.g||(e.g=!0,mu(e,!1,null,null))}function fu(e,t){if(e.b=function(){return We(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function mu(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Ve(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):fu(e,n):fu(e,{user:null}),e.f=[],e.c=[]}function gu(){}function yu(e,t){this.a=t,Gi(this,"verificationId",e)}function vu(e,t,n,r){return new Yo(e).Qa(t,n).then((function(e){return new yu(e,r)}))}function _u(e,t,n,r,i,o){if(this.h=e,this.i=t,this.g=n,this.c=r,this.f=i,this.l=!!o,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bu(e,t){wu(e),e.b=bn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return e.l?We():function(){var e=i.document,t=null;return Ui()||!e?We():new Me((function(n){t=function(){Ui()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){bu(e,!0)})).s((function(t){e.i(t)&&bu(e,!1)}))}function wu(e){e.b&&(e.b.cancel(),e.b=null)}function Su(e){this.f=e,this.b=this.a=null,this.c=0}function Eu(e,t){var n=t[ua],r=t.refreshToken;t=ku(t.expiresIn),e.b=n,e.c=t,e.a=r}function ku(e){return b()+1e3*parseInt(e,10)}function Iu(e,t){this.a=e||null,this.b=t||null,Ki(this,{lastSignInTime:ji(t||null),creationTime:ji(e||null)})}function Tu(e,t,n,r,i,o){Ki(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Cu(e,t){for(var n in Wt.call(this,e),t)this[n]=t[n]}function Au(e,n,r){this.A=[],this.G=e.apiKey,this.o=e.appName,this.w=e.authDomain||null,e=t.SDK_VERSION?ki(t.SDK_VERSION):null,this.c=new aa(this.G,is(ns),e),this.h=new Su(this.c),Mu(this,n[ua]),Eu(this.h,n),Gi(this,"refreshToken",this.h.a),qu(this,r||{}),fn.call(this),this.I=!1,this.w&&Ai()&&(this.a=du(this.w,this.G,this.o)),this.N=[],this.i=null,this.l=function(e){return new _u((function(){return e.F(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-b()-3e5;return 0<t?t:0}),3e4,96e4,!1)}(this),this.U=v(this.Ga,this);var i=this;this.ha=null,this.ra=function(e){i.na(e.h)},this.W=null,this.R=[],this.qa=function(e){Ru(i,e.f)},this.V=null}function Pu(e,t){e.W&&on(e.W,"languageCodeChanged",e.ra),(e.W=t)&&tn(t,"languageCodeChanged",e.ra)}function Ru(e,n){e.R=n,fa(e.c,t.SDK_VERSION?ki(t.SDK_VERSION,e.R):null)}function Nu(e,t){e.V&&on(e.V,"frameworkChanged",e.qa),(e.V=t)&&tn(t,"frameworkChanged",e.qa)}function Du(e){try{return t.app(e.o).auth()}catch(t){throw new ro("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.o+"'!")}}function Ou(e){e.m||e.l.b||(e.l.start(),on(e,"tokenChanged",e.U),tn(e,"tokenChanged",e.U))}function Lu(e){on(e,"tokenChanged",e.U),wu(e.l)}function Mu(e,t){e.pa=t,Gi(e,"_lat",t)}function xu(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return function(e){return new Me((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Ub:!0,value:o}:{Ub:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)He(e[o],_(i,o,!0),_(i,o,!1));else t(r)}))}(t).then((function(){return e}))}function Fu(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function qu(e,t){Ki(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new Iu(t.createdAt,t.lastLoginAt),providerData:[]})}function Bu(){}function Uu(e){return We().then((function(){if(e.m)throw new ro("app-deleted")}))}function ju(e){return U(e.providerData,(function(e){return e.providerId}))}function Wu(e,t){t&&(Vu(e,t.providerId),e.providerData.push(t))}function Vu(e,t){H(e.providerData,(function(e){return e.providerId==t}))}function Hu(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Gi(e,t,n)}function Gu(e,t){e!=t&&(Ki(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?Gi(e,"metadata",function(e){return new Iu(e.a,e.b)}(t.metadata)):Gi(e,"metadata",new Iu),B(t.providerData,(function(t){Wu(e,t)})),e.h=t.h,Gi(e,"refreshToken",e.h.a))}function Ku(e){return e.F().then((function(t){var n=e.isAnonymous;return function(e,t){return Ja(e.c,Ma,{idToken:t}).then(v(e.kc,e))}(e,t).then((function(){return n||Hu(e,"isAnonymous",!1),t}))}))}function $u(e,t){t[ua]&&e.pa!=t[ua]&&(Eu(e.h,t),mn(e,new Cu("tokenChanged")),Mu(e,t[ua]),Hu(e,"refreshToken",e.h.a))}function Qu(e,t){return Ku(e).then((function(){if(W(ju(e),t))return xu(e).then((function(){throw new ro("provider-already-linked")}))}))}function zu(e,t,n){return $i({user:e,credential:Xo(t),additionalUserInfo:t=ko(t),operationType:n})}function Yu(e,t){return $u(e,t),e.reload().then((function(){return e}))}function Zu(e,n,r,i,o){if(!Ai())return Ve(new ro("operation-not-supported-in-this-environment"));if(e.i&&!o)return Ve(e.i);var a=Eo(r.providerId),s=Mi(e.uid+":::"),u=null;(!Ni()||yi())&&e.w&&r.isOAuthProvider&&(u=vs(e.w,e.G,e.o,n,r,null,s,t.SDK_VERSION||null));var c=pi(u,a&&a.za,a&&a.ya);return i=i().then((function(){if(Ju(e),!o)return e.F().then((function(){}))})).then((function(){return uu(e.a,c,n,r,s,!!u)})).then((function(){return new Me((function(t,r){e.fa(n,null,new ro("cancelled-popup-request"),e.g||null),e.f=t,e.v=r,e.g=s,e.b=e.a.Ca(e,n,c,s)}))})).then((function(e){return c&&hi(c),e?$i(e):null})).s((function(e){throw c&&hi(c),e})),ec(e,i,o)}function Xu(e,t,n,r,i){if(!Ai())return Ve(new ro("operation-not-supported-in-this-environment"));if(e.i&&!i)return Ve(e.i);var o=null,a=Mi(e.uid+":::");return r=r().then((function(){if(Ju(e),!i)return e.F().then((function(){}))})).then((function(){return e.Z=a,xu(e)})).then((function(t){return e.ca&&(t=(t=e.ca).b.set(rc,e.B(),t.a)),t})).then((function(){return e.a.Aa(t,n,a)})).s((function(t){if(o=t,e.ca)return ic(e.ca);throw o})).then((function(){if(o)throw o})),ec(e,r,i)}function Ju(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new ro("internal-error");throw new ro("auth-domain-config-required")}}function ec(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),Ve(e.i)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||mn(e,new Cu("userInvalidated")),e.i=t),t}))}(e,t,n);return e.A.push(r),Ge(r,(function(){V(e.A,r)})),r}function tc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[ua]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-b())/1e3;var r=new Au(t,n,e);return e.providerData&&B(e.providerData,(function(e){e&&Wu(r,$i(e))})),e.redirectEventId&&(r.Z=e.redirectEventId),r}function nc(e){this.a=e,this.b=Bs()}hu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},hu.prototype.h=function(e,t){if(!e)return Ve(new ro("invalid-auth-event"));this.reset(),this.g=!0;var n=e.b,r=e.c,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;return"unknown"!=n||i||o?e.a?(mu(this,!0,null,e.a),e=We()):e=t.va(n,r)?function(e,t,n){n=n.va(t.b,t.c);var r=t.f,i=t.g,o=!!t.b.match(/Redirect$/);return n(r,i).then((function(t){mu(e,o,t,null)})).s((function(t){mu(e,o,null,t)}))}(this,e,t):Ve(new ro("invalid-auth-event")):(mu(this,!1,null,null),e=We()),e},hu.prototype.aa=function(){var e=this;return new Me((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new ro("timeout");e.a&&e.a.cancel(),e.a=bn(su.get()).then((function(){e.b||mu(e,!0,null,t)}))}(e))}))},gu.prototype.h=function(e,t){if(!e)return Ve(new ro("invalid-auth-event"));var n=e.b,r=e.c;return e.a?(t.fa(e.b,null,e.a,e.c),e=We()):e=t.va(n,r)?function(e,t){var n=e.c,r=e.b;return t.va(r,n)(e.f,e.g).then((function(e){t.fa(r,e,null,n)})).s((function(e){t.fa(r,null,e,n)}))}(e,t):Ve(new ro("invalid-auth-event")),e},yu.prototype.confirm=function(e){return e=Zo(this.verificationId,e),this.a(e)},_u.prototype.start=function(){this.a=this.c,bu(this,!0)},Su.prototype.B=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Su.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Ve(new ro("user-token-expired")):e||!this.b||b()>this.c-3e4?this.a?function(e,t){return function(e,t){return new Me((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?ma(e,e.i+"?key="+encodeURIComponent(e.b),(function(e){e?e.error?r(ts(e)):e.access_token&&e.refresh_token?n(e):r(new ro("internal-error")):r(new ro("network-request-failed"))}),"POST",Tr(t).toString(),e.c,e.l.get()):r(new ro("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=ku(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):We(null):We({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Iu.prototype.B=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(Cu,Wt),w(Au,fn),Au.prototype.na=function(e){this.ha=e,pa(this.c,e)},Au.prototype.$=function(){return this.ha},Au.prototype.Ka=function(){return K(this.R)},Au.prototype.Ga=function(){this.l.b&&(wu(this.l),this.l.start())},Gi(Au.prototype,"providerId","firebase"),(e=Au.prototype).reload=function(){var e=this;return ec(this,Uu(this).then((function(){return Ku(e).then((function(){return xu(e)})).then(Bu)})))},e.F=function(e){var t=this;return ec(this,Uu(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new ro("internal-error");return e.accessToken!=t.pa&&(Mu(t,e.accessToken),mn(t,new Cu("tokenChanged"))),Hu(t,"refreshToken",e.refreshToken),e.accessToken})))},e.getToken=function(e){return Vi["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Vi["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(e)},e.kc=function(e){if(!(e=e.users)||!e.length)throw new ro("internal-error");qu(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?U(e,(function(e){return new Tu(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Wu(this,t[n]);Hu(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Za=function(e){var t=this,n=null;return ec(this,e.c(this.c,this.uid).then((function(e){return $u(t,e),n=zu(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.mc=function(e){return this.Za(e).then((function(){}))},e.Xa=function(e){var t=this,n=null;return ec(this,Qu(this,e.providerId).then((function(){return t.F()})).then((function(n){return e.b(t.c,n)})).then((function(e){return n=zu(t,e,"link"),Yu(t,e)})).then((function(){return n})))},e.cc=function(e){return this.Xa(e).then((function(e){return e.user}))},e.dc=function(e,t){var n=this;return ec(this,Qu(this,"phone").then((function(){return vu(Du(n),e,t,v(n.Xa,n))})))},e.nc=function(e,t){var n=this;return ec(this,We().then((function(){return vu(Du(n),e,t,v(n.Za,n))})),!0)},e.kb=function(e){var t=this;return ec(this,this.F().then((function(n){return t.c.kb(n,e)})).then((function(e){return $u(t,e),t.reload()})))},e.Dc=function(e){var t=this;return ec(this,this.F().then((function(n){return e.b(t.c,n)})).then((function(e){return $u(t,e),t.reload()})))},e.lb=function(e){var t=this;return ec(this,this.F().then((function(n){return t.c.lb(n,e)})).then((function(e){return $u(t,e),t.reload()})))},e.mb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Uu(this);var t=this;return ec(this,this.F().then((function(n){return t.c.mb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return $u(t,e),Hu(t,"displayName",e.displayName||null),Hu(t,"photoURL",e.photoUrl||null),B(t.providerData,(function(e){"password"===e.providerId&&(Gi(e,"displayName",t.displayName),Gi(e,"photoURL",t.photoURL))})),xu(t)})).then(Bu))},e.Cc=function(e){var t=this;return ec(this,Ku(this).then((function(n){return W(ju(t),e)?function(e,t,n){return Ja(e,La,{idToken:t,deleteProvider:n})}(t.c,n,[e]).then((function(e){var n={};return B(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),B(ju(t),(function(e){n[e]||Vu(t,e)})),n[Yo.PROVIDER_ID]||Gi(t,"phoneNumber",null),xu(t)})):xu(t).then((function(){throw new ro("no-such-provider")}))})))},e.delete=function(){var e=this;return ec(this,this.F().then((function(t){return Ja(e.c,Oa,{idToken:t})})).then((function(){mn(e,new Cu("userDeleted"))}))).then((function(){for(var t=0;t<e.A.length;t++)e.A[t].cancel("app-deleted");Pu(e,null),Nu(e,null),e.A=[],e.m=!0,Lu(e),Gi(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)}))},e.ob=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.Z||null)==t||"reauthViaRedirect"==e&&(this.Z||null)==t)},e.fa=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},e.va=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?v(this.tb,this):"reauthViaPopup"==e&&t==(this.g||null)?v(this.ub,this):"linkViaRedirect"==e&&(this.Z||null)==t?v(this.tb,this):"reauthViaRedirect"==e&&(this.Z||null)==t?v(this.ub,this):null},e.ec=function(e){var t=this;return Zu(this,"linkViaPopup",e,(function(){return Qu(t,e.providerId).then((function(){return xu(t)}))}),!1)},e.oc=function(e){return Zu(this,"reauthViaPopup",e,(function(){return We()}),!0)},e.fc=function(e){var t=this;return Xu(this,"linkViaRedirect",e,(function(){return Qu(t,e.providerId)}),!1)},e.pc=function(e){return Xu(this,"reauthViaRedirect",e,(function(){return We()}),!0)},e.tb=function(e,t){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return ec(this,this.F().then((function(r){return Ta(n.c,{requestUri:e,sessionId:t,idToken:r})})).then((function(e){return r=zu(n,e,"link"),Yu(n,e)})).then((function(){return r})))},e.ub=function(e,t){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return ec(this,We().then((function(){return Oo(Ca(n.c,{requestUri:e,sessionId:t}),n.uid)})).then((function(e){return r=zu(n,e,"reauthenticate"),$u(n,e),n.i=null,n.reload()})).then((function(){return r})),!0)},e.bb=function(e){var t=this,n=null;return ec(this,this.F().then((function(t){return n=t,void 0===e||J(e)?{}:yo(new so(e))})).then((function(e){return t.c.bb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.toJSON=function(){return this.B()},e.B=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.o,authDomain:this.w,stsTokenManager:this.h.B(),redirectEventId:this.Z||null};return this.metadata&&re(e,this.metadata.B()),B(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var rc={name:"redirectUser",C:"session"};function ic(e){return Ws(e.b,rc,e.a)}function oc(e,t){this.a=e,this.b=t||Bs(),this.c=null,this.f=function(e){var t=uc("local"),n=uc("session"),r=uc("none");return e.b.get(n,e.a).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(sc,e.a).then((function(e){return e?uc(e):t}))}))}))})).then((function(t){return e.c=t,ac(e,t.C)})).s((function(){e.c||(e.c=t)}))}(this),Vs(this.b,uc("local"),this.a,v(this.g,this))}function ac(e,t){var n,r=[];for(n in Fs)Fs[n]!==t&&r.push(Ws(e.b,uc(Fs[n]),e.a));return r.push(Ws(e.b,sc,e.a)),function(e){return new Me((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)He(e[s],_(o,s),a);else t(i)}))}(r)}oc.prototype.g=function(){var e=this,t=uc("local");hc(this,(function(){return We().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return ac(e,"local").then((function(){e.c=t}))}))}))};var sc={name:"persistence",C:"session"};function uc(e){return{name:"authUser",C:e}}function cc(e,t){return hc(e,(function(){return e.b.set(e.c,t.B(),e.a)}))}function lc(e){return hc(e,(function(){return Ws(e.b,e.c,e.a)}))}function dc(e,t){return hc(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),tc(e||{})}))}))}function hc(e,t){return e.f=e.f.then(t,t),e.f}function pc(e){if(this.l=!1,Gi(this,"app",e),!bc(this).options||!bc(this).options.apiKey)throw new ro("invalid-api-key");e=t.SDK_VERSION?ki(t.SDK_VERSION):null,this.c=new aa(bc(this).options&&bc(this).options.apiKey,is(ns),e),this.N=[],this.m=[],this.I=[],this.Kb=t.INTERNAL.createSubscribe(v(this.ac,this)),this.R=void 0,this.Lb=t.INTERNAL.createSubscribe(v(this.bc,this)),vc(this,null),this.h=new oc(bc(this).options.apiKey+":"+bc(this).name),this.G=new nc(bc(this).options.apiKey+":"+bc(this).name),this.U=kc(this,function(e){var t=bc(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(rc,e.a).then((function(e){return e&&t&&(e.authDomain=t),tc(e||{})}))}(e.G,bc(e).options.authDomain).then((function(t){return(e.w=t)&&(t.ca=e.G),ic(e.G)}));return kc(e,t)}(e).then((function(){return dc(e.h,t)})).then((function(t){return t?(t.ca=e.G,e.w&&(e.w.Z||null)==(t.Z||null)?t:t.reload().then((function(){return cc(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:lc(e.h)}))):null})).then((function(t){vc(e,t||null)}));return kc(e,n)}(this)),this.i=kc(this,function(e){return e.U.then((function(){return e.aa()})).s((function(){})).then((function(){if(!e.l)return e.ha()})).s((function(){})).then((function(){if(!e.l){e.W=!0;var t=e.h;Vs(t.b,uc("local"),t.a,e.ha)}}))}(this)),this.W=!1,this.ha=v(this.yc,this),this.Ga=v(this.ka,this),this.pa=v(this.Tb,this),this.qa=v(this.Zb,this),this.ra=v(this.$b,this),function(e){var t=bc(e).options.authDomain,n=bc(e).options.apiKey;t&&Ai()&&(e.Jb=e.U.then((function(){if(!e.l){if(e.a=du(t,n,bc(e).name),e.a.subscribe(e),wc(e)&&Fu(wc(e)),e.w){Fu(e.w);var r=e.w;r.na(e.$()),Pu(r,e),Ru(r=e.w,e.A),Nu(r,e),e.w=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=v(this.delete,this),this.INTERNAL.logFramework=v(this.gc,this),this.o=0,fn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.$()},set:function(e){this.na(e)},enumerable:!1}),e.V=null}(this),this.A=[]}function fc(e){Wt.call(this,"languageCodeChanged"),this.h=e}function mc(e){Wt.call(this,"frameworkChanged"),this.f=e}function gc(e){return e.Jb||Ve(new ro("auth-domain-config-required"))}function yc(e,t){var n={};return n.apiKey=bc(e).options.apiKey,n.authDomain=bc(e).options.authDomain,n.appName=bc(e).name,e.U.then((function(){return function(e,t,n,r){var i=new Au(e,t);return n&&(i.ca=n),r&&Ru(i,r),i.reload().then((function(){return i}))}(n,t,e.G,e.Ka())})).then((function(t){return wc(e)&&t.uid==wc(e).uid?(Gu(wc(e),t),e.ka(t)):(vc(e,t),Fu(t),e.ka(t))})).then((function(){Ec(e)}))}function vc(e,t){wc(e)&&(function(e,t){H(e.N,(function(e){return e==t}))}(wc(e),e.Ga),on(wc(e),"tokenChanged",e.pa),on(wc(e),"userDeleted",e.qa),on(wc(e),"userInvalidated",e.ra),Lu(wc(e))),t&&(t.N.push(e.Ga),tn(t,"tokenChanged",e.pa),tn(t,"userDeleted",e.qa),tn(t,"userInvalidated",e.ra),0<e.o&&Ou(t)),Gi(e,"currentUser",t),t&&(t.na(e.$()),Pu(t,e),Ru(t,e.A),Nu(t,e))}function _c(e,t){var n=null,r=null;return kc(e,t.then((function(t){return n=Xo(t),r=ko(t),yc(e,t)})).then((function(){return $i({user:wc(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bc(e){return e.app}function wc(e){return e.currentUser}function Sc(e){return wc(e)&&wc(e)._lat||null}function Ec(e){if(e.W){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Sc(e));if(e.R!==e.getUid()&&e.I.length)for(e.R=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](Sc(e))}}function kc(e,t){return e.N.push(t),Ge(t,(function(){V(e.N,t)})),t}function Ic(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new ro("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Tc.length)throw new ro("internal-error","Argument validator received an unsupported number of arguments.");n=Tc[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new ro("argument-error",e+" failed: "+r)}oc.prototype.eb=function(e){var t=null,n=this;return function(e){var t=new ro("invalid-persistence-type"),n=new ro("unsupported-persistence-type");e:{for(r in Fs)if(Fs[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(vi()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!Ci()&&"none"!==e)throw n}}(e),hc(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,ac(n,e)})).then((function(){if(n.c=uc(e),t)return n.b.set(n.c,t,n.a)})):We()}))},w(pc,fn),w(fc,Wt),w(mc,Wt),(e=pc.prototype).eb=function(e){return kc(this,e=this.h.eb(e))},e.na=function(e){this.V===e||this.l||(this.V=e,pa(this.c,this.V),mn(this,new fc(this.$())))},e.$=function(){return this.V},e.Ec=function(){var e=i.navigator;this.na(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gc=function(e){this.A.push(e),fa(this.c,t.SDK_VERSION?ki(t.SDK_VERSION,this.A):null),mn(this,new mc(this.A))},e.Ka=function(){return K(this.A)},e.toJSON=function(){return{apiKey:bc(this).options.apiKey,authDomain:bc(this).options.authDomain,appName:bc(this).name,currentUser:wc(this)&&wc(this).B()}},e.ob=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.fa=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},e.va=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?v(this.Sb,this):null},e.Sb=function(e,t){var n=this;e={requestUri:e,sessionId:t},this.b&&(this.b.cancel(),this.b=null);var r=null,i=null,o=Ia(n.c,e).then((function(e){return r=Xo(e),i=ko(e),e}));return kc(this,e=n.U.then((function(){return o})).then((function(e){return yc(n,e)})).then((function(){return $i({user:wc(n),credential:r,additionalUserInfo:i,operationType:"signIn"})})))},e.wc=function(e){if(!Ai())return Ve(new ro("operation-not-supported-in-this-environment"));var n=this,r=Eo(e.providerId),i=Mi(),o=null;(!Ni()||yi())&&bc(this).options.authDomain&&e.isOAuthProvider&&(o=vs(bc(this).options.authDomain,bc(this).options.apiKey,bc(this).name,"signInViaPopup",e,null,i,t.SDK_VERSION||null));var a=pi(o,r&&r.za,r&&r.ya);return kc(this,r=gc(this).then((function(t){return uu(t,a,"signInViaPopup",e,i,!!o)})).then((function(){return new Me((function(e,t){n.fa("signInViaPopup",null,new ro("cancelled-popup-request"),n.g),n.f=e,n.v=t,n.g=i,n.b=n.a.Ca(n,"signInViaPopup",a,i)}))})).then((function(e){return a&&hi(a),e?$i(e):null})).s((function(e){throw a&&hi(a),e})))},e.xc=function(e){if(!Ai())return Ve(new ro("operation-not-supported-in-this-environment"));var t=this,n=gc(this).then((function(){return function(e){return hc(e,(function(){return e.b.set(sc,e.c.C,e.a)}))}(t.h)})).then((function(){return t.a.Aa("signInViaRedirect",e)}));return kc(this,n)},e.aa=function(){if(!Ai())return Ve(new ro("operation-not-supported-in-this-environment"));var e=this;return kc(this,gc(this).then((function(){return e.a.aa()})).then((function(e){return e?$i(e):null})))},e.hb=function(){var e=this;return kc(this,this.i.then((function(){return wc(e)?(vc(e,null),lc(e.h).then((function(){Ec(e)}))):We()})))},e.yc=function(){var e=this;return dc(this.h,bc(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=wc(e)&&t){n=wc(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Gu(wc(e),t),wc(e).F();(wc(e)||t)&&(vc(e,t),t&&(Fu(t),t.ca=e.G),e.a&&e.a.subscribe(e),Ec(e))}}))},e.ka=function(e){return cc(this.h,e)},e.Tb=function(){Ec(this),this.ka(wc(this))},e.Zb=function(){this.hb()},e.$b=function(){this.hb()},e.ac=function(e){var t=this;this.addAuthTokenListener((function(){e.next(wc(t))}))},e.bc=function(e){var t=this;!function(e,t){e.I.push(t),kc(e,e.i.then((function(){!e.l&&W(e.I,t)&&e.R!==e.getUid()&&(e.R=e.getUid(),t(Sc(e)))})))}(this,(function(){e.next(wc(t))}))},e.ic=function(e,n,r){var i=this;return this.W&&t.Promise.resolve().then((function(){h(e)?e(wc(i)):h(e.next)&&e.next(wc(i))})),this.Kb(e,n,r)},e.hc=function(e,n,r){var i=this;return this.W&&t.Promise.resolve().then((function(){i.R=i.getUid(),h(e)?e(wc(i)):h(e.next)&&e.next(wc(i))})),this.Lb(e,n,r)},e.Vb=function(e){var t=this;return kc(this,this.i.then((function(){return wc(t)?wc(t).F(e).then((function(e){return{accessToken:e}})):null})))},e.tc=function(e){return this.Eb(e).then((function(e){return e.user}))},e.Eb=function(e){var t=this;return this.i.then((function(){return _c(t,Ja(t.c,Qa,{token:e}))})).then((function(e){var n=e.user;return Hu(n,"isAnonymous",!1),t.ka(n),e}))},e.Fb=function(e,t){var n=this;return this.i.then((function(){return _c(n,Ja(n.c,za,{email:e,password:t}))}))},e.uc=function(e,t){return this.Fb(e,t).then((function(e){return e.user}))},e.Ob=function(e,t){return this.qb(e,t).then((function(e){return e.user}))},e.qb=function(e,t){var n=this;return this.i.then((function(){return _c(n,Ja(n.c,Na,{email:e,password:t}))}))},e.sc=function(e){return this.fb(e).then((function(e){return e.user}))},e.fb=function(e){var t=this;return this.i.then((function(){return _c(t,e.wa(t.c))}))},e.gb=function(){return this.Gb().then((function(e){return e.user}))},e.Gb=function(){var e=this;return this.i.then((function(){var t=wc(e);if(t&&t.isAnonymous){var n=$i({providerId:null,isNewUser:!1});return $i({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _c(e,e.c.gb()).then((function(t){var n=t.user;return Hu(n,"isAnonymous",!0),e.ka(n),t}))}))},e.getUid=function(){return wc(this)&&wc(this).uid||null},e.Mb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&wc(this)&&Ou(wc(this))},e.qc=function(e){var t=this;B(this.m,(function(n){n==e&&t.o--})),0>this.o&&(this.o=0),0==this.o&&wc(this)&&Lu(wc(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),kc(this,this.i.then((function(){t.l||W(t.m,e)&&e(Sc(t))})))},e.removeAuthTokenListener=function(e){H(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&function(e,t,n){t=js(e,uc("local"),t),e.a[t]&&(H(e.a[t],(function(e){return e==n})),0==e.a[t].length&&delete e.a[t]),J(e.a)&&function(e){Us(e,"local").da(e.h),Hs(e)}(e)}((e=this.h).b,e.a,this.ha),this.a&&this.a.unsubscribe(this),t.Promise.resolve()},e.Rb=function(e){return kc(this,function(e,t){return Ja(e,Da,{identifier:t,continueUri:Pi()?ui():"http://localhost"}).then((function(e){return e.allProviders||[]}))}(this.c,e))},e.Fc=function(e){return this.Ia(e).then((function(e){return e.data.email}))},e.Ta=function(e,t){return kc(this,this.c.Ta(e,t).then((function(){})))},e.Ia=function(e){return kc(this,this.c.Ia(e).then((function(e){return new zi(e)})))},e.Sa=function(e){return kc(this,this.c.Sa(e).then((function(){})))},e.cb=function(e,t){var n=this;return kc(this,We().then((function(){return void 0===t||J(t)?{}:yo(new so(t))})).then((function(t){return n.c.cb(e,t)})).then((function(){})))},e.vc=function(e,t){return kc(this,vu(this,e,t,v(this.fb,this)))};var Tc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Cc(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:o}}function Ac(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:a}}function Pc(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function Rc(e,t){return{name:e||"",K:"a function",optional:!!t,M:h}}function Nc(e,t){return{name:e||"",K:"null",optional:!!t,M:c}}function Dc(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.wa||!n)}}}function Oc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&o(e.type)&&h(e.verify))}}}function Lc(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function Mc(e,t,n,r,o,a){if(Gi(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=t,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[qc])throw new ro("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Bc],!Et(t)||!this.h&&Et(t).hasChildNodes())throw new ro("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new aa(e,a||null,o||null),this.o=r||function(){return null};var s=this;this.i=[];var u=this.a[xc];this.a[xc]=function(e){if(Uc(s,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=Ti(u,i);"function"==typeof t&&t(e)}};var c=this.a[Fc];this.a[Fc]=function(){if(Uc(s,null),"function"==typeof c)c();else if("string"==typeof c){var e=Ti(c,i);"function"==typeof e&&e()}}}var xc="callback",Fc="expired-callback",qc="sitekey",Bc="size";function Uc(e,t){for(var n=0;n<e.i.length;n++)try{e.i[n](t)}catch(e){}}function jc(e,t){return e.g.push(t),Ge(t,(function(){V(e.g,t)})),t}function Wc(e){if(e.m)throw new ro("internal-error","RecaptchaVerifier instance has been destroyed.")}(e=Mc.prototype).xa=function(){var e=this;return this.c?this.c:this.c=jc(this,We().then((function(){if(Pi())return mi();throw new ro("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return function(e,t){return new Me((function(n,r){qi()?!i.grecaptcha||t!==e.c&&!e.b?(i[e.a]=function(){if(i.grecaptcha){e.c=t;var o=i.grecaptcha.render;i.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},n()}else r(new ro("internal-error"));delete i[e.a]},We(Xr(lt(Vc,{onload:e.a,hl:t||""}))).s((function(){r(new ro("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):n():r(new ro("network-request-failed"))}))}(Kc(),e.o())})).then((function(){return Ja(e.u,Ba,{})})).then((function(t){e.a[qc]=t.recaptchaSiteKey})).s((function(t){throw e.c=null,t})))},e.render=function(){Wc(this);var e=this;return jc(this,this.xa().then((function(){if(null===e.b){var t=e.l;if(!e.h){var n=Et(t);t=function(e,t,n){var r=arguments,i=document,a=String(r[0]),s=r[1];if(!rt&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',I(s.name),'"'),s.type){a.push(' type="',I(s.type),'"');var u={};re(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=i.createElement(a),s&&(o(s)?a.className=s:l(s)?a.className=s.join(" "):kt(a,s)),2<r.length&&Tt(i,a,r),a}("DIV"),n.appendChild(t)}e.b=grecaptcha.render(t,e.a)}return e.b})))},e.verify=function(){Wc(this);var e=this;return jc(this,this.render().then((function(t){return new Me((function(n){var r=grecaptcha.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){H(e.i,(function(e){return e==t}))}(e,i),n(t))};e.i.push(i),e.h&&grecaptcha.execute(e.b)}}))})))},e.reset=function(){Wc(this),null!==this.b&&grecaptcha.reset(this.b)},e.clear=function(){Wc(this),this.m=!0,Kc().b--;for(var e=0;e<this.g.length;e++)this.g[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){e=Et(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}};var Vc=st("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}");function Hc(){this.b=i.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Gc=null;function Kc(){return Gc||(Gc=new Hc),Gc}function $c(e,n,r){try{this.f=r||t.app()}catch(e){throw new ro("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new ro("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(e){}o=t.SDK_VERSION?ki(t.SDK_VERSION,o):null,Mc.call(this,r,e,n,(function(){try{var e=i.f.auth().$()}catch(t){e=null}return e}),o,is(ns))}function Qc(e,t){for(var n in t){var r=t[n].name;e[r]=Yc(r,e[n],t[n].j)}}function zc(e,t,n,r){e[t]=Yc(t,n,r)}function Yc(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Ic(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}w($c,Mc),Qc(pc.prototype,{Sa:{name:"applyActionCode",j:[Cc("code")]},Ia:{name:"checkActionCode",j:[Cc("code")]},Ta:{name:"confirmPasswordReset",j:[Cc("code"),Cc("newPassword")]},Ob:{name:"createUserWithEmailAndPassword",j:[Cc("email"),Cc("password")]},qb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[Cc("email"),Cc("password")]},Rb:{name:"fetchProvidersForEmail",j:[Cc("email")]},aa:{name:"getRedirectResult",j:[]},hc:{name:"onAuthStateChanged",j:[Lc(Pc(),Rc(),"nextOrObserver"),Rc("opt_error",!0),Rc("opt_completed",!0)]},ic:{name:"onIdTokenChanged",j:[Lc(Pc(),Rc(),"nextOrObserver"),Rc("opt_error",!0),Rc("opt_completed",!0)]},cb:{name:"sendPasswordResetEmail",j:[Cc("email"),Lc(Pc("opt_actionCodeSettings",!0),Nc(null,!0),"opt_actionCodeSettings",!0)]},eb:{name:"setPersistence",j:[Cc("persistence")]},fb:{name:"signInAndRetrieveDataWithCredential",j:[Dc()]},gb:{name:"signInAnonymously",j:[]},Gb:{name:"signInAnonymouslyAndRetrieveData",j:[]},sc:{name:"signInWithCredential",j:[Dc()]},tc:{name:"signInWithCustomToken",j:[Cc("token")]},Eb:{name:"signInAndRetrieveDataWithCustomToken",j:[Cc("token")]},uc:{name:"signInWithEmailAndPassword",j:[Cc("email"),Cc("password")]},Fb:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[Cc("email"),Cc("password")]},vc:{name:"signInWithPhoneNumber",j:[Cc("phoneNumber"),Oc()]},wc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},hb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Cc(null,!0)]},Ec:{name:"useDeviceLanguage",j:[]},Fc:{name:"verifyPasswordResetCode",j:[Cc("code")]}}),function(e,t){for(var n in t){var r=t[n].name;if(r!==n){var i=t[n].Nb;Object.defineProperty(e,r,{get:function(){return this[n]},set:function(e){Ic(r,[i],[e],!0),this[n]=e},enumerable:!0})}}}(pc.prototype,{lc:{name:"languageCode",Nb:Lc(Cc(),Nc(),"languageCode")}}),pc.Persistence=Fs,pc.Persistence.LOCAL="local",pc.Persistence.SESSION="session",pc.Persistence.NONE="none",Qc(Au.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[Ac()]},getToken:{name:"getToken",j:[Ac()]},Xa:{name:"linkAndRetrieveDataWithCredential",j:[Dc()]},cc:{name:"linkWithCredential",j:[Dc()]},dc:{name:"linkWithPhoneNumber",j:[Cc("phoneNumber"),Oc()]},ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Za:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Dc()]},mc:{name:"reauthenticateWithCredential",j:[Dc()]},nc:{name:"reauthenticateWithPhoneNumber",j:[Cc("phoneNumber"),Oc()]},oc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},bb:{name:"sendEmailVerification",j:[Lc(Pc("opt_actionCodeSettings",!0),Nc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Cc(null,!0)]},Cc:{name:"unlink",j:[Cc("provider")]},kb:{name:"updateEmail",j:[Cc("email")]},lb:{name:"updatePassword",j:[Cc("password")]},Dc:{name:"updatePhoneNumber",j:[Dc("phone")]},mb:{name:"updateProfile",j:[Pc("profile")]}}),Qc(Me.prototype,{s:{name:"catch"},then:{name:"then"}}),Qc(yu.prototype,{confirm:{name:"confirm",j:[Cc("verificationCode")]}}),zc($o,"credential",(function(e,t){return new Ko(e,t)}),[Cc("email"),Cc("password")]),Qc(qo.prototype,{sa:{name:"addScope",j:[Cc("scope")]},Ba:{name:"setCustomParameters",j:[Pc("customOAuthParameters")]}}),zc(qo,"credential",Bo,[Lc(Cc(),Pc(),"token")]),Qc(Uo.prototype,{sa:{name:"addScope",j:[Cc("scope")]},Ba:{name:"setCustomParameters",j:[Pc("customOAuthParameters")]}}),zc(Uo,"credential",jo,[Lc(Cc(),Pc(),"token")]),Qc(Wo.prototype,{sa:{name:"addScope",j:[Cc("scope")]},Ba:{name:"setCustomParameters",j:[Pc("customOAuthParameters")]}}),zc(Wo,"credential",Vo,[Lc(Cc(),Lc(Pc(),Nc()),"idToken"),Lc(Cc(),Nc(),"accessToken",!0)]),Qc(Ho.prototype,{Ba:{name:"setCustomParameters",j:[Pc("customOAuthParameters")]}}),zc(Ho,"credential",Go,[Lc(Cc(),Pc(),"token"),Cc("secret",!0)]),Qc(Fo.prototype,{sa:{name:"addScope",j:[Cc("scope")]},credential:{name:"credential",j:[Lc(Cc(),Nc(),"idToken",!0),Lc(Cc(),Nc(),"accessToken",!0)]},Ba:{name:"setCustomParameters",j:[Pc("customOAuthParameters")]}}),zc(Yo,"credential",Zo,[Cc("verificationId"),Cc("verificationCode")]),Qc(Yo.prototype,{Qa:{name:"verifyPhoneNumber",j:[Cc("phoneNumber"),Oc()]}}),Qc(ro.prototype,{toJSON:{name:"toJSON",j:[Cc(null,!0)]}}),Qc(ra.prototype,{toJSON:{name:"toJSON",j:[Cc(null,!0)]}}),Qc(na.prototype,{toJSON:{name:"toJSON",j:[Cc(null,!0)]}}),Qc($c.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===t||!t.INTERNAL||!t.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:pc,Error:ro};zc(e,"EmailAuthProvider",$o,[]),zc(e,"FacebookAuthProvider",qo,[]),zc(e,"GithubAuthProvider",Uo,[]),zc(e,"GoogleAuthProvider",Wo,[]),zc(e,"TwitterAuthProvider",Ho,[]),zc(e,"OAuthProvider",Fo,[Cc("providerId")]),zc(e,"PhoneAuthProvider",Yo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof pc)}}]),zc(e,"RecaptchaVerifier",$c,[Lc(Cc(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Pc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t.app.App)}}]),t.INTERNAL.registerService("auth",(function(e,t){return t({INTERNAL:{getUid:v((e=new pc(e)).getUid,e),getToken:v(e.Vb,e),addAuthTokenListener:v(e.Mb,e),removeAuthTokenListener:v(e.qc,e)}}),e}),e,(function(e,t){if("create"===e)try{t.auth()}catch(e){}})),t.INTERNAL.extendNamespace({User:Au})}()}).call(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},3201:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(3095);t.Database=i.Database;var o=n(9799);t.Query=o.Query;var a=n(3561);t.Reference=a.Reference;var s=n(4064);t.enableLogging=s.enableLogging;var u=n(739),c=n(6615),l=n(9917),d=n(8261),h=i.Database.ServerValue;function p(t){var n=t.INTERNAL.registerService("database",(function(e,t,n){return u.RepoManager.getInstance().databaseFromApp(e,n)}),{Reference:a.Reference,Query:o.Query,Database:i.Database,enableLogging:s.enableLogging,INTERNAL:c,ServerValue:h,TEST_ACCESS:l},null,!0);d.isNodeSdk()&&(e.exports=n)}t.ServerValue=h,t.registerDatabase=p,p(r.default);var f=n(1117);t.DataSnapshot=f.DataSnapshot;var m=n(5565);t.OnDisconnect=m.OnDisconnect},1117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(8577),o=n(9899),a=n(2870),s=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return r.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return r.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return r.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return r.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){r.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),i.validatePathString("DataSnapshot.child",1,t,!1);var n=new o.Path(t),s=this.ref_.child(n);return new e(this.node_.getChild(n),s,a.PRIORITY_INDEX)},e.prototype.hasChild=function(e){r.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),i.validatePathString("DataSnapshot.hasChild",1,e,!1);var t=new o.Path(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return r.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(r.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),r.validateCallback("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),a.PRIORITY_INDEX))}))},e.prototype.hasChildren=function(){return r.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return r.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return r.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}();t.DataSnapshot=s},3095:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064),i=n(244),o=n(9899),a=n(3561),s=n(5519),u=n(739),c=n(8261),l=n(8577),d=function(){function e(e){this.repo_=e,e instanceof s.Repo||r.fatal("Don't call new Database() directly - please use firebase.database()."),this.root_=new a.Reference(e,o.Path.Empty),this.INTERNAL=new h(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),c.validateArgCount("database.ref",0,1,arguments.length),void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),c.validateArgCount(t,1,1,arguments.length);var n=i.parseRepoInfo(e);l.validateUrl(t,1,n);var o=n.repoInfo;return o.host!==this.repo_.repoInfo_.host&&r.fatal(t+": Host name does not match the current database: (found "+o.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&r.fatal("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){c.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){c.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}();t.Database=d;var h=function(){function e(e){this.database=e}return e.prototype.delete=function(){return this.database.checkDeleted_("delete"),u.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,Promise.resolve()},e}();t.DatabaseInternals=h},9799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8261),o=n(3097),a=n(2870),s=n(5208),u=n(9566),c=n(4064),l=n(9899),d=n(8577),h=n(8261),p=n(8454),f=n(8261),m=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return i.assert(r,"Reference.ts has not been loaded"),r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===o.KEY_INDEX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",l="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=c.MIN_NAME)throw new Error(r);if("string"!=typeof t)throw new Error(l)}if(e.hasEnd()){if(e.getIndexEndName()!=c.MAX_NAME)throw new Error(r);if("string"!=typeof n)throw new Error(l)}}else if(e.getIndex()===a.PRIORITY_INDEX){if(null!=t&&!d.isValidPriority(t)||null!=n&&!d.isValidPriority(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(i.assert(e.getIndex()instanceof u.PathIndex||e.getIndex()===s.VALUE_INDEX,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return h.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){h.validateArgCount("Query.on",2,4,arguments.length),d.validateEventType("Query.on",1,t,!1),h.validateCallback("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[t]=n,this.onChildEvent(a,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new p.ValueEventRegistration(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new p.ChildEventRegistration(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){h.validateArgCount("Query.off",0,3,arguments.length),d.validateEventType("Query.off",1,e,!0),h.validateCallback("Query.off",2,t,!0),h.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new p.ValueEventRegistration(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new p.ChildEventRegistration(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;h.validateArgCount("Query.once",1,4,arguments.length),d.validateEventType("Query.once",1,t,!1),h.validateCallback("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new f.Deferred;u.promise.catch((function(){}));var c=function(e){s&&(s=!1,o.off(t,c),n&&n.bind(a.context)(e),u.resolve(e))};return this.on(t,c,(function(e){o.off(t,c),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)})),u.promise},e.prototype.limitToFirst=function(t){if(h.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(h.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(h.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');d.validatePathString("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new l.Path(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new u.PathIndex(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){h.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(o.KEY_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){h.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(a.PRIORITY_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){h.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(s.VALUE_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),h.validateArgCount("Query.startAt",0,2,arguments.length),d.validateFirebaseDataArg("Query.startAt",1,t,this.path,!0),d.validateKey("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),h.validateArgCount("Query.endAt",0,2,arguments.length),d.validateFirebaseDataArg("Query.endAt",1,t,this.path,!0),d.validateKey("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(h.validateArgCount("Query.equalTo",1,2,arguments.length),d.validateFirebaseDataArg("Query.equalTo",1,e,this.path,!1),d.validateKey("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return h.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return h.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=c.ObjectToUniqueKey(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(h.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,h.validateCallback(e,3,r.cancel,!0),r.context=n,h.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(h.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}();t.Query=m},3561:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(5565),a=n(2729),s=n(4064),u=n(5815),c=n(9799),l=n(5519),d=n(9899),h=n(1270),p=n(8577),f=n(8261),m=n(8261),g=n(8343),y=function(e){function t(t,n){if(!(t instanceof l.Repo))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,h.QueryParams.DEFAULT,!1)||this}return i(t,e),t.prototype.getKey=function(){return f.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return f.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof d.Path||(null===this.path.getFront()?p.validateRootPathString("Reference.child",1,e,!1):p.validatePathString("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){f.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){f.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){f.validateArgCount("Reference.set",1,2,arguments.length),p.validateWritablePath("Reference.set",this.path),p.validateFirebaseDataArg("Reference.set",1,e,this.path,!1),f.validateCallback("Reference.set",2,t,!0);var n=new m.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(f.validateArgCount("Reference.update",1,2,arguments.length),p.validateWritablePath("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,s.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}p.validateFirebaseMergeDataArg("Reference.update",1,e,this.path,!1),f.validateCallback("Reference.update",2,t,!0);var i=new m.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(f.validateArgCount("Reference.setWithPriority",2,3,arguments.length),p.validateWritablePath("Reference.setWithPriority",this.path),p.validateFirebaseDataArg("Reference.setWithPriority",1,e,this.path,!1),p.validatePriority("Reference.setWithPriority",2,t,!1),f.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new m.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return f.validateArgCount("Reference.remove",0,1,arguments.length),p.validateWritablePath("Reference.remove",this.path),f.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(f.validateArgCount("Reference.transaction",1,3,arguments.length),p.validateWritablePath("Reference.transaction",this.path),f.validateCallback("Reference.transaction",1,e,!1),f.validateCallback("Reference.transaction",2,t,!0),p.validateBoolean("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new m.Deferred;"function"==typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new a.TransactionResult(n,i)),"function"==typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){f.validateArgCount("Reference.setPriority",1,2,arguments.length),p.validateWritablePath("Reference.setPriority",this.path),p.validatePriority("Reference.setPriority",1,e,!1),f.validateCallback("Reference.setPriority",2,t,!0);var n=new m.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){f.validateArgCount("Reference.push",0,2,arguments.length),p.validateWritablePath("Reference.push",this.path),p.validateFirebaseDataArg("Reference.push",1,e,this.path,!0),f.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=u.nextPushId(r),o=this.child(i),a=this.child(i);return n=null!=e?o.set(e,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch((function(){})),o},t.prototype.onDisconnect=function(){return p.validateWritablePath("Reference.onDisconnect",this.path),new o.OnDisconnect(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(c.Query);t.Reference=y,c.Query.__referenceConstructor=y,g.SyncPoint.__referenceConstructor=y},2729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return r.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();t.TransactionResult=i},6615:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5726),i=n(7722);t.forceLongPolling=function(){r.WebSocketConnection.forceDisallow(),i.BrowserPollConnection.forceAllow()},t.forceWebSockets=function(){i.BrowserPollConnection.forceDisallow()},t.isWebSocketsAvailable=function(){return r.WebSocketConnection.isAvailable()},t.setSecurityDebugCallback=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},t.stats=function(e,t){e.repo.stats(t)},t.statsIncrementCounter=function(e,t){e.repo.statsIncrementCounter(t)},t.dataUpdateCount=function(e){return e.repo.dataUpdateCount},t.interceptServerData=function(e,t){return e.repo.interceptServerData_(t)}},5565:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(8577),o=n(4064),a=n(8261),s=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){r.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),r.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){r.validateArgCount("OnDisconnect.remove",0,1,arguments.length),i.validateWritablePath("OnDisconnect.remove",this.path_),r.validateCallback("OnDisconnect.remove",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){r.validateArgCount("OnDisconnect.set",1,2,arguments.length),i.validateWritablePath("OnDisconnect.set",this.path_),i.validateFirebaseDataArg("OnDisconnect.set",1,e,this.path_,!1),r.validateCallback("OnDisconnect.set",2,t,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){r.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),i.validateWritablePath("OnDisconnect.setWithPriority",this.path_),i.validateFirebaseDataArg("OnDisconnect.setWithPriority",1,e,this.path_,!1),i.validatePriority("OnDisconnect.setWithPriority",2,t,!1),r.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var o=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,o.wrapCallback(n)),o.promise},e.prototype.update=function(e,t){if(r.validateArgCount("OnDisconnect.update",1,2,arguments.length),i.validateWritablePath("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},s=0;s<e.length;++s)n[""+s]=e[s];e=n,o.warn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}i.validateFirebaseMergeDataArg("OnDisconnect.update",1,e,this.path_,!1),r.validateCallback("OnDisconnect.update",2,t,!0);var u=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,u.wrapCallback(t)),u.promise},e}();t.OnDisconnect=s},9917:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(412),i=n(669),o=n(739),a=n(4790);t.DataConnection=i.PersistentConnection,i.PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},i.PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},t.RealTimeConnection=a.Connection,t.hijackHash=function(e){var t=i.PersistentConnection.prototype.put;return i.PersistentConnection.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){i.PersistentConnection.prototype.put=t}},t.ConnectionTarget=r.RepoInfo,t.queryIdentifier=function(e){return e.queryIdentifier()},t.listens=function(e){return e.repo.persistentConnection_.listens_},t.forceRestClient=function(e){o.RepoManager.getInstance().forceRestClient(e)}},6230:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064),i=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,(function(e){return e&&"auth/token-not-initialized"===e.code?(r.log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}))},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',r.warn(e)},e}();t.AuthTokenProvider=i},4015:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7216),i=n(9899),o=n(8261),a=n(166),s=n(2870),u=n(8261),c=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new r.ImmutableTree(n));var o=this.writeTree_.findRootMostValueAndPath(t);if(null!=o){var a=o.path,s=o.value,u=i.Path.relativePath(a,t);return s=s.updateChild(u,n),new e(this.writeTree_.set(a,s))}var c=new r.ImmutableTree(n);return new e(this.writeTree_.setTree(t,c))},e.prototype.addWrites=function(e,t){var n=this;return o.forEach(t,(function(t,r){n=n.addWrite(e.child(t),r)})),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,r.ImmutableTree.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(i.Path.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(s.PRIORITY_INDEX,(function(t,n){e.push(new a.NamedNode(t,n))})):this.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new a.NamedNode(t,n.value))})),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new r.ImmutableTree(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(t){return e.applySubtreeWrite_(i.Path.Empty,this.writeTree_,t)},e.Empty=new e(new r.ImmutableTree(null)),e.applySubtreeWrite_=function(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(u.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e.applySubtreeWrite_(t.child(n),o,r)})),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r},e}();t.CompoundWrite=c},669:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=n(8261),s=n(8261),u=n(8261),c=n(4064),l=n(9899),d=n(1423),h=n(778),p=n(8261),f=n(4790),m=n(8261),g=n(8261),y=n(5285),v=1e3,_=function(e){function t(n,r,i,o,a,s){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=t.nextPersistentConnectionId_++,u.log_=c.logWrapper("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=v,u.maxReconnectDelay_=3e5,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!g.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),d.VisibilityMonitor.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&h.OnlineMonitor.getInstance().on("online",u.onOnline_,u),u}return i(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r,a:e,b:t};this.log_(s.stringify(i)),u.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},u.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),u.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&a.contains(e,"w")){var n=a.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();c.warn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||p.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=p.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),u.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+s.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):c.error("Unrecognized action received from server: "+s.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;u.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=v),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,l=null,d=function(){l?l.close():(s=!0,r())};this.realtime_={close:d,sendRequest:function(e){u.assert(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(t){s?c.log("getToken() completed but was canceled"):(c.log("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,l=new f.Connection(i,o.repoInfo_,e,n,r,(function(e){c.warn(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),a))})).then(null,(function(e){o.log_("Failed to get token: "+e),s||(m.CONSTANTS.NODE_ADMIN&&c.warn(e),d())}))}},t.prototype.interrupt=function(e){c.log("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){c.log("Resuming connection for reason: "+e),delete this.interruptReasons_[e],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return c.ObjectToUniqueKey(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new l.Path(e).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===a.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},t.prototype.onAuthRevoked_=function(e,t){c.log("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&"undefined"!=typeof console&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e=this;this.tryAuth(),a.forEach(this.listens_,(function(t,n){a.forEach(n,(function(t,n){e.sendListen_(n)}))}));for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";m.CONSTANTS.NODE_ADMIN?t="admin_node":m.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+o.default.SDK_VERSION.replace(/\./g,"-")]=1,g.isMobileCordova()?e["framework.cordova"]=1:g.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=h.OnlineMonitor.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(y.ServerActions);t.PersistentConnection=_},2839:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(8261),a=n(4064),s=n(8261),u=n(8261),c=n(8261),l=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=a.logWrapper("p:rest:"),i.listens_={},i}return i(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(o.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var s=t.getListenId_(e,r),c={};this.listens_[s]=c;var l=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),u.safeGet(o.listens_,s)===c&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?"+c.querystring(t);r.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=s.jsonEval(l.responseText)}catch(e){a.warn("Failed to parse JSON response for "+u+": "+l.responseText)}n(null,e)}else 401!==l.status&&404!==l.status&&a.warn("Got unsuccessful REST response for "+u+" Status: "+l.status),n(l.status);n=null}},l.open("GET",u,!0),l.send()}))},t}(n(5285).ServerActions);t.ReadonlyRestClient=l},5519:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7863),i=n(2105),o=n(9899),a=n(9782),s=n(1229),u=n(9629),c=n(8261),l=n(4064),d=n(8261),h=n(6230),p=n(2631),f=n(5880),m=n(7847),g=n(6992),y=n(669),v=n(2839),_=n(3095),b="repo_interrupt",w=function(){function e(e,t,n){var r=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new a.SparseSnapshotTree,this.persistentConnection_=null;var i=new h.AuthTokenProvider(n);if(this.stats_=p.StatsManager.getCollection(e),t||l.beingCrawled())this.server_=new v.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{c.stringify(o)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new y.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener((function(e){r.server_.refreshAuthToken(e)})),this.statsReporter_=p.StatsManager.getOrCreateReporter(e,(function(){return new f.StatsReporter(r.stats_,r.server_)})),this.transactions_init_(),this.infoData_=new u.SnapshotHolder,this.infoSyncTree_=new s.SyncTree({startListening:function(e,t,n,i){var o=[],a=r.infoData_.getNode(e.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new s.SyncTree({startListening:function(e,t,n,i){return r.server_.listen(e,n,t,(function(t,n){var o=i(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new o.Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return r.generateWithValues({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var a=new o.Path(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var s=[];if(r)if(n){var u=d.map(t,(function(e){return i.nodeFromJSON(e)}));s=this.serverSyncTree_.applyTaggedQueryMerge(a,u,r)}else{var c=i.nodeFromJSON(t);s=this.serverSyncTree_.applyTaggedQueryOverwrite(a,c,r)}else if(n){var l=d.map(t,(function(e){return i.nodeFromJSON(e)}));s=this.serverSyncTree_.applyServerMerge(a,l)}else{var h=i.nodeFromJSON(t);s=this.serverSyncTree_.applyServerOverwrite(a,h)}var p=a;s.length>0&&(p=this.rerunTransactions_(a)),this.eventQueue_.raiseEventsForChangedPath(p,s)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;l.each(e,(function(e,n){t.updateInfo_(n,e)}))},e.prototype.updateInfo_=function(e,t){var n=new o.Path("/.info/"+e),r=i.nodeFromJSON(t);this.infoData_.updateSnapshot(n,r);var a=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,a)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,o){var a=this;this.log_("set",{path:e.toString(),value:t,priority:n});var s=this.generateServerValues(),u=i.nodeFromJSON(t,n),c=r.resolveDeferredValueSnapshot(u,s),d=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(e,c,d,!0);this.eventQueue_.queueEvents(h),this.server_.put(e.toString(),u.val(!0),(function(t,n){var r="ok"===t;r||l.warn("set at "+e+" failed: "+t);var i=a.serverSyncTree_.ackUserWrite(d,!r);a.eventQueue_.raiseEventsForChangedPath(e,i),a.callOnCompleteCallback(o,t,n)}));var p=this.abortTransactions_(e);this.rerunTransactions_(p),this.eventQueue_.raiseEventsForChangedPath(p,[])},e.prototype.update=function(e,t,n){var o=this;this.log_("update",{path:e.toString(),value:t});var a=!0,s=this.generateServerValues(),u={};if(d.forEach(t,(function(e,t){a=!1;var n=i.nodeFromJSON(t);u[e]=r.resolveDeferredValueSnapshot(n,s)})),a)l.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserMerge(e,u,c);this.eventQueue_.queueEvents(h),this.server_.merge(e.toString(),t,(function(t,r){var i="ok"===t;i||l.warn("update at "+e+" failed: "+t);var a=o.serverSyncTree_.ackUserWrite(c,!i),s=a.length>0?o.rerunTransactions_(e):e;o.eventQueue_.raiseEventsForChangedPath(s,a),o.callOnCompleteCallback(n,t,r)})),d.forEach(t,(function(t){var n=o.abortTransactions_(e.child(t));o.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=r.resolveDeferredValueTree(this.onDisconnect_,t),i=[];n.forEachTree(o.Path.Empty,(function(t,n){i=i.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var r=e.abortTransactions_(t);e.rerunTransactions_(r)})),this.onDisconnect_=new a.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(o.Path.Empty,i)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)}))},e.prototype.onDisconnectSet=function(e,t,n){var r=this,o=i.nodeFromJSON(t);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,i){"ok"===t&&r.onDisconnect_.remember(e,o),r.callOnCompleteCallback(n,t,i)}))},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var o=this,a=i.nodeFromJSON(t,n);this.server_.onDisconnectPut(e.toString(),a.val(!0),(function(t,n){"ok"===t&&o.onDisconnect_.remember(e,a),o.callOnCompleteCallback(r,t,n)}))},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(d.isEmpty(t))return l.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(o,a){"ok"===o&&d.forEach(t,(function(t,n){var o=i.nodeFromJSON(n);r.onDisconnect_.remember(e.child(t),o)})),r.callOnCompleteCallback(n,o,a)}))},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(b)},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(b)},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new m.StatsListener(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);d.forEach(t,(function(e,t){for(var r=e.length;r<n+2;r++)e+=" ";console.log(e+t)}))}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),l.log.apply(void 0,[n].concat(e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&l.exceptionGuard((function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}}))},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new _.Database(this))},enumerable:!0,configurable:!0}),e}();t.Repo=w},412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(8261),o=n(8934),a=n(5577),s=function(){function e(e,t,n,r,i){void 0===i&&(i=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=o.PersistentStorage.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&o.PersistentStorage.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(r.assert("string"==typeof e,"typeof type must == string"),r.assert("object"==typeof t,"typeof params must == object"),e===a.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==a.LONG_POLLING)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var o=[];return i.forEach(t,(function(e,t){o.push(e+"="+t)})),n+o.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}();t.RepoInfo=s},739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(5519),o=n(4064),a=n(244),s=n(8577);n(8919);var u,c=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return u||(u=new e),u},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&o.fatal("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var r=a.parseRepoInfo(n),i=r.repoInfo;return s.validateUrl("Invalid Firebase Database URL",1,r),r.path.isEmpty()||o.fatal("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,e).database},e.prototype.deleteRepo=function(e){var t=r.safeGet(this.repos_,e.app.name);t&&r.safeGet(t,e.repoInfo_.toURLString())===e||o.fatal("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=r.safeGet(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var a=r.safeGet(n,e.toURLString());return a&&o.fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new i.Repo(e,this.useRestClient_,t),n[e.toURLString()]=a,a},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}();t.RepoManager=c},8919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8261),o=n(3561),a=n(1117),s=n(9899),u=n(3693),c=n(2870),l=n(4064),d=n(7863),h=n(8577),p=n(8261),f=n(2105),m=n(3226),g=n(5519);!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(r=t.TransactionStatus||(t.TransactionStatus={})),g.Repo.MAX_TRANSACTION_RETRIES_=25,g.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new u.Tree},g.Repo.prototype.startTransaction=function(e,t,n,s){this.log_("transaction on "+e);var u=function(){},g=new o.Reference(this,e);g.on("value",u);var y={path:e,update:t,onComplete:n,status:null,order:l.LUIDGenerator(),applyLocally:s,retryCount:0,unwatcher:function(){g.off("value",u)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},v=this.getLatestState_(e);y.currentInputSnapshot=v;var _=y.update(v.val());if(void 0===_){if(y.unwatcher(),y.currentOutputSnapshotRaw=null,y.currentOutputSnapshotResolved=null,y.onComplete){var b=new a.DataSnapshot(y.currentInputSnapshot,new o.Reference(this,y.path),c.PRIORITY_INDEX);y.onComplete(null,!1,b)}}else{h.validateFirebaseData("transaction failed: Data returned ",_,y.path),y.status=r.RUN;var w=this.transactionQueueTree_.subTree(e),S=w.getValue()||[];S.push(y),w.setValue(S);var E=void 0;"object"==typeof _&&null!==_&&p.contains(_,".priority")?(E=p.safeGet(_,".priority"),i.assert(h.isValidPriority(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(this.serverSyncTree_.calcCompleteEventCache(e)||m.ChildrenNode.EMPTY_NODE).getPriority().val(),E=E;var k=this.generateServerValues(),I=f.nodeFromJSON(_,E),T=d.resolveDeferredValueSnapshot(I,k);y.currentOutputSnapshotRaw=I,y.currentOutputSnapshotResolved=T,y.currentWriteId=this.getNextWriteId_();var C=this.serverSyncTree_.applyUserOverwrite(e,T,y.currentWriteId,y.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,C),this.sendReadyTransactions_()}},g.Repo.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||m.ChildrenNode.EMPTY_NODE},g.Repo.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);i.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return e.status===r.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},g.Repo.prototype.sendTransactionQueue_=function(e,t){for(var n=this,u=t.map((function(e){return e.currentWriteId})),d=this.getLatestState_(e,u),h=d,p=d.hash(),f=0;f<t.length;f++){var m=t[f];i.assert(m.status===r.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=r.SENT,m.retryCount++;var g=s.Path.relativePath(e,m.path);h=h.updateChild(g,m.currentOutputSnapshotRaw)}var y=h.val(!0),v=e;this.server_.put(v.toString(),y,(function(i){n.log_("transaction put response",{path:v.toString(),status:i});var s=[];if("ok"===i){for(var u=[],d=0;d<t.length;d++){if(t[d].status=r.COMPLETED,s=s.concat(n.serverSyncTree_.ackUserWrite(t[d].currentWriteId)),t[d].onComplete){var h=t[d].currentOutputSnapshotResolved,p=new o.Reference(n,t[d].path),f=new a.DataSnapshot(h,p,c.PRIORITY_INDEX);u.push(t[d].onComplete.bind(null,null,!0,f))}t[d].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,s),d=0;d<u.length;d++)l.exceptionGuard(u[d])}else{if("datastale"===i)for(d=0;d<t.length;d++)t[d].status===r.SENT_NEEDS_ABORT?t[d].status=r.NEEDS_ABORT:t[d].status=r.RUN;else for(l.warn("transaction at "+v.toString()+" failed: "+i),d=0;d<t.length;d++)t[d].status=r.NEEDS_ABORT,t[d].abortReason=i;n.rerunTransactions_(e)}}),p)},g.Repo.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},g.Repo.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,u=[],m=[],y=e.filter((function(e){return e.status===r.RUN})).map((function(e){return e.currentWriteId})),v=0;v<e.length;v++){var _=e[v],b=s.Path.relativePath(t,_.path),w=!1,S=void 0;if(i.assert(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),_.status===r.NEEDS_ABORT)w=!0,S=_.abortReason,m=m.concat(this.serverSyncTree_.ackUserWrite(_.currentWriteId,!0));else if(_.status===r.RUN)if(_.retryCount>=g.Repo.MAX_TRANSACTION_RETRIES_)w=!0,S="maxretry",m=m.concat(this.serverSyncTree_.ackUserWrite(_.currentWriteId,!0));else{var E=this.getLatestState_(_.path,y);_.currentInputSnapshot=E;var k=e[v].update(E.val());if(void 0!==k){h.validateFirebaseData("transaction failed: Data returned ",k,_.path);var I=f.nodeFromJSON(k);"object"==typeof k&&null!=k&&p.contains(k,".priority")||(I=I.updatePriority(E.getPriority()));var T=_.currentWriteId,C=this.generateServerValues(),A=d.resolveDeferredValueSnapshot(I,C);_.currentOutputSnapshotRaw=I,_.currentOutputSnapshotResolved=A,_.currentWriteId=this.getNextWriteId_(),y.splice(y.indexOf(T),1),m=(m=m.concat(this.serverSyncTree_.applyUserOverwrite(_.path,A,_.currentWriteId,_.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(T,!0))}else w=!0,S="nodata",m=m.concat(this.serverSyncTree_.ackUserWrite(_.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,m),m=[],w&&(e[v].status=r.COMPLETED,n=e[v].unwatcher,setTimeout(n,Math.floor(0)),e[v].onComplete))if("nodata"===S){var P=new o.Reference(this,e[v].path),R=e[v].currentInputSnapshot,N=new a.DataSnapshot(R,P,c.PRIORITY_INDEX);u.push(e[v].onComplete.bind(null,null,!1,N))}else u.push(e[v].onComplete.bind(null,new Error(S),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),v=0;v<u.length;v++)l.exceptionGuard(u[v]);this.sendReadyTransactions_()}},g.Repo.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},g.Repo.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},g.Repo.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},g.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var i=0,o=0;o<n.length;o++)n[o].status!==r.COMPLETED&&(n[i]=n[o],i++);n.length=i,e.setValue(n.length>0?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},g.Repo.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},g.Repo.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],o=[],a=-1,s=0;s<t.length;s++)t[s].status===r.SENT_NEEDS_ABORT||(t[s].status===r.SENT?(i.assert(a===s-1,"All SENT items should be at beginning of queue."),a=s,t[s].status=r.SENT_NEEDS_ABORT,t[s].abortReason="set"):(i.assert(t[s].status===r.RUN,"Unexpected transaction status in abort"),t[s].unwatcher(),o=o.concat(this.serverSyncTree_.ackUserWrite(t[s].currentWriteId,!0)),t[s].onComplete&&n.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?e.setValue(null):t.length=a+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),o),s=0;s<n.length;s++)l.exceptionGuard(n[s])}}},5285:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}();t.ServerActions=n},9629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3226),i=function(){function e(){this.rootNode_=r.ChildrenNode.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();t.SnapshotHolder=i},9782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9899),i=n(2870),o=n(8969),a=function(){function e(){this.value_=null,this.children_=null}return e.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();return e=e.popFront(),this.children_.contains(t)?this.children_.get(t).find(e):null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,n);else{null==this.children_&&(this.children_=new o.CountedSet);var r=t.getFront();this.children_.contains(r)||this.children_.add(r,new e);var i=this.children_.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(i.PRIORITY_INDEX,(function(e,t){n.remember(new r.Path(e),t)})),this.forget(e)}if(null!==this.children_){var o=e.getFront();return e=e.popFront(),this.children_.contains(o)&&this.children_.get(o).forget(e)&&this.children_.remove(o),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},e.prototype.forEachTree=function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild((function(n,i){var o=new r.Path(e.toString()+"/"+n);i.forEachTree(o,t)}))},e.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each((function(t,n){e(t,n)}))},e}();t.SparseSnapshotTree=a},8343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(2070),o=n(3226),a=n(8261),s=n(8261),u=n(9313),c=n(5961),l=function(){function e(){this.views_={}}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return a.assert(r,"Reference.ts has not been loaded"),r},set:function(e){a.assert(!r,"__referenceConstructor has already been defined"),r=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return s.isEmpty(this.views_)},e.prototype.applyOperation=function(e,t,n){var r=e.source.queryId;if(null!==r){var i=s.safeGet(this.views_,r);return a.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(e,t,n)}var o=[];return s.forEach(this.views_,(function(r,i){o=o.concat(i.applyOperation(e,t,n))})),o},e.prototype.addEventRegistration=function(e,t,n,r,a){var l=e.queryIdentifier(),d=s.safeGet(this.views_,l);if(!d){var h=n.calcCompleteEventCache(a?r:null),p=!1;h?p=!0:r instanceof o.ChildrenNode?(h=n.calcCompleteEventChildren(r),p=!1):(h=o.ChildrenNode.EMPTY_NODE,p=!1);var f=new u.ViewCache(new i.CacheNode(h,p,!1),new i.CacheNode(r,a,!1));d=new c.View(e,f),this.views_[l]=d}return d.addEventRegistration(t),d.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i=t.queryIdentifier(),o=[],a=[],u=this.hasCompleteView();if("default"===i){var c=this;s.forEach(this.views_,(function(e,t){a=a.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete c.views_[e],t.getQuery().getQueryParams().loadsAllData()||o.push(t.getQuery()))}))}else{var l=s.safeGet(this.views_,i);l&&(a=a.concat(l.removeEventRegistration(n,r)),l.isEmpty()&&(delete this.views_[i],l.getQuery().getQueryParams().loadsAllData()||o.push(l.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new e.__referenceConstructor(t.repo,t.path)),{removed:o,events:a}},e.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map((function(t){return e.views_[t]})).filter((function(e){return!e.getQuery().getQueryParams().loadsAllData()}))},e.prototype.getCompleteServerCache=function(e){var t=null;return s.forEach(this.views_,(function(n,r){t=t||r.getCompleteServerCache(e)})),t},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return s.safeGet(this.views_,t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){return s.findValue(this.views_,(function(e){return e.getQuery().getQueryParams().loadsAllData()}))||null},e}();t.SyncPoint=l},1229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(4064),o=n(7030),a=n(3226),s=n(8261),u=n(7216),c=n(1561),l=n(5339),d=n(9199),h=n(3078),p=n(9899),f=n(8343),m=n(1009),g=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=u.ImmutableTree.Empty,this.pendingWriteTree_=new m.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new h.Overwrite(d.OperationSource.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=u.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new l.Merge(d.OperationSource.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=u.ImmutableTree.Empty;return null!=n.snap?r=r.set(p.Path.Empty,!0):s.forEach(n.children,(function(e,t){r=r.set(new p.Path(e),t)})),this.applyOperationToSyncPoints_(new o.AckUserWrite(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new h.Overwrite(d.OperationSource.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=u.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new l.Merge(d.OperationSource.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new c.ListenComplete(d.OperationSource.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=p.Path.relativePath(a,t),c=new h.Overwrite(d.OperationSource.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,c=p.Path.relativePath(a,t),h=u.ImmutableTree.fromObject(n),f=new l.Merge(d.OperationSource.forServerTaggedQuery(s),c,h);return this.applyTaggedOperation_(a,f)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,a=i.queryId,s=p.Path.relativePath(o,t),u=new c.ListenComplete(d.OperationSource.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var i=t.path,o=null,s=!1;this.syncPointTree_.foreachOnPath(i,(function(e,t){var n=p.Path.relativePath(e,i);o=o||t.getCompleteServerCache(n),s=s||t.hasCompleteView()}));var u,c=this.syncPointTree_.get(i);c?(s=s||c.hasCompleteView(),o=o||c.getCompleteServerCache(p.Path.Empty)):(c=new f.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(i,c)),null!=o?u=!0:(u=!1,o=a.ChildrenNode.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=t.getCompleteServerCache(p.Path.Empty);n&&(o=o.updateImmediateChild(e,n))})));var l=c.viewExistsForQuery(t);if(!l&&!t.getQueryParams().loadsAllData()){var d=e.makeQueryKey_(t);r.assert(!(d in this.queryToTagMap_),"View does not exist, but we have a tag");var h=e.getNextQueryTag_();this.queryToTagMap_[d]=h,this.tagToQueryMap_["_"+h]=d}var m=this.pendingWriteTree_.childWrites(i),g=c.addEventRegistration(t,n,m,o,u);if(!l&&!s){var y=c.viewForQuery(t);g=g.concat(this.setupListener_(t,y))}return g},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(e){return e.getQueryParams().loadsAllData()})),d=this.syncPointTree_.findOnPath(o,(function(e,t){return t.hasCompleteView()}));if(l&&!d){var h=this.syncPointTree_.subtree(o);if(!h.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(h),f=0;f<p.length;++f){var m=p[f],g=m.getQuery(),y=this.createListenerForView_(m);this.listenProvider_.startListening(e.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}!d&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(e.queryForListening_(t),null):c.forEach((function(t){var n=i.queryToTagMap_[e.makeQueryKey_(t)];i.listenProvider_.stopListening(e.queryForListening_(t),n)}))),this.removeTags_(c)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,(function(t,n){var r=p.Path.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),s.forEach(n,(function(e,t){r=r.concat(t)})),r}))},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var i=t.path,o=this.tagForQuery_(t),a=this.createListenerForView_(n),u=this.listenProvider_.startListening(e.queryForListening_(t),o,a.hashFn,a.onComplete),c=this.syncPointTree_.subtree(i);if(o)r.assert(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold((function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),s.forEach(n,(function(e,t){r=r.concat(t)})),r})),d=0;d<l.length;++d){var h=l[d];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return u},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||a.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var o=i.errorForServerCode(e,n);return t.removeEventRegistration(n,null,o)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return r.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new p.Path(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return s.safeGet(this.queryToTagMap_,n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);r.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,i,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(p.Path.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(p.Path.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(p.Path.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(p.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(p.Path.Empty));var a=[];return t.children.inorderTraversal((function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(e,r,n))),a},e.nextQueryTag_=1,e}();t.SyncTree=g},1009:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(8261),o=n(9899),a=n(4015),s=n(2870),u=n(3226),c=function(){function e(){this.visibleWrites_=a.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new l(e,this)},e.prototype.addOverwrite=function(e,t,n,r){i.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){i.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));i.assert(n>=0,"removeWrite called with nonexistent writeId.");var o=this.allWrites_[n];this.allWrites_.splice(n,1);for(var a=o.visible,s=!1,u=this.allWrites_.length-1;a&&u>=0;){var c=this.allWrites_[u];c.visible&&(u>=n&&this.recordContainsPath_(c,o.path)?a=!1:o.path.contains(c.path)&&(s=!0)),u--}if(a){if(s)return this.resetTree_(),!0;if(o.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(o.path);else{var l=o.children;r.forEach(l,(function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(o.path.child(e))}))}return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var a=this.visibleWrites_.childCompoundWrite(t);if(!i&&a.isEmpty())return n;if(i||null!=n||a.hasCompleteWrite(o.Path.Empty)){var s=e.layerTree_(this.allWrites_,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t);return d=n||u.ChildrenNode.EMPTY_NODE,s.apply(d)}return null}var c=this.visibleWrites_.getCompleteNode(t);if(null!=c)return c;var l=this.visibleWrites_.childCompoundWrite(t);if(l.isEmpty())return n;if(null!=n||l.hasCompleteWrite(o.Path.Empty)){var d=n||u.ChildrenNode.EMPTY_NODE;return l.apply(d)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=u.ChildrenNode.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(s.PRIORITY_INDEX,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(s.PRIORITY_INDEX,(function(e,t){var r=i.childCompoundWrite(new o.Path(e)).apply(t);n=n.updateImmediateChild(e,r)})),i.getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){i.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(t);if(this.visibleWrites_.hasCompleteWrite(o))return null;var a=this.visibleWrites_.childCompoundWrite(o);return a.isEmpty()?r.getChild(t):a.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,a){var s,u=this.visibleWrites_.childCompoundWrite(e),c=u.getCompleteNode(o.Path.Empty);if(null!=c)s=c;else{if(null==t)return[];s=u.apply(t)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],d=a.getCompare(),h=i?s.getReverseIteratorFrom(n,a):s.getIteratorFrom(n,a),p=h.getNext();p&&l.length<r;)0!==d(p,n)&&l.push(p),p=h.getNext();return l},e.prototype.recordContainsPath_=function(e,t){return e.snap?e.path.contains(t):!!r.findKey(e.children,(function(n,r){return e.path.child(r).contains(t)}))},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,o.Path.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var s=a.CompoundWrite.Empty,u=0;u<e.length;++u){var c=e[u];if(t(c)){var l=c.path,d=void 0;if(c.snap)n.contains(l)?(d=o.Path.relativePath(n,l),s=s.addWrite(d,c.snap)):l.contains(n)&&(d=o.Path.relativePath(l,n),s=s.addWrite(o.Path.Empty,c.snap.getChild(d)));else{if(!c.children)throw i.assertionError("WriteRecord should have .snap or .children");if(n.contains(l))d=o.Path.relativePath(n,l),s=s.addWrites(d,c.children);else if(l.contains(n))if((d=o.Path.relativePath(l,n)).isEmpty())s=s.addWrites(o.Path.Empty,c.children);else{var h=r.safeGet(c.children,d.getFront());if(h){var p=h.getChild(d.popFront());s=s.addWrite(o.Path.Empty,p)}}}}}return s},e}();t.WriteTree=c;var l=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}();t.WriteTreeRef=l},7030:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(9899),o=n(9199),a=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=o.OperationType.ACK_USER_WRITE,this.source=o.OperationSource.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return r.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new i.Path(t));return new e(i.Path.Empty,n,this.revert)}return r.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}();t.AckUserWrite=a},1561:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9899),i=n(9199),o=function(){function e(e,t){this.source=e,this.path=t,this.type=i.OperationType.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,r.Path.Empty):new e(this.source,this.path.popFront())},e}();t.ListenComplete=o},5339:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9199),i=n(3078),o=n(9899),a=n(8261),s=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=r.OperationType.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new o.Path(t));return n.isEmpty()?null:n.value?new i.Overwrite(this.source,o.Path.Empty,n.value):new e(this.source,o.Path.Empty,n)}return a.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();t.Merge=s},9199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8261);(r=t.OperationType||(t.OperationType={}))[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var o=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,i.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}();t.OperationSource=o},3078:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9199),i=n(9899),o=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=r.OperationType.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,i.Path.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}();t.Overwrite=o},3226:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(8261),s=n(4064),u=n(3390),c=n(166),l=n(3988),d=n(2870),h=n(3097),p=n(4041),f=n(3749),m=n(9378),g=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&l.validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return o||(o=new e(new u.SortedMap(m.NAME_COMPARATOR),null,p.IndexMap.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||o},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?o:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(a.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i=new c.NamedNode(t,n),s=void 0,u=void 0;return n.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,n),u=this.indexMap_.addToIndexes(i,this.children_)),r=s.isEmpty()?o:this.priorityNode_,new e(s,r,u)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;a.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(d.PRIORITY_INDEX,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+l.priorityHashText(this.getPriority().val())+":"),this.forEachChild(d.PRIORITY_INDEX,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":s.sha1(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new c.NamedNode(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new c.NamedNode(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new c.NamedNode(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,c.NamedNode.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,c.NamedNode.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===t.MAX_NODE?-1:0},e.prototype.withIndex=function(t){if(t===h.KEY_INDEX||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===h.KEY_INDEX||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(d.PRIORITY_INDEX),r=t.getIterator(d.PRIORITY_INDEX),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===h.KEY_INDEX?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}();t.ChildrenNode=g;var y=function(e){function t(){return e.call(this,new u.SortedMap(m.NAME_COMPARATOR),g.EMPTY_NODE,p.IndexMap.Default)||this}return i(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return g.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(g);t.MaxNode=y,t.MAX_NODE=new y,Object.defineProperties(c.NamedNode,{MIN:{value:new c.NamedNode(s.MIN_NAME,g.EMPTY_NODE)},MAX:{value:new c.NamedNode(s.MAX_NAME,t.MAX_NODE)}}),h.KeyIndex.__EMPTY_NODE=g.EMPTY_NODE,f.LeafNode.__childrenNodeConstructor=g,l.setMaxNode(t.MAX_NODE),d.setMaxNode(t.MAX_NODE)},4041:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8261),o=n(3268),a=n(8261),s=n(166),u=n(2870),c=n(3097),l={},d=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return i.assert(l&&u.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),r=r||new e({".priority":l},{".priority":u.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=a.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===l?null:t},e.prototype.hasIndex=function(e){return a.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){i.assert(t!==c.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,u=[],d=!1,h=n.getIterator(s.NamedNode.Wrap),p=h.getNext();p;)d=d||t.isDefinedOn(p.node),u.push(p),p=h.getNext();r=d?o.buildChildSet(u,t.getCompare()):l;var f=t.toString(),m=a.clone(this.indexSet_);m[f]=t;var g=a.clone(this.indexes_);return g[f]=r,new e(g,m)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(a.map(this.indexes_,(function(e,u){var c=a.safeGet(r.indexSet_,u);if(i.assert(c,"Missing index implementation for "+u),e===l){if(c.isDefinedOn(t.node)){for(var d=[],h=n.getIterator(s.NamedNode.Wrap),p=h.getNext();p;)p.name!=t.name&&d.push(p),p=h.getNext();return d.push(t),o.buildChildSet(d,c.getCompare())}return l}var f=n.get(t.name),m=e;return f&&(m=m.remove(new s.NamedNode(t.name,f))),m.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(a.map(this.indexes_,(function(e){if(e===l)return e;var r=n.get(t.name);return r?e.remove(new s.NamedNode(t.name,r)):e})),this.indexSet_)},e}();t.IndexMap=d},3749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8261),o=n(4064),a=n(3988),s=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,i.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),a.validatePriorityNode(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(i.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+a.priorityHashText(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?o.doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=o.sha1(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(i.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return i.assert(o>=0,"Unknown leaf type: "+n),i.assert(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();t.LeafNode=s},166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}();t.NamedNode=n},3268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3390),i=n(3390),o=Math.log(2),a=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/o,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}();t.buildChildSet=function(e,t,n,o){e.sort(t);var s=function(t,i){var o,a,u=i-t;if(0==u)return null;if(1==u)return o=e[t],a=n?n(o):o,new r.LLRBNode(a,o.node,r.LLRBNode.BLACK,null,null);var c=parseInt(u/2,10)+t,l=s(t,c),d=s(c+1,i);return o=e[c],a=n?n(o):o,new r.LLRBNode(a,o.node,r.LLRBNode.BLACK,l,d)},u=function(t){for(var i=null,o=null,a=e.length,u=function(t,i){var o=a-t,u=a;a-=t;var l=s(o+1,u),d=e[o],h=n?n(d):d;c(new r.LLRBNode(h,d.node,i,null,l))},c=function(e){i?(i.left=e,i=e):(o=e,i=e)},l=0;l<t.count;++l){var d=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));d?u(h,r.LLRBNode.BLACK):(u(h,r.LLRBNode.BLACK),u(h,r.LLRBNode.RED))}return o}(new a(e.length));return new i.SortedMap(o||t,u)}},9378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064);t.NAME_ONLY_COMPARATOR=function(e,t){return r.nameCompare(e.name,t.name)},t.NAME_COMPARATOR=function(e,t){return r.nameCompare(e,t)}},4949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(166),i=n(4064),o=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new r.NamedNode(i.MIN_NAME,e),o=new r.NamedNode(i.MIN_NAME,t);return 0!==this.compare(n,o)},e.prototype.minPost=function(){return r.NamedNode.MIN},e}();t.Index=o},3097:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(4949),s=n(166),u=n(4064),c=n(8261),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return o},set:function(e){o=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return u.nameCompare(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw c.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return s.NamedNode.MIN},t.prototype.maxPost=function(){return new s.NamedNode(u.MAX_NAME,o)},t.prototype.makePost=function(e,t){return c.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new s.NamedNode(e,o)},t.prototype.toString=function(){return".key"},t}(a.Index);t.KeyIndex=l,t.KEY_INDEX=new l},9566:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(8261),a=n(4064),s=n(4949),u=n(3226),c=n(166),l=n(2105),d=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,o.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return i(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?a.nameCompare(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=l.nodeFromJSON(e),r=u.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,n);return new c.NamedNode(t,r)},t.prototype.maxPost=function(){var e=u.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,u.MAX_NODE);return new c.NamedNode(a.MAX_NAME,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(s.Index);t.PathIndex=d},2870:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(4949),u=n(4064),c=n(166),l=n(3749);t.setNodeFromJSON=function(e){o=e},t.setMaxNode=function(e){a=e};var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?u.nameCompare(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return c.NamedNode.MIN},t.prototype.maxPost=function(){return new c.NamedNode(u.MAX_NAME,new l.LeafNode("[PRIORITY-POST]",a))},t.prototype.makePost=function(e,t){var n=o(e);return new c.NamedNode(t,new l.LeafNode("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(s.Index);t.PriorityIndex=d,t.PRIORITY_INDEX=new d},5208:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(4949),a=n(166),s=n(4064),u=n(2105),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?s.nameCompare(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return a.NamedNode.MIN},t.prototype.maxPost=function(){return a.NamedNode.MAX},t.prototype.makePost=function(e,t){var n=u.nodeFromJSON(e);return new a.NamedNode(t,n)},t.prototype.toString=function(){return".value"},t}(o.Index);t.ValueIndex=c,t.VALUE_INDEX=new c},2105:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3226),i=n(3749),o=n(166),a=n(8261),s=n(8261),u=n(3268),c=n(9378),l=n(4041),d=n(2870);function h(e,t){if(void 0===t&&(t=null),null===e)return r.ChildrenNode.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),s.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){var n=e;return new i.LeafNode(n,h(t))}if(e instanceof Array){var p=r.ChildrenNode.EMPTY_NODE,f=e;return a.forEach(f,(function(e,t){if(a.contains(f,e)&&"."!==e.substring(0,1)){var n=h(t);!n.isLeafNode()&&n.isEmpty()||(p=p.updateImmediateChild(e,n))}})),p.updatePriority(h(t))}var m=[],g=!1,y=e;if(a.forEach(y,(function(e,t){if("string"!=typeof e||"."!==e.substring(0,1)){var n=h(y[e]);n.isEmpty()||(g=g||!n.getPriority().isEmpty(),m.push(new o.NamedNode(e,n)))}})),0==m.length)return r.ChildrenNode.EMPTY_NODE;var v=u.buildChildSet(m,c.NAME_ONLY_COMPARATOR,(function(e){return e.name}),c.NAME_COMPARATOR);if(g){var _=u.buildChildSet(m,d.PRIORITY_INDEX.getCompare());return new r.ChildrenNode(v,h(t),new l.IndexMap({".priority":_},{".priority":d.PRIORITY_INDEX}))}return new r.ChildrenNode(v,h(t),l.IndexMap.Default)}t.nodeFromJSON=h,d.setNodeFromJSON(h)},3988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8261),o=n(4064),a=n(8261);t.setMaxNode=function(e){r=e},t.priorityHashText=function(e){return"number"==typeof e?"number:"+o.doubleToIEEE754String(e):"string:"+e},t.validatePriorityNode=function(e){if(e.isLeafNode()){var t=e.val();i.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&a.contains(t,".sv"),"Priority must be a string or number.")}else i.assert(e===r||e.isEmpty(),"priority of unexpected type.");i.assert(e===r||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}},981:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(8261),o=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),i.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return r.deepCopy(this.counters_)},e}();t.StatsCollection=o},7847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=r.clone(e);return this.last_&&r.forEach(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}();t.StatsListener=i},2631:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(981),i=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new r.StatsCollection),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}();t.StatsManager=i},5880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(4064),o=n(7847),a=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new o.StatsListener(e);var n=1e4+2e4*Math.random();i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},o=!1;r.forEach(t,(function(t,i){i>0&&r.contains(e.statsToReport_,t)&&(n[t]=i,o=!0)})),o&&this.server_.reportStats(n),i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();t.StatsReporter=a},7268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),r.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:r.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}();t.DOMStorageWrapper=i},3769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return r.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}();t.MemoryStorage=i},8934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7268),i=n(3769),o=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new r.DOMStorageWrapper(t)}}catch(e){}return new i.MemoryStorage};t.PersistentStorage=o("localStorage"),t.SessionStorage=o("sessionStorage")},8969:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=function(){function e(){this.set={}}return e.prototype.add=function(e,t){this.set[e]=null===t||t},e.prototype.contains=function(e){return r.contains(this.set,e)},e.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},e.prototype.remove=function(e){delete this.set[e]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return r.isEmpty(this.set)},e.prototype.count=function(){return r.getCount(this.set)},e.prototype.each=function(e){r.forEach(this.set,(function(t,n){return e(t,n)}))},e.prototype.keys=function(){var e=[];return r.forEach(this.set,(function(t){e.push(t)})),e},e}();t.CountedSet=i},9354:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=function(){function e(e){this.allowedEvents_=e,this.listeners_={},r.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){r.assert(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}();t.EventEmitter=i},7216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(3390),o=n(9899),a=n(4064),s=n(8261),u=function(){function e(e,t){void 0===t&&(r||(r=new i.SortedMap(a.stringCompare)),t=r),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return s.forEach(t,(function(e,t){n=n.set(new o.Path(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:o.Path.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new o.Path(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r,i=t.getFront(),o=(this.children.get(i)||e.Empty).setTree(t.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)},e.prototype.fold=function(e){return this.fold_(o.Path.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(e.child(r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,o.Path.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,o.Path.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(o.Path.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(e.child(n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e.Empty=new e(null),e}();t.ImmutableTree=u},5815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o,a=n(8261);t.nextPushId=(r="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",i=0,o=[],function(e){var t,n=e===i;i=e;var s=new Array(8);for(t=7;t>=0;t--)s[t]=r.charAt(e%64),e=Math.floor(e/64);a.assert(0===e,"Cannot push at time == 0");var u=s.join("");if(n){for(t=11;t>=0&&63===o[t];t--)o[t]=0;o[t]++}else for(t=0;t<12;t++)o[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)u+=r.charAt(o[t]);return a.assert(20===u.length,"nextPushId: Length should be 20."),u})},778:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(8261),a=n(9354),s=n(8261),u=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||s.isMobileCordova()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return i(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return o.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(a.EventEmitter);t.OnlineMonitor=u},9899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064),i=n(8261),o=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),i=t.slice(),o=0;o<n.length&&o<i.length;o++){var a=r.nameCompare(n[o],i[o]);if(0!==a)return a}return n.length===i.length?0:n.length<i.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}();t.Path=o;var a=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=i.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=i.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=i.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}();t.ValidationPath=a},7863:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(9899),o=n(9782),a=n(3749),s=n(2105),u=n(2870);t.generateWithValues=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},t.resolveDeferredValue=function(e,t){return e&&"object"==typeof e?(r.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},t.resolveDeferredValueTree=function(e,n){var r=new o.SparseSnapshotTree;return e.forEachTree(new i.Path(""),(function(e,i){r.remember(e,t.resolveDeferredValueSnapshot(i,n))})),r},t.resolveDeferredValueSnapshot=function(e,n){var r,i=e.getPriority().val(),o=t.resolveDeferredValue(i,n);if(e.isLeafNode()){var c=e,l=t.resolveDeferredValue(c.getValue(),n);return l!==c.getValue()||o!==c.getPriority().val()?new a.LeafNode(l,s.nodeFromJSON(o)):e}var d=e;return r=d,o!==d.getPriority().val()&&(r=r.updatePriority(new a.LeafNode(o))),d.forEachChild(u.PRIORITY_INDEX,(function(e,i){var o=t.resolveDeferredValueSnapshot(i,n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}},3390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}();t.SortedMapIterator=n;var r=function(){function e(t,n,r,i,a){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:o.EMPTY_NODE,this.right=null!=a?a:o.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return o.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return o.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}();t.LLRBNode=r;var i=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new r(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}();t.LLRBEmptyNode=i;var o=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,r.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,r.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new n(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new n(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new n(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new n(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new i,e}();t.SortedMap=o},3693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(9899),o=n(8261),a=function(){this.children={},this.childCount=0,this.value=null};t.TreeNode=a;var s=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new a),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof i.Path?t:new i.Path(t),s=this;null!==(n=r.getFront());)s=new e(n,s,o.safeGet(s.node_.children,n)||new a),r=r.popFront();return s},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){r.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;o.forEach(this.node_.children,(function(r,i){t(new e(r,n,i))}))},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},e.prototype.path=function(){return new i.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=o.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();t.Tree=s},1423:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(9354),a=n(8261),s=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return i(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return a.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(o.EventEmitter);t.VisibilityMonitor=s},244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9899),i=n(412),o=n(4064);t.parseRepoInfo=function(e){var n=t.parseURL(e),a=n.subdomain;"firebase"===n.domain&&o.fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),a&&"undefined"!=a||o.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||o.warnIfPageIsSecure();var s="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new i.RepoInfo(n.host,n.secure,a,s),path:new r.Path(n.pathString)}},t.parseURL=function(e){var t="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof e){var u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));var c=e.indexOf("/");-1===c&&(c=e.length),t=e.substring(0,c),i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(c));var l=t.split(".");3===l.length?(n=l[1],r=l[0].toLowerCase()):2===l.length&&(n=l[0]),(u=t.indexOf(":"))>=0&&(o="https"===a||"wss"===a,s=parseInt(t.substring(u+1),10))}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}}},4064:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8261),o=n(8261),a=n(8261),s=n(8261),u=n(8261),c=n(8261),l=n(8934),d=n(8261);t.LUIDGenerator=(r=1,function(){return r++}),t.sha1=function(e){var t=u.stringToByteArray(e),n=new s.Sha1;n.update(t);var r=n.digest();return a.base64.encodeByteArray(r)};var h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"==typeof e[r]&&"number"==typeof e[r].length?n+=h.apply(null,e[r]):"object"==typeof e[r]?n+=c.stringify(e[r]):n+=e[r],n+=" ";return n};t.logger=null;var p=!0;t.enableLogging=function(e,n){i.assert(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!=typeof console&&("function"==typeof console.log?t.logger=console.log.bind(console):"object"==typeof console.log&&(t.logger=function(e){console.log(e)})),n&&l.SessionStorage.set("logging_enabled",!0)):"function"==typeof e?t.logger=e:(t.logger=null,l.SessionStorage.remove("logging_enabled"))},t.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!0===p&&(p=!1,null===t.logger&&!0===l.SessionStorage.get("logging_enabled")&&t.enableLogging(!0)),t.logger){var r=h.apply(null,e);t.logger(r)}},t.logWrapper=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.log.apply(void 0,[e].concat(n))}},t.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){var n="FIREBASE INTERNAL ERROR: "+h.apply(void 0,e);void 0!==console.error?console.error(n):console.log(n)}},t.fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=h.apply(void 0,e);throw new Error("FIREBASE FATAL ERROR: "+n)},t.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){var n="FIREBASE WARNING: "+h.apply(void 0,e);void 0!==console.warn?console.warn(n):console.log(n)}},t.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&t.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},t.warnAboutUnsupportedMethod=function(e){t.warn(e+" is unsupported and will likely change soon.  Please do not use.")},t.isInvalidJSONNumber=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},t.executeWhenDOMReady=function(e){if(d.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},t.MIN_NAME="[MIN_NAME]",t.MAX_NAME="[MAX_NAME]",t.nameCompare=function(e,n){if(e===n)return 0;if(e===t.MIN_NAME||n===t.MAX_NAME)return-1;if(n===t.MIN_NAME||e===t.MAX_NAME)return 1;var r=t.tryParseInt(e),i=t.tryParseInt(n);return null!==r?null!==i?r-i==0?e.length-n.length:r-i:-1:null!==i?1:e<n?-1:1},t.stringCompare=function(e,t){return e===t?0:e<t?-1:1},t.requireKey=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+c.stringify(t))},t.ObjectToUniqueKey=function(e){if("object"!=typeof e||null===e)return c.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=c.stringify(n[o]),i+=":",i+=t.ObjectToUniqueKey(e[n[o]]);return i+"}"},t.splitStringBySize=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r},t.each=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n]);else o.forEach(e,(function(e,n){return t(n,e)}))},t.bindCallback=function(e,t){return t?e.bind(t):e},t.doubleToIEEE754String=function(e){i.assert(!t.isInvalidJSONNumber(e),"Invalid JSON number");var n,r,o,a,s,u,c;for(0===e?(r=0,o=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=(a=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,o=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(r=0,o=Math.round(e/Math.pow(2,-1074)))),u=[],s=52;s;s-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(s=11;s;s-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(n?1:0),u.reverse(),c=u.join("");var l="";for(s=0;s<64;s+=8){var d=parseInt(c.substr(s,8),2).toString(16);1===d.length&&(d="0"+d),l+=d}return l.toLowerCase()},t.isChromeExtensionContentScript=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},t.isWindowsStoreApp=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},t.errorForServerCode=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},t.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),t.tryParseInt=function(e){if(t.INTEGER_REGEXP_.test(e)){var n=Number(e);if(n>=-2147483648&&n<=2147483647)return n}return null},t.exceptionGuard=function(e){try{e()}catch(e){setTimeout((function(){var n=e.stack||"";throw t.warn("Exception was thrown by user callback.",n),e}),Math.floor(0))}},t.callUserCallback=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"==typeof e&&t.exceptionGuard((function(){e.apply(void 0,n)}))},t.beingCrawled=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},t.exportPropGetter=function(e,t,n){Object.defineProperty(e,t,{get:n})},t.setTimeoutNonBlocking=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n}},8577:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9899),i=n(8261),o=n(4064),a=n(8261),s=n(8261);t.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,t.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,t.MAX_LEAF_SIZE_=10485760,t.isValidKey=function(e){return"string"==typeof e&&0!==e.length&&!t.INVALID_KEY_REGEX_.test(e)},t.isValidPathString=function(e){return"string"==typeof e&&0!==e.length&&!t.INVALID_PATH_REGEX_.test(e)},t.isValidRootPathString=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),t.isValidPathString(e)},t.isValidPriority=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!o.isInvalidJSONNumber(e)||e&&"object"==typeof e&&i.contains(e,".sv")},t.validateFirebaseDataArg=function(e,n,r,i,o){o&&void 0===r||t.validateFirebaseData(a.errorPrefix(e,n,o),r,i)},t.validateFirebaseData=function(e,n,a){var u=a instanceof r.Path?new r.ValidationPath(a,e):a;if(void 0===n)throw new Error(e+"contains undefined "+u.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+u.toErrorString()+" with contents = "+n.toString());if(o.isInvalidJSONNumber(n))throw new Error(e+"contains "+n.toString()+" "+u.toErrorString());if("string"==typeof n&&n.length>t.MAX_LEAF_SIZE_/3&&s.stringLength(n)>t.MAX_LEAF_SIZE_)throw new Error(e+"contains a string greater than "+t.MAX_LEAF_SIZE_+" utf8 bytes "+u.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var c=!1,l=!1;if(i.forEach(n,(function(n,r){if(".value"===n)c=!0;else if(".priority"!==n&&".sv"!==n&&(l=!0,!t.isValidKey(n)))throw new Error(e+" contains an invalid key ("+n+") "+u.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');u.push(n),t.validateFirebaseData(e,r,u),u.pop()})),c&&l)throw new Error(e+' contains ".value" child '+u.toErrorString()+" in addition to actual children.")}},t.validateFirebaseMergePaths=function(e,n){var i,o;for(i=0;i<n.length;i++)for(var a=(o=n[i]).slice(),s=0;s<a.length;s++)if(".priority"===a[s]&&s===a.length-1);else if(!t.isValidKey(a[s]))throw new Error(e+"contains an invalid key ("+a[s]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.sort(r.Path.comparePaths);var u=null;for(i=0;i<n.length;i++){if(o=n[i],null!==u&&u.contains(o))throw new Error(e+"contains a path "+u.toString()+" that is ancestor of another path "+o.toString());u=o}},t.validateFirebaseMergeDataArg=function(e,n,o,s,u){if(!u||void 0!==o){var c=a.errorPrefix(e,n,u);if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(c+" must be an object containing the children to replace.");var l=[];i.forEach(o,(function(e,n){var i=new r.Path(e);if(t.validateFirebaseData(c,n,s.child(i)),".priority"===i.getBack()&&!t.isValidPriority(n))throw new Error(c+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(i)})),t.validateFirebaseMergePaths(c,l)}},t.validatePriority=function(e,n,r,i){if(!i||void 0!==r){if(o.isInvalidJSONNumber(r))throw new Error(a.errorPrefix(e,n,i)+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!t.isValidPriority(r))throw new Error(a.errorPrefix(e,n,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},t.validateEventType=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.validateKey=function(e,n,r,i){if(!(i&&void 0===r||t.isValidKey(r)))throw new Error(a.errorPrefix(e,n,i)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},t.validatePathString=function(e,n,r,i){if(!(i&&void 0===r||t.isValidPathString(r)))throw new Error(a.errorPrefix(e,n,i)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},t.validateRootPathString=function(e,n,r,i){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),t.validatePathString(e,n,r,i)},t.validateWritablePath=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},t.validateUrl=function(e,n,r){var i=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!t.isValidKey(r.repoInfo.namespace)||0!==i.length&&!t.isValidRootPathString(i))throw new Error(a.errorPrefix(e,n,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},t.validateCredential=function(e,t,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a valid credential (a string).")},t.validateBoolean=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a boolean.")},t.validateString=function(e,t,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a valid string.")},t.validateObject=function(e,t,n,r){if(!(r&&void 0===n||n&&"object"==typeof n&&null!==n))throw new Error(a.errorPrefix(e,t,r)+"must be a valid object.")},t.validateObjectContainsKey=function(e,t,n,r,o,s){if(!n||"object"!=typeof n||!i.contains(n,r)){if(o)return;throw new Error(a.errorPrefix(e,t,o)+'must contain the key "'+r+'"')}if(s){var u=i.safeGet(n,r);if("number"===s&&"number"!=typeof u||"string"===s&&"string"!=typeof u||"boolean"===s&&"boolean"!=typeof u||"function"===s&&"function"!=typeof u||"object"===s&&"object"!=typeof u&&u)throw o?new Error(a.errorPrefix(e,t,o)+'contains invalid value for key "'+r+'" (must be of type "'+s+'")'):new Error(a.errorPrefix(e,t,o)+'must contain the key "'+r+'" with type "'+s+'"')}}},2070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}();t.CacheNode=n},411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}();t.Change=n},290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(411),o=n(8261),a=function(){function e(){this.changeMap_={}}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;o.assert(t==i.Change.CHILD_ADDED||t==i.Change.CHILD_CHANGED||t==i.Change.CHILD_REMOVED,"Only child changes supported for tracking"),o.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var a=r.safeGet(this.changeMap_,n);if(a){var s=a.type;if(t==i.Change.CHILD_ADDED&&s==i.Change.CHILD_REMOVED)this.changeMap_[n]=i.Change.childChangedChange(n,e.snapshotNode,a.snapshotNode);else if(t==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_ADDED)delete this.changeMap_[n];else if(t==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_CHANGED)this.changeMap_[n]=i.Change.childRemovedChange(n,a.oldSnap);else if(t==i.Change.CHILD_CHANGED&&s==i.Change.CHILD_ADDED)this.changeMap_[n]=i.Change.childAddedChange(n,e.snapshotNode);else{if(t!=i.Change.CHILD_CHANGED||s!=i.Change.CHILD_CHANGED)throw o.assertionError("Illegal combination of changes: "+e+" occurred after "+a);this.changeMap_[n]=i.Change.childChangedChange(n,e.snapshotNode,a.oldSnap)}}else this.changeMap_[n]=e},e.prototype.getChanges=function(){return r.getValues(this.changeMap_)},e}();t.ChildChangeAccumulator=a},1996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2070),i=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}();t.NoCompleteChildSource_=i,t.NO_COMPLETE_CHILD_SOURCE=new i;var o=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new r.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}();t.WriteTreeCompleteChildSource=o},3281:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+r.stringify(this.snapshot.exportVal())},e}();t.DataEvent=i;var o=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();t.CancelEvent=o},4830:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(166),i=n(411),o=n(8261),a=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,o=[],a=[];return e.forEach((function(e){e.type===i.Change.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&a.push(i.Change.childMovedChange(e.childName,e.snapshotNode))})),this.generateEventsForType_(o,i.Change.CHILD_REMOVED,e,n,t),this.generateEventsForType_(o,i.Change.CHILD_ADDED,e,n,t),this.generateEventsForType_(o,i.Change.CHILD_MOVED,a,n,t),this.generateEventsForType_(o,i.Change.CHILD_CHANGED,e,n,t),this.generateEventsForType_(o,i.Change.VALUE,e,n,t),o},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,a=n.filter((function(e){return e.type===t}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(t){var n=o.materializeSingleChange_(t,i);r.forEach((function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))}))}))},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw o.assertionError("Should only compare child_ events.");var n=new r.NamedNode(e.childName,e.snapshotNode),i=new r.NamedNode(t.childName,t.snapshotNode);return this.index_.compare(n,i)},e}();t.EventGenerator=a},6992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064),i=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new o(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(e)}))},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.contains(e)||e.contains(t)}))},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}();t.EventQueue=i;var o=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();r.logger&&r.log("event: "+t.toString()),r.exceptionGuard(n)}}},e.prototype.getPath=function(){return this.path_},e}();t.EventList=o},8454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1117),i=n(3281),o=n(8261),a=n(8261),s=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new i.DataEvent("value",this,new r.DataSnapshot(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new i.CancelEvent(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}();t.ValueEventRegistration=s;var u=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,o.contains(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new i.CancelEvent(this,e,t):null},e.prototype.createEvent=function(e,t){a.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),o=t.getQueryParams().getIndex();return new i.DataEvent(e.type,this,new r.DataSnapshot(e.snapshotNode,n,o),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=o.getCount(t.callbacks_);if(n===o.getCount(this.callbacks_)){if(1===n){var r=o.getAnyKey(t.callbacks_),i=o.getAnyKey(this.callbacks_);return!(i!==r||t.callbacks_[r]&&this.callbacks_[i]&&t.callbacks_[r]!==this.callbacks_[i])}return o.every(this.callbacks_,(function(e,n){return t.callbacks_[e]===n}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}();t.ChildEventRegistration=u},1270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(4064),o=n(3097),a=n(2870),s=n(5208),u=n(9566),c=n(3118),l=n(2735),d=n(1143),h=n(8261),p=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=a.PRIORITY_INDEX}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:i.MIN_NAME},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:i.MAX_NAME},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return r.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==a.PRIORITY_INDEX&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==a.PRIORITY_INDEX},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new c.IndexedFilter(this.getIndex()):this.hasLimit()?new l.LimitedFilter(this):new d.RangedFilter(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(this.index_===a.PRIORITY_INDEX?t=n.PRIORITY_INDEX:this.index_===s.VALUE_INDEX?t=n.VALUE_INDEX:this.index_===o.KEY_INDEX?t=n.KEY_INDEX:(r.assert(this.index_ instanceof u.PathIndex,"Unrecognized index type!"),t=this.index_.toString()),i[n.ORDER_BY]=h.stringify(t),this.startSet_&&(i[n.START_AT]=h.stringify(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+h.stringify(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=h.stringify(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+h.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}();t.QueryParams=p},5961:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3118),i=n(2513),o=n(3226),a=n(2070),s=n(9313),u=n(4830),c=n(8261),l=n(9199),d=n(411),h=n(2870),p=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),c=new r.IndexedFilter(n.getIndex()),l=n.getNodeFilter();this.processor_=new i.ViewProcessor(l);var d=t.getServerCache(),h=t.getEventCache(),p=c.updateFullNode(o.ChildrenNode.EMPTY_NODE,d.getNode(),null),f=l.updateFullNode(o.ChildrenNode.EMPTY_NODE,h.getNode(),null),m=new a.CacheNode(p,d.isFullyInitialized(),c.filtersNodes()),g=new a.CacheNode(f,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=new s.ViewCache(g,m),this.eventGenerator_=new u.EventGenerator(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){c.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(e){t=t;var i=e.createCancelEvent(t,r);i&&n.push(i)}))}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===l.OperationType.MERGE&&null!==e.source.queryId&&(c.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),c.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),c.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(h.PRIORITY_INDEX,(function(e,t){n.push(d.Change.childAddedChange(e,t))})),t.isFullyInitialized()&&n.push(d.Change.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}();t.View=p},9313:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3226),i=n(2070),o=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new i.CacheNode(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new i.CacheNode(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1),new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1)),e}();t.ViewCache=o},2513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9199),i=n(8261),o=n(290),a=n(411),s=n(3226),u=n(3097),c=n(7216),l=n(9899),d=n(1996),h=function(e,t){this.viewCache=e,this.changes=t};t.ProcessorResult=h;var p=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){i.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),i.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,a,s){var u,c,l=new o.ChildChangeAccumulator;if(n.type===r.OperationType.OVERWRITE){var d=n;d.source.fromUser?u=this.applyUserOverwrite_(t,d.path,d.snap,a,s,l):(i.assert(d.source.fromServer,"Unknown source."),c=d.source.tagged||t.getServerCache().isFiltered()&&!d.path.isEmpty(),u=this.applyServerOverwrite_(t,d.path,d.snap,a,s,c,l))}else if(n.type===r.OperationType.MERGE){var p=n;p.source.fromUser?u=this.applyUserMerge_(t,p.path,p.children,a,s,l):(i.assert(p.source.fromServer,"Unknown source."),c=p.source.tagged||t.getServerCache().isFiltered(),u=this.applyServerMerge_(t,p.path,p.children,a,s,c,l))}else if(n.type===r.OperationType.ACK_USER_WRITE){var f=n;u=f.revert?this.revertUserWrite_(t,f.path,a,s,l):this.ackUserWrite_(t,f.path,f.affectedTree,a,s,l)}else{if(n.type!==r.OperationType.LISTEN_COMPLETE)throw i.assertionError("Unknown operation type: "+n.type);u=this.listenComplete_(t,n.path,a,l)}var m=l.getChanges();return e.maybeAddValueEvent_(t,u,m),new h(u,m)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(a.Change.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,o){var a=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var u=void 0,c=void 0;if(t.isEmpty())if(i.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var l=e.getCompleteServerSnap(),d=l instanceof s.ChildrenNode?l:s.ChildrenNode.EMPTY_NODE,h=n.calcCompleteEventChildren(d);u=this.filter_.updateFullNode(e.getEventCache().getNode(),h,o)}else{var p=n.calcCompleteEventCache(e.getCompleteServerSnap());u=this.filter_.updateFullNode(e.getEventCache().getNode(),p,o)}else{var f=t.getFront();if(".priority"==f){i.assert(1==t.getLength(),"Can't have a priority with additional path components");var m=a.getNode();c=e.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(t,m,c);u=null!=g?this.filter_.updatePriority(m,g):a.getNode()}else{var y=t.popFront(),v=void 0;if(a.isCompleteForChild(f)){c=e.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(t,a.getNode(),c);v=null!=_?a.getNode().getImmediateChild(f).updateChild(y,_):a.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,e.getServerCache());u=null!=v?this.filter_.updateChild(a.getNode(),f,v,y,r,o):a.getNode()}}return e.updateEventSnap(u,a.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var p=t.popFront(),f=u.getNode().getImmediateChild(h).updateChild(p,n);s=".priority"==h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,p,d.NO_COMPLETE_CHILD_SOURCE,null)}var m=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),g=new d.WriteTreeCompleteChildSource(r,m,i);return this.generateEventCacheAfterServerEvent_(m,t,r,g,a)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,u,c=e.getEventCache(),l=new d.WriteTreeCompleteChildSource(r,e,i);if(t.isEmpty())u=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(u,!0,this.filter_.filtersNodes());else{var h=t.getFront();if(".priority"===h)u=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(u,c.isFullyInitialized(),c.isFiltered());else{var p=t.popFront(),f=c.getNode().getImmediateChild(h),m=void 0;if(p.isEmpty())m=n;else{var g=l.getCompleteChild(h);m=null!=g?".priority"===p.getBack()&&g.getChild(p.parent()).isEmpty()?g:g.updateChild(p,n):s.ChildrenNode.EMPTY_NODE}if(f.equals(m))a=e;else{var y=this.filter_.updateChild(c.getNode(),h,m,p,l,o);a=e.updateEventSnap(y,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,a){var s=this,u=t;return r.foreach((function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},e.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,d=e;u=t.isEmpty()?n:c.ImmutableTree.Empty.setTree(t,n);var h=e.getServerCache().getNode();return u.children.inorderTraversal((function(t,n){if(h.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),c=s.applyMerge_(u,n);d=s.applyServerOverwrite_(d,new l.Path(t),c,r,i,o,a)}})),u.children.inorderTraversal((function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!h.hasChild(t)&&!u){var c=e.getServerCache().getNode().getImmediateChild(t),p=s.applyMerge_(c,n);d=s.applyServerOverwrite_(d,new l.Path(t),p,r,i,o,a)}})),d},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,i,a,o);if(t.isEmpty()){var d=c.ImmutableTree.Empty;return s.getNode().forEachChild(u.KEY_INDEX,(function(e,t){d=d.set(new l.Path(e),t)})),this.applyServerMerge_(e,t,d,r,i,a,o)}return e}var h=c.ImmutableTree.Empty;return n.foreach((function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(h=h.set(e,s.getNode().getChild(r)))})),this.applyServerMerge_(e,t,h,r,i,a,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,d.NO_COMPLETE_CHILD_SOURCE,r)},e.prototype.revertUserWrite_=function(e,t,n,r,o){var a;if(null!=n.shadowingWrite(t))return e;var u=new d.WriteTreeCompleteChildSource(n,e,r),c=e.getEventCache().getNode(),h=void 0;if(t.isEmpty()||".priority"===t.getFront()){var p=void 0;if(e.getServerCache().isFullyInitialized())p=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var f=e.getServerCache().getNode();i.assert(f instanceof s.ChildrenNode,"serverChildren would be complete if leaf node"),p=n.calcCompleteEventChildren(f)}p=p,h=this.filter_.updateFullNode(c,p,o)}else{var m=t.getFront(),g=n.calcCompleteChild(m,e.getServerCache());null==g&&e.getServerCache().isCompleteForChild(m)&&(g=c.getImmediateChild(m)),(h=null!=g?this.filter_.updateChild(c,m,g,t.popFront(),u,o):e.getEventCache().getNode().hasChild(m)?this.filter_.updateChild(c,m,s.ChildrenNode.EMPTY_NODE,t.popFront(),u,o):c).isEmpty()&&e.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(h=this.filter_.updateFullNode(h,a,o))}return a=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(l.Path.Empty),e.updateEventSnap(h,a,this.filter_.filtersNodes())},e}();t.ViewProcessor=p},3118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8261),i=n(411),o=n(3226),a=n(2870),s=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,o,a,s){r.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var u=e.getImmediateChild(t);return u.getChild(o).equals(n.getChild(o))&&u.isEmpty()==n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(i.Change.childRemovedChange(t,u)):r.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?s.trackChildChange(i.Change.childAddedChange(t,n)):s.trackChildChange(i.Change.childChangedChange(t,n,u))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(a.PRIORITY_INDEX,(function(e,r){t.hasChild(e)||n.trackChildChange(i.Change.childRemovedChange(e,r))})),t.isLeafNode()||t.forEachChild(a.PRIORITY_INDEX,(function(t,r){if(e.hasChild(t)){var o=e.getImmediateChild(t);o.equals(r)||n.trackChildChange(i.Change.childChangedChange(t,r,o))}else n.trackChildChange(i.Change.childAddedChange(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?o.ChildrenNode.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();t.IndexedFilter=s},2735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1143),i=n(3226),o=n(166),a=n(8261),s=n(411),u=function(){function e(e){this.rangedFilter_=new r.RangedFilter(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,a,s){return this.rangedFilter_.matches(new o.NamedNode(t,n))||(n=i.ChildrenNode.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,a,s):this.fullLimitUpdateChild_(e,t,n,a,s)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;o.hasNext()&&a<this.limit_;){var s=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),a++}}else{r=(r=t.withIndex(this.index_)).updatePriority(i.ChildrenNode.EMPTY_NODE);var u=void 0,c=void 0,l=void 0;if(o=void 0,this.reverse_){o=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var d=this.index_.getCompare();l=function(e,t){return d(t,e)}}else o=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();a=0;for(var h=!1;o.hasNext();)s=o.getNext(),!h&&l(u,s)<=0&&(h=!0),h&&a<this.limit_&&l(s,c)<=0?a++:r=r.updateImmediateChild(s.name,i.ChildrenNode.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,u){var c;if(this.reverse_){var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else c=this.index_.getCompare();var d=e;a.assert(d.numChildren()==this.limit_,"");var h=new o.NamedNode(t,n),p=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),f=this.rangedFilter_.matches(h);if(d.hasChild(t)){for(var m=d.getImmediateChild(t),g=r.getChildAfterChild(this.index_,p,this.reverse_);null!=g&&(g.name==t||d.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);var y=null==g?1:c(g,h);if(f&&!n.isEmpty()&&y>=0)return null!=u&&u.trackChildChange(s.Change.childChangedChange(t,n,m)),d.updateImmediateChild(t,n);null!=u&&u.trackChildChange(s.Change.childRemovedChange(t,m));var v=d.updateImmediateChild(t,i.ChildrenNode.EMPTY_NODE);return null!=g&&this.rangedFilter_.matches(g)?(null!=u&&u.trackChildChange(s.Change.childAddedChange(g.name,g.node)),v.updateImmediateChild(g.name,g.node)):v}return n.isEmpty()?e:f&&c(p,h)>=0?(null!=u&&(u.trackChildChange(s.Change.childRemovedChange(p.name,p.node)),u.trackChildChange(s.Change.childAddedChange(t,n))),d.updateImmediateChild(t,n).updateImmediateChild(p.name,i.ChildrenNode.EMPTY_NODE)):e},e}();t.LimitedFilter=u},1143:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3118),i=n(2870),o=n(166),a=n(3226),s=function(){function e(t){this.indexedFilter_=new r.IndexedFilter(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,s){return this.matches(new o.NamedNode(t,n))||(n=a.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=a.ChildrenNode.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(a.ChildrenNode.EMPTY_NODE);var s=this;return t.forEachChild(i.PRIORITY_INDEX,(function(e,t){s.matches(new o.NamedNode(e,t))||(r=r.updateImmediateChild(e,a.ChildrenNode.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}();t.RangedFilter=s},7722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064),i=n(8969),o=n(2631),a=n(8281),s=n(5577),u=n(8261),c=n(8261);t.FIREBASE_LONGPOLL_START_PARAM="start",t.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",t.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",t.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",t.FIREBASE_LONGPOLL_ID_PARAM="id",t.FIREBASE_LONGPOLL_PW_PARAM="pw",t.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",t.FIREBASE_LONGPOLL_DATA_PARAM="d",t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe";var l=function(){function e(e,t,n,i){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r.logWrapper(e),this.stats_=o.StatsManager.getCollection(t),this.urlFn=function(e){return t.connectionURL(s.LONG_POLLING,e)}}return e.prototype.open=function(e,n){var i=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new a.PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){i.log_("Timed out trying to connect."),i.onClosed_(),i.connectTimeoutTimer_=null}),Math.floor(3e4)),r.executeWhenDOMReady((function(){if(!i.isClosed_){i.scriptTagHolder=new d((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],o=e[1],a=e[2];if(e[3],e[4],i.incrementIncomingBytes_(e),i.scriptTagHolder)if(i.connectTimeoutTimer_&&(clearTimeout(i.connectTimeoutTimer_),i.connectTimeoutTimer_=null),i.everConnected_=!0,r==t.FIREBASE_LONGPOLL_START_PARAM)i.id=o,i.password=a;else{if(r!==t.FIREBASE_LONGPOLL_CLOSE_COMMAND)throw new Error("Unrecognized command received: "+r);o?(i.scriptTagHolder.sendNewPolls=!1,i.myPacketOrderer.closeAfter(o,(function(){i.onClosed_()}))):i.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];i.incrementIncomingBytes_(e),i.myPacketOrderer.handleResponse(n,r)}),(function(){i.onClosed_()}),i.urlFn);var e={};e[t.FIREBASE_LONGPOLL_START_PARAM]="t",e[t.FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),i.scriptTagHolder.uniqueCallbackIdentifier&&(e[t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=i.scriptTagHolder.uniqueCallbackIdentifier),e[s.VERSION_PARAM]=s.PROTOCOL_VERSION,i.transportSessionId&&(e[s.TRANSPORT_SESSION_PARAM]=i.transportSessionId),i.lastSessionId&&(e[s.LAST_SESSION_PARAM]=i.lastSessionId),!c.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(e[s.REFERER_PARAM]=s.FORGE_REF);var n=i.urlFn(e);i.log_("Connecting via long-poll to "+n),i.scriptTagHolder.addTag(n,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!r.isChromeExtensionContentScript()&&!r.isWindowsStoreApp()&&!c.isNodeSdk()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=u.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=u.base64Encode(t),i=r.splitStringBySize(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,n){if(!c.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var r={};r[t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",r[t.FIREBASE_LONGPOLL_ID_PARAM]=e,r[t.FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=u.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}();t.BrowserPollConnection=l;var d=function(){function e(n,o,a,s){if(this.onDisconnect=a,this.urlFn=s,this.outstandingRequests=new i.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,c.isNodeSdk())this.commandCB=n,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=r.LUIDGenerator(),window[t.FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=n,window[t.FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=o,this.myIFrame=e.createIFrame_();var u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');var l="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(e){r.log("frame writing exception"),e.stack&&r.log(e.stack),r.log(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||r.log("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var n=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)}),Math.floor(0))),c.isNodeSdk()&&this.myID){var r={};r[t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",r[t.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,r[t.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var i=this.urlFn(r);e.nodeRestRequest(i)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[t.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,e[t.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,e[t.FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var n=this.urlFn(e),r="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){var o=this.pendingSegs.shift();r=r+"&"+t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+i+"="+o.seg+"&"+t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+i+"="+o.ts+"&"+t.FIREBASE_LONGPOLL_DATA_PARAM+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t,1);var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;c.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=function(){r.log("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(e){}}),Math.floor(1))},e}();t.FirebaseIFrameScriptHolder=d},4790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064),i=n(8934),o=n(5577),a=n(7279),s=function(){function e(e,t,n,i,o,s,u){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r.logWrapper("c:"+this.id+":"),this.transportManager_=new a.TransportManager(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,i)}),Math.floor(0));var o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=r.setTimeoutNonBlocking((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(o)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=r.requireKey("t",e),n=r.requireKey("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=r.requireKey("t",e),n=r.requireKey("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=r.requireKey("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?r.error("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):r.error("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),o.PROTOCOL_VERSION!==n&&r.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),r.setTimeoutNonBlocking((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):r.setTimeoutNonBlocking((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(i.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();t.Connection=s},5577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROTOCOL_VERSION="5",t.VERSION_PARAM="v",t.TRANSPORT_SESSION_PARAM="s",t.REFERER_PARAM="r",t.FORGE_REF="f",t.FORGE_DOMAIN="firebaseio.com",t.LAST_SESSION_PARAM="ls",t.WEBSOCKET="websocket",t.LONG_POLLING="long_polling"},7279:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7722),i=n(5726),o=n(4064),a=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[r.BrowserPollConnection,i.WebSocketConnection]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n=i.WebSocketConnection&&i.WebSocketConnection.isAvailable(),r=n&&!i.WebSocketConnection.previouslyFailed();if(t.webSocketOnly&&(n||o.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[i.WebSocketConnection];else{var a=this.transports_=[];o.each(e.ALL_TRANSPORTS,(function(e,t){t&&t.isAvailable()&&a.push(t)}))}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();t.TransportManager=a},5726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8261),o=n(4064),a=n(2631),s=n(5577),u=n(8261),c=n(8934),l=n(8261),d=n(8261),h=null;"undefined"!=typeof MozWebSocket?h=MozWebSocket:"undefined"!=typeof WebSocket&&(h=WebSocket),t.setWebSocketImpl=function(e){h=e};var p=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=o.logWrapper(this.connId),this.stats_=a.StatsManager.getCollection(n),this.connURL=e.connectionURL_(n,r,i)}return e.connectionURL_=function(e,t,n){var r={};return r[s.VERSION_PARAM]=s.PROTOCOL_VERSION,!d.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(r[s.REFERER_PARAM]=s.FORGE_REF),t&&(r[s.TRANSPORT_SESSION_PARAM]=t),n&&(r[s.LAST_SESSION_PARAM]=n),e.connectionURL(s.WEBSOCKET,r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,c.PersistentStorage.set("previous_websocket_failure",!0);try{if(d.isNodeSdk()){var i=u.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/"+s.PROTOCOL_VERSION+"/"+r.default.SDK_VERSION+"/"+process.platform+"/"+i}},a=process.env,l=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;l&&(o.proxy={origin:l}),this.mySock=new h(this.connURL,[],o)}else this.mySock=new h(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var p=e.message||e.data;return p&&this.log_(p),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==h&&!e.forceDisallow_},e.previouslyFailed=function(){return c.PersistentStorage.isInMemoryStorage||!0===c.PersistentStorage.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){c.PersistentStorage.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=l.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(i.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=l.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=o.splitStringBySize(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();t.WebSocketConnection=p},8281:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4064),i=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var i=function(){var e=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var t=function(t){e[t]&&r.exceptionGuard((function(){n.onMessage_(e[t])}))},i=0;i<e.length;++i)t(i);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},e}();t.PacketReceiver=i},3297:(e,t,n)=>{"use strict";n.r(t),n.d(t,{registerFirestore:()=>Hi});var r,i=n(3),o=i.default.SDK_VERSION;!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(r||(r={}));var a=r.ERROR;function s(){return a}function u(e){a=e}function c(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(a<=r.DEBUG){var s=(new Date).toISOString(),u=n.map(d);console.log.apply(console,["Firestore ("+o+") "+s+" ["+e+"]: "+t].concat(u))}}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(a<=r.ERROR){var i=(new Date).toISOString(),s=t.map(d);console.error.apply(console,["Firestore ("+o+") "+i+": "+e].concat(s))}}function d(e){if("string"==typeof e)return e;var t=f.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function h(e){var t="FIRESTORE ("+o+") INTERNAL ASSERTION FAILED: "+e;throw l(t),new Error(t)}function p(e,t){e||h(t)}var f=function(){function e(){}return e.setPlatform=function(t){e.platform&&h("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||h("Platform not set"),e.platform},e}();function m(){return f.getPlatform().emptyByteString}var g,y=(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v="ok",_="cancelled",b="unknown",w="invalid-argument",S="deadline-exceeded",E="not-found",k="already-exists",I="permission-denied",T="unauthenticated",C="resource-exhausted",A="failed-precondition",P="aborted",R="out-of-range",N="unimplemented",D="internal",O="unavailable",L="data-loss",M=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return y(t,e),t}(Error);function x(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new M(w,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function q(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=parseInt(n,10);isNaN(r)||t(r,e[n])}}function B(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function U(e){for(var t in p(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function j(e){p(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function W(e,t,n){if(t.length!==n)throw new M(w,"Function "+e+"() requires "+re(n,"argument")+", but was called with "+re(t.length,"argument")+".")}function V(e,t,n){if(t.length<n)throw new M(w,"Function "+e+"() requires at least "+re(n,"argument")+", but was called with "+re(t.length,"argument")+".")}function H(e,t,n,r){if(t.length<n||t.length>r)throw new M(w,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+re(t.length,"argument")+".")}function G(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new M(w,"Function "+e+"() requires its "+n+" argument to be an array with at least "+re(r,"element")+".")}function K(e,t,n,r){Y(e,t,ne(n)+" argument",r)}function $(e,t,n,r){void 0!==r&&K(e,t,n,r)}function Q(e,t,n,r){Y(e,t,n+" option",r)}function z(e,t,n,r){void 0!==r&&Q(e,t,n,r)}function Y(e,t,n,r){if(typeof r!==t||"object"===t&&!Z(r)){var i=X(r);throw new M(w,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function Z(e){return"object"==typeof e&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function X(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":h("Unknown wrong type: "+typeof e)}function J(e,t,n){if(void 0===n)throw new M(w,"Function "+e+"() requires a valid "+ne(t)+" argument, but it was undefined.")}function ee(e,t,n){B(t,(function(t,r){if(n.indexOf(t)<0)throw new M(w,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function te(e,t,n,r){var i=X(r);return new M(w,"Function "+e+"() requires its "+ne(n)+" argument to be a "+t+", but it was: "+i)}function ne(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function re(e,t){return e+" "+t+(1===e?"":"s")}var ie=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return p(20===t.length,"Invalid auto ID: "+t),t},e}();function oe(e,t){return e<t?-1:e>t?1:0}function ae(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}function se(){if("undefined"==typeof Uint8Array)throw new M(N,"Uint8Arrays are not available in this environment.")}function ue(){if(!f.getPlatform().base64Available)throw new M(N,"Blobs are unavailable in Firestore in this environment.")}var ce=function(){function e(e){ue(),this._binaryString=e}return e.fromBase64String=function(t){W("Blob.fromBase64String",arguments,1),K("Blob.fromBase64String","string",1,t),ue();try{var n=f.getPlatform().atob(t);return new e(n)}catch(e){throw new M(w,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(W("Blob.fromUint8Array",arguments,1),se(),!(t instanceof Uint8Array))throw te("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return W("Blob.toBase64",arguments,0),ue(),f.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){W("Blob.toUint8Array",arguments,0),se();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype._equals=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return oe(this._binaryString,e._binaryString)},e}(),le=x(ce,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),de=function(){function e(e,t){if(W("GeoPoint",arguments,2),K("GeoPoint","number",1,e),K("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new M(w,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(w,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype._equals=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return oe(this._lat,e._lat)||oe(this._long,e._long)},e}(),he=function(e,t,n,r){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r},pe="(default)",fe=function(){function e(e,t){this.projectId=e,this.database=t||pe}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===pe},enumerable:!0,configurable:!0}),e.prototype.equals=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return oe(this.projectId,e.projectId)||oe(this.database,e.database)},e}(),me=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ge="__name__",ye=function(){function e(e,t,n){this.init(e,t,n)}return e.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&h("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&h("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},e.prototype.construct=function(e,t,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(e,t,n),r},Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.equals=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):"string"==typeof t?n.push(t):h("Unknown parameter type for Path.child(): "+t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,p(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return p(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return p(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return p(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},e.prototype.get=function(e){return p(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return me(t,e),t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new M(w,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ye),_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/,be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return me(t,e),t.isValidIdentifier=function(e){return _e.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===ge},t.keyField=function(){return new t([ge])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new M(w,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new M(w,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new M(w,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new M(w,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ye),we=function(){function e(t){this.path=t,p(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.equals=function(e){return null!==e&&0===ve.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ve.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new ve(t.slice()))},e.fromPathString=function(t){return new e(ve.fromString(t))},e.EMPTY=new e(new ve([])),e}(),Se=function(){function e(e,t,n,r){this.key=e,this.version=t,this.data=n,this.hasLocalMutations=r.hasLocalMutations}return e.prototype.field=function(e){return this.data.field(e)},e.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.equals=function(t){return t instanceof e&&this.key.equals(t.key)&&this.version.equals(t.version)&&this.data.equals(t.data)&&this.hasLocalMutations===t.hasLocalMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"})"},e.compareByKey=function(e,t){return we.comparator(e.key,t.key)},e.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return void 0!==r&&void 0!==i?r.compareTo(i):h("Trying to compare documents on fields that don't exist")},e}(),Ee=function(){function e(e,t){this.key=e,this.version=t}return e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},e.prototype.equals=function(e){return e&&e.version.equals(this.version)&&e.key.equals(this.key)},e.compareByKey=function(e,t){return we.comparator(e.key,t.key)},e}(),ke=function(){function e(e,t){this.comparator=e,this.root=t||Te.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Te.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Te.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t=this.root,n=null;!t.isEmpty();){var r=this.comparator(e,t.key);if(0===r){if(t.left.isEmpty())return n?n.key:null;for(t=t.left;!t.right.isEmpty();)t=t.right;return t.key}r<0?t=t.left:r>0&&(n=t,t=t.right)}throw h("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Ie(this.root,null,this.comparator,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Ie(this.root,e,this.comparator,!1,t)},e.prototype.getReverseIterator=function(e){return new Ie(this.root,null,this.comparator,!0,e)},e.prototype.getReverseIteratorFrom=function(e,t){return new Ie(this.root,e,this.comparator,!0,t)},e}(),Ie=function(){function e(e,t,n,r,i){this.resultGenerator=i||null,this.isReverse=r,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){p(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e,t=this.nodeStack.pop();if(e=this.resultGenerator?this.resultGenerator(t.key,t.value):{key:t.key,value:t.value},this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return this.resultGenerator?this.resultGenerator(e.key,e.value):{key:e.key,value:e.value}},e}(),Te=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw h("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw h("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw h("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ce=function(){function e(){this.size=0}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Te(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Te.EMPTY=new Ce;var Ae,Pe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(Ae||(Ae={}));var Re=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return p(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),oe(this.typeOrder,e.typeOrder)},e}(),Ne=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=Ae.NullValue,t.internalValue=null,t}return Pe(t,e),t.prototype.value=function(){return null},t.prototype.equals=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Re),De=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.BooleanValue,n}return Pe(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?oe(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Re),Oe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.NumberValue,n}return Pe(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(r=e.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(e);var n,r},t}(Re);function Le(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Me=function(e){function t(t){return e.call(this,t)||this}return Pe(t,e),t.prototype.equals=function(e){return e instanceof t&&Le(this.internalValue,e.internalValue)},t}(Oe),xe=function(e){function t(t){var n=e.call(this,t)||this;return n.internalValue=t,n}return Pe(t,e),t.prototype.equals=function(e){return e instanceof t&&Le(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Oe),Fe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.StringValue,n}return Pe(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?oe(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Re),qe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.TimestampValue,n}return Pe(t,e),t.prototype.value=function(){return this.internalValue.toDate()},t.prototype.equals=function(e){return e instanceof t&&this.internalValue.equals(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue.compareTo(e.internalValue):e instanceof Be?-1:this.defaultCompareTo(e)},t}(Re),Be=function(e){function t(t){var n=e.call(this)||this;return n.localWriteTime=t,n.typeOrder=Ae.TimestampValue,n}return Pe(t,e),t.prototype.value=function(){return null},t.prototype.equals=function(e){return e instanceof t&&this.localWriteTime.equals(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime.compareTo(e.localWriteTime):e instanceof qe?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Re),Ue=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.BlobValue,n}return Pe(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue._equals(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Re),je=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=Ae.RefValue,r}return Pe(t,e),t.prototype.value=function(){return this.key},t.prototype.equals=function(e){return e instanceof t&&this.key.equals(e.key)&&this.databaseId.equals(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:we.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Re),We=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.GeoPointValue,n}return Pe(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue._equals(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Re),Ve=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.ObjectValue,n}return Pe(t,e),t.prototype.value=function(){var e={};return this.internalValue.inorderTraversal((function(t,n){e[t]=n.value()})),e},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.equals=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.equals(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=oe(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return oe(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(p(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(p(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return void 0!==this.field(e)},t.prototype.field=function(e){p(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t&&n.internalValue.get(e)||void 0})),n},t.prototype.toString=function(){return JSON.stringify(this.value())},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new ke(oe)),t}(Re),He=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Ae.ArrayValue,n}return Pe(t,e),t.prototype.value=function(){return this.internalValue.map((function(e){return e.value()}))},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.equals=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].equals(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return oe(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return JSON.stringify(this.value())},t}(Re),Ge=Number,Ke=Ge.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),$e=Ge.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Qe=Ge.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function ze(e){return null==e}var Ye=function(){function e(e,t,n,r,i,o){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=e,this.explicitOrderBy=t,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[at]:this.memoizedOrderBy=[new ot(e),at];else{p(null===e||null!==t&&e.equals(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:rt.ASCENDING;this.memoizedOrderBy.push(a===rt.ASCENDING?at:st)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){p(null==this.getInequalityFilterField()||!(t instanceof Xe)||!t.isInequality()||t.field.equals(this.getInequalityFilterField()),"Query must only have one inequality field."),p(!we.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){p(!we.isDocumentKey(this.path),"No ordering allowed for document query"),p(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";ze(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),ze(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.equals=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].equals(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].equals(e.filters[t]))return!1;return!!this.path.equals(e.path)&&!!(null!==this.startAt?this.startAt.equals(e.startAt):null===e.startAt)&&(null!==this.endAt?this.endAt.equals(e.endAt):null===e.endAt)},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return p(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesAncestor(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!ze(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Xe&&n.isInequality())return n.field}return null},e.prototype.isDocumentQuery=function(){return we.isDocumentKey(this.path)&&0===this.filters.length},e.prototype.matchesAncestor=function(e){var t=e.key.path;return we.isDocumentKey(this.path)?this.path.equals(t):this.path.isPrefixOf(t)&&this.path.length===t.length-1},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&void 0===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){p(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Ze=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;default:return h("Unknown relation: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.equals=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e}(),Xe=function(){function e(e,t,n){this.field=e,this.op=t,this.value=n}return e.prototype.matches=function(e){if(this.field.isKeyField()){p(this.value instanceof je,"Comparing on key, but filter value not a RefValue");var t=this.value,n=we.comparator(e.key,t.key);return this.matchesComparison(n)}var r=e.field(this.field);return void 0!==r&&this.matchesValue(r)},e.prototype.matchesValue=function(e){return this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(e){switch(this.op){case Ze.LESS_THAN:return e<0;case Ze.LESS_THAN_OR_EQUAL:return e<=0;case Ze.EQUAL:return 0===e;case Ze.GREATER_THAN:return e>0;case Ze.GREATER_THAN_OR_EQUAL:return e>=0;default:return h("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Ze.EQUAL},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.equals=function(t){return t instanceof e&&this.op.equals(t.op)&&this.field.equals(t.field)&&this.value.equals(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(),Je=function(){function e(e){this.field=e}return e.prototype.matches=function(e){var t=e.field(this.field);return void 0!==t&&null===t.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.equals=function(t){return t instanceof e&&this.field.equals(t.field)},e}(),et=function(){function e(e){this.field=e}return e.prototype.matches=function(e){var t=e.field(this.field).value();return"number"==typeof t&&isNaN(t)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.equals=function(t){return t instanceof e&&this.field.equals(t.field)},e}();function tt(e,t,n){if(n.equals(Ne.INSTANCE)){if(t!==Ze.EQUAL)throw new M(w,"Invalid query. You can only perform equals comparisons on null.");return new Je(e)}if(n.equals(xe.NAN)){if(t!==Ze.EQUAL)throw new M(w,"Invalid query. You can only perform equals comparisons on NaN.");return new et(e)}return new Xe(e,t,n)}var nt,rt=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),it=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){p(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())p(o instanceof je,"Bound has a non-key value where the key path is being used."),n=we.comparator(o.key,t.key);else{var a=t.field(i.field);p(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===rt.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.equals=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];return n.equals(r)}return!0},e}(),ot=function(){function e(e,t){this.field=e,void 0===t&&(t=rt.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Se.compareByKey(e,t):Se.compareByField(this.field,e,t);switch(this.dir){case rt.ASCENDING:return n;case rt.DESCENDING:return-1*n;default:return h("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.equals=function(e){return this.dir===e.dir&&this.field.equals(e.field)},e}(),at=new ot(be.keyField(),rt.ASCENDING),st=new ot(be.keyField(),rt.DESCENDING),ut=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),ct=function(){function e(e,t){this.seconds=e,this.nanos=t,p(t>=0,"timestamp nanoseconds out of range: "+t),p(t<1e9,"timestamp nanoseconds out of range"+t),p(e>=-62135596800,"timestamp seconds out of range: "+e),p(e<253402300800,"timestamp seconds out of range"+e)}return e.now=function(){return e.fromEpochMilliseconds(Date.now())},e.fromDate=function(t){return e.fromEpochMilliseconds(t.getTime())},e.fromEpochMilliseconds=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.fromISOString=function(t){var n=0,r=ut.exec(t);if(p(!!r,"invalid timestamp: "+t),r[1]){var i=r[1];i=(i+"000000000").substr(0,9),n=parseInt(i,10)}var o=new Date(t);return new e(Math.floor(o.getTime()/1e3),n)},e.prototype.toDate=function(){return new Date(this.toEpochMilliseconds())},e.prototype.toEpochMilliseconds=function(){return 1e3*this.seconds+this.nanos/1e6},e.prototype.compareTo=function(e){return this.seconds===e.seconds?oe(this.nanos,e.nanos):oe(this.seconds,e.seconds)},e.prototype.equals=function(e){return e.seconds===this.seconds&&e.nanos===this.nanos},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanos="+this.nanos+")"},e}(),lt=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new ct(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp.compareTo(e.timestamp)},e.prototype.equals=function(e){return this.timestamp.equals(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanos/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new ct(0,0)),e}();!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(nt||(nt={}));var dt,ht=function(){function e(e,t,n,r,i){void 0===r&&(r=lt.MIN),void 0===i&&(i=m()),this.query=e,this.targetId=t,this.purpose=n,this.snapshotVersion=r,this.resumeToken=i}return e.prototype.update=function(t){return new e(this.query,this.targetId,this.purpose,t.snapshotVersion,t.resumeToken)},e.prototype.equals=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.snapshotVersion.equals(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.equals(e.query)},e}(),pt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(){function e(e){this.fields=e}return e.prototype.equals=function(e){return ae(this.fields,e.fields)},e}(),mt=function(){function e(){}return e.prototype.equals=function(t){return t instanceof e},e.instance=new e,e}(),gt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.equals=function(e){return this.field.equals(e.field)&&this.transform.equals(e.transform)},e}(),yt=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(dt||(dt={}));var vt,_t=function(){function e(e,t){this.updateTime=e,this.exists=t,p(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Se&&e.version.equals(this.updateTime):void 0!==this.exists?this.exists?e instanceof Se:null===e||e instanceof Ee:(p(this.isNone,"Precondition should be empty"),!0)},e.prototype.equals=function(e){return t=this.updateTime,n=e.updateTime,!((null!=t?!n||!t.equals(n):t!==n)||this.exists!==e.exists);var t,n},e.NONE=new e,e}(),bt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&p(e.key.equals(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Se?e.version:lt.MIN},e}(),wt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=dt.Set,i}return pt(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),p(null==t.transformResults,"Transform results received by SetMutation.");var n=bt.getPostMutationVersion(e);return new Se(this.key,n,this.value,{hasLocalMutations:!1})},t.prototype.applyToLocalView=function(e,t){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var n=bt.getPostMutationVersion(e);return new Se(this.key,n,this.value,{hasLocalMutations:!0})},t.prototype.equals=function(e){return e instanceof t&&this.key.equals(e.key)&&this.value.equals(e.value)&&this.precondition.equals(e.precondition)},t}(bt),St=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=dt.Patch,o}return pt(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),p(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return e;var n=bt.getPostMutationVersion(e),r=this.patchDocument(e);return new Se(this.key,n,r,{hasLocalMutations:!1})},t.prototype.applyToLocalView=function(e,t){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var n=bt.getPostMutationVersion(e),r=this.patchDocument(e);return new Se(this.key,n,r,{hasLocalMutations:!0})},t.prototype.equals=function(e){return e instanceof t&&this.key.equals(e.key)&&this.fieldMask.equals(e.fieldMask)&&this.precondition.equals(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Se?e.data:Ve.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){for(var t=0,n=this.fieldMask.fields;t<n.length;t++){var r=n[t],i=this.data.field(r);e=void 0!==i?e.set(r,i):e.delete(r)}return e},t}(bt),Et=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=dt.Transform,r.precondition=_t.exists(!0),r}return pt(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),p(null!=t.transformResults,"Transform results missing for TransformMutation.");var n=t.transformResults;if(!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.transformObject(r.data,n);return new Se(this.key,r.version,i,{hasLocalMutations:!1})},t.prototype.applyToLocalView=function(e,t){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var n=this.requireDocument(e),r=this.localTransformResults(t),i=this.transformObject(n.data,r);return new Se(this.key,n.version,i,{hasLocalMutations:!0})},t.prototype.equals=function(e){return e instanceof t&&this.key.equals(e.key)&&ae(this.fieldTransforms,e.fieldTransforms)&&this.precondition.equals(e.precondition)},t.prototype.requireDocument=function(e){p(e instanceof Se,"Unknown MaybeDocument type "+e);var t=e;return p(t.key.equals(this.key),"Can only transform a document with the same key"),t},t.prototype.localTransformResults=function(e){for(var t=[],n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n].transform;if(!(i instanceof mt))return h("Encountered unknown transform: "+i);t.push(new Be(e))}return t},t.prototype.transformObject=function(e,t){p(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.transform,o=r.field;if(!(i instanceof mt))return h("Encountered unknown transform: "+i);e=e.set(o,t[n])}return e},t}(bt),kt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=dt.Delete,r}return pt(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),p(null==t.transformResults,"Transform results received by DeleteMutation."),new Ee(this.key,lt.MIN)},t.prototype.applyToLocalView=function(e,t){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&p(e.key.equals(this.key),"Can only apply mutation to document with same key"),new Ee(this.key,lt.forDeletedDoc())):e},t.prototype.equals=function(e){return e instanceof t&&this.key.equals(e.key)&&this.precondition.equals(e.precondition)},t}(bt),It=function(){function e(e){this.count=e}return e.prototype.equals=function(e){return e&&e.count===this.count},e}();function Tt(e){switch(e){case v:return h("Treated status OK as error");case _:case b:case S:case C:case D:case O:case T:return!1;case w:case E:case k:case I:case A:case P:case R:case N:case L:return!0;default:return h("Unknown status code: "+e)}}function Ct(e){if(void 0===e)return l("GRPC error has no .code"),b;switch(e){case vt.OK:return v;case vt.CANCELLED:return _;case vt.UNKNOWN:return b;case vt.DEADLINE_EXCEEDED:return S;case vt.RESOURCE_EXHAUSTED:return C;case vt.INTERNAL:return D;case vt.UNAVAILABLE:return O;case vt.UNAUTHENTICATED:return T;case vt.INVALID_ARGUMENT:return w;case vt.NOT_FOUND:return E;case vt.ALREADY_EXISTS:return k;case vt.PERMISSION_DENIED:return I;case vt.FAILED_PRECONDITION:return A;case vt.ABORTED:return P;case vt.OUT_OF_RANGE:return R;case vt.UNIMPLEMENTED:return N;case vt.DATA_LOSS:return L;default:return h("Unknown status code: "+e)}}function At(e){if(void 0===e)return vt.OK;switch(e){case v:return vt.OK;case _:return vt.CANCELLED;case b:return vt.UNKNOWN;case S:return vt.DEADLINE_EXCEEDED;case C:return vt.RESOURCE_EXHAUSTED;case D:return vt.INTERNAL;case O:return vt.UNAVAILABLE;case T:return vt.UNAUTHENTICATED;case w:return vt.INVALID_ARGUMENT;case E:return vt.NOT_FOUND;case k:return vt.ALREADY_EXISTS;case I:return vt.PERMISSION_DENIED;case A:return vt.FAILED_PRECONDITION;case P:return vt.ABORTED;case R:return vt.OUT_OF_RANGE;case N:return vt.UNIMPLEMENTED;case L:return vt.DATA_LOSS;default:return h("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(vt||(vt={}));var Pt=function(){function e(e){this.comparator=e,this.data=new ke(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Rt=new ke(we.comparator);function Nt(){return Rt}var Dt=new ke(we.comparator);function Ot(){return Dt}var Lt=new ke(we.comparator);function Mt(){return Lt}var xt=new Pt(we.comparator);function Ft(){return xt}var qt,Bt=function(){function e(e,t,n){this.snapshotVersion=e,this.targetChanges=t,this.documentUpdates=n}return e.prototype.addDocumentUpdate=function(e){this.documentUpdates=this.documentUpdates.insert(e.key,e)},e.prototype.handleExistenceFilterMismatch=function(e){this.targetChanges[e]={mapping:new Wt,snapshotVersion:lt.MIN,currentStatusUpdate:qt.MarkNotCurrent,resumeToken:m()}},e}();!function(e){e[e.None=0]="None",e[e.MarkNotCurrent=1]="MarkNotCurrent",e[e.MarkCurrent=2]="MarkCurrent"}(qt||(qt={}));var Ut,jt=Ft(),Wt=function(){function e(){this.docs=jt}return Object.defineProperty(e.prototype,"documents",{get:function(){return this.docs},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.docs=this.docs.add(e)},e.prototype.delete=function(e){this.docs=this.docs.delete(e)},e.prototype.equals=function(e){return null!==e&&this.docs.equals(e.docs)},e}(),Vt=function(){function e(){this.addedDocuments=jt,this.removedDocuments=jt}return e.prototype.applyToKeySet=function(e){var t=e;return this.addedDocuments.forEach((function(e){return t=t.add(e)})),this.removedDocuments.forEach((function(e){return t=t.delete(e)})),t},e.prototype.add=function(e){this.addedDocuments=this.addedDocuments.add(e),this.removedDocuments=this.removedDocuments.delete(e)},e.prototype.delete=function(e){this.addedDocuments=this.addedDocuments.delete(e),this.removedDocuments=this.removedDocuments.add(e)},e.prototype.equals=function(e){return null!==e&&this.addedDocuments.equals(e.addedDocuments)&&this.removedDocuments.equals(e.removedDocuments)},e}(),Ht=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Gt=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Ut||(Ut={}));var Kt=function(e,t,n,r){void 0===n&&(n=m()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},$t=function(){function e(e,t,n){this.snapshotVersion=e,this.listenTargets=t,this.existenceFilters={},this.targetChanges={},this.documentUpdates=Nt(),this.frozen=!1,this.pendingTargetResponses=j(n)}return e.prototype.add=function(e){p(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),e instanceof Ht?this.addDocumentChange(e):e instanceof Kt?this.addTargetChange(e):e instanceof Gt?this.addExistenceFilterChange(e):h("Unknown watch change: "+e)},e.prototype.addChanges=function(e){var t=this;p(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),e.forEach((function(e){return t.add(e)}))},e.prototype.createRemoteEvent=function(){var e=this,t=this.targetChanges;return q(this.targetChanges,(function(n){e.isActiveTarget(n)||delete t[n]})),this.frozen=!0,new Bt(this.snapshotVersion,t,this.documentUpdates)},e.prototype.ensureTargetChange=function(e){var t=this.targetChanges[e];return t||(t={currentStatusUpdate:qt.None,snapshotVersion:this.snapshotVersion,mapping:new Vt,resumeToken:m()},this.targetChanges[e]=t),t},e.prototype.isActiveTarget=function(e){return!F(this.pendingTargetResponses,e)&&F(this.listenTargets,e)},e.prototype.addDocumentChange=function(e){for(var t=!1,n=0,r=e.updatedTargetIds;n<r.length;n++){var i=r[n];this.isActiveTarget(i)&&(this.ensureTargetChange(i).mapping.add(e.key),t=!0)}for(var o=0,a=e.removedTargetIds;o<a.length;o++)i=a[o],this.isActiveTarget(i)&&(this.ensureTargetChange(i).mapping.delete(e.key),t=!0);e.newDoc&&t&&(this.documentUpdates=this.documentUpdates.insert(e.key,e.newDoc))},e.prototype.addTargetChange=function(e){var t=this;e.targetIds.forEach((function(n){var r=t.ensureTargetChange(n);switch(e.state){case Ut.NoChange:t.isActiveTarget(n)&&Qt(r,e.resumeToken);break;case Ut.Added:t.recordTargetResponse(n),F(t.pendingTargetResponses,n)||(r.mapping=new Vt,r.currentStatusUpdate=qt.None,delete t.existenceFilters[n]),Qt(r,e.resumeToken);break;case Ut.Removed:t.recordTargetResponse(n),p(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Ut.Current:t.isActiveTarget(n)&&(r.currentStatusUpdate=qt.MarkCurrent,Qt(r,e.resumeToken));break;case Ut.Reset:t.isActiveTarget(n)&&(r.mapping=new Wt,Qt(r,e.resumeToken));break;default:h("Unknown target watch change state: "+e.state)}}))},e.prototype.recordTargetResponse=function(e){var t=(this.pendingTargetResponses[e]||0)-1;0===t?delete this.pendingTargetResponses[e]:this.pendingTargetResponses[e]=t},e.prototype.addExistenceFilterChange=function(e){this.isActiveTarget(e.targetId)&&(this.existenceFilters[e.targetId]=e.existenceFilter)},e}();function Qt(e,t){t.length>0&&(e.resumeToken=t)}var zt,Yt,Zt=((zt={})[rt.ASCENDING.name]="ASCENDING",zt[rt.DESCENDING.name]="DESCENDING",zt),Xt=((Yt={})[Ze.LESS_THAN.name]="LESS_THAN",Yt[Ze.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Yt[Ze.GREATER_THAN.name]="GREATER_THAN",Yt[Ze.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Yt[Ze.EQUAL.name]="EQUAL",Yt);function Jt(e,t){p(!ze(e),t+" is missing")}function en(e){return"number"==typeof e?e:"string"==typeof e?parseInt(e,10):h("can't parse "+e)}var tn=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?b:Ct(e.code);return new M(t,e.message||"")},e.prototype.toInt32Value=function(e){return ze(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return ze(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:e.seconds,nanos:e.nanos}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return ct.fromISOString(e);p(!!e,"Cannot deserialize null or undefined timestamp.");var t=en(e.seconds||"0"),n=e.nanos||0;return new ct(t,n)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(p(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ce.fromBase64String(e)):(p(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),ce.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return p(!!e,"Trying to deserialize version that isn't set"),lt.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=ve.fromString(e);return p(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return p(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),p(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new we(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return 0===e.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ve.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new ve(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ve(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return p(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Ne)return{nullValue:"NULL_VALUE"};if(e instanceof De)return{booleanValue:e.value()};if(e instanceof Me)return{integerValue:""+e.value()};if(e instanceof xe){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Fe?{stringValue:e.value()}:e instanceof Ve?{mapValue:this.toMapValue(e)}:e instanceof He?{arrayValue:this.toArrayValue(e)}:e instanceof qe?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof We?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ue?{bytesValue:this.toBytes(e.value())}:e instanceof je?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:h("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this,n=e.value_type;if(nn(e,n,"nullValue"))return Ne.INSTANCE;if(nn(e,n,"booleanValue"))return De.of(e.booleanValue);if(nn(e,n,"integerValue"))return new Me(en(e.integerValue));if(nn(e,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return xe.NAN;if("Infinity"===e.doubleValue)return xe.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return xe.NEGATIVE_INFINITY}return new xe(e.doubleValue)}if(nn(e,n,"stringValue"))return new Fe(e.stringValue);if(nn(e,n,"mapValue"))return this.fromFields(e.mapValue.fields||{});if(nn(e,n,"arrayValue")){Jt(e.arrayValue,"arrayValue");var r=e.arrayValue.values||[];return new He(r.map((function(e){return t.fromValue(e)})))}if(nn(e,n,"timestampValue"))return Jt(e.timestampValue,"timestampValue"),new qe(this.fromTimestamp(e.timestampValue));if(nn(e,n,"geoPointValue")){Jt(e.geoPointValue,"geoPointValue");var i=e.geoPointValue.latitude||0,o=e.geoPointValue.longitude||0;return new We(new de(i,o))}if(nn(e,n,"bytesValue")){Jt(e.bytesValue,"bytesValue");var a=this.fromBlob(e.bytesValue);return new Ue(a)}if(nn(e,n,"referenceValue")){Jt(e.referenceValue,"referenceValue");var s=this.fromResourceName(e.referenceValue),u=new fe(s.get(1),s.get(3)),c=new we(this.extractLocalPathFromResourceName(s));return new je(u,c)}return h("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return p(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e){return new Se(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasLocalMutations:!1})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=e,r=Ve.EMPTY;return B(n,(function(e,n){r=r.set(new be([e]),t.fromValue(n))})),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){p(!!e.found,"Tried to deserialize a found document from a missing document."),Jt(e.found.name,"doc.found.name"),Jt(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new Se(t,n,r,{hasLocalMutations:!1})},e.prototype.fromMissing=function(e){p(!!e.missing,"Tried to deserialize a missing document from a found document."),p(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Ee(t,n)},e.prototype.fromMaybeDocument=function(e){var t=e.result;return nn(e,t,"found")?this.fromFound(e):nn(e,t,"missing")?this.fromMissing(e):h("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Ut.Added:return"ADD";case Ut.Current:return"CURRENT";case Ut.NoChange:return"NO_CHANGE";case Ut.Removed:return"REMOVE";case Ut.Reset:return"RESET";default:return h("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Gt)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Ht){if(e.newDoc instanceof Se){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Ee)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Kt){var n=void 0;return e.cause&&(n={code:At(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return h("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=e.response_type;if(nn(e,n,"targetChange")){Jt(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new Kt(r,i,o,s||null)}else if(nn(e,n,"documentChange")){Jt(e.documentChange,"documentChange"),Jt(e.documentChange.document,"documentChange.name"),Jt(e.documentChange.document.name,"documentChange.document.name"),Jt(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),d=this.fromFields(u.document.fields||{}),p=new Se(c,l,d,{hasLocalMutations:!1}),f=u.targetIds||[],m=u.removedTargetIds||[];t=new Ht(f,m,p.key,p)}else if(nn(e,n,"documentDelete")){Jt(e.documentDelete,"documentDelete"),Jt(e.documentDelete.document,"documentDelete.document");var g=e.documentDelete;c=this.fromName(g.document),l=g.readTime?this.fromVersion(g.readTime):lt.forDeletedDoc(),p=new Ee(c,l),m=g.removedTargetIds||[],t=new Ht([],m,p.key,p)}else if(nn(e,n,"documentRemove")){Jt(e.documentRemove,"documentRemove"),Jt(e.documentRemove.document,"documentRemove");var y=e.documentRemove;c=this.fromName(y.document),m=y.removedTargetIds||[],t=new Ht([],m,c,null)}else{if(!nn(e,n,"filter"))return h("Unknown change type "+JSON.stringify(e));Jt(e.filter,"filter"),Jt(e.filter.targetId,"filter.targetId");var v=e.filter,_=v.count||0,b=new It(_),w=v.targetId;t=new Gt(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Ut.NoChange:"ADD"===e?Ut.Added:"REMOVE"===e?Ut.Removed:"CURRENT"===e?Ut.Current:"RESET"===e?Ut.Reset:h("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!nn(e,e.response_type,"targetChange"))return lt.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?lt.MIN:t.readTime?this.fromVersion(t.readTime):lt.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof wt)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof kt)t={delete:this.toName(e.key)};else if(e instanceof St)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Et))return h("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):_t.NONE;if(e.update){Jt(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new St(r,i,o,n)}return new wt(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new kt(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return p(!0===n.exists,'Transforms only support precondition "exists == true"'),new Et(r,a)}return h("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return p(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:h("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?_t.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?_t.exists(e.exists):_t.NONE},e.prototype.fromWriteResult=function(e){var t=this,n=e.updateTime?this.fromVersion(e.updateTime):null,r=null;return e.transformResults&&e.transformResults.length>0&&(r=e.transformResults.map((function(e){return t.fromValue(e)}))),new yt(n,r)},e.prototype.fromWriteResults=function(e){var t=this;return(e||[]).map((function(e){return t.fromWriteResult(e)}))},e.prototype.toFieldTransform=function(e){return p(e.transform instanceof mt,"Unknown transform: "+e.transform),{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"}},e.prototype.fromFieldTransform=function(e){p("REQUEST_TIME"===e.setToServerValue,"Unknown transform proto: "+JSON.stringify(e));var t=be.fromServerFormat(e.fieldPath);return new gt(t,mt.instance)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;p(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Ye.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}};if(e.path.isEmpty())t.parent=this.toQueryPath(ve.EMPTY_PATH);else{var n=e.path;p(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0;if(r>0){p(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];t=t.child(i.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var s=null;n.limit&&(s=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Ye(t,a,o,s,u,c)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case nt.Listen:return null;case nt.ExistenceFilterMismatch:return"existence-filter-mismatch";case nt.LimboResolution:return"limbo-document";default:return h("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof Xe?t.toRelationFilter(e):t.toUnaryFilter(e)}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromRelationFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):h("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new it(r,n)},e.prototype.toDirection=function(e){return Zt[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return rt.ASCENDING;case"DESCENDING":return rt.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return Xt[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Ze.EQUAL;case"GREATER_THAN":return Ze.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Ze.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Ze.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Ze.LESS_THAN_OR_EQUAL;case"OPERATOR_UNSPECIFIED":return h("Unspecified relation");default:return h("Unknown relation")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return be.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new ot(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.toRelationFilter=function(e){return e instanceof Xe?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:h("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromRelationFilter=function(e){return new Xe(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryFilter=function(e){return e instanceof et?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof Je?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:h("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return new et(t);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return new Je(n);case"OPERATOR_UNSPECIFIED":return h("Unspecified filter");default:return h("Unknown filter")}},e.prototype.toDocumentMask=function(e){return{fieldPaths:e.fields.map((function(e){return e.canonicalString()}))}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return be.fromServerFormat(e)}));return new ft(t)},e}();function nn(e,t,n){return t===n||!t&&n in e}var rn=n(3582),on=function(){function e(e){this.wrappedOnOpen=null,this.wrappedOnClose=null,this.wrappedOnMessage=null,this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){p(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){p(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){p(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){p(null!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){p(null!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){p(null!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),an="Connection",sn={BatchGetDocuments:"batchGet",Commit:"commit"},un="gl-js/ fire/"+o,cn=function(){function e(e){this.databaseId=e.databaseId,this.pool=new rn.XhrIoPool;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=un,e["google-cloud-resource-prefix"]="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,a){r.pool.getObject((function(s){s.listenOnce(rn.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case rn.ErrorCode.NO_ERROR:var t=s.getResponseJson();c(an,"XHR received:",JSON.stringify(t)),o(t);break;case rn.ErrorCode.TIMEOUT:c(an,'RPC "'+e+'" timed out'),a(new M(S,"Request time out"));break;case rn.ErrorCode.HTTP_ERROR:var n=s.getStatus();c(an,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0?a(new M(function(e){switch(e){case 200:return v;case 400:return w;case 401:return T;case 403:return I;case 404:return E;case 409:return P;case 416:return R;case 429:return C;case 499:return _;case 500:return b;case 501:return N;case 503:return O;case 504:return S;default:return e>=200&&e<300?v:e>=400&&e<500?A:e>=500&&e<600?D:b}}(n),"Server responded with status "+s.getStatusText())):(c(an,'RPC "'+e+'" failed'),a(new M(O,"Connection failed.")));break;default:h('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{c(an,'RPC "'+e+'" completed.'),r.pool.releaseObject(s)}}));var u=JSON.stringify(t);c(an,"XHR sending: ",i+" "+u);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),s.send(i,"POST",u,l,15)}))}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",e,"/channel"],r=(0,rn.createWebChannelTransport)(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},httpHeadersOverwriteParam:"$httpHeaders",sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,t);var o=n.join("");c(an,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,u=!1,l=new on({sendFn:function(e){u?c(an,"Not sending because WebChannel is closed:",e):(s||(c(an,"Opening WebChannel transport."),a.open(),s=!0),c(an,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),d=function(e,t){a.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(rn.WebChannel.EventType.OPEN,(function(){u||c(an,"WebChannel transport opened.")})),d(rn.WebChannel.EventType.CLOSE,(function(){u||(u=!0,c(an,"WebChannel transport closed"),l.callOnClose())})),d(rn.WebChannel.EventType.ERROR,(function(e){u||(u=!0,c(an,"WebChannel transport errored:",e),l.callOnClose(new M(O,"The operation could not be completed")))})),d(rn.WebChannel.EventType.MESSAGE,(function(e){if(!u){var t=e.data[0];p(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){c(an,"WebChannel received error:",n);var r=n.status,i=function(e){var t=vt[e];if(void 0!==t)return Ct(t)}(r),o=n.message;void 0===i&&(i=D,o="Unknown error status: "+r+" with message "+n.message),u=!0,l.callOnClose(new M(i,o)),a.close()}else c(an,"WebChannel received:",t),l.callOnMessage(t)}})),setTimeout((function(){l.callOnOpen()}),0),l},e.prototype.makeUrl=function(e){var t=sn[e];p(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),ln=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return e.prototype.loadConnection=function(e){return Promise.resolve(new cn(e))},e.prototype.newSerializer=function(e){return new tn(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();f.setPlatform(new ln);var dn,hn,pn,fn=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];G("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(K("FieldPath","string",n,e[n]),0===e[n].length)throw new M(w,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(e)}return e.documentId=function(){return e._DOCUMENT_ID},e._DOCUMENT_ID=new e(be.keyField().canonicalString()),e}(),mn=new RegExp("[~\\*/\\[\\]]");!function(e){e[e.Unknown=0]="Unknown",e[e.Healthy=1]="Healthy",e[e.Failed=2]="Failed"}(dn||(dn={})),function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(hn||(hn={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(pn||(pn={}));var gn,yn=function(){function e(){this.changeMap=new ke(we.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==hn.Added&&n.type===hn.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===hn.Metadata&&n.type!==hn.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===hn.Modified&&n.type===hn.Modified?this.changeMap=this.changeMap.insert(t,{type:hn.Modified,doc:e.doc}):e.type===hn.Modified&&n.type===hn.Added?this.changeMap=this.changeMap.insert(t,{type:hn.Added,doc:e.doc}):e.type===hn.Removed&&n.type===hn.Added?this.changeMap=this.changeMap.remove(t):e.type===hn.Removed&&n.type===hn.Modified?this.changeMap=this.changeMap.insert(t,{type:hn.Removed,doc:n.doc}):e.type===hn.Added&&n.type===hn.Removed?this.changeMap=this.changeMap.insert(t,{type:hn.Modified,doc:e.doc}):h("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),vn=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||we.comparator(t.key,n.key)}:function(e,t){return we.comparator(e.key,t.key)},this.keyedMap=Ot(),this.sortedSet=new ke(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.prevDoc=function(e){p(this.has(e),"Trying to get a previous document to non-existing key: "+e);var t=this.keyedMap.get(e);return this.sortedSet.getPredecessorKey(t)},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.equals=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.equals(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),_n=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.equals(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].equals(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].equals(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){B(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return U(this.inner)},e}(),bn=function(){this.listeners=[]},wn=function(){function e(e){this.syncEngine=e,this.queries=new _n((function(e){return e.canonicalId()})),this.onlineState=dn.Unknown,this.syncEngine.subscribe(this.onChange.bind(this),this.onError.bind(this))}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new bn,this.queries.set(t,r)),r.listeners.push(e),e.onOnlineStateChanged(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){var t=e.query,n=!1,r=this.queries.get(t);if(r){var i=r.listeners.indexOf(e);i>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length)}return n?(this.queries.delete(t),this.syncEngine.unlisten(t)):Promise.resolve()},e.prototype.onChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++)s[a].onViewSnapshot(r);o.viewSnap=r}}},e.prototype.onError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChanged=function(e){this.onlineState=e,this.queries.forEach((function(t,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].onOnlineStateChanged(e)}))},e}(),Sn=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=dn.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(p(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeDocumentMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==hn.Metadata&&t.push(i)}e={query:e.query,docs:e.docs,oldDocs:e.oldDocs,docChanges:t,fromCache:e.fromCache,hasPendingWrites:e.hasPendingWrites,syncStateChanged:e.syncStateChanged}}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.onOnlineStateChanged=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(p(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==dn.Failed;return this.options.waitForSyncWhenOnline&&n?(p(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===dn.Failed},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeQueryMetadataChanges},e.prototype.raiseInitialEvent=function(t){p(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t={query:t.query,docs:t.docs,oldDocs:vn.emptySet(t.docs),docChanges:e.getInitialViewChanges(t),fromCache:t.fromCache,hasPendingWrites:t.hasPendingWrites,syncStateChanged:!0},this.raisedInitialEvent=!0,this.queryObserver.next(t)},e.getInitialViewChanges=function(e){var t=[];return e.docs.forEach((function(e){t.push({type:hn.Added,doc:e})})),t},e}(),En=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=null,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&h("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return t.reduce((function(e,t,n){return e.next((function(){return t}))}),e.resolve())},e.map=function(t){var n=[],r=!0,i=e.resolve(null);return t.reduce((function(e,t){return e.next((function(e){return r||n.push(e),r=!1,t}))}),i).next((function(e){return n.push(e),n}))},e}(),kn=function(){function e(){this.isEager=!0,this.sources=[],this.potentialGarbage=Ft()}return e.prototype.addGarbageSource=function(e){this.sources.push(e),e.setGarbageCollector(this)},e.prototype.removeGarbageSource=function(e){this.sources.splice(this.sources.indexOf(e),1),e.setGarbageCollector(null)},e.prototype.addPotentialGarbageKey=function(e){this.potentialGarbage=this.potentialGarbage.add(e)},e.prototype.collectGarbage=function(e){var t=this,n=[],r=Ft();return this.potentialGarbage.forEach((function(i){var o=t.documentHasAnyReferences(e,i);n.push(o.next((function(e){return e||(r=r.add(i)),En.resolve()})))})),this.potentialGarbage=Ft(),En.waitFor(n).next((function(){return r}))},e.prototype.documentHasAnyReferences=function(e,t){var n=En.resolve(!1);return this.sources.map((function(n){return function(){return n.containsKey(e,t)}})).reduce((function(e,t){return e.next((function(e){return e?En.resolve(!0):t()}))}),n)},e}(),In=function(){function e(e,t,n){this.query=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t){for(var n=Ft(),r=Ft(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case hn.Added:n=n.add(a.doc.key);break;case hn.Removed:r=r.add(a.doc.key)}}return new e(t.query,n,r)},e}(),Tn=function(){function e(){this.refsByKey=new Pt(Cn.compareByKey),this.refsByTarget=new Pt(Cn.compareByTargetId),this.garbageCollector=null}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Cn(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new Cn(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=we.EMPTY,r=new Cn(n,e),i=new Cn(n,e+1);this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e)}))},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e),null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(e.key)},e.prototype.referencesForId=function(e){var t=we.EMPTY,n=new Cn(t,e),r=new Cn(t,e+1),i=Ft();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.setGarbageCollector=function(e){this.garbageCollector=e},e.prototype.containsKey=function(e,t){var n=new Cn(t,0),r=this.refsByKey.firstAfterOrEqual(n);return En.resolve(null!==r&&t.equals(r.key))},e}(),Cn=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return we.comparator(e.key,t.key)||oe(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return oe(e.targetOrBatchId,t.targetOrBatchId)||we.comparator(e.key,t.key)},e}();!function(e){e[e.LocalStore=0]="LocalStore",e[e.SyncEngine=1]="SyncEngine"}(gn||(gn={}));var An=function(){function e(e,t){void 0===t&&(t=0),this.generatorId=e;var n=t>>1<<1,r=t-n;this.previousId=r>=e?n|this.generatorId:(n|this.generatorId)-2}return e.prototype.next=function(){return this.previousId+=2,this.previousId},e.forLocalStore=function(t){return void 0===t&&(t=0),new e(gn.LocalStore,t)},e.forSyncEngine=function(){return new e(gn.SyncEngine)},e}(),Pn=function(e){this.key=e},Rn=function(e){this.key=e},Nn=function(){function e(e,t){this.query=e,this.syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Ft(),this.mutatedKeys=Ft(),this.documentSet=new vn(e.docComparator.bind(e))}return e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new yn,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),l=t instanceof Se?t:null;if(l&&(p(e.equals(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null),l?(a=a.add(l),o=l.hasLocalMutations?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)),c&&l){var d=c.data.equals(l.data);d&&c.hasLocalMutations===l.hasLocalMutations||(d?r.track({type:hn.Metadata,doc:l}):r.track({type:hn.Modified,doc:l}),u&&n.query.docComparator(l,u)>0&&(s=!0))}else!c&&l?r.track({type:hn.Added,doc:l}):c&&!l&&(r.track({type:hn.Removed,doc:c}),u&&(s=!0))})),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),r.track({type:hn.Removed,doc:c})}return p(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.applyChanges=function(e,t){var n=this;p(!e.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var i=e.changeSet.getChanges();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case hn.Added:return 1;case hn.Modified:case hn.Metadata:return 2;case hn.Removed:return 0;default:return h("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||n.query.docComparator(e.doc,t.doc)}));var o=this.applyTargetChange(t),a=0===this.limboDocuments.size&&this.current?pn.Synced:pn.Local,s=a!==this.syncState;return this.syncState=a,0!==i.length||s?{snapshot:{query:this.query,docs:e.documentSet,oldDocs:r,docChanges:i,fromCache:a===pn.Local,syncStateChanged:s,hasPendingWrites:!e.mutatedKeys.isEmpty()},limboChanges:o}:{limboChanges:o}},e.prototype.shouldBeInLimbo=function(e){return!this.syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;if(e){var n=e.mapping;switch(n instanceof Wt?this.syncedDocuments=n.documents:n instanceof Vt&&(this.syncedDocuments=n.applyToKeySet(this.syncedDocuments)),e.currentStatusUpdate){case qt.MarkCurrent:this.current=!0;break;case qt.MarkNotCurrent:this.current=!1;break;case qt.None:break;default:h("Unknown current status update: "+e.currentStatusUpdate)}}var r=this.limboDocuments;this.limboDocuments=Ft(),this.current&&this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var i=[];return r.forEach((function(e){t.limboDocuments.has(e)||i.push(new Rn(e))})),this.limboDocuments.forEach((function(e){r.has(e)||i.push(new Pn(e))})),i},e}(),Dn="SyncEngine",On=function(e,t,n,r){this.query=e,this.targetId=t,this.resumeToken=n,this.view=r},Ln=function(){function e(e,t,n){this.localStore=e,this.remoteStore=t,this.currentUser=n,this.viewHandler=null,this.errorHandler=null,this.queryViewsByQuery=new _n((function(e){return e.canonicalId()})),this.queryViewsByTarget={},this.limboTargetsByKey=new ke(we.comparator),this.limboKeysByTarget={},this.limboDocumentRefs=new Tn,this.limboCollector=new kn,this.mutationUserCallbacks={},this.targetIdGenerator=An.forSyncEngine()}return e.prototype.subscribe=function(e,t){p(null!==e&&null!==t,"View and error handlers cannot be null"),p(null===this.viewHandler&&null===this.errorHandler,"SyncEngine already has a subscriber."),this.viewHandler=e,this.errorHandler=t,this.limboCollector.addGarbageSource(this.limboDocumentRefs)},e.prototype.listen=function(e){var t=this;return this.assertSubscribed("listen()"),p(!this.queryViewsByQuery.has(e),"We already listen to the query: "+e),this.localStore.allocateQuery(e).then((function(n){return t.localStore.executeQuery(e).then((function(r){return t.localStore.remoteDocumentKeys(n.targetId).then((function(i){var o=new Nn(e,i),a=o.computeDocChanges(r),s=o.applyChanges(a);p(0===s.limboChanges.length,"View returned limbo docs before target ack from the server."),p(!!s.snapshot,"applyChanges for new view should always return a snapshot");var u=new On(e,n.targetId,n.resumeToken,o);t.queryViewsByQuery.set(e,u),t.queryViewsByTarget[n.targetId]=u,t.viewHandler([s.snapshot]),t.remoteStore.listen(n)}))})).then((function(){return n.targetId}))}))},e.prototype.unlisten=function(e){var t=this;this.assertSubscribed("unlisten()");var n=this.queryViewsByQuery.get(e);return p(!!n,"Trying to unlisten on query not found:"+e),this.localStore.releaseQuery(e).then((function(){return t.remoteStore.unlisten(n.targetId),t.removeAndCleanupQuery(n).then((function(){return t.localStore.collectGarbage()}))}))},e.prototype.write=function(e,t){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then((function(e){return n.addMutationCallback(e.batchId,t),n.emitNewSnapsAndNotifyLocalStore(e.changes)})).then((function(){return n.remoteStore.fillWritePipeline()}))},e.prototype.wrapUpdateFunctionError=function(e){return e},e.prototype.runTransaction=function(e,t){var n=this;void 0===t&&(t=5),p(t>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var t=e(r);return!ze(t)&&t.catch&&t.then?t.catch((function(e){return Promise.reject(n.wrapUpdateFunctionError(e))})):Promise.reject(Error("Transaction callback must return a Promise"))}catch(e){return Promise.reject(n.wrapUpdateFunctionError(e))}}().then((function(i){return r.commit().then((function(){return i})).catch((function(r){return 0===t?Promise.reject(r):n.runTransaction(e,t-1)}))}))},e.prototype.applyRemoteEvent=function(e){var t=this;return this.assertSubscribed("applyRemoteEvent()"),q(e.targetChanges,(function(n,r){var i=t.limboKeysByTarget[n];i&&r.currentStatusUpdate===qt.MarkCurrent&&!e.documentUpdates.get(i)&&e.addDocumentUpdate(new Ee(i,e.snapshotVersion))})),this.localStore.applyRemoteEvent(e).then((function(n){return t.emitNewSnapsAndNotifyLocalStore(n,e)}))},e.prototype.rejectListen=function(e,t){var n=this;this.assertSubscribed("rejectListens()");var r=this.limboKeysByTarget[e];if(r){this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboKeysByTarget[e];var i=new ke(we.comparator);i=i.insert(r,new Ee(r,lt.forDeletedDoc()));var o=new Bt(lt.MIN,{},i);return this.applyRemoteEvent(o)}var a=this.queryViewsByTarget[e];return p(!!a,"Unknown targetId: "+e),this.localStore.releaseQuery(a.query).then((function(){return n.removeAndCleanupQuery(a).then((function(){n.errorHandler(a.query,t)}))}))},e.prototype.applySuccessfulWrite=function(e){var t=this;return this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(e.batch.batchId,null),this.localStore.acknowledgeBatch(e).then((function(e){return t.emitNewSnapsAndNotifyLocalStore(e)}))},e.prototype.rejectFailedWrite=function(e,t){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.localStore.rejectBatch(e).then((function(e){return n.emitNewSnapsAndNotifyLocalStore(e)}))},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new ke(oe)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(p(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){return this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.limboDocumentRefs.removeReferencesForId(e.targetId),this.gcLimboDocuments()},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Pn?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Rn?(c(Dn,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e)):h("Unknown limbo change: "+JSON.stringify(i))}return this.gcLimboDocuments()},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){c(Dn,"New document in limbo: "+t);var n=this.targetIdGenerator.next(),r=Ye.atPath(t.path);this.limboKeysByTarget[n]=t,this.remoteStore.listen(new ht(r,n,nt.Listen)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.gcLimboDocuments=function(){var e=this;return this.limboCollector.collectGarbage(null).next((function(t){t.forEach((function(t){var n=e.limboTargetsByKey.get(t);null!==n&&(e.remoteStore.unlisten(n),e.limboTargetsByKey=e.limboTargetsByKey.remove(t),delete e.limboKeysByTarget[n])}))})).toPromise()},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){var n=this,r=[],i=[],o=[];return this.queryViewsByQuery.forEach((function(a,s){o.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?n.localStore.executeQuery(s.query).then((function(e){return s.view.computeDocChanges(e,t)})):t})).then((function(e){var o=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,o);return n.updateTrackedLimbos(s.targetId,a.limboChanges).then((function(){if(a.snapshot){r.push(a.snapshot);var e=In.fromSnapshot(a.snapshot);i.push(e)}}))})))})),Promise.all(o).then((function(){return n.viewHandler(r),n.localStore.notifyLocalViewChanges(i)})).then((function(){return n.localStore.collectGarbage()}))},e.prototype.assertSubscribed=function(e){p(null!==this.viewHandler&&null!==this.errorHandler,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleUserChange=function(e){var t=this;return this.currentUser=e,this.localStore.handleUserChange(e).then((function(e){return t.emitNewSnapsAndNotifyLocalStore(e)})).then((function(){return t.remoteStore.handleUserChange(e)}))},e}(),Mn=-1,xn=function(){function e(e,t,n){this.batchId=e,this.localWriteTime=t,this.mutations=n}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&p(t.key.equals(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;p(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.equals(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&p(t.key.equals(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0;n<this.mutations.length;n++){var r=this.mutations[n];r.key.equals(e)&&(t=r.applyToLocalView(t,this.localWriteTime))}return t},e.prototype.keys=function(){for(var e=Ft(),t=0,n=this.mutations;t<n.length;t++){var r=n[t];e=e.add(r.key)}return e},e.prototype.equals=function(e){return this.batchId===e.batchId&&ae(this.mutations,e.mutations)},e.prototype.isTombstone=function(){return 0===this.mutations.length},e.prototype.toTombstone=function(){return new e(this.batchId,this.localWriteTime,[])},e}(),Fn=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){p(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Mt(),a=t.mutations,s=0;s<a.length;s++){var u=r[s].version;null===u&&(u=n),o=o.insert(a[s].key,u)}return new e(t,n,r,i,o)},e}(),qn="";function Bn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=jn(t)),t=Un(e.get(n),t);return jn(t)}function Un(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case qn:n+="";break;default:n+=o}}return n}function jn(e){return e+qn+""}function Wn(e){var t=e.length;if(p(t>=2,"Invalid path "+e),2===t)return p(e.charAt(0)===qn&&""===e.charAt(1),"Non-empty path "+e+" had length 2"),ve.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(qn,o);switch((a<0||a>n)&&h('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:h('Invalid encoded resource path: "'+e+'"')}o=a+2}return new ve(r)}function Vn(e,t){p(0===t,"Unexpected upgrade from version "+t),e.createObjectStore(Kn.store,{keyPath:Kn.keyPath}),e.createObjectStore($n.store,{keyPath:$n.keyPath}),e.createObjectStore(Xn.store,{keyPath:Xn.keyPath}).createIndex(Xn.documentTargetsIndex,Xn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Zn.store,{keyPath:Zn.keyPath}).createIndex(Zn.queryTargetsIndexName,Zn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Qn.store),e.createObjectStore(Yn.store),e.createObjectStore(Gn.store),e.createObjectStore(Jn.store)}var Hn=function(e,t){this.seconds=e,this.nanos=t},Gn=function(){function e(e,t){this.ownerId=e,this.leaseTimestampMs=t}return e.store="owner",e}(),Kn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),$n=function(){function e(e,t,n,r){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.mutations=r}return e.store="mutations",e.keyPath=["userId","batchId"],e}(),Qn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Bn(t)]},e.key=function(e,t,n){return[e,Bn(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),zn=function(e,t){this.path=e,this.readTime=t},Yn=function(){function e(e,t){this.noDocument=e,this.document=t}return e.store="remoteDocuments",e}(),Zn=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),Xn=function(){function e(e,t){this.targetId=e,this.path=t}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),Jn=function(){function e(e,t,n){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),er=[Kn.store,$n.store,Qn.store,Yn.store,Zn.store,Gn.store,Jn.store,Xn.store],tr="SimpleDb",nr=function(){function e(e){this.db=e}return e.openOrCreate=function(t,n,r){return p(e.isAvailable(),"IndexedDB not supported in current environment."),c(tr,"Opening database:",t),new En((function(i,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){var n=t.target.result;i(new e(n))},a.onerror=function(e){o(e.target.error)},a.onupgradeneeded=function(e){c(tr,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;r(n,e.oldVersion)}})).toPromise()},e.delete=function(e){return c(tr,"Removing database:",e),ar(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;var e=window.navigator.userAgent;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)},e.prototype.runTransaction=function(e,t,n){var r=new ir(this.db,e,t),i=n(r).catch((function(e){return r.abort(),En.reject(e)})).toPromise();return r.completionPromise.then((function(){return i}))},e.prototype.close=function(){this.db.close()},e}(),rr=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return ar(this.dbCursor.delete())},e}(),ir=function(){function e(e,t,n){var r=this;this.aborted=!1,this.transaction=e.transaction(n,t),this.completionPromise=new Promise((function(e,t){r.transaction.onabort=r.transaction.oncomplete=function(t){e()},r.transaction.onerror=function(e){t(e.target.error)}}))}return e.prototype.abort=function(){this.aborted||(c(tr,"Aborting transaction."),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return p(!!t,"Object store not part of transaction: "+e),new or(t)},e}(),or=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(c(tr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(c(tr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ar(n)},e.prototype.get=function(e){var t=this;return ar(this.store.get(e)).next((function(n){return void 0===n&&(n=null),c(tr,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return c(tr,"DELETE",this.store.name,e),ar(this.store.delete(e))},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){c(tr,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateCursor=function(e,t){var n=[];return new En((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new rr(i),a=t(i.primaryKey,i.value,o);a instanceof En&&n.push(a),o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return En.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(p(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ar(e){return new En((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){n(e.target.error)}}))}var sr=function(){function e(e,t){this.userId=e,this.serializer=t,this.garbageCollector=null}return e.forUser=function(t,n){return p(""!==t.uid,"UserID must not be an empty string."),new e(t.isUnauthenticated()?"":t.uid,n)},e.prototype.start=function(t){var n=this;return e.loadNextBatchIdFromDb(t).next((function(e){return n.nextBatchId=e,dr(t).get(n.userId)})).next((function(e){return e||(e=new Kn(n.userId,Mn,"")),n.metadata=e,n.metadata.lastAcknowledgedBatchId>=n.nextBatchId?n.checkEmpty(t).next((function(e){return p(e,"Reset nextBatchID is only possible when the queue is empty"),n.metadata.lastAcknowledgedBatchId=Mn,dr(t).put(n.metadata)})):En.resolve()}))},e.loadNextBatchIdFromDb=function(e){var t=Mn;return cr(e).iterate({reverse:!0},(function(e,n,r){var i,o,a=e[0];if(e[1]>t&&(t=n.batchId),""===a)r.done();else{var s=(o=(i=a).length-1,0===i.length?"":"\0"===i.charAt(o)?i.substring(0,o):i.substring(0,o)+String.fromCharCode(i.charCodeAt(o)-1));r.skip([s])}})).next((function(){return t+1}))},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound(this.keyForBatchId(Number.NEGATIVE_INFINITY),this.keyForBatchId(Number.POSITIVE_INFINITY));return cr(e).iterate({range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.getNextBatchId=function(e){return En.resolve(this.nextBatchId)},e.prototype.getHighestAcknowledgedBatchId=function(e){return En.resolve(this.metadata.lastAcknowledgedBatchId)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId;return p(r>this.metadata.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),this.metadata.lastAcknowledgedBatchId=r,this.metadata.lastStreamToken=ur(n),dr(e).put(this.metadata)},e.prototype.getLastStreamToken=function(e){return En.resolve(this.metadata.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.metadata.lastStreamToken=ur(t),dr(e).put(this.metadata)},e.prototype.addMutationBatch=function(e,t,n){var r=this,i=this.nextBatchId;this.nextBatchId++;var o=new xn(i,t,n),a=this.serializer.toDbMutationBatch(this.userId,o);return cr(e).put(a).next((function(){for(var t=0,o=n;t<o.length;t++){var a=o[t],s=(Bn(a.key.path),Qn.key(r.userId,a.key.path,i));lr(e).put(s,Qn.PLACEHOLDER)}return En.waitFor([])})).next((function(){return o}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return cr(e).get(this.keyForBatchId(t)).next((function(e){return e?n.serializer.fromDbMutationBatch(e):null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=IDBKeyRange.lowerBound(this.keyForBatchId(t+1)),i=null;return cr(e).iterate({range:r},(function(e,r,o){r.userId===n.userId&&(p(r.batchId>t,"Should have found mutation after "+t),i=n.serializer.fromDbMutationBatch(r)),o.done()})).next((function(){return i}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound(this.keyForBatchId(Mn),this.keyForBatchId(Number.POSITIVE_INFINITY));return cr(e).loadAll(n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesThroughBatchId=function(e,t){var n=this,r=IDBKeyRange.bound(this.keyForBatchId(Mn),this.keyForBatchId(t));return cr(e).loadAll(r).next((function(e){return e.map((function(e){return n.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Qn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return lr(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Wn(u);if(s===n.userId&&t.path.equals(l)){var d=n.keyForBatchId(c);return cr(e).get(d).next((function(e){null===e&&h("Dangling document-mutation reference found: "+r+" which points to "+d),o.push(n.serializer.fromDbMutationBatch(e))}))}a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;p(!t.isDocumentQuery(),"Document queries shouldn't go down this path");var r=t.path,i=r.length+1,o=Qn.prefixForPath(this.userId,r),a=(o[1],IDBKeyRange.lowerBound(o)),s=new Pt(oe);return lr(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Wn(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){var t=[],r=[];return s.forEach((function(i){var o=n.keyForBatchId(i);r.push(cr(e).get(o).next((function(e){null===e&&h("Dangling document-mutation reference found, which points to "+o),t.push(n.serializer.fromDbMutationBatch(e))})))})),En.waitFor(r).next((function(){return t}))}))},e.prototype.removeMutationBatches=function(e,t){for(var n=cr(e),r=lr(e),i=[],o=function(e){var t=IDBKeyRange.only(a.keyForBatchId(e.batchId)),o=0,s=n.iterate({range:t},(function(e,t,n){return o++,n.delete()}));i.push(s.next((function(){p(1===o,"Dangling document-mutation reference found: Missing batch "+e.batchId)})));for(var u=0,c=e.mutations;u<c.length;u++){var l=c[u],d=Qn.key(a.userId,l.key.path,e.batchId);i.push(r.delete(d)),null!==a.garbageCollector&&a.garbageCollector.addPotentialGarbageKey(l.key)}},a=this,s=0,u=t;s<u.length;s++)o(u[s]);return En.waitFor(i)},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return En.resolve();var r=IDBKeyRange.lowerBound(Qn.prefixForUser(t.userId)),i=[];return lr(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Wn(e[1]);i.push(o)}else r.done()})).next((function(){p(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.setGarbageCollector=function(e){this.garbageCollector=e},e.prototype.containsKey=function(e,t){var n=this,r=Qn.prefixForPath(this.userId,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return lr(e).iterate({range:o,keysOnly:!0},(function(e,t,r){var o=e[0],s=e[1];e[2],o===n.userId&&s===i&&(a=!0),r.done()})).next((function(){return a}))},e.prototype.keyForBatchId=function(e){return[this.userId,e]},e}();function ur(e){return p("string"==typeof e,"Persisting non-string stream token not supported."),e}function cr(e){return hr(e,$n.store)}function lr(e){return hr(e,Qn.store)}function dr(e){return hr(e,Kn.store)}function hr(e,t){return e instanceof ir?e.store(t):h("Invalid transaction object provided!")}var pr=function(){function e(e){this.serializer=e,this.lastRemoteSnapshotVersion=lt.MIN,this.metadata=new Jn(0,0,lt.MIN.toTimestamp()),this.garbageCollector=null}return e.prototype.start=function(e){var t=this;return mr(e).get(Jn.key).next((function(e){if(null!==e){t.metadata=e;var n=e.lastRemoteSnapshotVersion;t.lastRemoteSnapshotVersion=lt.fromTimestamp(new ct(n.seconds,n.nanos))}return En.resolve()}))},e.prototype.getHighestTargetId=function(){return this.metadata.highestTargetId},e.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},e.prototype.setLastRemoteSnapshotVersion=function(e,t){return this.lastRemoteSnapshotVersion=t,this.metadata.lastRemoteSnapshotVersion=t.toTimestamp(),mr(e).put(Jn.key,this.metadata)},e.prototype.addQueryData=function(e,t){var n=this,r=t.targetId,i=fr(e).put(this.serializer.toDbTarget(t));return r>this.metadata.highestTargetId?(this.metadata.highestTargetId=r,i.next((function(){return mr(e).put(Jn.key,n.metadata)}))):i},e.prototype.removeQueryData=function(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){fr(e).delete(t.targetId)}))},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return fr(e).iterate({range:i,index:Zn.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.equals(a.query)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=[],i=gr(e);return t.forEach((function(e){var t=Bn(e.path);r.push(i.put(new Xn(n,t)))})),En.waitFor(r)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=[],o=gr(e);return t.forEach((function(e){var t=Bn(e.path);i.push(o.delete([n,t])),null!==r.garbageCollector&&r.garbageCollector.addPotentialGarbageKey(e)})),En.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=gr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return this.notifyGCForRemovedKeys(e,r).next((function(){return n.delete(r)}))},e.prototype.notifyGCForRemovedKeys=function(e,t){var n=this,r=gr(e);return null!==this.garbageCollector&&this.garbageCollector.isEager?r.iterate({range:t,keysOnly:!0},(function(e,t,r){var i=Wn(e[1]),o=new we(i);p(null!==n.garbageCollector,"GarbageCollector for query cache set to null during key removal."),n.garbageCollector.addPotentialGarbageKey(o)})):En.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=gr(e),i=Ft();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Wn(e[1]),o=new we(r);i=i.add(o)})).next((function(){return i}))},e.prototype.setGarbageCollector=function(e){this.garbageCollector=e},e.prototype.containsKey=function(e,t){p(null!==e,"Persistence Transaction cannot be null for query cache containsKey");var n,r=Bn(t.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return gr(e).iterate({index:Xn.documentTargetsIndex,keysOnly:!0,range:i},(function(e,t,n){o++,n.done()})).next((function(){return o>0}))},e}();function fr(e){return yr(e,Zn.store)}function mr(e){return yr(e,Jn.store)}function gr(e){return yr(e,Xn.store)}function yr(e,t){return e instanceof ir?e.store(t):h("Invalid transaction object provided!")}var vr=function(){function e(e){this.serializer=e}return e.prototype.addEntry=function(e,t){return _r(e).put(br(t.key),this.serializer.toDbRemoteDocument(t))},e.prototype.removeEntry=function(e,t){return _r(e).delete(br(t))},e.prototype.getEntry=function(e,t){var n=this;return _r(e).get(br(t)).next((function(e){return e?n.serializer.fromDbRemoteDocument(e):null}))},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this,r=Ot(),i=t.path.toArray(),o=IDBKeyRange.lowerBound(i);return _r(e).iterate({range:o},(function(e,i,o){var a=n.serializer.fromDbRemoteDocument(i);t.path.isPrefixOf(a.key.path)?a instanceof Se&&t.matches(a)&&(r=r.insert(a.key,a)):o.done()})).next((function(){return r}))},e}();function _r(e){return e instanceof ir?e.store(Yn.store):h("Invalid transaction object provided!")}function br(e){return e.path.toArray()}var wr,Sr=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document);if(e.noDocument){var t=we.fromSegments(e.noDocument.path),n=e.noDocument.readTime,r=new ct(n.seconds,n.nanos);return new Ee(t,lt.fromTimestamp(r))}return h("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof Se){var t=this.remoteSerializer.toDocument(e);return new Yn(null,t)}var n=e.key.path.toArray(),r=e.version.toTimestamp(),i=new Hn(r.seconds,r.nanos);return new Yn(new zn(n,i),null)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new $n(e,t.batchId,t.localWriteTime.toEpochMilliseconds(),r)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),r=ct.fromEpochMilliseconds(e.localWriteTimeMs);return new xn(e.batchId,r,n)},e.prototype.fromDbTarget=function(e){var t,n=new ct(e.readTime.seconds,e.readTime.nanos),r=lt.fromTimestamp(n);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new ht(t,e.targetId,nt.Listen,r,e.resumeToken)},e.prototype.toDbTarget=function(e){p(nt.Listen===e.purpose,"Only queries with purpose "+nt.Listen+" may be stored, got "+e.purpose);var t,n=e.snapshotVersion.toTimestamp(),r=new Hn(n.seconds,n.nanos);t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),p("string"==typeof e.resumeToken,"Persisting non-string resume token not supported.");var i=e.resumeToken;return new Zn(e.targetId,e.query.canonicalId(),r,i,0,t)},e}(),Er="IndexedDbPersistence",kr="There is another tab open with offline persistence enabled. Only one such tab is allowed at a time. The other tab must be closed or persistence must be disabled.",Ir=function(){function e(t,n){this.ownerId=this.generateOwnerId(),this.dbName=t+e.MAIN_DATABASE,this.serializer=new Sr(n),this.localStoragePrefix=t}return e.prototype.start=function(){var t=this;return e.isAvailable()?(p(!this.started,"IndexedDbPersistence double-started!"),this.started=!0,nr.openOrCreate(this.dbName,1,Vn).then((function(e){t.simpleDb=e})).then((function(){return t.tryAcquireOwnerLease()})).then((function(){t.scheduleOwnerLeaseRefreshes(),t.attachWindowUnloadHook()}))):(this.persistenceError=new M(N,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled."),Promise.reject(this.persistenceError))},e.prototype.shutdown=function(){var e=this;return p(this.started,"IndexedDbPersistence shutdown without start!"),this.started=!1,this.detachWindowUnloadHook(),this.stopOwnerLeaseRefreshes(),this.releaseOwnerLease().then((function(){e.simpleDb.close()}))},e.prototype.getMutationQueue=function(e){return sr.forUser(e,this.serializer)},e.prototype.getQueryCache=function(){return new pr(this.serializer)},e.prototype.getRemoteDocumentCache=function(){return new vr(this.serializer)},e.prototype.runTransaction=function(e,t){var n=this;return this.persistenceError?Promise.reject(this.persistenceError):(c(Er,"Starting transaction:",e),this.simpleDb.runTransaction("readwrite",er,(function(e){return n.ensureOwnerLease(e).next((function(){return t(e)}))})))},e.isAvailable=function(){return nr.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.tryAcquireOwnerLease=function(){var e=this;return this.simpleDb.runTransaction("readwrite",[Gn.store],(function(t){var n=t.store(Gn.store);return n.get("owner").next((function(t){if(e.validOwner(t))return c(Er,"Valid owner already. Failing. Current owner:",t),e.persistenceError=new M(A,kr),En.reject(e.persistenceError);var r=new Gn(e.ownerId,Date.now());return c(Er,"No valid owner. Acquiring owner lease. Current owner:",t,"New owner:",r),n.put("owner",r)}))}))},e.prototype.releaseOwnerLease=function(){var e=this;return this.simpleDb.runTransaction("readwrite",[Gn.store],(function(t){var n=t.store(Gn.store);return n.get("owner").next((function(t){return null!==t&&t.ownerId===e.ownerId?(c(Er,"Releasing owner lease."),n.delete("owner")):En.resolve()}))}))},e.prototype.ensureOwnerLease=function(e){var t=this;return e.store(Gn.store).get("owner").next((function(e){return null===e||e.ownerId!==t.ownerId?(t.persistenceError=new M(A,kr),En.reject(t.persistenceError)):En.resolve()}))},e.prototype.validOwner=function(e){var t=Date.now(),n=t-5e3,r=t;return!(null===e||e.leaseTimestampMs<n||(e.leaseTimestampMs>r?(l("Persistence owner-lease is in the future. Discarding.",e),1):e.ownerId===this.getZombiedOwnerId()))},e.prototype.scheduleOwnerLeaseRefreshes=function(){var e=this;this.ownerLeaseRefreshHandle=setInterval((function(){e.runTransaction("Refresh owner timestamp",(function(t){return t.store(Gn.store).put("owner",new Gn(e.ownerId,Date.now()))})).catch((function(t){l(t),e.stopOwnerLeaseRefreshes()}))}),4e3)},e.prototype.stopOwnerLeaseRefreshes=function(){this.ownerLeaseRefreshHandle&&(clearInterval(this.ownerLeaseRefreshHandle),this.ownerLeaseRefreshHandle=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;this.windowUnloadHandler=function(){e.setZombiedOwnerId(e.ownerId),e.shutdown()},window.addEventListener("unload",this.windowUnloadHandler)},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.getZombiedOwnerId=function(){try{var e=window.localStorage.getItem(this.zombiedOwnerLocalStorageKey());return c(Er,"Zombied ownerID from LocalStorage:",e),e}catch(e){return l(Er,"Failed to get zombie owner id.",e),null}},e.prototype.setZombiedOwnerId=function(e){try{null===e?window.localStorage.removeItem(this.zombiedOwnerLocalStorageKey()):window.localStorage.setItem(this.zombiedOwnerLocalStorageKey(),e)}catch(e){l(Er,"Failed to set zombie owner id.",e)}},e.prototype.zombiedOwnerLocalStorageKey=function(){return this.localStoragePrefix+"zombiedOwnerId"},e.prototype.generateOwnerId=function(){return ie.newId()},e.MAIN_DATABASE="main",e}(),Tr=function(){function e(e,t){this.remoteDocumentCache=e,this.mutationQueue=t}return e.prototype.getDocument=function(e,t){var n=this;return this.remoteDocumentCache.getEntry(e,t).next((function(r){return n.computeLocalDocument(e,t,r)}))},e.prototype.getDocuments=function(e,t){var n=this,r=[],i=Nt();return t.forEach((function(t){r.push(n.getDocument(e,t).next((function(e){e||(e=new Ee(t,lt.forDeletedDoc())),i=i.insert(t,e)})))})),En.waitFor(r).next((function(){return i}))},e.prototype.getDocumentsMatchingQuery=function(e,t){return we.isDocumentKey(t.path)?this.getDocumentsMatchingDocumentQuery(e,t.path):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new we(t)).next((function(e){var t=Ot();return e instanceof Se&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next((function(t){return r.computeLocalDocuments(e,t)})).next((function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){for(var i=Ft(),o=0,a=t;o<a.length;o++)for(var s=0,u=a[o].mutations;s<u.length;s++){var c=u[s];n.get(c.key)||(i=i.add(c.key))}var l=[];return i.forEach((function(t){l.push(r.getDocument(e,t).next((function(e){e instanceof Se&&(n=n.insert(e.key,e))})))})),En.waitFor(l)})).next((function(){return n.forEach((function(e,r){t.matches(r)||(n=n.remove(e))})),n}))},e.prototype.computeLocalDocument=function(e,t,n){return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];n=o.applyToLocalView(t,n)}return n}))},e.prototype.computeLocalDocuments=function(e,t){var n=this,r=[];return t.forEach((function(i,o){r.push(n.computeLocalDocument(e,i,o).next((function(e){e instanceof Se?t=t.insert(e.key,e):e instanceof Ee?t=t.remove(e.key):h("Unknown MaybeDocument: "+e)})))})),En.waitFor(r).next((function(){return t}))},e}(),Cr=function(){function e(e){this.remoteDocumentCache=e,this.changes=Nt()}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this.assertChanges().get(t);return n?En.resolve(n):this.remoteDocumentCache.getEntry(e,t)},e.prototype.apply=function(e){var t=this,n=this.assertChanges(),r=[];return n.forEach((function(n,i){r.push(t.remoteDocumentCache.addEntry(e,i))})),this.changes=null,En.waitFor(r)},e.prototype.assertChanges=function(){return p(null!==this.changes,"Changes have already been applied."),this.changes},e}(),Ar=function(){function e(e,t,n){this.persistence=e,this.garbageCollector=n,this.localViewReferences=new Tn,this.targetIds={},this.targetIdGenerator=An.forLocalStore(),this.heldBatchResults=[],this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Tr(this.remoteDocuments,this.mutationQueue),this.garbageCollector.addGarbageSource(this.localViewReferences),this.garbageCollector.addGarbageSource(this.queryCache),this.garbageCollector.addGarbageSource(this.mutationQueue)}return e.prototype.start=function(){var e=this;return this.persistence.runTransaction("Start LocalStore",(function(t){return e.startMutationQueue(t).next((function(){return e.startQueryCache(t)}))}))},e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change",(function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next((function(i){return r=i,t.garbageCollector.removeGarbageSource(t.mutationQueue),t.mutationQueue=t.persistence.getMutationQueue(e),t.garbageCollector.addGarbageSource(t.mutationQueue),t.startMutationQueue(n)})).next((function(){return t.localDocuments=new Tr(t.remoteDocuments,t.mutationQueue),t.mutationQueue.getAllMutationBatches(n)})).next((function(e){for(var i=Ft(),o=0,a=[r,e];o<a.length;o++)for(var s=0,u=a[o];s<u.length;s++)for(var c=0,l=u[s].mutations;c<l.length;c++){var d=l[c];i=i.add(d.key)}return t.localDocuments.getDocuments(n,i)}))}))},e.prototype.startQueryCache=function(e){var t=this;return this.queryCache.start(e).next((function(){var e=t.queryCache.getHighestTargetId();t.targetIdGenerator=An.forLocalStore(e)}))},e.prototype.startMutationQueue=function(e){var t=this;return this.mutationQueue.start(e).next((function(){return t.heldBatchResults=[],t.mutationQueue.getHighestAcknowledgedBatchId(e)})).next((function(n){return n!==Mn?t.mutationQueue.getAllMutationBatchesThroughBatchId(e,n):En.resolve([])})).next((function(n){return n.length>0?t.mutationQueue.removeMutationBatches(e,n):En.resolve()}))},e.prototype.localWrite=function(e){var t=this;return this.persistence.runTransaction("Locally write mutations",(function(n){var r,i=ct.now();return t.mutationQueue.addMutationBatch(n,i,e).next((function(e){var i=(r=e).keys();return t.localDocuments.getDocuments(n,i)})).next((function(e){return{batchId:r.batchId,changes:e}}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch",(function(n){var r;return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){if(t.shouldHoldBatchResult(e.commitVersion))return t.heldBatchResults.push(e),r=Ft(),En.resolve();var i=new Cr(t.remoteDocuments);return t.releaseBatchResults(n,[e],i).next((function(e){return r=e,i.apply(n)}))})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch",(function(n){var r,i;return t.mutationQueue.lookupMutationBatch(n,e).next((function(i){return p(null!=i,"Attempt to reject nonexistent batch!"),r=i,t.mutationQueue.getHighestAcknowledgedBatchId(n).next((function(t){return p(e>t,"Acknowledged batches can't be rejected."),r}))})).next((function(){return t.removeMutationBatch(n,r)})).next((function(e){return i=e,t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,i)}))}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){return this.queryCache.getLastRemoteSnapshotVersion()},e.prototype.applyRemoteEvent=function(e){var t=this,n=new Cr(this.remoteDocuments);return this.persistence.runTransaction("Apply remote event",(function(r){var i=[];q(e.targetChanges,(function(e,n){var o=t.targetIds[e];if(o){var a=n.mapping;if(a)if(a instanceof Wt)i.push(t.queryCache.removeMatchingKeysForTargetId(r,e).next((function(){return t.queryCache.addMatchingKeys(r,a.documents,e)})));else{if(!(a instanceof Vt))return h("Unknown mapping type: "+JSON.stringify(a));i.push(t.queryCache.removeMatchingKeys(r,a.removedDocuments,e).next((function(){return t.queryCache.addMatchingKeys(r,a.addedDocuments,e)})))}var s=n.resumeToken;s.length>0&&(o=o.update({resumeToken:s,snapshotVersion:n.snapshotVersion}),t.targetIds[e]=o,i.push(t.queryCache.addQueryData(r,o)))}}));var o=Ft();e.documentUpdates.forEach((function(e,a){o=o.add(e),i.push(n.getEntry(r,e).next((function(r){null==r||a.version.equals(lt.MIN)||a.version.compareTo(r.version)>=0?n.addEntry(a):c("LocalStore","Ignoring outdated watch update for ",e,". Current version:",r.version," Watch version:",a.version),t.garbageCollector.addPotentialGarbageKey(e)})))}));var a,s=t.queryCache.getLastRemoteSnapshotVersion(),u=e.snapshotVersion;return u.equals(lt.MIN)||(p(u.compareTo(s)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+s),i.push(t.queryCache.setLastRemoteSnapshotVersion(r,u))),En.waitFor(i).next((function(){return t.releaseHeldBatchResults(r,n)})).next((function(e){return a=e,n.apply(r)})).next((function(){return t.localDocuments.getDocuments(r,o.unionWith(a))}))}))},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("Notify local view changes",(function(n){for(var r=[],i=function(e){r.push(t.queryCache.getQueryData(n,e.query).next((function(n){p(null!==n,"Local view changes contain unallocated query.");var r=n.targetId;t.localViewReferences.addReferences(e.addedKeys,r),t.localViewReferences.removeReferences(e.removedKeys,r)})))},o=0,a=e;o<a.length;o++)i(a[o]);return En.waitFor(r)}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch",(function(n){return void 0===e&&(e=Mn),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query",(function(n){var r;return t.queryCache.getQueryData(n,e).next((function(i){if(i)return r=i,En.resolve();var o=t.targetIdGenerator.next();return r=new ht(e,o,nt.Listen),t.queryCache.addQueryData(n,r)})).next((function(){return p(!t.targetIds[r.targetId],"Tried to allocate an already allocated query: "+e),t.targetIds[r.targetId]=r,r}))}))},e.prototype.releaseQuery=function(e){var t=this;return this.persistence.runTransaction("Release query",(function(n){return t.queryCache.getQueryData(n,e).next((function(r){return p(null!=r,"Tried to release nonexistent query: "+e),t.localViewReferences.removeReferencesForId(r.targetId),delete t.targetIds[r.targetId],t.garbageCollector.isEager?t.queryCache.removeQueryData(n,r):En.resolve()})).next((function(){if(U(t.targetIds)){var e=new Cr(t.remoteDocuments);return t.releaseHeldBatchResults(n,e).next((function(){e.apply(n)}))}return En.resolve()}))}))},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query",(function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys",(function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.collectGarbage=function(){var e=this;return this.persistence.runTransaction("Garbage collection",(function(t){return e.garbageCollector.collectGarbage(t).next((function(n){var r=[];return n.forEach((function(n){r.push(e.remoteDocuments.removeEntry(t,n))})),En.waitFor(r)}))}))},e.prototype.releaseHeldBatchResults=function(e,t){for(var n=[],r=0,i=this.heldBatchResults;r<i.length;r++){var o=i[r];if(!this.isRemoteUpToVersion(o.commitVersion))break;n.push(o)}return 0===n.length?En.resolve(Ft()):(this.heldBatchResults.splice(0,n.length),this.releaseBatchResults(e,n,t))},e.prototype.isRemoteUpToVersion=function(e){var t=this.queryCache.getLastRemoteSnapshotVersion();return e.compareTo(t)<=0||U(this.targetIds)},e.prototype.shouldHoldBatchResult=function(e){return!this.isRemoteUpToVersion(e)||this.heldBatchResults.length>0},e.prototype.releaseBatchResults=function(e,t,n){for(var r=this,i=En.resolve(),o=function(t){i=i.next((function(){return r.applyWriteToRemoteDocuments(e,t,n)}))},a=0,s=t;a<s.length;a++)o(s[a]);return i.next((function(){return r.removeMutationBatches(e,t.map((function(e){return e.batch})))}))},e.prototype.removeMutationBatch=function(e,t){return this.removeMutationBatches(e,[t])},e.prototype.removeMutationBatches=function(e,t){for(var n=Ft(),r=0,i=t;r<i.length;r++)for(var o=0,a=i[r].mutations;o<a.length;o++){var s=a[o].key;n=n.add(s)}return this.mutationQueue.removeMutationBatches(e,t).next((function(){return n}))},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=t.batch,i=r.keys(),o=En.resolve();return i.forEach((function(i){o=o.next((function(){return n.getEntry(e,i)})).next((function(e){var o=e,a=t.docVersions.get(i);p(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=r.applyToRemoteDocument(i,o,t))?n.addEntry(o):p(!e,"Mutation batch "+r+" applied to document "+e+" resulted in null"))}))})),o},e}(),Pr=function(){function e(){this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=Mn,this.lastStreamToken=m(),this.garbageCollector=null,this.batchesByDocumentKey=new Pt(Cn.compareByKey)}return e.prototype.start=function(e){return 0===this.mutationQueue.length&&(this.nextBatchId=1,this.highestAcknowledgedBatchId=Mn),p(this.highestAcknowledgedBatchId<this.nextBatchId,"highestAcknowledgedBatchId must be less than the nextBatchId"),En.resolve()},e.prototype.checkEmpty=function(e){return En.resolve(0===this.mutationQueue.length)},e.prototype.getNextBatchId=function(e){return En.resolve(this.nextBatchId)},e.prototype.getHighestAcknowledgedBatchId=function(e){return En.resolve(this.highestAcknowledgedBatchId)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId;p(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged"),o=this.mutationQueue[i];return p(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),p(!o.isTombstone(),"Can't acknowledge a previously removed batch"),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,En.resolve()},e.prototype.getLastStreamToken=function(e){return En.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,En.resolve()},e.prototype.addMutationBatch=function(e,t,n){p(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&p(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new xn(r,t,n);this.mutationQueue.push(i);for(var o=0,a=n;o<a.length;o++){var s=a[o];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Cn(s.key,r))}return En.resolve(i)},e.prototype.lookupMutationBatch=function(e,t){return En.resolve(this.findMutationBatch(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.mutationQueue.length;t=Math.max(t+1,this.highestAcknowledgedBatchId);for(var r=this.indexOfBatchId(t),i=r<0?0:r;i<n;i++){var o=this.mutationQueue[i];if(!o.isTombstone())return En.resolve(o)}return En.resolve(null)},e.prototype.getAllMutationBatches=function(e){return En.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length))},e.prototype.getAllMutationBatchesThroughBatchId=function(e,t){var n=this.mutationQueue.length,r=this.indexOfBatchId(t);return r<0?r=0:r>=n?r=n:r++,En.resolve(this.getAllLiveMutationBatchesBeforeIndex(r))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Cn(t,0),i=new Cn(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){p(t.equals(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);p(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),En.resolve(o)},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=r;we.isDocumentKey(o)||(o=o.child(""));var a=new Cn(new we(o),0),s=new Pt(oe);this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===i&&(s=s.add(e.targetOrBatchId)),!0)}),a);var u=[];return s.forEach((function(e){var t=n.findMutationBatch(e);null!==t&&u.push(t)})),En.resolve(u)},e.prototype.removeMutationBatches=function(e,t){var n=t.length;p(n>0,"Should not remove mutations when none exist.");var r=t[0].batchId,i=this.mutationQueue.length,o=this.indexOfExistingBatchId(r,"removed");p(this.mutationQueue[o].batchId===r,"Removed batches must exist in the queue");for(var a=1,s=o+1;a<n&&s<i;)(f=this.mutationQueue[s]).isTombstone()||(p(f.batchId===t[a].batchId,"Removed batches must be contiguous in the queue"),a++),s++;if(0===o){for(;s<i&&(f=this.mutationQueue[s]).isTombstone();s++);var u=s-o;this.mutationQueue.splice(o,u)}else for(var c=o;c<s;c++)this.mutationQueue[c]=this.mutationQueue[c].toTombstone();for(var l=this.batchesByDocumentKey,d=0,h=t;d<h.length;d++)for(var f,m=(f=h[d]).batchId,g=0,y=f.mutations;g<y.length;g++){var v=y[g].key;null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(v);var _=new Cn(v,m);l=l.delete(_)}return this.batchesByDocumentKey=l,En.resolve()},e.prototype.setGarbageCollector=function(e){this.garbageCollector=e},e.prototype.containsKey=function(e,t){var n=new Cn(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return En.resolve(t.equals(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&p(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),En.resolve()},e.prototype.getAllLiveMutationBatchesBeforeIndex=function(e){for(var t=[],n=0;n<e;n++){var r=this.mutationQueue[n];r.isTombstone()||t.push(r)}return t},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return p(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return p(n.batchId===e,"If found batch must match"),n.isTombstone()?null:n},e}(),Rr=function(){function e(){this.queries=new _n((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=lt.MIN,this.highestTargetId=0,this.references=new Tn}return e.prototype.start=function(e){return En.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},e.prototype.getHighestTargetId=function(){return this.highestTargetId},e.prototype.setLastRemoteSnapshotVersion=function(e,t){return this.lastRemoteSnapshotVersion=t,En.resolve()},e.prototype.addQueryData=function(e,t){this.queries.set(t.query,t);var n=t.targetId;return n>this.highestTargetId&&(this.highestTargetId=n),En.resolve()},e.prototype.removeQueryData=function(e,t){return this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),En.resolve()},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return En.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this.references.addReferences(t,n),En.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){return this.references.removeReferences(t,n),En.resolve()},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),En.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return En.resolve(n)},e.prototype.setGarbageCollector=function(e){this.references.setGarbageCollector(e)},e.prototype.containsKey=function(e,t){return this.references.containsKey(e,t)},e}(),Nr=function(){function e(){this.docs=Nt()}return e.prototype.addEntry=function(e,t){return this.docs=this.docs.insert(t.key,t),En.resolve()},e.prototype.removeEntry=function(e,t){return this.docs=this.docs.remove(t),En.resolve()},e.prototype.getEntry=function(e,t){return En.resolve(this.docs.get(t))},e.prototype.getDocumentsMatchingQuery=function(e,t){for(var n=Ot(),r=new we(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value;if(!t.path.isPrefixOf(a.path))break;s instanceof Se&&t.matches(s)&&(n=n.insert(s.key,s))}return En.resolve(n)},e}(),Dr=function(){function e(){this.mutationQueues={},this.remoteDocumentCache=new Nr,this.queryCache=new Rr,this.started=!1}return e.prototype.start=function(){return p(!this.started,"MemoryPersistence double-started!"),this.started=!0,Promise.resolve()},e.prototype.shutdown=function(){return p(this.started,"MemoryPersistence shutdown without start!"),this.started=!1,Promise.resolve()},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Pr,this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t){return c("MemoryPersistence","Starting transaction:",e),t(new Or).toPromise()},e}(),Or=function(){},Lr=function(){function e(){this.isEager=!1}return e.prototype.addGarbageSource=function(e){},e.prototype.removeGarbageSource=function(e){},e.prototype.addPotentialGarbageKey=function(e){},e.prototype.collectGarbage=function(e){return En.resolve(Ft())},e}(),Mr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},xr=function(){function e(e,t,n){this.initialDelayMs=e,this.backoffFactor=t,this.maxDelayMs=n,this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndWait=function(){var e=new Mr,t=this.currentBaseMs+this.jitterDelayMs();return this.currentBaseMs>0&&c("ExponentialBackoff","Backing off for "+t+" ms (base delay: "+this.currentBaseMs+" ms)"),setTimeout((function(){e.resolve()}),t),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs),e.promise},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),Fr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qr="PersistentStream";!function(e){e[e.Initial=0]="Initial",e[e.Auth=1]="Auth",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff",e[e.Stopped=5]="Stopped"}(wr||(wr={}));var Br=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentialsProvider=n,this.idle=!1,this.stream=null,this.listener=null,this.backoff=new xr(r||1e3,1.5,6e4),this.state=wr.Initial}return e.prototype.isStarted=function(){return this.state===wr.Backoff||this.state===wr.Auth||this.state===wr.Open},e.prototype.isOpen=function(){return this.state===wr.Open},e.prototype.start=function(e){this.state!==wr.Error?(p(this.state===wr.Initial,"Already started"),this.listener=e,this.auth()):this.performBackoff(e)},e.prototype.stop=function(){this.isStarted()&&this.close(wr.Stopped)},e.prototype.inhibitBackoff=function(){p(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=wr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.idle=!0,this.queue.schedule((function(){return e.handleIdleCloseTimer()}),6e4).catch((function(e){p(e.code===_,"Received unexpected error in idle timeout closure. Expected CANCELLED, but was: "+e)}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return this.isOpen()&&this.idle?this.close(wr.Initial):Promise.resolve()},e.prototype.cancelIdleCheck=function(){this.idle=!1},e.prototype.close=function(e,t){p(e==wr.Error||ze(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),e!=wr.Error?this.backoff.reset():t&&t.code===C&&(c(qr,"Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e;var n=this.listener;return this.listener=null,e!=wr.Stopped?n.onClose(t):Promise.resolve()},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;p(this.state===wr.Initial,"Must be in initial state to auth"),this.state=wr.Auth,this.credentialsProvider.getToken(!1).then((function(t){e.startStream(t)}),(function(t){e.queue.schedule((function(){if(e.state!==wr.Stopped){var n=new M(b,"Fetching auth token failed: "+t.message);return e.handleStreamClose(n)}return Promise.resolve()}))}))},e.prototype.startStream=function(e){var t=this;if(this.state!==wr.Stopped){p(this.state===wr.Auth,"Trying to start stream in a non-auth state");var n=function(e,n){t.queue.schedule((function(){return t.stream===e?n():Promise.resolve()}))};if(null!==this.listener){var r=this.startRpc(e);this.stream=r,this.stream.onOpen((function(){n(r,(function(){return p(t.state===wr.Auth,"Expected stream to be in state auth, but was "+t.state),t.state=wr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n(r,(function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n(r,(function(){return t.onMessage(e)}))}))}}},e.prototype.performBackoff=function(e){var t=this;p(this.state===wr.Error,"Should only perform backoff in an error case"),this.state=wr.Backoff,this.backoff.backoffAndWait().then((function(){t.queue.schedule((function(){return t.state===wr.Stopped||(t.state=wr.Initial,t.start(e),p(t.isStarted(),"PersistentStream should have started")),Promise.resolve()}))}))},e.prototype.handleStreamClose=function(e){return p(this.isStarted(),"Can't handle server close on non-started stream"),c(qr,"close with error: "+e),this.stream=null,this.close(wr.Error,e)},e}(),Ur=function(e){function t(t,n,r,i,o,a){var s=e.call(this,n,r,i,a)||this;return s.databaseInfo=t,s.serializer=o,s}return Fr(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Br),jr=function(e){function t(t,n,r,i,o,a){var s=e.call(this,n,r,i,a)||this;return s.databaseInfo=t,s.serializer=o,s.handshakeComplete_=!1,s}return Fr(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(t){this.handshakeComplete_=!1,e.prototype.start.call(this,t)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(p(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return p(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){p(this.isOpen(),"Writing handshake requires an opened stream"),p(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;p(this.isOpen(),"Writing mutations requires an opened stream"),p(this.handshakeComplete_,"Handshake must be complete before writing mutations"),p(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Br),Wr=function(){function e(e,t,n,r,i,o){this.databaseInfo=e,this.queue=t,this.connection=n,this.credentials=r,this.serializer=i,this.initialBackoffDelay=o}return e.prototype.newPersistentWriteStream=function(){return new jr(this.databaseInfo,this.queue,this.connection,this.credentials,this.serializer,this.initialBackoffDelay)},e.prototype.newPersistentWatchStream=function(){return new Ur(this.databaseInfo,this.queue,this.connection,this.credentials,this.serializer,this.initialBackoffDelay)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Nt();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);p(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken(!1).then((function(r){return n.connection.invokeRPC(e,t,r)}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken(!1).then((function(r){return n.connection.invokeStreamingRPC(e,t,r)}))},e}(),Vr=function(){function e(e){this.datastore=e,this.readVersions=Mt(),this.mutations=[],this.committed=!1}return e.prototype.recordVersion=function(e){var t=e.version;e instanceof Ee&&(t=lt.forDeletedDoc());var n=this.readVersions.get(e.key);if(null!==n){if(!t.equals(n))throw new M(P,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.lookup=function(e){var t=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(e).then((function(e){return e.forEach((function(e){return t.recordVersion(e)})),e}))},e.prototype.write=function(e){if(this.committed)throw new M(A,"Transaction has already completed.");this.mutations=this.mutations.concat(e)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return t?_t.updateTime(t):_t.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(t&&t.equals(lt.forDeletedDoc()))throw new M(A,"Can't update a document that doesn't exist.");return t?_t.updateTime(t):_t.exists(!0)},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e)))},e.prototype.update=function(e,t){this.write(t.toMutations(e,this.preconditionForUpdate(e)))},e.prototype.delete=function(e){this.write([new kt(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,lt.forDeletedDoc())},e.prototype.commit=function(){var e=this,t=this.readVersions;return this.mutations.forEach((function(e){t=t.remove(e.key)})),t.isEmpty()?this.datastore.commit(this.mutations).then((function(){e.committed=!0})):Promise.reject(Error("Every document read in a transaction must also be written."))},e}(),Hr="RemoteStore",Gr=function(){function e(e,t,n,r,i){this.databaseInfo=e,this.asyncQueue=t,this.localStore=n,this.datastore=r,this.onlineStateHandler=i,this.pendingWrites=[],this.lastBatchSeen=Mn,this.listenTargets={},this.pendingTargetResponses={},this.accumulatedWatchChanges=[],this.watchStream=null,this.writeStream=null,this.watchStreamOnlineState=dn.Unknown,this.watchStreamFailures=0,this.shouldWarnOffline=!0}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.setOnlineStateToHealthy=function(){this.shouldWarnOffline=!1,this.updateAndBroadcastOnlineState(dn.Healthy)},e.prototype.setOnlineStateToUnknown=function(){this.watchStreamFailures=0,this.updateAndBroadcastOnlineState(dn.Unknown)},e.prototype.updateOnlineStateAfterFailure=function(){this.watchStreamOnlineState===dn.Healthy?this.setOnlineStateToUnknown():(this.watchStreamFailures++,this.watchStreamFailures>=2&&(this.shouldWarnOffline&&(c(Hr,"Could not reach Firestore backend."),this.shouldWarnOffline=!1),this.updateAndBroadcastOnlineState(dn.Failed)))},e.prototype.updateAndBroadcastOnlineState=function(e){var t=this.watchStreamOnlineState!==e;this.watchStreamOnlineState=e,t&&this.onlineStateHandler(e)},e.prototype.isNetworkEnabled=function(){return p(null==this.watchStream==(null==this.writeStream),"WatchStream and WriteStream should both be null or non-null"),null!=this.watchStream},e.prototype.enableNetwork=function(){var e=this;return p(null==this.watchStream,"enableNetwork() called with non-null watchStream."),p(null==this.writeStream,"enableNetwork() called with non-null writeStream."),this.watchStream=this.datastore.newPersistentWatchStream(),this.writeStream=this.datastore.newPersistentWriteStream(),this.localStore.getLastStreamToken().then((function(t){return e.writeStream.lastStreamToken=t,e.shouldStartWatchStream()&&e.startWatchStream(),e.updateAndBroadcastOnlineState(dn.Unknown),e.fillWritePipeline()}))},e.prototype.disableNetwork=function(){return this.updateAndBroadcastOnlineState(dn.Failed),this.watchStream.stop(),this.writeStream.stop(),this.cleanUpWatchStreamState(),this.cleanUpWriteStreamState(),this.writeStream=null,this.watchStream=null,Promise.resolve()},e.prototype.shutdown=function(){return c(Hr,"RemoteStore shutting down."),this.disableNetwork(),Promise.resolve(void 0)},e.prototype.listen=function(e){p(!F(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.isNetworkEnabled()&&this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){p(F(this.listenTargets,e),"unlisten called without assigned target ID!"),this.listenTargets[e],delete this.listenTargets[e],this.isNetworkEnabled()&&this.watchStream.isOpen()&&(this.sendUnwatchRequest(e),U(this.listenTargets)&&this.watchStream.markIdle())},e.prototype.sendWatchRequest=function(e){this.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.recordPendingTargetRequest=function(e){this.pendingTargetResponses[e]=(this.pendingTargetResponses[e]||0)+1},e.prototype.startWatchStream=function(){p(this.shouldStartWatchStream(),"startWriteStream() called when shouldStartWatchStream() is false."),this.watchStream.start({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)})},e.prototype.shouldStartWatchStream=function(){return this.isNetworkEnabled()&&!this.watchStream.isStarted()&&!U(this.listenTargets)},e.prototype.cleanUpWatchStreamState=function(){this.accumulatedWatchChanges=[],this.pendingTargetResponses={}},e.prototype.onWatchStreamOpen=function(){var e=this;return q(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),Promise.resolve()},e.prototype.onWatchStreamClose=function(e){return p(this.isNetworkEnabled(),"onWatchStreamClose() should only be called when the network is enabled"),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.updateOnlineStateAfterFailure(),this.startWatchStream()):this.setOnlineStateToUnknown(),Promise.resolve()},e.prototype.onWatchStreamChange=function(e,t){if(this.setOnlineStateToHealthy(),e instanceof Kt&&e.state===Ut.Removed&&e.cause)return this.handleTargetError(e);if(this.accumulatedWatchChanges.push(e),!t.equals(lt.MIN)&&t.compareTo(this.localStore.getLastRemoteSnapshotVersion())>=0){var n=this.accumulatedWatchChanges;return this.accumulatedWatchChanges=[],this.handleWatchChangeBatch(t,n)}return Promise.resolve()},e.prototype.handleWatchChangeBatch=function(e,t){var n=this,r=new $t(e,this.listenTargets,this.pendingTargetResponses);r.addChanges(t);var i=r.createRemoteEvent();this.pendingTargetResponses=r.pendingTargetResponses;var o=[];return q(r.existenceFilters,(function(t,r){var a=n.listenTargets[t];if(a){var s=a.query;if(s.isDocumentQuery())if(0===r.count){var u=new we(s.path),c=new Ee(u,e);i.addDocumentUpdate(c)}else p(1===r.count,"Single document existence filter with count: "+r.count);else{var l=n.localStore.remoteDocumentKeys(t).then((function(e){if(i.targetChanges[t]){var o=i.targetChanges[t].mapping;null!==o&&(o instanceof Vt?e=o.applyToKeySet(e):(p(o instanceof Wt,"Expected either reset or update mapping but got something else: "+o),e=o.documents))}if(e.size!==r.count){i.handleExistenceFilterMismatch(t);var u=new ht(s,t,a.purpose);n.listenTargets[t]=u,n.sendUnwatchRequest(t);var c=new ht(s,t,nt.ExistenceFilterMismatch);n.sendWatchRequest(c)}}));o.push(l)}}})),Promise.all(o).then((function(){return q(i.targetChanges,(function(e,t){if(t.resumeToken.length>0){var r=n.listenTargets[e];r&&(n.listenTargets[e]=r.update({resumeToken:t.resumeToken,snapshotVersion:t.snapshotVersion}))}})),n.syncEngine.applyRemoteEvent(i)}))},e.prototype.handleTargetError=function(e){var t=this;p(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return F(t.listenTargets,e)?(delete t.listenTargets[e],t.syncEngine.rejectListen(e,n)):Promise.resolve()}))})),r},e.prototype.cleanUpWriteStreamState=function(){this.lastBatchSeen=Mn,this.pendingWrites=[]},e.prototype.fillWritePipeline=function(){var e=this;return this.canWriteMutations()?this.localStore.nextMutationBatch(this.lastBatchSeen).then((function(t){return null===t?(0==e.pendingWrites.length&&e.writeStream.markIdle(),Promise.resolve()):(e.commit(t),e.fillWritePipeline())})):Promise.resolve()},e.prototype.canWriteMutations=function(){return this.isNetworkEnabled()&&this.pendingWrites.length<10},e.prototype.outstandingWrites=function(){return this.pendingWrites.length},e.prototype.commit=function(e){p(this.canWriteMutations(),"commit called when batches can't be written"),this.lastBatchSeen=e.batchId,this.pendingWrites.push(e),this.shouldStartWriteStream()?this.startWriteStream():this.isNetworkEnabled()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.isNetworkEnabled()&&!this.writeStream.isStarted()&&this.pendingWrites.length>0},e.prototype.startWriteStream=function(){p(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})},e.prototype.onWriteStreamOpen=function(){return this.writeStream.writeHandshake(),Promise.resolve()},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.pendingWrites;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}))},e.prototype.onMutationResult=function(e,t){var n=this;p(this.pendingWrites.length>0,"Got result for empty pending writes");var r=this.pendingWrites.shift(),i=Fn.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){var t=this;return p(this.isNetworkEnabled(),"onWriteStreamClose() should only be called when the network is enabled"),e&&this.pendingWrites.length>0?(p(!!e,"We have pending writes, but the write stream closed without an error"),(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))):Promise.resolve()},e.prototype.handleHandshakeError=function(e){return Tt(e.code)||e.code===P?(c(Hr,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=m(),this.localStore.setLastStreamToken(m())):Promise.resolve()},e.prototype.handleWriteError=function(e){var t=this;if(Tt(e.code)){var n=this.pendingWrites.shift();return this.writeStream.inhibitBackoff(),this.syncEngine.rejectFailedWrite(n.batchId,e).then((function(){return t.fillWritePipeline()}))}return Promise.resolve()},e.prototype.createTransaction=function(){return new Vr(this.datastore)},e.prototype.handleUserChange=function(e){return c(Hr,"RemoteStore changing users: uid=",e.uid),this.disableNetwork(),this.enableNetwork()},e}(),Kr=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r}return e.prototype.start=function(e){var t=this,n=new Mr,r=new Mr,i=!1;return this.credentials.setUserChangeListener((function(o){i?t.asyncQueue.schedule((function(){return t.handleUserChange(o)})):(i=!0,t.initializePersistence(e,r).then((function(){return t.initializeRest(o)})).then(n.resolve,n.reject))})),this.asyncQueue.schedule((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.asyncQueue.schedule((function(){return e.remoteStore.enableNetwork()}))},e.prototype.initializePersistence=function(e,t){var n=this;return e?this.startIndexedDbPersistence().then(t.resolve).catch((function(e){return t.reject(e),n.canFallback(e)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+e),n.startMemoryPersistence()):Promise.reject(e)})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e.code===A||e.code===N},e.prototype.startIndexedDbPersistence=function(){this.garbageCollector=new Lr;var e=Ir.buildStoragePrefix(this.databaseInfo),t=new tn(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=new Ir(e,t),this.persistence.start()},e.prototype.startMemoryPersistence=function(){return this.garbageCollector=new kn,this.persistence=new Dr,this.persistence.start()},e.prototype.initializeRest=function(e){var t=this;return this.platform.loadConnection(this.databaseInfo).then((function(n){t.localStore=new Ar(t.persistence,e,t.garbageCollector);var r=t.platform.newSerializer(t.databaseInfo.databaseId),i=new Wr(t.databaseInfo,t.asyncQueue,n,t.credentials,r);return t.remoteStore=new Gr(t.databaseInfo,t.asyncQueue,t.localStore,i,(function(e){t.eventMgr.onOnlineStateChanged(e)})),t.syncEngine=new Ln(t.localStore,t.remoteStore,e),t.remoteStore.syncEngine=t.syncEngine,t.eventMgr=new wn(t.syncEngine),t.localStore.start()})).then((function(){return t.remoteStore.start()}))},e.prototype.handleUserChange=function(e){return this.asyncQueue.verifyOperationInProgress(),c("FirestoreClient","User Changed: "+e.uid),this.syncEngine.handleUserChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.asyncQueue.schedule((function(){return e.remoteStore.disableNetwork()}))},e.prototype.shutdown=function(){var e=this;return this.asyncQueue.schedule((function(){return e.credentials.removeUserChangeListener(),e.remoteStore.shutdown()})).then((function(){return e.persistence.shutdown()}))},e.prototype.listen=function(e,t,n){var r=this,i=new Sn(e,t,n);return this.asyncQueue.schedule((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.asyncQueue.schedule((function(){return t.eventMgr.unlisten(e)}))},e.prototype.write=function(e){var t=this,n=new Mr;return this.asyncQueue.schedule((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.transaction=function(e){var t=this;return this.asyncQueue.schedule((function(){return Promise.resolve()})).then((function(){return t.syncEngine.runTransaction(e)}))},e}(),$r=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Qr=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.delayedOperationsCount=0,this.operationInProgress=!1}return e.prototype.schedule=function(e,t){var n=this;if(this.failure&&h("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message)),(t||0)>0){this.delayedOperationsCount++;var r={handle:null,op:e,deferred:new Mr};return r.handle=setTimeout((function(){n.scheduleInternal((function(){return r.op().then((function(e){r.deferred.resolve(e)}))})),r.handle=null,n.delayedOperationsCount--,0===n.delayedOperationsCount&&(n.delayedOperations=[])}),t),this.delayedOperations.push(r),r.deferred.promise}return this.scheduleInternal(e)},e.prototype.scheduleInternal=function(e){var t=this;return this.tail=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw l("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(){t.operationInProgress=!1}))})),this.tail},e.prototype.verifyOperationInProgress=function(){p(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(e){var t=this;return this.delayedOperations.forEach((function(n){n.handle&&(clearTimeout(n.handle),e?t.scheduleInternal(n.op).then(n.deferred.resolve,n.deferred.reject):n.deferred.reject(new M(_,"Operation cancelled by shutdown")))})),this.delayedOperations=[],this.delayedOperationsCount=0,this.schedule((function(){return Promise.resolve()}))},e}(),zr=function(){function e(e){this.uid=e}return e.prototype.isUnauthenticated=function(){return null==this.uid},e.prototype.toKey=function(){return this.isUnauthenticated()?"anonymous-user":"uid:"+this.uid},e.prototype.equals=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Yr=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},Zr=function(){function e(){this.userListener=null}return e.prototype.getToken=function(e){return Promise.resolve(null)},e.prototype.setUserChangeListener=function(e){p(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=e,e(zr.UNAUTHENTICATED)},e.prototype.removeUserChangeListener=function(){p(null!==this.userListener,"removeUserChangeListener() when no listener registered"),this.userListener=null},e}(),Xr=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.userCounter=0,this.userListener=null,this.tokenListener=function(){var e=t.getUser();t.currentUser&&e.equals(t.currentUser)||(t.currentUser=e,t.userCounter++,t.userListener&&t.userListener(t.currentUser))},this.userCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(e){var t=this;p(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.userCounter;return this.app.INTERNAL.getToken(e).then((function(e){if(t.userCounter!==n)throw new M(P,"getToken aborted due to uid change.");return e?(p("string"==typeof e.accessToken,"Invalid tokenData returned from getToken():"+e),new Yr(e.accessToken,t.currentUser)):null}))},e.prototype.setUserChangeListener=function(e){p(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeUserChangeListener=function(){p(null!=this.tokenListener,"removeUserChangeListener() called twice"),p(null!==this.userListener,"removeUserChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.userListener=null},e.prototype.getUser=function(){"function"!=typeof this.app.INTERNAL.getUid&&h("This version of the Firestore SDK requires at least version 3.7.0 of firebase.js.");var e=this.app.INTERNAL.getUid();return p(null===e||"string"==typeof e,"Received invalid UID: "+e),new zr(e)},e}(),Jr=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=zr.FIRST_PARTY,p(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),e}(),ei=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,p(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return e.prototype.getToken=function(e){return Promise.resolve(new Jr(this.gapi,this.sessionIndex))},e.prototype.setUserChangeListener=function(e){e(zr.FIRST_PARTY)},e.prototype.removeUserChangeListener=function(){},e}();function ti(e){if(!e)return new Zr;switch(e.type){case"gapi":return new ei(e.client,e.sessionIndex||"0");case"provider":return e.client;default:throw new M(w,"makeCredentialsProvider failed due to invalid credential type")}}function ni(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var ri,ii=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oi=function(){function e(){}return e.delete=function(){return ai.instance},e.serverTimestamp=function(){return si.instance},e}(),ai=function(e){function t(){return e.call(this)||this}return ii(t,e),t.instance=new t,t}(oi),si=function(e){function t(){return e.call(this)||this}return ii(t,e),t.instance=new t,t}(oi),ui=x(oi,"Use FieldValue.<field>() instead."),ci=/^__.*__$/,li=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new St(e,this.data,this.fieldMask,t)):n.push(new wt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Et(e,this.fieldTransforms)),n},e}(),di=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new St(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new Et(e,this.fieldTransforms)),n},e}();function hi(e){switch(e){case ri.Set:case ri.MergeSet:case ri.Update:return!0;case ri.QueryValue:return!1;default:throw h("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.QueryValue=3]="QueryValue"}(ri||(ri={}));var pi=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new M(w,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(hi(this.dataSource)&&ci.test(e))throw this.createError("Document fields cannot begin and end with __")},e.prototype.isWrite=function(){return this.dataSource===ri.Set||this.dataSource===ri.Update},e}(),fi=function(e,t){this.databaseId=e,this.key=t},mi=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new pi(ri.Set,e,be.EMPTY_PATH);yi("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new li(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t){var n=new pi(ri.MergeSet,e,be.EMPTY_PATH);yi("Data must be an object, but it was:",n,t);var r=this.parseData(t,n),i=new ft(n.fieldMask);return new li(r,i,n.fieldTransforms)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new pi(ri.Update,e,be.EMPTY_PATH);yi("Data must be an object, but it was:",r,t);var i=[],o=Ve.EMPTY;B(t,(function(t,a){var s=_i(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof ai)i.push(s);else{var c=n.parseData(a,u);null!=c&&(i.push(s),o=o.set(s,c))}}));var a=new ft(i);return new di(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new pi(ri.Update,e,be.EMPTY_PATH),o=[vi(e,t)],a=[n];if(r.length%2!=0)throw new M(w,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(vi(e,r[s])),a.push(r[s+1]);var u=[],c=Ve.EMPTY;for(s=0;s<o.length;++s){var l=o[s],d=i.childContextForFieldPath(l),h=this.runPreConverter(a[s],d);if(h instanceof ai)u.push(l);else{var p=this.parseData(h,d);null!=p&&(u.push(l),c=c.set(l,p))}}var f=new ft(u);return new di(c,f,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new pi(ri.QueryValue,e,be.EMPTY_PATH),r=this.parseData(t,n);return p(null!=r,"Parsed data should not be null."),p(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=bi(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if((e=this.runPreConverter(e,t))instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return t.path&&t.fieldMask.push(t.path),this.parseArray(e,t)}return gi(e)?(yi("Unsupported field value:",t,e),this.parseObject(e,t)):(t.path&&t.fieldMask.push(t.path),this.parseScalarValue(e,t))},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Ne.INSTANCE),n.push(s),r++}return new He(n)},e.prototype.parseObject=function(e,t){var n=this,r=new ke(oe);return B(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Ve(r)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Ne.INSTANCE;if("number"==typeof e)return function(e){return Qe(e)&&e<=$e&&e>=Ke}(e)?new Me(e):new xe(e);if("boolean"==typeof e)return De.of(e);if("string"==typeof e)return new Fe(e);if(e instanceof Date)return new qe(ct.fromDate(e));if(e instanceof de)return new We(e);if(e instanceof ce)return new Ue(e);if(e instanceof fi)return new je(e.databaseId,e.key);if(e instanceof oi){if(e instanceof ai){if(t.dataSource==ri.MergeSet)return null;throw t.dataSource===ri.Update?(p(null==t.path||t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() can only be used with update() and set() with {merge:true}")}if(e instanceof si){if(!hi(t.dataSource))throw t.createError("FieldValue.serverTimestamp() can only be used with set() and update()");if(null===t.path)throw t.createError("FieldValue.serverTimestamp() is not currently supported inside arrays");return t.fieldTransforms.push(new gt(t.path,mt.instance)),null}return h("Unknown FieldValue type: "+e)}throw t.createError("Unsupported field value: "+X(e))},e}();function gi(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof de||e instanceof ce||e instanceof fi||e instanceof oi)}function yi(e,t,n){if(!gi(n)||!Z(n)){var r=X(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function vi(e,t){if(t instanceof fn)return t._internalPath;if("string"==typeof t)return _i(e,t);throw new M(w,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function _i(e,t){try{return function(e){if(e.search(mn)>=0)throw new M(w,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(fn.bind.apply(fn,[void 0].concat(e.split("."))))}catch(t){throw new M(w,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=bi(t);throw new M(w,"Function "+e+"() called with invalid data. "+n)}}function bi(e){return e instanceof Error?e.message:e.toString()}var wi=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Si=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new M(w,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Q("settings","string","host",e.host),this.host=e.host,z("settings","boolean","ssl",e.ssl),this.ssl=(!0,void 0===(t=e.ssl)||t);var t;ee("settings",e,["host","ssl","credentials"]),z("settings","object","credentials",e.credentials),this.credentials=e.credentials}return e.prototype.equals=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials},e}(),Ei=function(){},ki=function(){function e(t){var n=this;this._queue=new Qr,this.INTERNAL={delete:function(){return n._firestoreClient?n._firestoreClient.shutdown():Promise.resolve()},disableNetwork:function(){return n._firestoreClient.disableNetwork()},enableNetwork:function(){return n._firestoreClient.enableNetwork()},drainAsyncQueue:function(e){return n._queue.drain(e)}};var r=new Ei;if("object"==typeof t.options){var i=t;r.firebaseApp=i,r.databaseId=e.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Xr(i)}else{var o=t;if(!o.projectId)throw new M(w,"Must provide projectId");r.databaseId=new fe(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Zr}r.settings=new Si({}),this._config=r,this._databaseId=r.databaseId}return e.prototype.settings=function(e){if(W("Firestore.settings",arguments,1),K("Firestore.settings","object",1,e),F(e,"persistence"))throw new M(w,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Si(e);if(this._firestoreClient&&!this._config.settings.equals(t))throw new M(A,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=t,void 0!==t.credentials&&(this._config.credentials=ti(t.credentials))},e.prototype.enablePersistence=function(){if(this._firestoreClient)throw new M(A,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(!0)},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(!1),this._firestoreClient},e.prototype.configureClient=function(e){var t=this;p(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),p(!this._firestoreClient,"configureClient() called multiple times");var n=new he(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new mi((function(e){if(e instanceof Ci){var n=t._config.databaseId,r=e.firestore._config.databaseId;if(!r.equals(n))throw new M(w,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new fi(t._config.databaseId,e._key)}return e})),this._firestoreClient=new Kr(f.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!F(t,"projectId")){if(F(t,"firestoreId"))throw new M(w,'"firestoreId" is now specified as "projectId" in firebase.initializeApp.');throw new M(w,'"projectId" not provided in firebase.initializeApp.')}if(F(t,"firestoreOptions"))throw new M(w,'"firestoreOptions" values are now specified with Firestore.settings()');var n=t.projectId;if(!n||"string"!=typeof n)throw new M(w,"projectId must be a string in FirebaseApp.options");return new fe(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new M(A,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(W("Firestore.collection",arguments,1),K("Firestore.collection","string",1,e),!e)throw new M(w,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Ni(ve.fromString(e),this)},e.prototype.doc=function(e){if(W("Firestore.doc",arguments,1),K("Firestore.doc","string",1,e),!e)throw new M(w,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),Ci.forPath(ve.fromString(e),this)},e.prototype.runTransaction=function(e){var t=this;return W("Firestore.runTransaction",arguments,1),K("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Ii(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Ti(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(s()){case r.DEBUG:return"debug";case r.ERROR:return"error";case r.SILENT:return"silent";default:return h("Unknown log level: "+s())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(W("Firestore.setLogLevel",arguments,1),K("Firestore.setLogLevel","string",1,e),e){case"debug":u(r.DEBUG);break;case"error":u(r.ERROR);break;case"silent":u(r.SILENT);break;default:throw new M(w,"Invalid log level: "+e)}},e}(),Ii=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;W("Transaction.get",arguments,1);var n=Oi("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return h("Mismatch in docs returned from document lookup.");var r=e[0];return new Ai(t._firestore,n._key,r instanceof Ee?null:r,!1)}))},e.prototype.set=function(e,t,n){H("Transaction.set",arguments,2,3);var r=Oi("Transaction.set",e,this._firestore),i=(n=Di("Transaction.set",n)).merge?this._firestore._dataConverter.parseMergeData("Transaction.set",t):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof fn?(V("Transaction.update",arguments,3),r=Oi("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(W("Transaction.update",arguments,2),r=Oi("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){W("Transaction.delete",arguments,1);var t=Oi("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Ti=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){H("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Oi("WriteBatch.set",e,this._firestore),i=(n=Di("WriteBatch.set",n)).merge?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,_t.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof fn?(V("WriteBatch.update",arguments,3),r=Oi("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(W("WriteBatch.update",arguments,2),r=Oi("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,_t.exists(!0))),this},e.prototype.delete=function(e){W("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Oi("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new kt(t._key,_t.NONE)),this},e.prototype.commit=function(){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._firestore.ensureClientConfigured().write(this._mutations):Promise.resolve()},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new M(A,"A write batch can no longer be used after commit() has been called.")},e}(),Ci=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new M(w,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new we(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ni(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(W("DocumentReference.collection",arguments,1),K("DocumentReference.collection","string",1,e),!e)throw new M(w,"Must provide a non-empty collection name to collection()");var t=ve.fromString(e);return new Ni(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw te("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.equals(t._key)},e.prototype.set=function(e,t){H("DocumentReference.set",arguments,1,2);var n=(t=Di("DocumentReference.set",t)).merge?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,_t.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof fn?(V("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(W("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,_t.exists(!0)))},e.prototype.delete=function(){return W("DocumentReference.delete",arguments,0),this._firestoreClient.write([new kt(this._key,_t.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];H("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||ni(e[i])||(ee("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),z("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeDocumentMetadataChanges:r.includeMetadataChanges,includeQueryMetadataChanges:r.includeMetadataChanges};return ni(e[i])?n=e[i]:(K("DocumentReference.onSnapshot","function",i,e[i]),$("DocumentReference.onSnapshot","function",i+1,e[i+1]),$("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new $r({next:function(e){if(t.next){p(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Ai(n.firestore,n._key,r,e.fromCache))}},error:r}),o=this._firestoreClient.listen(Ye.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(){var e=this;return W("DocumentReference.get",arguments,0),new Promise((function(t,n){var r=e.onSnapshotInternal({includeQueryMetadataChanges:!0,includeDocumentMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){r(),!e.exists&&e.metadata.fromCache?n(new M(P,"Failed to get document because the client is offline.")):t(e)},error:n})}))},e}(),Ai=function(){function e(e,t,n,r){this._firestore=e,this._key=t,this._document=n,this._fromCache=r}return e.prototype.data=function(){if(W("DocumentSnapshot.data",arguments,0),!this._document)throw new M(E,"This document doesn't exist. Check doc.exists to make sure the document exists before calling doc.data().");return this.convertObject(this._document.data)},e.prototype.get=function(e){if(W("DocumentSnapshot.get",arguments,1),!this._document)throw new M(E,"This document doesn't exist. Check doc.exists to make sure the document exists before calling doc.get().");var t=this._document.data.field(vi("DocumentSnapshot.get",e));return void 0===t?void 0:this.convertValue(t)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ci(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return{hasPendingWrites:null!==this._document&&this._document.hasLocalMutations,fromCache:this._fromCache}},enumerable:!0,configurable:!0}),e.prototype.convertObject=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.convertValue(r)})),n},e.prototype.convertValue=function(e){if(e instanceof Ve)return this.convertObject(e);if(e instanceof He)return this.convertArray(e);if(e instanceof je){var t=e.value(),n=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.equals(n)||l("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),new Ci(t,this._firestore)}return e.value()},e.prototype.convertArray=function(e){var t=this;return e.internalValue.map((function(e){return t.convertValue(e)}))},e}(),Pi=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){var i;W("Query.where",arguments,3),K("Query.where","string",2,n),J("Query.where",3,r);var o=vi("Query.where",t);if(o.isKeyField())if("string"==typeof r){if(-1!==r.indexOf("/"))throw new M(w,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new M(w,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new ve([r]));p(a.length%2==0,"Path should be a document key"),i=new je(this.firestore._databaseId,new we(a))}else{if(!(r instanceof Ci))throw new M(w,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+X(r)+".");var s=r;i=new je(this.firestore._databaseId,s._key)}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var u=tt(o,Ze.fromString(n),i);return this.validateNewFilter(u),new e(this._query.addFilter(u),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(H("Query.orderBy",arguments,1,2),$("Query.orderBy","string",2,n),void 0===n||"asc"===n)r=rt.ASCENDING;else{if("desc"!==n)throw new M(w,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=rt.DESCENDING}if(null!==this._query.startAt)throw new M(w,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new M(w,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=vi("Query.orderBy",t),o=new ot(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(W("Query.limit",arguments,1),K("Query.limit","number",1,t),t<=0)throw new M(w,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw te("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.equals(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(J(e,1,t),t instanceof Ai){if(n.length>0)throw new M(w,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new M(E,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new je(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(void 0===s){var u=a.field.canonicalString();throw new M(w,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new it(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new M(w,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new M(w,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(-1!==a.indexOf("/"))throw new M(w,"Invalid query. Document ID '"+a+"' contains a slash in "+e+"()");var s=new we(this._query.path.child(a));i.push(new je(this.firestore._databaseId,s))}else{var u=this.firestore._dataConverter.parseQueryValue(e,a);i.push(u)}}return new it(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];H("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||ni(e[i])||(ee("Query.onSnapshot",r=e[i],["includeQueryMetadataChanges","includeDocumentMetadataChanges"]),z("Query.onSnapshot","boolean","includeDocumentMetadataChanges",r.includeDocumentMetadataChanges),z("Query.onSnapshot","boolean","includeQueryMetadataChanges",r.includeQueryMetadataChanges),i++),ni(e[i])?n=e[i]:(K("Query.onSnapshot","function",i,e[i]),$("Query.onSnapshot","function",i+1,e[i+1]),$("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new $r({next:function(e){t.next&&t.next(new Ri(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.get=function(){var e=this;return W("Query.get",arguments,0),new Promise((function(t,n){var r=e.onSnapshotInternal({includeDocumentMetadataChanges:!1,includeQueryMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){r(),t(e)},error:n})}))},e.prototype.validateNewFilter=function(e){if(e instanceof Xe&&e.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.equals(e.field))throw new M(w,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+e.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(e.field,n)}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.equals(e))throw new M(w,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Ri=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this.metadata={fromCache:n.fromCache,hasPendingWrites:n.hasPendingWrites}}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;H("QuerySnapshot.forEach",arguments,1,2),K("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new Pi(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"docChanges",{get:function(){return this._cachedChanges||(this._cachedChanges=function(e,t){if(t.oldDocs.isEmpty()){var n,r=0;return t.docChanges.map((function(i){var o=new Ai(e,i.doc.key,i.doc,t.fromCache);return p(i.type===hn.Added,"Invalid event type for first snapshot"),p(!n||t.query.docComparator(n,i.doc)<0,"Got added events in wrong order"),n=i.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}}))}var i=t.oldDocs;return t.docChanges.map((function(n){var r=new Ai(e,n.doc.key,n.doc,t.fromCache),o=-1,a=-1;return n.type!==hn.Added&&(p((o=i.indexOf(n.doc.key))>=0,"Index for document not found"),i=i.delete(n.doc.key)),n.type!==hn.Removed&&(a=(i=i.add(n.doc)).indexOf(n.doc.key)),{type:Li(n.type),doc:r,oldIndex:o,newIndex:a}}))}(this._firestore,this._snapshot)),this._cachedChanges},enumerable:!0,configurable:!0}),e.prototype.convertToDocumentImpl=function(e){return new Ai(this._firestore,e.key,e,this.metadata.fromCache)},e}(),Ni=function(e){function t(t,n){var r=e.call(this,Ye.atPath(t),n)||this;if(t.length%2!=1)throw new M(w,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return wi(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Ci(new we(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(H("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=ie.newId()),K("CollectionReference.doc","string",1,e),""===e)throw new M(w,"Document path must be a non-empty string");var t=ve.fromString(e);return Ci.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){W("CollectionReference.add",arguments,1),K("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t}(Pi);function Di(e,t){return void 0===t?{merge:!1}:(ee(e,t,["merge"]),z(e,"boolean","merge",t.merge),t)}function Oi(e,t,n){if(t instanceof Ci){if(t.firestore!==n)throw new M(w,"Provided document reference is from a different Firestore instance.");return t}throw te(e,"DocumentReference",1,t)}function Li(e){switch(e){case hn.Added:return"added";case hn.Modified:case hn.Metadata:return"modified";case hn.Removed:return"removed";default:return h("Unknown change type: "+e)}}var Mi=x(ki,"Use firebase.firestore() instead."),xi=x(Ii,"Use firebase.firestore().runTransaction() instead."),Fi=x(Ti,"Use firebase.firestore().batch() instead."),qi=x(Ci,"Use firebase.firestore().doc() instead."),Bi=x(Ai),Ui=x(Pi),ji=x(Ri),Wi=x(Ni,"Use firebase.firestore().collection() instead."),Vi={Firestore:Mi,GeoPoint:de,Blob:le,Transaction:xi,WriteBatch:Fi,DocumentReference:qi,DocumentSnapshot:Bi,Query:Ui,QuerySnapshot:ji,CollectionReference:Wi,FieldPath:fn,FieldValue:ui,setLogLevel:ki.setLogLevel};function Hi(e){e.INTERNAL.registerService("firestore",(function(e){return new ki(e)}),j(Vi))}Hi(i.default)},7140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{registerMessaging:()=>T});var r=n(8261),i={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key"};const o={codes:i,map:((a={})[i.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",a[i.AVAILABLE_IN_SW]="This method is available in a service worker context.",a[i.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",a[i.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",a[i.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",a[i.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",a[i.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",a[i.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",a[i.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",a[i.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",a[i.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",a[i.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",a[i.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",a[i.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",a[i.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",a[i.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",a[i.USE_SW_BEFORE_GET_TOKEN]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",a[i.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",a[i.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",a[i.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",a[i.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",a[i.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",a[i.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",a[i.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",a[i.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",a[i.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",a[i.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",a[i.BAD_SCOPE]="The service worker scope must be a string with at least one character.",a[i.BAD_VAPID_KEY]="The public VAPID key must be a string with at least one character.",a[i.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",a[i.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",a[i.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",a[i.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",a)};var a;function s(e){var t=function(e){var t=new Uint8Array(e);return window.btoa(String.fromCharCode.apply(null,t))}(e);return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var u=[4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110];const c={ENDPOINT:"https://fcm.googleapis.com",APPLICATION_SERVER_KEY:u,SUBSCRIPTION_OPTIONS:{userVisibleOnly:!0,applicationServerKey:new Uint8Array(u)}};var l="fcm_token_object_Store";const d=function(){function e(){this.errorFactory_=new r.ErrorFactory("messaging","Messaging",o.map),this.openDbPromise_=null}return e.prototype.openDatabase_=function(){return this.openDbPromise_||(this.openDbPromise_=new Promise((function(t,n){var r=indexedDB.open(e.DB_NAME,1);r.onerror=function(e){n(e.target.error)},r.onsuccess=function(e){t(e.target.result)},r.onupgradeneeded=function(e){var t=e.target.result.createObjectStore(l,{keyPath:"swScope"});t.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),t.createIndex("fcmToken","fcmToken",{unique:!0})}}))),this.openDbPromise_},e.prototype.closeDatabase=function(){var e=this;return this.openDbPromise_?this.openDbPromise_.then((function(t){t.close(),e.openDbPromise_=null})):Promise.resolve()},e.prototype.getTokenDetailsFromToken=function(e){return this.openDatabase_().then((function(t){return new Promise((function(n,r){var i=t.transaction([l]).objectStore(l).index("fcmToken").get(e);i.onerror=function(e){r(e.target.error)},i.onsuccess=function(e){n(e.target.result)}}))}))},e.prototype.getTokenDetailsFromSWScope_=function(e){return this.openDatabase_().then((function(t){return new Promise((function(n,r){var i=t.transaction([l]).objectStore(l).get(e);i.onerror=function(e){r(e.target.error)},i.onsuccess=function(e){n(e.target.result)}}))}))},e.prototype.getAllTokenDetailsForSenderId_=function(e){return this.openDatabase_().then((function(t){return new Promise((function(n,r){var i=t.transaction([l]).objectStore(l),o=[],a=i.openCursor();a.onerror=function(e){r(e.target.error)},a.onsuccess=function(t){var r=t.target.result;r?(r.value.fcmSenderId===e&&o.push(r.value),r.continue()):n(o)}}))}))},e.prototype.subscribeToFCM=function(e,t,n){var r=this,i=s(t.getKey("p256dh")),a=s(t.getKey("auth")),u="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+i+"&encryption_auth="+a;n&&(u+="&pushSet="+n);var l=new Headers;return l.append("Content-Type","application/x-www-form-urlencoded"),fetch(c.ENDPOINT+"/fcm/connect/subscribe",{method:"POST",headers:l,body:u}).then((function(e){return e.json()})).then((function(e){var t=e;if(t.error){var n=t.error.message;throw r.errorFactory_.create(o.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!t.token)throw r.errorFactory_.create(o.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!t.pushSet)throw r.errorFactory_.create(o.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:t.token,pushSet:t.pushSet}}))},e.prototype.isSameSubscription_=function(e,t){return e.endpoint===t.endpoint&&s(e.getKey("auth"))===t.auth&&s(e.getKey("p256dh"))===t.p256dh},e.prototype.saveTokenDetails_=function(e,t,n,r,i){var o={swScope:t.scope,endpoint:n.endpoint,auth:s(n.getKey("auth")),p256dh:s(n.getKey("p256dh")),fcmToken:r,fcmPushSet:i,fcmSenderId:e};return this.openDatabase_().then((function(e){return new Promise((function(t,n){var r=e.transaction([l],"readwrite").objectStore(l).put(o);r.onerror=function(e){n(e.target.error)},r.onsuccess=function(e){t()}}))}))},e.prototype.getSavedToken=function(e,t){var n=this;return t instanceof ServiceWorkerRegistration?"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(o.codes.BAD_SENDER_ID)):this.getAllTokenDetailsForSenderId_(e).then((function(n){if(0!==n.length){var r=n.findIndex((function(n){return t.scope===n.swScope&&e===n.fcmSenderId}));if(-1!==r)return n[r]}})).then((function(e){if(e)return t.pushManager.getSubscription().catch((function(e){throw n.errorFactory_.create(o.codes.GET_SUBSCRIPTION_FAILED)})).then((function(t){if(t&&n.isSameSubscription_(t,e))return e.fcmToken}))})):Promise.reject(this.errorFactory_.create(o.codes.SW_REGISTRATION_EXPECTED))},e.prototype.createToken=function(e,t){var n,r,i=this;return"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(o.codes.BAD_SENDER_ID)):t instanceof ServiceWorkerRegistration?t.pushManager.getSubscription().then((function(e){return e||t.pushManager.subscribe(c.SUBSCRIPTION_OPTIONS)})).then((function(t){return n=t,i.subscribeToFCM(e,n)})).then((function(o){return r=o,i.saveTokenDetails_(e,t,n,r.token,r.pushSet)})).then((function(){return r.token})):Promise.reject(this.errorFactory_.create(o.codes.SW_REGISTRATION_EXPECTED))},e.prototype.deleteToken=function(e){var t=this;return"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(o.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(e).then((function(e){if(!e)throw t.errorFactory_.create(o.codes.DELETE_TOKEN_NOT_FOUND);return t.openDatabase_().then((function(n){return new Promise((function(r,i){var a=n.transaction([l],"readwrite").objectStore(l).delete(e.swScope);a.onerror=function(e){i(e.target.error)},a.onsuccess=function(n){0!==n.target.result?r(e):i(t.errorFactory_.create(o.codes.FAILED_TO_DELETE_TOKEN))}}))}))}))},e}(),h="granted",p="denied",f=function(){function e(e){var t=this;if(this.errorFactory_=new r.ErrorFactory("messaging","Messaging",o.map),!e.options.messagingSenderId||"string"!=typeof e.options.messagingSenderId)throw this.errorFactory_.create(o.codes.BAD_SENDER_ID);this.messagingSenderId_=e.options.messagingSenderId,this.tokenManager_=new d,this.app=e,this.INTERNAL={},this.INTERNAL.delete=function(){return t.delete}}return e.prototype.getToken=function(){var e=this,t=this.getNotificationPermission_();return t!==h?t===p?Promise.reject(this.errorFactory_.create(o.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null):this.getSWRegistration_().then((function(t){return e.tokenManager_.getSavedToken(e.messagingSenderId_,t).then((function(n){return n||e.tokenManager_.createToken(e.messagingSenderId_,t)}))}))},e.prototype.deleteToken=function(e){var t=this;return this.tokenManager_.deleteToken(e).then((function(){return t.getSWRegistration_().then((function(e){if(e)return e.pushManager.getSubscription()})).then((function(e){if(e)return e.unsubscribe()}))}))},e.prototype.getSWRegistration_=function(){throw this.errorFactory_.create(o.codes.SHOULD_BE_INHERITED)},e.prototype.requestPermission=function(){throw this.errorFactory_.create(o.codes.AVAILABLE_IN_WINDOW)},e.prototype.useServiceWorker=function(e){throw this.errorFactory_.create(o.codes.AVAILABLE_IN_WINDOW)},e.prototype.onMessage=function(e,t,n){throw this.errorFactory_.create(o.codes.AVAILABLE_IN_WINDOW)},e.prototype.onTokenRefresh=function(e,t,n){throw this.errorFactory_.create(o.codes.AVAILABLE_IN_WINDOW)},e.prototype.setBackgroundMessageHandler=function(e){throw this.errorFactory_.create(o.codes.AVAILABLE_IN_SW)},e.prototype.delete=function(){return this.tokenManager_.closeDatabase()},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenManager=function(){return this.tokenManager_},e}();var m={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"};const g=m,y="push-msg-received",v="notification-clicked",_=function(e,t){var n;return(n={})[m.TYPE_OF_MSG]=e,n[m.DATA]=t,n};var b,w=(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});const S=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse_,n.manifestCheckPromise_,n.messageObserver_=null,n.onMessage_=(0,r.createSubscribe)((function(e){n.messageObserver_=e})),n.tokenRefreshObserver_=null,n.onTokenRefresh_=(0,r.createSubscribe)((function(e){n.tokenRefreshObserver_=e})),n.setupSWMessageListener_(),n}return w(t,e),t.prototype.getToken=function(){var t=this;return this.isSupported_()?this.manifestCheck_().then((function(){return e.prototype.getToken.call(t)})):Promise.reject(this.errorFactory_.create(o.codes.UNSUPPORTED_BROWSER))},t.prototype.manifestCheck_=function(){var e=this;if(this.manifestCheckPromise_)return this.manifestCheckPromise_;var t=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise_=t?fetch(t.href).then((function(e){return e.json()})).catch((function(){return Promise.resolve()})).then((function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.errorFactory_.create(o.codes.INCORRECT_GCM_SENDER_ID)})):Promise.resolve(),this.manifestCheckPromise_},t.prototype.requestPermission=function(){var e=this;return Notification.permission===h?Promise.resolve():new Promise((function(t,n){var r=function(r){return r===h?t():n(r===p?e.errorFactory_.create(o.codes.PERMISSION_BLOCKED):e.errorFactory_.create(o.codes.PERMISSION_DEFAULT))},i=Notification.requestPermission((function(e){i||r(e)}));i&&i.then(r)}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.errorFactory_.create(o.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.registrationToUse_)throw this.errorFactory_.create(o.codes.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse_=e},t.prototype.onMessage=function(e,t,n){return this.onMessage_(e,t,n)},t.prototype.onTokenRefresh=function(e,t,n){return this.onTokenRefresh_(e,t,n)},t.prototype.waitForRegistrationToActivate_=function(e){var t=this,n=e.installing||e.waiting||e.active;return new Promise((function(r,i){if(n)if("activated"!==n.state)if("redundant"!==n.state){var a=function(){if("activated"===n.state)r(e);else{if("redundant"!==n.state)return;i(t.errorFactory_.create(o.codes.SW_REG_REDUNDANT))}n.removeEventListener("statechange",a)};n.addEventListener("statechange",a)}else i(t.errorFactory_.create(o.codes.SW_REG_REDUNDANT));else r(e);else i(t.errorFactory_.create(o.codes.NO_SW_IN_REG))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse_?this.waitForRegistrationToActivate_(this.registrationToUse_):(this.registrationToUse_=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(t){throw e.errorFactory_.create(o.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse_=t,t.update(),t}))})))},t.prototype.setupSWMessageListener_=function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(function(t){if(t.data&&t.data[g.TYPE_OF_MSG]){var n=t.data;switch(n[g.TYPE_OF_MSG]){case y:case v:var r=n[g.DATA];e.messageObserver_.next(r)}}}),!1)},t.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},t}(f);var E=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(t){var n=e.call(this,t)||this;return self.addEventListener("push",(function(e){return n.onPush_(e)}),!1),self.addEventListener("pushsubscriptionchange",(function(e){return n.onSubChange_(e)}),!1),self.addEventListener("notificationclick",(function(e){return n.onNotificationClick_(e)}),!1),n.bgMessageHandler_=null,n}return E(t,e),t.prototype.onPush_=function(e){var t,n=this;try{t=e.data.json()}catch(e){return}var r=this.hasVisibleClients_().then((function(e){if(e)return t.notification||n.bgMessageHandler_?n.sendMessageToWindowClients_(t):void 0;var r=n.getNotificationData_(t);if(r){var i=r.title||"";return self.registration.showNotification(i,r)}return n.bgMessageHandler_?n.bgMessageHandler_(t):void 0}));e.waitUntil(r)},t.prototype.onSubChange_=function(e){var t=this,n=this.getToken().then((function(e){if(!e)throw t.errorFactory_.create(o.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);var n=null,r=t.getTokenManager();return r.getTokenDetailsFromToken(e).then((function(e){if(!(n=e))throw t.errorFactory_.create(o.codes.INVALID_SAVED_TOKEN);return self.registration.pushManager.subscribe(c.SUBSCRIPTION_OPTIONS)})).then((function(e){return r.subscribeToFCM(n.fcmSenderId,e,n.fcmPushSet)})).catch((function(e){return r.deleteToken(n.fcmToken).then((function(){throw t.errorFactory_.create(o.codes.UNABLE_TO_RESUBSCRIBE,{message:e})}))}))}));e.waitUntil(n)},t.prototype.onNotificationClick_=function(e){var t=this;if(e.notification&&e.notification.data&&e.notification.data.FCM_MSG){e.stopImmediatePropagation(),e.notification.close();var n=e.notification.data.FCM_MSG,r=n.notification.click_action;if(r){var i=this.getWindowClient_(r).then((function(e){return e||self.clients.openWindow(r)})).then((function(e){if(e){n.notification,delete n.notification;var r=_(v,n);return t.attemptToMessageClient_(e,r)}}));e.waitUntil(i)}}},t.prototype.getNotificationData_=function(e){if(e&&"object"==typeof e.notification){var t,n=Object.assign({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}},t.prototype.setBackgroundMessageHandler=function(e){if(e&&"function"!=typeof e)throw this.errorFactory_.create(o.codes.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler_=e},t.prototype.getWindowClient_=function(e){var t=new URL(e).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(e){for(var n=null,r=0;r<e.length;r++)if(new URL(e[r].url).href===t){n=e[r];break}if(n)return n.focus(),n}))},t.prototype.attemptToMessageClient_=function(e,t){var n=this;return new Promise((function(r,i){if(!e)return i(n.errorFactory_.create(o.codes.NO_WINDOW_CLIENT_TO_MSG));e.postMessage(t),r()}))},t.prototype.hasVisibleClients_=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(e){return e.some((function(e){return"visible"===e.visibilityState}))}))},t.prototype.sendMessageToWindowClients_=function(e){var t=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(n){var r=_(y,e);return Promise.all(n.map((function(e){return t.attemptToMessageClient_(e,r)})))}))},t.prototype.getSWRegistration_=function(){return Promise.resolve(self.registration)},t}(f);const I=k;function T(e){var t={Messaging:S};e.INTERNAL.registerService("messaging",(function(e){return self&&"ServiceWorkerGlobalScope"in self?new I(e):new S(e)}),t)}T(n(3).default)},7182:(e,t,n)=>{"use strict";n.r(t),n(992),n(5760),n(3818)},992:(e,t,n)=>{var r=function(){if(void 0!==n.g)return n.g;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;throw new Error("unable to locate global object")}();"undefined"==typeof Promise&&(r.Promise=Promise=n(2401))},5760:()=>{Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return o;i++}}})},3818:()=>{Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return i;i++}return-1}})},537:(e,t,n)=>{"use strict";n.r(t),n.d(t,{registerStorage:()=>He});var r=n(3),i=function(){function e(e,t){this.code_=a(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return a(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),o="canceled";function a(e){return"storage/"+e}function s(){return new i("unknown","An unknown error occurred, please check the error payload for server response.")}function u(){return new i(o,"User canceled the upload/download.")}function c(){return new i("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function l(){return new i("no-download-url","The given file does not have any download URLs.")}function d(e,t,n){return new i("invalid-argument","Invalid argument in `"+t+"` at index "+e+": "+n)}function h(){return new i("app-deleted","The Firebase app was deleted.")}function p(e,t){return new i("invalid-format","String does not match format '"+e+"': "+t)}function f(e){throw new i("internal-error","Internal error: "+e)}var m={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function g(e){switch(e){case m.RAW:case m.BASE64:case m.BASE64URL:case m.DATA_URL:return;default:throw"Expected one of the event types: ["+m.RAW+", "+m.BASE64+", "+m.BASE64URL+", "+m.DATA_URL+"]."}}var y=function(e,t){this.data=e,this.contentType=t||null};function v(e,t){switch(e){case m.RAW:return new y(_(t));case m.BASE64:case m.BASE64URL:return new y(b(e,t));case m.DATA_URL:return new y(function(e){var t=new S(e);return t.base64?b(m.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw p(m.DATA_URL,"Malformed data URL.")}return _(t)}(t.rest)}(t),function(e){return new S(e).contentType}(t))}throw s()}function _(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function b(e,t){switch(e){case m.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw p(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case m.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw p(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw p(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var w,S=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw p(m.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=t[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=e.substring(e.indexOf(",")+1)},E={STATE_CHANGED:"state_changed"},k="running",I="pausing",T="paused",C="success",A="canceling",P="canceled",R="error",N={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function D(e){switch(e){case k:case I:case A:return N.RUNNING;case T:return N.PAUSED;case C:return N.SUCCESS;case P:return N.CANCELED;default:return N.ERROR}}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e,t){for(var n in e)O(e,n)&&t(n,e[n])}function M(e){if(null==e)return{};var t={};return L(e,(function(e,n){t[e]=n})),t}function x(e){return new Promise(e)}function F(e){return Promise.resolve(e)}function q(e){return null!=e}function B(e){return void 0!==e}function U(e){return"function"==typeof e}function j(e){return"object"==typeof e}function W(e){return j(e)&&null!==e}function V(e){return"string"==typeof e||e instanceof String}function H(e){return G()&&e instanceof Blob}function G(){return"undefined"!=typeof Blob}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(w||(w={}));var K=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=w.NO_ERROR,this.sendPromise_=x((function(t,n){e.xhr_.addEventListener("abort",(function(n){e.errorCode_=w.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(n){e.errorCode_=w.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(n){t(e)}))}))}return e.prototype.send=function(e,t,n,r){var i=this;if(this.sent_)throw f("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(t,e,!0),q(r)&&L(r,(function(e,t){i.xhr_.setRequestHeader(e,t.toString())})),q(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw f("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw f("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw f("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){q(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){q(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),$=function(){function e(){}return e.prototype.createXhrIo=function(){return new K},e}();var Q=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n;throw new i("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){for(var n=null,r="([A-Za-z0-9.\\-]+)",o=[{regex:new RegExp("^gs://"+r+"(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],a=0;a<o.length;a++){var s=o[a],u=s.regex.exec(t);if(u){var c=u[s.indices.bucket],l=u[s.indices.path];l||(l=""),n=new e(c,l),s.postModify(n);break}}if(null==n)throw function(e){return new i("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}();function z(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function Y(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}var Z="https://firebasestorage.googleapis.com";function X(e){return Z+"/v0"+e}function J(e){return Z+"/v0"+e}function ee(e){var t=encodeURIComponent,n="?";return L(e,(function(e,r){var i=t(e)+"="+t(r);n=n+i+"&"})),n=n.slice(0,-1)}function te(e,t){return t}var ne=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||te},re=null;function ie(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function oe(e){if(!e||!j(e))throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if(!j(n))throw"Expected object for 'customMetadata' mapping."}else if(W(n))throw"Mapping for '"+t+"' cannot be an object."}}function ae(e,t,n){for(var r=t.length,o=t.length,a=0;a<t.length;a++)if(t[a].optional){r=a;break}var s,u,c,l,h,p;if(!(r<=n.length&&n.length<=o))throw s=r,u=o,c=e,l=n.length,s===u?(h=s,p=1===s?"argument":"arguments"):(h="between "+s+" and "+u,p="arguments"),new i("invalid-argument-count","Invalid argument count in `"+c+"`: Expected "+h+" "+p+", received "+l+".");for(a=0;a<n.length;a++)try{t[a].validator(n[a])}catch(t){throw t instanceof Error?d(a,e,t.message):d(a,e,t)}}var se=function(e,t){var n=this;this.validator=function(t){n.optional&&!B(t)||e(t)},this.optional=!!t};function ue(e,t){function n(e){if(!V(e))throw"Expected string."}var r,i,o;return e?(i=n,o=e,r=function(e){i(e),o(e)}):r=n,new se(r,t)}function ce(){return new se((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||G()&&e instanceof Blob))throw"Expected Blob or File."}))}function le(e){return new se(oe,e)}function de(){return new se((function(e){if(!(function(e){return"number"==typeof e||e instanceof Number}(e)&&e>=0))throw"Expected a number 0 or greater."}))}function he(e,t){return new se((function(t){if(!(null===t||q(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)}),t)}function pe(e){return new se((function(e){if(null!==e&&!U(e))throw"Expected a Function."}),e)}function fe(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fe();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(G())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var ge=function(){function e(e,t){var n=0,r="";H(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(H(this.data_)){var r=(i=this.data_,o=t,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new e(r)}var i,o,a;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(G()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(me.apply(null,r))}var i=t.map((function(e){return V(e)?v(m.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function ye(e,t){return-1!==e.indexOf(t)}var ve=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function _e(e){if(!e)throw s()}function be(e,t){return function(n,r){var i=function(e,t,n){var r=function(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return j(n=t)&&!Array.isArray(n)?t:null}(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Q(n,r);return t.makeStorageReference(i)}})}(r,e),r}(e,r,n)}(e,r,t);return _e(null!==i),i}}function we(e){return function(t,n){var r,o,a;return 401===t.getStatus()?r=new i("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new i("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(o=e.path,r=new i("unauthorized","User does not have permission to access '"+o+"'.")):r=n,r.setServerResponseProp(n.serverResponseProp()),r}}function Se(e){var t=we(e);return function(n,r){var o,a=t(n,r);return 404===n.getStatus()&&(o=e.path,a=new i("object-not-found","Object '"+o+"' does not exist.")),a.setServerResponseProp(r.serverResponseProp()),a}}function Ee(e,t,n){var r=X(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new ve(r,"GET",be(e,n),i);return o.errorHandler=Se(t),o}function ke(e,t,n,r){var i=X(t.fullServerUrl()),o=ie(n,r),a=e.maxOperationRetryTime(),s=new ve(i,"PATCH",be(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Se(t),s}function Ie(e,t){var n=X(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new ve(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Se(t),i}function Te(e,t,n){var r=M(n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var Ce=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function Ae(e,t){var n;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){_e(!1)}return _e(ye(t||["active"],n)),n}var Pe=262144;var Re=function(e,t,n){if(U(e)||q(t)||q(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Ne=function(){function e(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(e.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var e=this.metadata.downloadURLs;return null!=e&&null!=e[0]?e[0]:null}return null},enumerable:!0,configurable:!0}),e}();function De(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];F(!0).then((function(){e.apply(null,t)}))}}var Oe=function(){function e(e,t,n,r,i,a){void 0===a&&(a=null);var s=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=a,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=k,this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals(o)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_(R))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals(o)?s.completeTransitions_():(s.error_=e,s.transition_(R))},this.promise_=x((function(e,t){s.resolve_=e,s.reject_=t,s.start_()})),this.promise_.then(null,(function(){}))}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n,r){e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===k&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then((function(n){switch(t.state_){case k:e(n);break;case A:t.transition_(P);break;case I:t.transition_(T)}}))},e.prototype.createResumable_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=Te(t,r,i),s={name:a.fullPath},u=J(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=ie(a,n),d=e.maxUploadRetryTime(),h=new ve(u,"POST",(function(e,t){var n;Ae(e);try{n=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){_e(!1)}return _e(V(n)),n}),d);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=we(t),h}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime(),o=new ve(n,"POST",(function(e,t){var n,i=Ae(e,["active","final"]);try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){_e(!1)}var o=parseInt(n,10);return _e(!isNaN(o)),new Ce(o,r.size(),"final"===i)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=we(t),o}(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then((function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.continueUpload_=function(){var e=this,t=Pe*this.chunkMultiplier_,n=new Ce(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(o){var a;try{a=function(e,t,n,r,o,a,s,u){var l=new Ce(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new i("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var d=l.total-l.current,h=d;o>0&&(h=Math.min(h,o));var p=l.current,f=p+h,m={"X-Goog-Upload-Command":h===d?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},g=r.slice(p,f);if(null===g)throw c();var y=t.maxUploadRetryTime(),v=new ve(n,"POST",(function(e,n){var i,o=Ae(e,["active","final"]),s=l.current+h,u=r.size();return i="final"===o?be(t,a)(e,n):null,new Ce(s,u,"final"===o,i)}),y);return v.headers=m,v.body=g.uploadData(),v.progressCallback=u||null,v.errorHandler=we(e),v}(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(t){return e.error_=t,void e.transition_(R)}var s=e.authWrapper_.makeRequest(a,o);e.request_=s,s.getPromise().then((function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(C)):e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.increaseMultiplier_=function(){Pe*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var n=Ee(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_(C)}),e.metadataErrorHandler_)}))},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=Te(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ie(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",d="\r\n--"+s+"--",h=ge.getBlob(l,r,d);if(null===h)throw c();var p={name:u.fullPath},f=J(o),m=e.maxUploadRetryTime(),g=new ve(f,"POST",be(e,n),m);return g.urlParams=p,g.headers=a,g.body=h.uploadData(),g.errorHandler=we(t),g}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(C)}),e.errorHandler_)}))},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case A:case I:this.state_=e,null!==this.request_&&this.request_.cancel();break;case k:var t=this.state_===T;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case T:case R:case C:this.state_=e,this.notifyObservers_();break;case P:this.error_=u(),this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case I:this.transition_(T);break;case A:this.transition_(P);break;case k:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=D(this.state_);return new Ne(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function i(t){if(e!==E.STATE_CHANGED)throw"Expected one of the event types: ["+E.STATE_CHANGED+"]."}void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=pe(!0).validator,s=he(null,!0).validator;function u(e){try{return void a(e)}catch(e){}try{if(s(e),!(B(e.next)||B(e.error)||B(e.complete)))throw"";return}catch(e){throw o}}var c=[ue(i),he(u,!0),pe(!0),pe(!0)];ae("on",c,arguments);var l=this;function d(e){return function(t,n,i){null!==e&&ae("on",e,arguments);var o=new Re(t,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function h(e){if(null===e)throw o;u(e)}var p=[he(h),pe(!0),pe(!0)],f=!(B(t)||B(n)||B(r));return f?d(p):d(null)(t,n,r)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t,n,r;n=e,-1!==(r=(t=this.observers_).indexOf(n))&&t.splice(r,1)},e.prototype.notifyObservers_=function(){var e,t=this;this.finishPromise_(),(e=this.observers_,Array.prototype.slice.call(e)).forEach((function(e){t.notifyObserver_(e)}))},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(D(this.state_)){case N.SUCCESS:De(this.resolve_.bind(null,this.snapshot))();break;case N.CANCELED:case N.ERROR:De(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(D(this.state_)){case N.RUNNING:case N.PAUSED:null!==e.next&&De(e.next.bind(e,this.snapshot))();break;case N.SUCCESS:null!==e.complete&&De(e.complete.bind(e))();break;default:null!==e.error&&De(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){ae("resume",[],arguments);var e=this.state_===T||this.state_===I;return e&&this.transition_(k),e},e.prototype.pause=function(){ae("pause",[],arguments);var e=this.state_===k;return e&&this.transition_(I),e},e.prototype.cancel=function(){ae("cancel",[],arguments);var e=this.state_===k||this.state_===I;return e&&this.transition_(A),e},e}(),Le=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof Q?t:Q.makeFromUrl(t)}return e.prototype.toString=function(){return ae("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return function(){if(re)return re;var e=[];e.push(new ne("bucket")),e.push(new ne("generation")),e.push(new ne("metageneration")),e.push(new ne("name","fullPath",!0));var t=new ne("name");t.xform=function(e,t){return function(e){return!V(e)||e.length<2?e:Y(e=e)}(t)},e.push(t);var n=new ne("size");return n.xform=function(e,t){return q(t)?+t:t},e.push(n),e.push(new ne("timeCreated")),e.push(new ne("updated")),e.push(new ne("md5Hash",null,!0)),e.push(new ne("cacheControl",null,!0)),e.push(new ne("contentDisposition",null,!0)),e.push(new ne("contentEncoding",null,!0)),e.push(new ne("contentLanguage",null,!0)),e.push(new ne("contentType",null,!0)),e.push(new ne("metadata","customMetadata",!0)),e.push(new ne("downloadTokens","downloadURLs",!1,(function(e,t){if(!(V(t)&&t.length>0))return[];var n=encodeURIComponent;return t.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return"https://firebasestorage.googleapis.com/v0/b/"+n(r)+"/o/"+n(i)+ee({alt:"media",token:t})}))}))),re=e}()},e.prototype.child=function(e){ae("child",[ue()],arguments);var t=z(this.location.path,e),n=new Q(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0==e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new Q(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new Q(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Y(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),ae("put",[ce(),le(!0)],arguments),this.throwIfRoot_("put"),new Oe(this,this.authWrapper,this.location,this.mappings(),new ge(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=m.RAW),ae("putString",[ue(),ue(g,!0),le(!0)],arguments),this.throwIfRoot_("putString");var r=v(t,e),i=M(n);return!q(i.contentType)&&q(r.contentType)&&(i.contentType=r.contentType),new Oe(this,this.authWrapper,this.location,this.mappings(),new ge(r.data,!0),i)},e.prototype.delete=function(){ae("delete",[],arguments),this.throwIfRoot_("delete");var e=this;return this.authWrapper.getAuthToken().then((function(t){var n=Ie(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()}))},e.prototype.getMetadata=function(){ae("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var e=this;return this.authWrapper.getAuthToken().then((function(t){var n=Ee(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()}))},e.prototype.updateMetadata=function(e){ae("updateMetadata",[le()],arguments),this.throwIfRoot_("updateMetadata");var t=this;return this.authWrapper.getAuthToken().then((function(n){var r=ke(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()}))},e.prototype.getDownloadURL=function(){return ae("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then((function(e){var t=e.downloadURLs[0];if(q(t))return t;throw l()}))},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new i("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},e}(),Me=function(){function e(e){this.promise_=function(e){return Promise.reject(e)}(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}(),xe=function(){function e(){this.map_={},this.id_=-9007199254740991}return e.prototype.addRequest=function(e){var t=this.id_;this.id_++,this.map_[t]=e;var n=this;function r(){delete n.map_[t]}e.getPromise().then(r,r)},e.prototype.clear=function(){L(this.map_,(function(e,t){t&&t.cancel(!0)})),this.map_={}},e}(),Fe=function(){function e(t,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;q(a)&&(this.bucket_=e.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new xe}return e.extractBucket_=function(e){var t=e.storageBucket||null;return null==t?null:Q.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&q(this.app_.INTERNAL)&&q(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then((function(e){return null!==e?e.accessToken:null}),(function(e){return null})):F(null)},e.prototype.bucket=function(){if(this.deleted_)throw h();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new Me(h());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),qe=function(){function e(e,t,n,r,i,o,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var d=this;this.promise_=x((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,o=e.resolve_,a=e.reject_,c=n.xhr;if(n.wasSuccessCode)try{var l=e.callback_(c,c.getResponseText());B(l)?o(l):o()}catch(e){a(e)}else null!==c?((r=s()).setServerResponseProp(c.getResponseText()),e.errorCallback_?a(e.errorCallback_(c,r)):a(r)):n.canceled?a(r=e.appDelete_?h():u()):a(r=new i("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Be(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){c||(c=!0,n.apply(null,arguments))}function d(t){o=setTimeout((function(){o=null,function(t,n){if(n)t(!1,new Be(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===w.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=ye(e.successCodes_,o);t(!0,new Be(a,n))}else{var s=n.getErrorCode()===w.ABORT;t(!1,new Be(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}(h,u())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.apply(null,arguments);else{var r;u()||a?l.apply(null,arguments):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),d(r))}}var p=!1;function f(e){p||(p=!0,c||(null!==o?(e||(s=2),clearTimeout(o),d(0)):e||(s=1)))}return d(0),setTimeout((function(){a=!0,f(!0)}),r),f}(0,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=ye([408,429],e),r=ye(this.additionalRetryCodes_,e);return t||n||r},e}(),Be=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function Ue(e,t,n){var i=ee(e.urlParams),o=e.url+i,a=M(e.headers);return function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(a,t),function(e){var t=void 0!==r.default?r.default.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}(a),new qe(o,e.method,a,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var je=function(){function e(e,t,n){if(this.bucket_=null,this.authWrapper_=new Fe(e,(function(e,t){return new Le(e,t)}),Ue,this,t),this.app_=e,null!=n)this.bucket_=Q.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new Q(r,""))}this.internals_=new We(this)}return e.prototype.ref=function(e){function t(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(ae("ref",[ue(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Le(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{Q.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}return ae("refFromURL",[ue(t,!1)],arguments),new Le(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){ae("setMaxUploadRetryTime",[de()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){ae("setMaxOperationRetryTime",[de()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),We=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),F(void 0)},e}();function Ve(e,t,n){return new je(e,new $,n)}function He(e){var t={TaskState:N,TaskEvent:E,StringFormat:m,Storage:je,Reference:Le};e.INTERNAL.registerService("storage",Ve,t,void 0,!0)}He(r.default)},8261:(e,t,n)=>{"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(6616)),r(n(6324)),r(n(1631)),r(n(9990)),r(n(5423)),r(n(3330)),r(n(6054)),r(n(9144)),r(n(626)),r(n(9521)),r(n(6799)),r(n(2862)),r(n(8758)),r(n(8722)),r(n(4491))},6616:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1631);t.assert=function(e,n){if(!e)throw t.assertionError(n)},t.assertionError=function(e){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)}},1631:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},6324:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){for(var t=[],n=0,r=0;r<e.length;r++){for(var i=e.charCodeAt(r);i>255;)t[n++]=255&i,i>>=8;t[n++]=i}return t};t.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,d=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(h=64)),r.push(n[l],n[d],n[h],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){var t=8192;if(e.length<t)return String.fromCharCode.apply(null,e);for(var n="",r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n+=String.fromCharCode.apply(null,i)}return n}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var l=a<<4&240|s>>2;if(r.push(l),64!=u){var d=s<<6&192|u;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},t.base64Encode=function(e){var r=n(e);return t.base64.encodeByteArray(r,!0)},t.base64Decode=function(e){try{return t.base64.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}},9990:(e,t)=>{"use strict";function n(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=n(e[r],t[r]));return e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopy=function(e){return n(void 0,e)},t.deepExtend=n,t.patchProperty=function(e,t,n){e[t]=n}},5423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();t.Deferred=n},3330:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1631);t.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(t.getUA())},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isNodeSdk=function(){return!0===r.CONSTANTS.NODE_CLIENT||!0===r.CONSTANTS.NODE_ADMIN}},6054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="FirebaseError",r=Error.captureStackTrace;t.patchCapture=function(e){var t=r;return r=e,t};var i=function(e,t){if(this.code=e,this.message=t,r)r(this,o.prototype.create);else{var i=Error.apply(this,arguments);this.name=n,Object.defineProperty(this,"stack",{get:function(){return i.stack}})}};t.FirebaseError=i,(i.prototype=Object.create(Error.prototype)).constructor=i,i.prototype.name=n;var o=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],o=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,(function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"})),n=this.serviceName+": "+n+" ("+o+").";var a=new i(o,n);for(var s in t)t.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(a[s]=t[s]);return a},e}();t.ErrorFactory=o},8210:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Hash=function(){this.blockSize=-1}},9144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonEval=function(e){return JSON.parse(e)},t.stringify=function(e){return JSON.stringify(e)}},626:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6324),i=n(9144);t.decode=function(e){var t={},n={},o={},a="";try{var s=e.split(".");t=i.jsonEval(r.base64Decode(s[0])||""),n=i.jsonEval(r.base64Decode(s[1])||""),a=s[2],o=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:o,signature:a}},t.isValidTimestamp=function(e){var n,r,i=t.decode(e).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?n=i.nbf:i.hasOwnProperty("iat")&&(n=i.iat),r=i.hasOwnProperty("exp")?i.exp:n+86400),o&&n&&r&&o>=n&&o<=r},t.issuedAtTime=function(e){var n=t.decode(e).claims;return"object"==typeof n&&n.hasOwnProperty("iat")?n.iat:null},t.isValidFormat=function(e){var n=t.decode(e),r=n.claims;return!!n.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},t.isAdmin=function(e){var n=t.decode(e).claims;return"object"==typeof n&&!0===n.admin}},9521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.safeGet=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.forEach=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},t.extend=function(e,n){return t.forEach(n,(function(t,n){e[t]=n})),e},t.clone=function(e){return t.extend({},e)},t.isNonNullObject=function(e){return"object"==typeof e&&null!==e},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.getCount=function(e){var t=0;for(var n in e)t++;return t},t.map=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r},t.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},t.findValue=function(e,n,r){var i=t.findKey(e,n,r);return i&&e[i]},t.getAnyKey=function(e){for(var t in e)return t},t.getValues=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},t.every=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0}},6799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9521);t.querystring=function(e){var t=[];return r.forEach(e,(function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})),t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t}},2862:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}return i(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],d=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+d+a+n[r]&4294967295,d=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},t}(n(8210).Hash);t.Sha1=o},8758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSubscribe=function(e,t){var r=new n(e,t);return r.subscribe.bind(r)};var n=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var i,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(i.next=r),void 0===i.error&&(i.error=r),void 0===i.complete&&(i.complete=r);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?i.error(o.finalError):i.complete()}catch(e){}})),this.observers.push(i),a},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function r(){}t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}}},4491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6616);t.stringToByteArray=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;i++,r.assert(i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(e.charCodeAt(i)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t}},8722:(e,t)=>{"use strict";function n(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+(r+" argument ")}Object.defineProperty(t,"__esModule",{value:!0}),t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.errorPrefix=n,t.validateNamespace=function(e,t,r,i){if((!i||r)&&"string"!=typeof r)throw new Error(n(e,t,i)+"must be a valid firebase namespace.")},t.validateCallback=function(e,t,r,i){if((!i||r)&&"function"!=typeof r)throw new Error(n(e,t,i)+"must be a valid function.")},t.validateContextObject=function(e,t,r,i){if((!i||r)&&("object"!=typeof r||null===r))throw new Error(n(e,t,i)+"must be a valid context object.")}},3582:(module,__unused_webpack_exports,__webpack_require__)=>{(function(){var g,goog=goog||{},k=this;function l(e){return"string"==typeof e}function aa(){}function ba(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function n(e){return"array"==ba(e)}function ca(e){var t=ba(e);return"array"==t||"object"==t&&"number"==typeof e.length}function da(e){return"function"==ba(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var q="closure_uid_"+(1e9*Math.random()>>>0),ea=0;function fa(e,t,n){return e.call.apply(e.bind,arguments)}function ha(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function r(e,t,n){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ha).apply(null,arguments)}function ia(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var t=Date.now||function(){return+new Date};function u(e,t){function n(){}n.prototype=t.prototype,e.L=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ab=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function ja(e){if(Error.captureStackTrace)Error.captureStackTrace(this,ja);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function ka(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}u(ja,Error),ja.prototype.name="CustomError";var la=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ma(e,t){return e<t?-1:e>t?1:0}function na(e,t){t.unshift(e),ja.call(this,ka.apply(null,t)),t.shift()}function oa(e,t){throw new na("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function w(){0!=qa&&(ra[this[q]||(this[q]=++ea)]=this),this.i=this.i,this.w=this.w}u(na,ja),na.prototype.name="AssertionError";var qa=0,ra={};w.prototype.i=!1,w.prototype.Z=function(){if(!this.i&&(this.i=!0,this.A(),0!=qa)){var e=this[q]||(this[q]=++ea);delete ra[e]}},w.prototype.A=function(){if(this.w)for(;this.w.length;)this.w.shift()()};var sa=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(l(e))return l(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ta=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=l(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},x;function ua(e){e:{for(var t=va,n=e.length,r=l(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:l(e)?e.charAt(t):e[t]}function wa(e){if(!n(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0}function xa(e){return Array.prototype.concat.apply([],arguments)}function ya(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}e:{var za=k.navigator;if(za){var Aa=za.userAgent;if(Aa){x=Aa;break e}}x=""}function y(e){return-1!=x.indexOf(e)}function Ba(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ca(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}function Da(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n}function Ea(e){var t,n={};for(t in e)n[t]=e[t];return n}var Fa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ga(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Fa.length;o++)n=Fa[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ha(e){return Ha[" "](e),e}function Ia(e,t){var n=Ja;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}Ha[" "]=aa;var Ka=y("Opera"),z=y("Trident")||y("MSIE"),La=y("Edge"),Ma=y("Gecko")&&!(-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),Na=-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"),Pa,a;function Oa(){var e=k.document;return e?e.documentMode:void 0}e:{var Qa="",Ra=(a=x,Ma?/rv:([^\);]+)(\)|;)/.exec(a):La?/Edge\/([\d\.]+)/.exec(a):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Na?/WebKit\/(\S+)/.exec(a):Ka?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Ra&&(Qa=Ra?Ra[1]:""),z){var Sa=Oa();if(null!=Sa&&Sa>parseFloat(Qa)){Pa=String(Sa);break e}}Pa=Qa}var Ja={},Ua;function Ta(e){return Ia(e,(function(){for(var t=0,n=la(String(Pa)).split("."),r=la(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ma(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ma(0==a[2].length,0==s[2].length)||ma(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var Va=k.document;Ua=Va&&z?Oa()||("CSS1Compat"==Va.compatMode?parseInt(Pa,10):5):void 0;var Wa=Object.freeze||function(e){return e},Xa=!z||9<=Number(Ua),Ya=z&&!Ta("9"),Za=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return k.addEventListener("test",aa,t),k.removeEventListener("test",aa,t),e}();function A(e,t){this.type=e,this.a=this.target=t,this.Pa=!0}function $a(e,t){if(A.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Ma){e:{try{Ha(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,null===r?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=l(e.pointerType)?e.pointerType:ab[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}A.prototype.b=function(){this.Pa=!1},u($a,A);var ab=Wa({2:"touch",3:"pen",4:"mouse"});$a.prototype.b=function(){$a.L.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ya)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var bb="closure_listenable_"+(1e6*Math.random()|0);function cb(e){return!(!e||!e[bb])}var db=0;function eb(e,t,n,r,i){this.listener=e,this.a=null,this.src=t,this.type=n,this.capture=!!r,this.ga=i,this.key=++db,this.Y=this.ca=!1}function fb(e){e.Y=!0,e.listener=null,e.a=null,e.src=null,e.ga=null}function gb(e){this.src=e,this.a={},this.b=0}function ib(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=sa(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fb(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function jb(e,t,n,r,i){return e=e.a[t.toString()],t=-1,e&&(t=hb(e,n,r,i)),-1<t?e[t]:null}function hb(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ga==r)return i}return-1}gb.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=hb(e,t,r,i);return-1<a?(t=e[a],n||(t.ca=!1)):((t=new eb(t,this.src,o,!!r,i)).ca=n,e.push(t)),t};var kb="closure_lm_"+(1e6*Math.random()|0),lb={},mb=0;function nb(e,t,r,i,o){if(i&&i.once)return ob(e,t,r,i,o);if(n(t)){for(var a=0;a<t.length;a++)nb(e,t[a],r,i,o);return null}return r=pb(r),cb(e)?e.aa(t,r,p(i)?!!i.capture:!!i,o):qb(e,t,r,!1,i,o)}function qb(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=rb(e);if(s||(e[kb]=s=new gb(e)),(n=s.add(t,n,r,a,o)).a)return n;if(r=sb(),n.a=r,r.src=e,r.listener=n,e.addEventListener)Za||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(tb(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return mb++,n}function sb(){var e=ub,t=Xa?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}function ob(e,t,r,i,o){if(n(t)){for(var a=0;a<t.length;a++)ob(e,t[a],r,i,o);return null}return r=pb(r),cb(e)?e.Ha(t,r,p(i)?!!i.capture:!!i,o):qb(e,t,r,!0,i,o)}function vb(e,t,r,i,o){if(n(t))for(var a=0;a<t.length;a++)vb(e,t[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=pb(r),cb(e)?e.va(t,r,i,o):e&&(e=rb(e))&&(t=jb(e,t,r,i,o))&&wb(t)}function wb(e){if("number"!=typeof e&&e&&!e.Y){var t=e.src;if(cb(t))ib(t.c,e);else{var n=e.type,r=e.a;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(tb(n),r):t.addListener&&t.removeListener&&t.removeListener(r),mb--,(n=rb(t))?(ib(n,e),0==n.b&&(n.src=null,t[kb]=null)):fb(e)}}}function tb(e){return e in lb?lb[e]:lb[e]="on"+e}function xb(e,t,n,r){var i=!0;if((e=rb(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.Y&&(o=yb(o,r),i=i&&!1!==o)}return i}function yb(e,t){var n=e.listener,r=e.ga||e.src;return e.ca&&wb(e),n.call(r,t)}function ub(e,t){if(e.Y)return!0;if(!Xa){if(!t)e:{t=["window","event"];for(var n=k,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new $a(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.a;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.a=r[i];var o=xb(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.a=r[i],o=xb(r[i],e,!1,t),n=n&&o}return n}return yb(e,new $a(t,this))}function rb(e){return(e=e[kb])instanceof gb?e:null}var zb="__closure_events_fn_"+(1e9*Math.random()>>>0);function pb(e){return da(e)?e:(e[zb]||(e[zb]=function(t){return e.handleEvent(t)}),e[zb])}function B(){w.call(this),this.c=new gb(this),this.P=this,this.J=null}function Ab(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ga||a.src;a.ca&&ib(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Pa}function Bb(e){return!/^\s*$/.test(e)&&/^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Cb(a){if(a=String(a),Bb(a))try{return eval("("+a+")")}catch(e){}throw Error("Invalid JSON string: "+a)}function Db(e){var t=[];return Eb(new Fb,e,t),t.join("")}function Fb(){}function Eb(e,t,r){if(null==t)r.push("null");else{if("object"==typeof t){if(n(t)){var i=t;t=i.length,r.push("[");for(var o="",a=0;a<t;a++)r.push(o),Eb(e,i[a],r),o=",";return void r.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(i in r.push("{"),o="",t)Object.prototype.hasOwnProperty.call(t,i)&&"function"!=typeof(a=t[i])&&(r.push(o),Gb(i,r),r.push(":"),Eb(e,a,r),o=",");return void r.push("}")}t=t.valueOf()}switch(typeof t){case"string":Gb(t,r);break;case"number":r.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":r.push(String(t));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}u(B,w),B.prototype[bb]=!0,g=B.prototype,g.addEventListener=function(e,t,n,r){nb(this,e,t,n,r)},g.removeEventListener=function(e,t,n,r){vb(this,e,t,n,r)},g.dispatchEvent=function(e){var t,n=this.J;if(n)for(t=[];n;n=n.J)t.push(n);n=this.P;var r=e.type||e;if(l(e))e=new A(e,n);else if(e instanceof A)e.target=e.target||n;else{var i=e;Ga(e=new A(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Ab(a,r,!0,e)&&i}if(i=Ab(a=e.a=n,r,!0,e)&&i,i=Ab(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ab(a=e.a=t[o],r,!1,e)&&i;return i},g.A=function(){if(B.L.A.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)fb(n[r]);delete t.a[e],t.b--}}this.J=null},g.aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},g.Ha=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)},g.va=function(e,t,n,r){var i=this.c;if((e=String(e).toString())in i.a){var o=i.a[e];-1<(t=hb(o,t,n,r))&&(fb(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete i.a[e],i.b--))}};var Hb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ib=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Gb(e,t){t.push('"',e.replace(Ib,(function(e){var t=Hb[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Hb[e]=t),t})),'"')}function Jb(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Kb(){this.b=this.a=null}Jb.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Nb=new Jb((function(){return new Lb}),(function(e){e.reset()})),Rb,Tb;function Ob(){var e=Pb,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Lb(){this.next=this.b=this.a=null}function Qb(e){k.setTimeout((function(){throw e}),0)}function Sb(){var e=k.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!y("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),i="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=r((function(e){"*"!=i&&e.origin!=i||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,i)}}}),void 0!==e&&!y("Trident")&&!y("MSIE")){var t=new e,n={},i=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).za;n.za=null,e()}},function(e){i.next={za:e},i=i.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){k.setTimeout(e,0)}}function Ub(){if(-1!=String(k.Promise).indexOf("[native code]")){var e=k.Promise.resolve(void 0);Tb=function(){e.then(Vb)}}else Tb=function(){var e=Vb;!da(k.setImmediate)||k.Window&&k.Window.prototype&&!y("Edge")&&k.Window.prototype.setImmediate==k.setImmediate?(Rb||(Rb=Sb()),Rb(e)):k.setImmediate(e)}}Kb.prototype.add=function(e,t){var n=Nb.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Lb.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Lb.prototype.reset=function(){this.next=this.b=this.a=null};var Wb=!1,Pb=new Kb;function Vb(){for(var e;e=Ob();){try{e.a.call(e.b)}catch(e){Qb(e)}var t=Nb;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Wb=!1}function Xb(e,n){B.call(this),this.b=e||1,this.a=n||k,this.f=r(this.ib,this),this.g=t()}function Yb(e){e.$=!1,e.K&&(e.a.clearTimeout(e.K),e.K=null)}function Zb(e,t,n){if(da(e))n&&(e=r(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=r(e.handleEvent,e)}return 2147483647<Number(t)?-1:k.setTimeout(e,t||0)}function $b(e,t,n){w.call(this),this.f=null!=n?r(e,n):e,this.c=t,this.b=r(this.bb,this),this.a=[]}function ac(e){e.X=Zb(e.b,e.c),e.f.apply(null,e.a)}function C(e){w.call(this),this.b=e,this.a={}}u(Xb,B),g=Xb.prototype,g.$=!1,g.K=null,g.ib=function(){if(this.$){var e=t()-this.g;0<e&&e<.8*this.b?this.K=this.a.setTimeout(this.f,this.b-e):(this.K&&(this.a.clearTimeout(this.K),this.K=null),this.dispatchEvent("tick"),this.$&&(this.K=this.a.setTimeout(this.f,this.b),this.g=t()))}},g.start=function(){this.$=!0,this.K||(this.K=this.a.setTimeout(this.f,this.b),this.g=t())},g.A=function(){Xb.L.A.call(this),Yb(this),delete this.a},u($b,w),g=$b.prototype,g.ha=!1,g.X=null,g.Xa=function(e){this.a=arguments,this.X?this.ha=!0:ac(this)},g.A=function(){$b.L.A.call(this),this.X&&(k.clearTimeout(this.X),this.X=null,this.ha=!1,this.a=[])},g.bb=function(){this.X=null,this.ha&&(this.ha=!1,ac(this))},u(C,w);var bc=[];function cc(e){Ba(e.a,(function(e,t){this.a.hasOwnProperty(t)&&wb(e)}),e),e.a={}}function dc(e,t,n){this.reset(e,t,n,void 0,void 0)}C.prototype.aa=function(e,t,r,i){n(t)||(t&&(bc[0]=t.toString()),t=bc);for(var o=0;o<t.length;o++){var a=nb(e,t[o],r||this.handleEvent,i||!1,this.b||this);if(!a)break;this.a[a.key]=a}return this},C.prototype.va=function(e,t,r,i,o){if(n(t))for(var a=0;a<t.length;a++)this.va(e,t[a],r,i,o);else r=r||this.handleEvent,i=p(i)?!!i.capture:!!i,o=o||this.b||this,r=pb(r),i=!!i,(t=cb(e)?jb(e.c,String(t),r,i,o):e&&(e=rb(e))?jb(e,t,r,i,o):null)&&(wb(t),delete this.a[t.key])},C.prototype.A=function(){C.L.A.call(this),cc(this)},C.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dc.prototype.a=null;var ec=0;function fc(e){this.f=e,this.b=this.c=this.a=null}function D(e,t){this.name=e,this.value=t}dc.prototype.reset=function(e,n,r,i,o){"number"==typeof o||ec++,i||t(),delete this.a},D.prototype.toString=function(){return this.name};var gc=new D("SEVERE",1e3),hc=new D("WARNING",900),ic=new D("INFO",800),jc=new D("CONFIG",700),kc=new D("FINE",500);function lc(e){return e.c?e.c:e.a?lc(e.a):(oa("Root logger has no level set."),null)}fc.prototype.log=function(e,t,n){if(e.value>=lc(this).value)for(da(t)&&(t=t()),e=new dc(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var mc={},nc=null;function oc(e){var t;if(nc||(nc=new fc(""),mc[""]=nc,nc.c=jc),!(t=mc[e])){t=new fc(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=oc(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,mc[e]=t}return t}function E(e,t){e&&e.log(hc,t,void 0)}function pc(e,t){e&&e.log(ic,t,void 0)}function F(e,t){e&&e.log(kc,t,void 0)}function qc(){this.a=oc("goog.labs.net.webChannel.WebChannelDebug"),this.b=!0}function rc(e,t,n,r,i,o){H(e,(function(){if(e.b)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");a=2<=d.length&&"type"==d[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}function sc(e,t,n,r,i,o,a){H(e,(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}function tc(e,t,n,r){H(e,(function(){return"XMLHTTP TEXT ("+t+"): "+uc(e,n)+(r?" "+r:"")}))}function vc(e,t){H(e,(function(){return"TIMEOUT: "+t}))}function I(e,t){F(e.a,t)}function wc(e,t,n){(e=e.a)&&e.log(gc,n||"Exception",t)}function H(e,t){pc(e.a,t)}function xc(e,t){(e=e.a)&&e.log(gc,t,void 0)}function uc(e,t){if(!e.b)return t;if(!t)return null;try{var r=JSON.parse(t);if(r)for(var i=0;i<r.length;i++)if(n(r[i])){var o=r[i];if(!(2>o.length)){var a=o[1];if(n(a)&&!(1>a.length)){var s=a[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<a.length;u++)a[u]=""}}}return Db(r)}catch(n){return I(e,"Exception parsing expected JS array - probably was not JS"),t}}qc.prototype.Ea=function(){this.b=!1};var yc=new B;function zc(e){A.call(this,"serverreachability",e)}function Ac(e){yc.dispatchEvent(new zc(yc,e))}function Bc(e){A.call(this,"statevent",e)}function J(e){yc.dispatchEvent(new Bc(yc,e))}function Cc(e){A.call(this,"timingevent",e)}function Dc(e,t,n){yc.dispatchEvent(new Cc(yc,e,t,n))}function Ec(e,t){if(!da(e))throw Error("Fn must not be null and must be a function");return k.setTimeout((function(){e()}),t)}u(zc,A),u(Bc,A),u(Cc,A);var Fc={NO_ERROR:0,jb:1,qb:2,pb:3,mb:4,ob:5,rb:6,Ra:7,TIMEOUT:8,ub:9},Gc={lb:"complete",yb:"success",Sa:"error",Ra:"abort",wb:"ready",xb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",vb:"progress",nb:"downloadprogress",zb:"uploadprogress"},Kc;function Hc(){}function Ic(e){var t;return(t=e.a)||(t={},Jc(e)&&(t[0]=!0,t[1]=!0),t=e.a=t),t}function Lc(){}function Mc(e){return(e=Jc(e))?new ActiveXObject(e):new XMLHttpRequest}function Jc(e){if(!e.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.b=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.b}function K(e,t,n,r){this.i=e,this.b=t,this.f=n,this.T=r||1,this.N=new C(this),this.S=Nc,(e=this.H=new Xb).b=Oc,e.K&&e.$?(Yb(e),e.start()):e.K&&Yb(e),this.j=null,this.c=!1,this.m=this.g=this.h=this.J=this.D=this.U=this.w=null,this.s=[],this.a=null,this.F=0,this.l=this.o=null,this.C=-1,this.B=!1,this.P=0,this.I=null,this.M=!1}Hc.prototype.a=null,u(Lc,Hc),Kc=new Lc;var Nc=45e3,Oc=250;function Pc(e,t){switch(e){case 0:return"Non-200 return code ("+t+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}var Qc={},Rc={};function Sc(e,t,n){e.J=1,e.h=Tc(L(t)),e.m=n,e.M=!0,Uc(e,null)}function Vc(e,t,n,r){e.J=1,e.h=Tc(L(t)),e.m=null,e.M=n,Uc(e,r)}function Uc(e,n){e.D=t(),Wc(e),e.g=L(e.h),Xc(e.g,"t",e.T),e.F=0,e.a=e.i.da(e.i.ia()?n:null),0<e.P&&(e.I=new $b(r(e.Qa,e,e.a),e.P)),e.N.aa(e.a,"readystatechange",e.fb),n=e.j?Ea(e.j):{},e.m?(e.o||(e.o="POST"),n["Content-Type"]="application/x-www-form-urlencoded",e.a.fa(e.g,e.o,e.m,n)):(e.o="GET",e.a.fa(e.g,e.o,null,n)),Ac(1),rc(e.b,e.o,e.g,e.f,e.T,e.m)}function Yc(e){var t=M(e.a),n=e.a.Fa(),r=e.a.W();if(!(3>t||3==t&&!Ka&&!e.a.V())){e.B||4!=t||7==n||Ac(8==n||0>=r?3:2),Zc(e);var i=e.a.W();e.C=i,(n=e.a.V())||I(e.b,(function(){return"No response text for uri "+e.g+" status "+i})),e.c=200==i,sc(e.b,e.o,e.g,e.f,e.T,t,i),e.c?(e.M?($c(e,t,n),Ka&&e.c&&3==t&&ad(e)):(tc(e.b,e.f,n,null),bd(e,n)),4==t&&cd(e),e.c&&!e.B&&(4==t?e.i.ua(e):(e.c=!1,Wc(e)))):(400==i&&0<n.indexOf("Unknown SID")?(e.l=3,J(12),E(e.b.a,"XMLHTTP Unknown SID ("+e.f+")")):(e.l=0,J(13),E(e.b.a,"XMLHTTP Bad status "+i+" ("+e.f+")")),cd(e),dd(e))}}function $c(e,t,n){for(var r=!0;!e.B&&e.F<n.length;){var i=ed(e,n);if(i==Rc){4==t&&(e.l=4,J(14),r=!1),tc(e.b,e.f,null,"[Incomplete Response]");break}if(i==Qc){e.l=4,J(15),tc(e.b,e.f,n,"[Invalid Chunk]"),r=!1;break}tc(e.b,e.f,i,null),bd(e,i)}4==t&&0==n.length&&(e.l=1,J(16),r=!1),e.c=e.c&&r,r||(tc(e.b,e.f,n,"[Invalid Chunked Response]"),cd(e),dd(e))}function ad(e){e.N.aa(e.H,"tick",e.eb),e.H.start()}function ed(e,t){var n=e.F,r=t.indexOf("\n",n);return-1==r?Rc:(n=Number(t.substring(n,r)),isNaN(n)?Qc:(r+=1)+n>t.length?Rc:(t=t.substr(r,n),e.F=r+n,t))}function Wc(e){e.U=t()+e.S,fd(e,e.S)}function fd(e,t){if(null!=e.w)throw Error("WatchDog timer not null");e.w=Ec(r(e.cb,e),t)}function Zc(e){e.w&&(k.clearTimeout(e.w),e.w=null)}function dd(e){e.i.Ja()||e.B||e.i.ua(e)}function cd(e){Zc(e);var t=e.I;t&&"function"==typeof t.Z&&t.Z(),e.I=null,Yb(e.H),cc(e.N),e.a&&(t=e.a,e.a=null,t.abort(),t.Z())}function bd(e,t){try{e.i.Ma(e,t),Ac(4)}catch(t){wc(e.b,t,"Error in httprequest callback")}}function gd(e){if(e.v&&"function"==typeof e.v)return e.v();if(l(e))return e.split("");if(ca(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}return Ca(e)}function hd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ca(e)||l(e))ta(e,t,void 0);else{if(e.O&&"function"==typeof e.O)var n=e.O();else if(e.v&&"function"==typeof e.v)n=void 0;else if(ca(e)||l(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else n=Da(e);i=(r=gd(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function N(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){e instanceof N?(n=e.O(),r=e.v()):(n=Da(e),r=Ca(e));for(var i=0;i<n.length;i++)this.set(n[i],r[i])}}function jd(e){e.b={},e.a.length=0,e.c=0}function kd(e,t){return!!O(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&id(e),!0)}function id(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];O(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)O(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}g=K.prototype,g.setTimeout=function(e){this.S=e},g.fb=function(e){e=e.target;var t=this.I;t&&3==M(e)?(I(this.b,"Throttling readystatechange."),t.Xa()):this.Qa(e)},g.Qa=function(e){try{e==this.a?Yc(this):E(this.b.a,"Called back with an unexpected xmlhttp")}catch(e){if(I(this.b,"Failed call to OnXmlHttpReadyStateChanged_"),this.a&&this.a.V()){var t=this;wc(this.b,e,(function(){return"ResponseText: "+t.a.V()}))}else wc(this.b,e,"No response text")}},g.eb=function(){var e=M(this.a),t=this.a.V();this.F<t.length&&(Zc(this),$c(this,e,t),this.c&&4!=e&&Wc(this))},g.cancel=function(){this.B=!0,cd(this)},g.cb=function(){this.w=null;var e=t();0<=e-this.U?(this.c&&xc(this.b,"Received watchdog timeout even though request loaded successfully"),vc(this.b,this.g),2!=this.J&&(Ac(3),J(17)),cd(this),this.l=2,dd(this)):(E(this.b.a,"WatchDog timer called too early"),fd(this,this.U-e))},g=N.prototype,g.u=function(){return this.c},g.v=function(){id(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},g.O=function(){return id(this),this.a.concat()},g.get=function(e,t){return O(this.b,e)?this.b[e]:t},g.set=function(e,t){O(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},g.forEach=function(e,t){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var ld=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function md(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function P(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof P?(this.h=void 0!==t?t:e.h,nd(this,e.f),this.j=e.j,od(this,e.b),pd(this,e.i),this.a=e.a,qd(this,rd(e.c)),this.g=e.g):e&&(n=String(e).match(ld))?(this.h=!!t,nd(this,n[1]||"",!0),this.j=sd(n[2]||""),od(this,n[3]||"",!0),pd(this,n[4]),this.a=sd(n[5]||"",!0),qd(this,n[6]||"",!0),this.g=sd(n[7]||"")):(this.h=!!t,this.c=new td(null,this.h))}function L(e){return new P(e)}function nd(e,t,n){e.f=n?sd(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function od(e,t,n){e.b=n?sd(t,!0):t}function pd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function qd(e,t,n){t instanceof td?(e.c=t,zd(e.c,e.h)):(n||(t=ud(t,Ad)),e.c=new td(t,e.h))}function Q(e,t,n){e.c.set(t,n)}function Xc(e,t,r){n(r)||(r=[String(r)]),Bd(e.c,t,r)}function Tc(e){return Q(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^t()).toString(36)),e}function Cd(e){return e instanceof P?L(e):new P(e,void 0)}function Dd(e,t,n,r){var i=new P(null,void 0);return e&&nd(i,e),t&&od(i,t),n&&pd(i,n),r&&(i.a=r),i}function sd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ud(e,t,n){return l(e)?(e=encodeURI(e).replace(t,Ed),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ed(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}P.prototype.toString=function(){var e=[],t=this.f;t&&e.push(ud(t,vd,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(ud(t,vd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(ud(n,"/"==n.charAt(0)?wd:xd,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",ud(n,yd)),e.join("")},P.prototype.resolve=function(e){var t=L(this),n=!!e.f;n?nd(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?od(t,e.b):n=null!=e.i;var r=e.a;if(n)pd(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?qd(t,rd(e.c)):n=!!e.g,n&&(t.g=e.g),t};var vd=/[#\/\?@]/g,xd=/[#\?:]/g,wd=/[#\?]/g,Ad=/[#\?@]/g,yd=/#/g;function td(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function R(e){e.a||(e.a=new N,e.b=0,e.c&&md(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gd(e,t){R(e),t=Fd(e,t),O(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,kd(e.a,t))}function Hd(e,t){return R(e),t=Fd(e,t),O(e.a.b,t)}function Bd(e,t,n){Gd(e,t),0<n.length&&(e.c=null,e.a.set(Fd(e,t),ya(n)),e.b+=n.length)}function rd(e){var t=new td;return t.c=e.c,e.a&&(t.a=new N(e.a),t.b=e.b),t}function Fd(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function zd(e,t){t&&!e.f&&(R(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gd(this,t),Bd(this,n,e))}),e)),e.f=t}function Id(){this.a=t()}g=td.prototype,g.u=function(){return R(this),this.b},g.add=function(e,t){R(this),this.c=null,e=Fd(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},g.forEach=function(e,t){R(this),this.a.forEach((function(n,r){ta(n,(function(n){e.call(t,n,r,this)}),this)}),this)},g.O=function(){R(this);for(var e=this.a.v(),t=this.a.O(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},g.v=function(e){R(this);var t=[];if(l(e))Hd(this,e)&&(t=xa(t,this.a.get(Fd(this,e))));else{e=this.a.v();for(var n=0;n<e.length;n++)t=xa(t,e[n])}return t},g.set=function(e,t){return R(this),this.c=null,Hd(this,e=Fd(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},g.get=function(e,t){return 0<(e=e?this.v(e):[]).length?String(e[0]):t},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.O(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.v(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var Jd=null;function Kd(){Jd||(Jd=new Id)}function Ld(){Jd||(Jd=new Id)}function Md(){}Id.prototype.set=function(e){this.a=e},Id.prototype.reset=function(){this.set(t())},Id.prototype.get=function(){return this.a},u(Ld,Kd);var Nd={OPEN:"a",kb:"b",Sa:"c",tb:"d"};function Od(){A.call(this,"d")}function Pd(){A.call(this,"c")}function Qd(e,t){this.a=e,this.b=t,this.c=this.i=null,this.h=!1,this.l=null,this.f=-1,this.m=this.g=null}function Rd(e){I(e.b,"TestConnection: starting stage 2");var t=e.a.H.a;if(null!=t)I(e.b,(function(){return"Buffered"})),J(4),t?(J(10),Sd(e.a,e,!1)):(J(11),Sd(e.a,e,!0));else{e.c=new K(e,e.b,void 0,void 0),e.c.j=e.i;var n=Td(e.a,e.g,e.l);J(4),Xc(n,"TYPE","xmlhttp");var r=e.a.j,i=e.a.J;r&&i&&Q(n,r,i),Vc(e.c,n,!1,e.g)}}function Vd(){this.a=this.b=null}function S(){this.a=new N}function Wd(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[q]||(e[q]=++ea)):t.charAt(0)+e}function Xd(e,t){this.a=e,this.b=t}function Yd(e){this.g=e||Zd,this.f=k.pa&&k.pa.Ka&&k.pa.Ka()&&k.pa.Ka().Bb?this.g:1,this.a=null,1<this.f&&(this.a=new S),this.b=null,this.c=[]}u(Od,A),u(Pd,A),g=Qd.prototype,g.R=null,g.da=function(e){return this.a.da(e)},g.abort=function(){this.c&&(this.c.cancel(),this.c=null),this.f=-1},g.Ja=function(){return!1},g.Ma=function(e,t){if(this.f=e.C,0==this.R){if(I(this.b,"TestConnection: Got data for stage 1"),!this.a.D&&(e=e.a)){var n=e.a?e.a.getResponseHeader("X-Client-Wire-Protocol"):null;this.m=n||null,this.a.j&&((e=e.a?e.a.getResponseHeader("X-HTTP-Session-Id"):null)?this.a.J=e:E(this.b.a,"Missing X_HTTP_SESSION_ID in the handshake response"))}if(t){try{var r=this.a.ma.a.parse(t)}catch(e){return wc(this.b,e),void Ud(this.a,this)}this.g=r[0]}else I(this.b,"TestConnection: Null responseText"),Ud(this.a,this)}else 1==this.R&&(this.h?J(6):"11111"==t?(J(5),this.h=!0,(!z||10<=Number(Ua))&&(this.f=200,this.c.cancel(),I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0))):(J(7),this.h=!1))},g.ua=function(){this.f=this.c.C,this.c.c?0==this.R?(this.R=1,I(this.b,"TestConnection: request complete for initial check"),Rd(this)):1==this.R&&(I(this.b,"TestConnection: request complete for stage 2"),this.h?(I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0)):(I(this.b,"Test connection failed; not using streaming"),J(10),Sd(this.a,this,!1))):(I(this.b,"TestConnection: request failed, in state "+this.R),0==this.R?J(8):1==this.R&&J(9),Ud(this.a,this))},g.ia=function(){return this.a.ia()},g.ra=function(){return this.a.ra()},S.prototype.u=function(){return this.a.u()},S.prototype.add=function(e){this.a.set(Wd(e),e)},S.prototype.contains=function(e){return e=Wd(e),O(this.a.b,e)},S.prototype.v=function(){return this.a.v()};var Zd=10;function $d(e,t){e.a||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(e.f=e.g,e.a=new S,e.b&&(ae(e,e.b),e.b=null))}function be(e){return!!e.b||!!e.a&&e.a.u()>=e.f}function ce(e,t){return e.b?e.b==t:!!e.a&&e.a.contains(t)}function ae(e,t){e.a?e.a.add(t):e.b=t}function de(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.contains(t)&&kd(e.a.a,Wd(t))}function ee(e){if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return ta(e.a.v(),(function(e){t=t.concat(e.s)})),t}return ya(e.c)}function fe(e,t){e.c=e.c.concat(t)}function ge(){}function he(){this.a=new ge}function ie(e,t,n){var r=n||"";try{hd(e,(function(e,n){var i=e;p(e)&&(i=Db(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function je(e,t){var n=new qc;I(n,"TestLoadImage: loading "+e);var r=new Image;r.onload=ia(ke,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ia(ke,n,r,"TestLoadImage: error",!1,t),r.onabort=ia(ke,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ia(ke,n,r,"TestLoadImage: timeout",!1,t),k.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}function ke(e,t,n,r,i){try{I(e,n),t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(t){wc(e,t)}}function T(e){B.call(this),this.headers=new N,this.F=e||null,this.f=!1,this.D=this.a=null,this.M=this.s="",this.j=0,this.g="",this.h=this.I=this.o=this.H=!1,this.l=0,this.B=null,this.N=le,this.C=this.m=!1}Yd.prototype.cancel=function(){this.c=ee(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(ta(this.a.v(),(function(e){e.cancel()})),jd(this.a.a))},ge.prototype.stringify=function(e){return k.JSON.stringify(e,void 0)},ge.prototype.parse=function(e){return k.JSON.parse(e,void 0)},u(T,B);var le="";T.prototype.b=oc("goog.net.XhrIo");var me=/^https?$/i,ne=["POST","PUT"];function qe(e){return z&&Ta(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}function va(e){return"content-type"==e.toLowerCase()}function oe(e,t){e.f=!1,e.a&&(e.h=!0,e.a.abort(),e.h=!1),e.g=t,e.j=5,re(e),se(e)}function re(e){e.H||(e.H=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function te(e){if(e.f&&void 0!==goog)if(e.D[1]&&4==M(e)&&2==e.W())F(e.b,U(e,"Local request error detected and ignored"));else if(e.o&&4==M(e))Zb(e.La,0,e);else if(e.dispatchEvent("readystatechange"),4==M(e)){F(e.b,U(e,"Request complete")),e.f=!1;try{var t,n=e.W();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.s).match(ld)[1]||null;if(!o&&k.self&&k.self.location){var a=k.self.location.protocol;o=a.substr(0,a.length-1)}i=!me.test(o?o.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.j=6,e.g=e.Ga()+" ["+e.W()+"]",re(e))}finally{se(e)}}}function se(e,t){if(e.a){pe(e);var n=e.a,r=e.D[0]?aa:null;e.a=null,e.D=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(gc,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function pe(e){e.a&&e.C&&(e.a.ontimeout=null),e.B&&(k.clearTimeout(e.B),e.B=null)}function M(e){return e.a?e.a.readyState:0}function U(e,t){return t+" ["+e.M+" "+e.s+" "+e.W()+"]"}function ue(e){var t="";return Ba(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ve(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=ue(n),l(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Q(e,t,n),e}function we(e){this.ya=0,this.g=[],this.a=new qc,this.H=new Vd,this.ja=this.wa=this.F=this.ka=this.b=this.J=this.j=this.U=this.h=this.M=this.i=null,this.Ua=this.P=0,this.la=this.B=this.o=this.m=this.l=this.f=null,this.s=this.xa=this.N=-1,this.T=this.w=this.C=0,this.S=e&&e.supportsCrossDomainXhr||!1,this.I="",this.c=new Yd(e&&e.concurrentRequestLimit),this.ma=new he,this.D=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,this.Ta=e&&e.fastHandshake||!1,e&&e.Ea&&this.a.Ea()}function xe(e){if(I(e.a,"disconnect()"),ye(e),3==e.G){var n=e.P++,r=L(e.F);Q(r,"SID",e.I),Q(r,"RID",n),Q(r,"TYPE","terminate"),ze(e,r),(n=new K(e,e.a,n,void 0)).J=2,n.h=Tc(L(r)),r=!1,k.navigator&&k.navigator.sendBeacon&&(r=k.navigator.sendBeacon(n.h.toString(),"")),!r&&k.Image&&((new Image).src=n.h,r=!0),r||(n.a=n.i.da(null),n.a.fa(n.h)),n.D=t(),Wc(n)}Ae(e)}function ye(e){e.B&&(e.B.abort(),e.B=null),e.b&&(e.b.cancel(),e.b=null),e.m&&(k.clearTimeout(e.m),e.m=null),Be(e),e.c.cancel(),e.l&&(k.clearTimeout(e.l),e.l=null)}function Ce(e,t){1e3==e.g.length&&xc(e.a,(function(){return"Already have 1000 queued maps upon queueing "+Db(t)})),e.g.push(new Xd(e.Ua++,t)),3==e.G&&De(e)}function De(e){be(e.c)||e.l||(e.l=Ec(r(e.Oa,e),0),e.C=0)}function Ee(e,t){var n=e.c;return(n.b?1:n.a?n.a.u():0)>=e.c.f-(e.l?1:0)?(xc(e.a,"Unexpected retry request is scheduled."),!1):e.l?(I(e.a,"Use the retry request that is already scheduled."),e.g=t.s.concat(e.g),!0):!(1==e.G||2==e.G||2<=e.C||(I(e.a,"Going to retry POST"),e.l=Ec(r(e.Oa,e,t),Fe(e,e.C)),e.C++,0))}function He(e,t){var n;n=t?t.f:e.P++;var r=L(e.F);Q(r,"SID",e.I),Q(r,"RID",n),Q(r,"AID",e.N),ze(e,r),e.h&&e.i&&ve(r,e.h,e.i),n=new K(e,e.a,n,e.C+1),null===e.h&&(n.j=e.i),t&&(e.g=t.s.concat(e.g)),t=Ge(e,n),n.setTimeout(Math.round(1e4)+Math.round(1e4*Math.random())),ae(e.c,n),Sc(n,r,t)}function ze(e,t){e.f&&hd({},(function(e,n){Q(t,n,e)}))}function Ge(e,t){var n=Math.min(e.g.length,1e3),i=e.f?r(e.f.Va,e.f,e):null;e:for(var o=e.g,a=-1;;){var s=["count="+n];-1==a?0<n?(a=o[0].a,s.push("ofs="+a)):a=0:s.push("ofs="+a);for(var u=!0,c=0;c<n;c++){var l=o[c].a,d=o[c].b;if(0>(l-=a))a=Math.max(0,o[c].a-100),u=!1;else try{ie(d,s,"req"+l+"_")}catch(e){i&&i(d)}}if(u){i=s.join("&");break e}}return e=e.g.splice(0,n),t.s=e,i}function Ie(e){if(!e.b&&!e.m){e.T=1;var t=e.Na;Tb||Ub(),Wb||(Tb(),Wb=!0),Pb.add(t,e),e.w=0}}function Je(e){return e.b||e.m?(xc(e.a,"Request already in progress"),!1):!(3<=e.w||(I(e.a,"Going to retry GET"),e.T++,e.m=Ec(r(e.Na,e),Fe(e,e.w)),e.w++,0))}function Sd(e,t,n){I(e.a,"Test Connection Finished");var r=t.m;r&&$d(e.c,r),e.la=n,e.s=t.f,I(e.a,"connectChannel_()"),e.F=Ke(e,e.ka),De(e)}function Ud(e,t){I(e.a,"Test Connection Failed"),e.s=t.f,V(e,2)}function Be(e){null!=e.o&&(k.clearTimeout(e.o),e.o=null)}function Fe(e,t){var n=5e3+Math.floor(1e4*Math.random());return e.ra()||(I(e.a,"Inactive channel"),n*=2),n*t}function V(e,t){if(H(e.a,"Error code "+t),2==t){var n=null;e.f&&(n=null);var i=r(e.hb,e);n||(n=new P("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||nd(n,"https"),Tc(n)),je(n.toString(),i)}else J(2);I(e.a,"HttpChannel: error - "+t),e.G=0,e.f&&e.f.Ba(t),Ae(e),ye(e)}function Ae(e){if(e.G=0,e.s=-1,e.f){var t=ee(e.c);0==t.length&&0==e.g.length||(I(e.a,(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.g.length})),e.c.c.length=0,ya(e.g),e.g.length=0),e.f.Aa()}}function Ke(e,t){return t=Le(e,null,t),I(e.a,"GetForwardChannelUri: "+t),t}function Td(e,t,n){return t=Le(e,e.ia()?t:null,n),I(e.a,"GetBackChannelUri: "+t),t}function Le(e,t,n){var r=Cd(n);if(""!=r.b)t&&od(r,t+"."+r.b),pd(r,r.i);else{var i,o=k.location;i=t?t+"."+o.hostname:o.hostname,r=Dd(o.protocol,i,o.port,n)}return e.U&&Ba(e.U,(function(e,t){Q(r,t,e)})),t=e.j,n=e.J,t&&n&&Q(r,t,n),Q(r,"VER",e.oa),ze(e,r),r}function Me(){}function Ne(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}function Oe(){if(z&&!(10<=Number(Ua)))throw Error("Environmental error: no available transport.")}function W(e,t){B.call(this),this.a=new we(t),this.b=e,this.s=t&&t.testUrl?t.testUrl:Ne(this.b,"test"),this.f=oc("goog.labs.net.webChannel.WebChannelBaseTransport"),this.g=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),this.a.M=e,(e=t&&t.httpHeadersOverwriteParam)&&!/^[\s\xa0]*$/.test(e)&&(this.a.h=e),this.o=t&&t.supportsCrossDomainXhr||!1,this.m=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!/^[\s\xa0]*$/.test(t)&&(this.a.j=t,null!==(e=this.g)&&t in e&&(t in(e=this.g)&&delete e[t],E(this.f,"Ignore httpSessionIdParam also specified with messageUrlParams: "+t))),this.h=new Pe(this)}function Qe(e){Od.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Re(){Pd.call(this),this.status=1}function Pe(e){this.a=e}g=T.prototype,g.fa=function(e,t,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.s+"; newUri="+e);t=t?t.toUpperCase():"GET",this.s=e,this.g="",this.j=0,this.M=t,this.H=!1,this.f=!0,this.a=this.F?Mc(this.F):Mc(Kc),this.D=this.F?Ic(this.F):Ic(Kc),this.a.onreadystatechange=r(this.La,this);try{F(this.b,U(this,"Opening Xhr")),this.I=!0,this.a.open(t,String(e),!0),this.I=!1}catch(e){return F(this.b,U(this,"Error opening Xhr: "+e.message)),void oe(this,e)}e=n||"";var o=new N(this.headers);i&&hd(i,(function(e,t){o.set(t,e)})),i=ua(o.O()),n=k.FormData&&e instanceof k.FormData,!(0<=sa(ne,t))||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.N&&(this.a.responseType=this.N),"withCredentials"in this.a&&this.a.withCredentials!==this.m&&(this.a.withCredentials=this.m);try{pe(this),0<this.l&&(this.C=qe(this.a),F(this.b,U(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.C)),this.C?(this.a.timeout=this.l,this.a.ontimeout=r(this.Ia,this)):this.B=Zb(this.Ia,this.l,this)),F(this.b,U(this,"Sending request")),this.o=!0,this.a.send(e),this.o=!1}catch(e){F(this.b,U(this,"Send error: "+e.message)),oe(this,e)}},g.Ia=function(){void 0!==goog&&this.a&&(this.g="Timed out after "+this.l+"ms, aborting",this.j=8,F(this.b,U(this,this.g)),this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(e){this.a&&this.f&&(F(this.b,U(this,"Aborting")),this.f=!1,this.h=!0,this.a.abort(),this.h=!1,this.j=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),se(this))},g.A=function(){this.a&&(this.f&&(this.f=!1,this.h=!0,this.a.abort(),this.h=!1),se(this,!0)),T.L.A.call(this)},g.La=function(){this.i||(this.I||this.o||this.h?te(this):this.ab())},g.ab=function(){te(this)},g.W=function(){try{return 2<M(this)?this.a.status:-1}catch(e){return-1}},g.Ga=function(){try{return 2<M(this)?this.a.statusText:""}catch(e){return F(this.b,"Can not get status: "+e.message),""}},g.V=function(){try{return this.a?this.a.responseText:""}catch(e){return F(this.b,"Can not get responseText: "+e.message),""}},g.Ya=function(e){if(this.a){var t=this.a.responseText;e&&0==t.indexOf(e)&&(t=t.substring(e.length));e:{if(e=t,k.JSON)try{var n=k.JSON.parse(e);break e}catch(e){}n=Cb(e)}return n}},g.Fa=function(){return this.j},g.Za=function(){return l(this.g)?this.g:String(this.g)},g=we.prototype,g.oa=8,g.G=1,g.Ja=function(){return 0==this.G},g.Oa=function(e){if(this.l=null,I(this.a,"startForwardChannel_"),1==this.G)if(e)xc(this.a,"Not supposed to retry the open");else{I(this.a,"open_()"),this.P=Math.floor(1e5*Math.random()),e=this.P++;var t=new K(this,this.a,e,void 0),n=this.i;this.M&&(n?Ga(n=Ea(n),this.M):n=this.M),null===this.h&&(t.j=n);var r=Ge(this,t),i=L(this.F);Q(i,"RID",e),Q(i,"CVER",21),this.D&&this.j&&Q(i,"X-HTTP-Session-Id",this.j),ze(this,i),this.h&&n&&ve(i,this.h,n),ae(this.c,t),this.Ta?(Q(i,"$req",r),Sc(t,i,null)):Sc(t,i,r),this.G=2}else 3==this.G&&(e?He(this,e):0==this.g.length?I(this.a,"startForwardChannel_ returned: nothing to send"):be(this.c)?xc(this.a,"startForwardChannel_ returned: connection already in progress"):(He(this),I(this.a,"startForwardChannel_ finished, sent request")))},g.Na=function(){this.m=null,I(this.a,"Creating new HttpRequest"),this.b=new K(this,this.a,"rpc",this.T),null===this.h&&(this.b.j=this.i),this.b.P=0;var e=L(this.wa);Q(e,"RID","rpc"),Q(e,"SID",this.I),Q(e,"CI",this.la?"0":"1"),Q(e,"AID",this.N),ze(this,e),Q(e,"TYPE","xmlhttp"),this.h&&this.i&&ve(e,this.h,this.i),Vc(this.b,e,!0,this.ja),I(this.a,"New Request created")},g.Ma=function(e,t){if(0!=this.G&&(this.b==e||ce(this.c,e)))if(this.s=e.C,ce(this.c,e)&&3==this.G){try{var i=this.ma.a.parse(t)}catch(e){i=null}if(n(i)&&3==i.length)if(0==(t=i)[0])e:if(I(this.a,"Server claims our backchannel is missing."),this.m)I(this.a,"But we are currently starting the request.");else{if(this.b){if(!(this.b.D+3e3<e.D))break e;Be(this),this.b.cancel(),this.b=null}else E(this.a.a,"We do not have a BackChannel established");Je(this),J(18)}else this.xa=t[1],0<(e=this.xa-this.N)&&(t=t[2],I(this.a,t+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),37500>t&&this.la&&0==this.w&&!this.o&&(this.o=Ec(r(this.$a,this),6e3)));else I(this.a,"Bad POST response data returned"),V(this,11)}else if(this.b==e&&Be(this),!/^[\s\xa0]*$/.test(t))for(t=i=this.ma.a.parse(t),i=0;i<t.length;i++){var o=t[i];if(this.N=o[0],o=o[1],2==this.G)if("c"==o[0]){this.I=o[1],this.ja=o[2];var a=o[3];null!=a&&(this.oa=a,H(this.a,"VER="+this.oa)),null!=(o=o[4])&&(this.ya=o,H(this.a,"SVER="+this.ya)),this.D&&(o=e.a)&&((a=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)&&$d(this.c,a),this.j&&((o=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)?(this.J=o,Q(this.F,this.j,o)):E(this.a.a,"Missing X_HTTP_SESSION_ID in the handshake response"))),this.G=3,this.f&&this.f.Da(),this.wa=Td(this,this.ja,this.ka),Ie(this)}else"stop"!=o[0]&&"close"!=o[0]||V(this,7);else 3==this.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?V(this,7):xe(this):"noop"!=o[0]&&this.f&&this.f.Ca(o),this.w=0)}},g.$a=function(){null!=this.o&&(this.o=null,this.b.cancel(),this.b=null,Je(this),J(19))},g.ua=function(e){I(this.a,"Request complete");var n=null;if(this.b==e){Be(this),this.b=null;var r=2}else{if(!ce(this.c,e))return;n=e.s,de(this.c,e),r=1}if(this.s=e.C,0!=this.G)if(e.c)1==r?(Dc(e.m?e.m.length:0,t()-e.D,this.C),De(this)):Ie(this);else{var i=e.l;if(3==i||0==i&&0<this.s)I(this.a,"Not retrying due to error type");else{var o=this;if(I(this.a,(function(){return"Maybe retrying, last error: "+Pc(i,o.s)})),1==r&&Ee(this,e)||2==r&&Je(this))return;I(this.a,"Exceeded max number of retries")}switch(n&&0<n.length&&fe(this.c,n),I(this.a,"Error: HTTP request failed"),i){case 1:V(this,5);break;case 4:V(this,10);break;case 3:V(this,6);break;default:V(this,2)}}},g.hb=function(e){e?(H(this.a,"Successfully pinged google.com"),J(2)):(H(this.a,"Failed to ping google.com"),J(1))},g.da=function(e){if(e&&!this.S)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new T).m=this.S,e},g.ra=function(){return!!this.f&&!0},g.ia=function(){return this.S},new Ld,g=Me.prototype,g.Da=function(){},g.Ca=function(){},g.Ba=function(){},g.Aa=function(){},g.Va=function(){},Oe.prototype.a=function(e,t){return new W(e,t)},u(W,B),W.prototype.j=function(){this.a.f=this.h,this.o&&(this.a.S=!0);var e=this.a,t=this.s,n=this.b,r=this.g||void 0;I(e.a,"connect()"),J(0),e.ka=n,e.U=r||{},e.D&&(I(e.a,"connect() bypassed channel-test."),e.H.b=[],e.H.a=!1),I(e.a,"connectTest_()"),e.B=new Qd(e,e.a),null===e.h&&(e.B.i=e.i),n=t,e.h&&e.i&&(n=ve(t,e.h,e.i)),(e=e.B).l=n,t=Ke(e.a,e.l),J(3),null!=(n=e.a.H.b)?(e.g=n[0],e.R=1,Rd(e)):(Xc(t,"MODE","init"),!e.a.D&&e.a.j&&Xc(t,"X-HTTP-Session-Id",e.a.j),e.c=new K(e,e.b,void 0,void 0),e.c.j=e.i,Vc(e.c,t,!1,null),e.R=0)},W.prototype.close=function(){xe(this.a)},W.prototype.l=function(e){if(l(e)){var t={};t.__data__=e,Ce(this.a,t)}else this.m?((t={}).__data__=Db(e),Ce(this.a,t)):Ce(this.a,e)},W.prototype.A=function(){this.a.f=null,delete this.h,xe(this.a),delete this.a,W.L.A.call(this)},u(Qe,Od),u(Re,Pd),u(Pe,Me),Pe.prototype.Da=function(){pc(this.a.f,"WebChannel opened on "+this.a.b),this.a.dispatchEvent("a")},Pe.prototype.Ca=function(e){this.a.dispatchEvent(new Qe(e))},Pe.prototype.Ba=function(e){pc(this.a.f,"WebChannel aborted on "+this.a.b+" due to channel error: "+e),this.a.dispatchEvent(new Re(e))},Pe.prototype.Aa=function(){pc(this.a.f,"WebChannel closed on "+this.a.b),this.a.dispatchEvent("b")};var Se=ia((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),Oe);function Te(){this.b=[],this.a=[]}function Ue(e){return 0==e.b.length&&(e.b=e.a,e.b.reverse(),e.a=[]),e.b.pop()}function Ve(e,t){if(w.call(this),this.h=e||0,this.c=t||10,this.h>this.c)throw Error(We);this.a=new Te,this.b=new S,this.g=null,this.ba()}Te.prototype.u=function(){return this.b.length+this.a.length},Te.prototype.contains=function(e){return 0<=sa(this.b,e)||0<=sa(this.a,e)},Te.prototype.v=function(){for(var e=[],t=this.b.length-1;0<=t;--t)e.push(this.b[t]);var n=this.a.length;for(t=0;t<n;++t)e.push(this.a[t]);return e},u(Ve,w);var We="[goog.structs.Pool] Min can not be greater than max";function Xe(e){if("function"==typeof e.Z)e.Z();else for(var t in e)e[t]=null}function Ye(e,t){this.a=e,this.b=t}function Ze(e){if(this.a=[],e)e:{if(e instanceof Ze){var t=e.O();if(e=e.v(),0>=this.u()){for(var n=this.a,r=0;r<t.length;r++)n.push(new Ye(t[r],e[r]));break e}}else t=Da(e),e=Ca(e);for(r=0;r<t.length;r++)$e(this,t[r],e[r])}}function $e(e,t,n){var r=e.a;for(r.push(new Ye(t,n)),t=r.length-1,n=(e=e.a)[t];0<t&&e[r=t-1>>1].a>n.a;)e[t]=e[r],t=r;e[t]=n}function af(){Ze.call(this)}function X(e,t){this.f=new af,Ve.call(this,e,t)}function Y(e,t,n,r){this.l=e,this.j=!!r,X.call(this,t,n)}g=Ve.prototype,g.ea=function(){var e=t();if(!(null!=this.g&&0>e-this.g)){for(var n;0<this.a.u()&&(n=Ue(this.a),!this.ta(n));)this.ba();return!n&&this.u()<this.c&&(n=this.qa()),n&&(this.g=e,this.b.add(n)),n}},g.gb=function(e){return!!kd(this.b.a,Wd(e))&&(this.na(e),!0)},g.na=function(e){kd(this.b.a,Wd(e)),this.ta(e)&&this.u()<this.c?this.a.a.push(e):Xe(e)},g.ba=function(){for(var e=this.a;this.u()<this.h;){var t=this.qa();e.a.push(t)}for(;this.u()>this.c&&0<this.a.u();)Xe(Ue(e))},g.qa=function(){return{}},g.ta=function(e){return"function"!=typeof e.Wa||e.Wa()},g.contains=function(e){return this.a.contains(e)||this.b.contains(e)},g.u=function(){return this.a.u()+this.b.u()},g.A=function(){if(Ve.L.A.call(this),0<this.b.u())throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var e=this.a;0!=e.b.length||0!=e.a.length;)Xe(Ue(e));delete this.a},Ze.prototype.v=function(){for(var e=this.a,t=[],n=e.length,r=0;r<n;r++)t.push(e[r].b);return t},Ze.prototype.O=function(){for(var e=this.a,t=[],n=e.length,r=0;r<n;r++)t.push(e[r].a);return t},Ze.prototype.u=function(){return this.a.length},u(af,Ze),u(X,Ve),g=X.prototype,g.ea=function(e,t){if(!e)return X.L.ea.call(this);$e(this.f,void 0!==t?t:100,e),this.sa()},g.sa=function(){for(var e=this.f;0<e.u();){var t=this.ea();if(!t)break;var n=e,r=n.a,i=r.length,o=r[0];if(0>=i)o=void 0;else{if(1==i)wa(r);else{r[0]=r.pop(),r=0,i=(n=n.a).length;for(var a=n[r];r<i>>1;){var s=2*r+1,u=2*r+2;if(n[s=u<i&&n[u].a<n[s].a?u:s].a>a.a)break;n[r]=n[s],r=s}n[r]=a}o=o.b}o.apply(this,[t])}},g.na=function(e){X.L.na.call(this,e),this.sa()},g.ba=function(){X.L.ba.call(this),this.sa()},g.A=function(){X.L.A.call(this),k.clearTimeout(void 0),wa(this.f.a),this.f=null},u(Y,X),Y.prototype.qa=function(){var e=new T,t=this.l;return t&&t.forEach((function(t,n){e.headers.set(n,t)})),this.j&&(e.m=!0),e},Y.prototype.ta=function(e){return!e.i&&!e.a},Oe.prototype.createWebChannel=Oe.prototype.a,W.prototype.send=W.prototype.l,W.prototype.open=W.prototype.j,W.prototype.close=W.prototype.close,Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Gc.COMPLETE="complete",Md.EventType=Nd,Nd.OPEN="a",Nd.CLOSE="b",Nd.ERROR="c",Nd.MESSAGE="d",B.prototype.listen=B.prototype.aa,Y.prototype.getObject=Y.prototype.ea,Y.prototype.releaseObject=Y.prototype.gb,T.prototype.listenOnce=T.prototype.Ha,T.prototype.getLastError=T.prototype.Za,T.prototype.getLastErrorCode=T.prototype.Fa,T.prototype.getStatus=T.prototype.W,T.prototype.getStatusText=T.prototype.Ga,T.prototype.getResponseJson=T.prototype.Ya,T.prototype.getResponseText=T.prototype.V,T.prototype.getResponseText=T.prototype.V,T.prototype.send=T.prototype.fa,module.exports={createWebChannelTransport:Se,ErrorCode:Fc,EventType:Gc,WebChannel:Md,XhrIoPool:Y}}).call(void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},243:(e,t,n)=>{n(7182),e.exports=n(3).default},606:(e,t,n)=>{n(8818)},7470:(e,t,n)=>{e.exports=n(3201)},4755:(e,t,n)=>{n(3297)},8555:(e,t,n)=>{var r=n(243);n(606),n(7470),n(5628),n(4591),e.exports=r},5628:(e,t,n)=>{n(7140)},4591:(e,t,n)=>{n(537)},3465:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Boolean]",s="[object Date]",u="[object Function]",c="[object GeneratorFunction]",l="[object Map]",d="[object Number]",h="[object Object]",p="[object Promise]",f="[object RegExp]",m="[object Set]",g="[object String]",y="[object Symbol]",v="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",E="[object Int8Array]",k="[object Int16Array]",I="[object Int32Array]",T="[object Uint8Array]",C="[object Uint8ClampedArray]",A="[object Uint16Array]",P="[object Uint32Array]",R=/\w*$/,N=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,O={};O[o]=O["[object Array]"]=O[_]=O[b]=O[a]=O[s]=O[w]=O[S]=O[E]=O[k]=O[I]=O[l]=O[d]=O[h]=O[f]=O[m]=O[g]=O[y]=O[T]=O[C]=O[A]=O[P]=!0,O["[object Error]"]=O[u]=O[v]=!1;var L="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,M="object"==typeof self&&self&&self.Object===Object&&self,x=L||M||Function("return this")(),F=t&&!t.nodeType&&t,q=F&&e&&!e.nodeType&&e,B=q&&q.exports===F;function U(e,t){return e.set(t[0],t[1]),e}function j(e,t){return e.add(t),e}function W(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function H(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function G(e,t){return function(n){return e(t(n))}}function K(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var $,Q=Array.prototype,z=Function.prototype,Y=Object.prototype,Z=x["__core-js_shared__"],X=($=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",J=z.toString,ee=Y.hasOwnProperty,te=Y.toString,ne=RegExp("^"+J.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=B?x.Buffer:void 0,ie=x.Symbol,oe=x.Uint8Array,ae=G(Object.getPrototypeOf,Object),se=Object.create,ue=Y.propertyIsEnumerable,ce=Q.splice,le=Object.getOwnPropertySymbols,de=re?re.isBuffer:void 0,he=G(Object.keys,Object),pe=xe(x,"DataView"),fe=xe(x,"Map"),me=xe(x,"Promise"),ge=xe(x,"Set"),ye=xe(x,"WeakMap"),ve=xe(Object,"create"),_e=je(pe),be=je(fe),we=je(me),Se=je(ge),Ee=je(ye),ke=ie?ie.prototype:void 0,Ie=ke?ke.valueOf:void 0;function Te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e){this.__data__=new Ce(e)}function Re(e,t,n){var r=e[t];ee.call(e,t)&&We(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Ne(e,t){for(var n=e.length;n--;)if(We(e[n][0],t))return n;return-1}function De(e,t,n,r,i,p,v){var N;if(r&&(N=p?r(e,i,p,v):r(e)),void 0!==N)return N;if(!$e(e))return e;var D=Ve(e);if(D){if(N=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!t)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,N)}else{var L=qe(e),M=L==u||L==c;if(Ge(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(L==h||L==o||M&&!p){if(V(e))return p?e:{};if(N=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:$e(t=ae(e))?se(t):{};var t}(M?{}:e),!t)return function(e,t){return Le(e,Fe(e),t)}(e,function(e,t){return e&&Le(t,Qe(t),e)}(N,e))}else{if(!O[L])return p?e:{};N=function(e,t,n,r){var i,o=e.constructor;switch(t){case _:return Oe(e);case a:case s:return new o(+e);case b:return function(e,t){var n=t?Oe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case w:case S:case E:case k:case I:case T:case C:case A:case P:return function(e,t){var n=t?Oe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case l:return function(e,t,n){return W(t?n(H(e),!0):H(e),U,new e.constructor)}(e,r,n);case d:case g:return new o(e);case f:return function(e){var t=new e.constructor(e.source,R.exec(e));return t.lastIndex=e.lastIndex,t}(e);case m:return function(e,t,n){return W(t?n(K(e),!0):K(e),j,new e.constructor)}(e,r,n);case y:return i=e,Ie?Object(Ie.call(i)):{}}}(e,L,De,t)}}v||(v=new Pe);var x=v.get(e);if(x)return x;if(v.set(e,N),!D)var F=n?function(e){return function(e,t,n){var r=t(e);return Ve(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Qe,Fe)}(e):Qe(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n););}(F||e,(function(i,o){F&&(i=e[o=i]),Re(N,o,De(i,t,n,r,o,e,v))})),N}function Oe(e){var t=new e.constructor(e.byteLength);return new oe(t).set(new oe(e)),t}function Le(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;Re(n,a,void 0===s?e[a]:s)}return n}function Me(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function xe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!$e(e)||(t=e,X&&X in t))&&(Ke(e)||V(e)?ne:N).test(je(e));var t}(n)?n:void 0}Te.prototype.clear=function(){this.__data__=ve?ve(null):{}},Te.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Te.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===r?void 0:n}return ee.call(t,e)?t[e]:void 0},Te.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:ee.call(t,e)},Te.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?r:t,this},Ce.prototype.clear=function(){this.__data__=[]},Ce.prototype.delete=function(e){var t=this.__data__,n=Ne(t,e);return!(n<0||(n==t.length-1?t.pop():ce.call(t,n,1),0))},Ce.prototype.get=function(e){var t=this.__data__,n=Ne(t,e);return n<0?void 0:t[n][1]},Ce.prototype.has=function(e){return Ne(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var n=this.__data__,r=Ne(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ae.prototype.clear=function(){this.__data__={hash:new Te,map:new(fe||Ce),string:new Te}},Ae.prototype.delete=function(e){return Me(this,e).delete(e)},Ae.prototype.get=function(e){return Me(this,e).get(e)},Ae.prototype.has=function(e){return Me(this,e).has(e)},Ae.prototype.set=function(e,t){return Me(this,e).set(e,t),this},Pe.prototype.clear=function(){this.__data__=new Ce},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ce){var r=n.__data__;if(!fe||r.length<199)return r.push([e,t]),this;n=this.__data__=new Ae(r)}return n.set(e,t),this};var Fe=le?G(le,Object):function(){return[]},qe=function(e){return te.call(e)};function Be(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||D.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Y)}function je(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function We(e,t){return e===t||e!=e&&t!=t}(pe&&qe(new pe(new ArrayBuffer(1)))!=b||fe&&qe(new fe)!=l||me&&qe(me.resolve())!=p||ge&&qe(new ge)!=m||ye&&qe(new ye)!=v)&&(qe=function(e){var t=te.call(e),n=t==h?e.constructor:void 0,r=n?je(n):void 0;if(r)switch(r){case _e:return b;case be:return l;case we:return p;case Se:return m;case Ee:return v}return t});var Ve=Array.isArray;function He(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!Ke(e)}var Ge=de||function(){return!1};function Ke(e){var t=$e(e)?te.call(e):"";return t==u||t==c}function $e(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Qe(e){return He(e)?function(e,t){var n=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&He(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==o)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var a in e)!t&&!ee.call(e,a)||i&&("length"==a||Be(a,r))||n.push(a);return n}(e):function(e){if(!Ue(e))return he(e);var t=[];for(var n in Object(e))ee.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return De(e,!0,!0)}},2401:function(e){!function(t){var n=setTimeout;function r(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}a(t.promise,r)}else(1===e._state?a:s)(t.promise,e._value)}))):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void l((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}var r,o}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e((function(e){n||(n=!0,a(t,e))}),(function(e){n||(n=!0,s(t,e))}))}catch(e){if(n)return;n=!0,s(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new c(e,t,n)),n},i.all=function(e){return new i((function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){o(e,t)}),n)}r[e]=a,0==--i&&t(r)}catch(e){n(e)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},e.exports?e.exports=i:t.Promise||(t.Promise=i)}(this)},6104:e=>{var t="undefined"!=typeof process&&process.pid?process.pid.toString(36):"";function n(){var e=Date.now(),t=n.last||e;return n.last=e>t?e:t+1}e.exports=e.exports.default=function(e,r){return(e||"")+""+t+n().toString(36)+(r||"")},e.exports.process=function(e,r){return(e||"")+t+n().toString(36)+(r||"")},e.exports.time=function(e,t){return(e||"")+n().toString(36)+(t||"")}},8966:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=He(n(8469)),o=He(n(7536)),a=He(n(1359)),s=He(n(557)),u=He(n(2315)),c=He(n(9466)),l=He(n(661)),d=He(n(3868)),h=He(n(2492)),p=He(n(8999)),f=He(n(1028)),m=He(n(7795)),g=He(n(221)),y=He(n(2549)),v=He(n(9493)),_=He(n(7380)),b=Ve(n(9234)),w=Ve(n(4583)),S=He(n(4986)),E=He(n(1513)),k=He(n(4595)),I=He(n(3928)),T=He(n(7245)),C=He(n(5566)),A=He(n(4094)),P=He(n(7146)),R=He(n(2941)),N=He(n(9019)),D=He(n(3590)),O=He(n(6826)),L=He(n(2828)),M=He(n(937)),x=Ve(n(9146)),F=He(n(5218)),q=He(n(7117)),B=He(n(6090)),U=He(n(8335)),j=He(n(6298)),W=He(n(6454)),V=He(n(6648)),H=He(n(4339)),G=He(n(8177)),K=He(n(2438)),$=He(n(368)),Q=He(n(8874)),z=He(n(4979)),Y=He(n(1008)),Z=He(n(4069)),X=He(n(4958)),J=He(n(3235)),ee=He(n(7278)),te=He(n(9131)),ne=He(n(3315)),re=He(n(1464)),ie=He(n(7228)),oe=He(n(682)),ae=He(n(9396)),se=He(n(5807)),ue=He(n(7148)),ce=He(n(7612)),le=He(n(9887)),de=He(n(3058)),he=Ve(n(8355)),pe=He(n(2129)),fe=He(n(94)),me=He(n(8021)),ge=He(n(5061)),ye=He(n(4611)),ve=He(n(1727)),_e=He(n(6776)),be=He(n(2782)),we=He(n(5008)),Se=He(n(2689)),Ee=He(n(8983)),ke=He(n(2776)),Ie=He(n(4554)),Te=He(n(478)),Ce=Ve(n(8140)),Ae=He(n(4959)),Pe=He(n(9778)),Re=He(n(4813)),Ne=He(n(5152)),De=He(n(4816)),Oe=He(n(8035)),Le=He(n(4714)),Me=He(n(4928)),xe=He(n(8346)),Fe=He(n(2900)),qe=He(n(8220)),Be=He(n(2786)),Ue=He(n(7633)),je=He(n(5977));function We(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return We=function(){return e},e}function Ve(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=We();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function He(e){return e&&e.__esModule?e:{default:e}}var Ge={version:"13.6.0",toDate:i.default,toFloat:o.default,toInt:a.default,toBoolean:s.default,equals:u.default,contains:c.default,matches:l.default,isEmail:d.default,isURL:h.default,isMACAddress:p.default,isIP:f.default,isIPRange:m.default,isFQDN:g.default,isBoolean:v.default,isIBAN:G.default,isBIC:K.default,isAlpha:b.default,isAlphaLocales:b.locales,isAlphanumeric:w.default,isAlphanumericLocales:w.locales,isNumeric:S.default,isPassportNumber:E.default,isPort:k.default,isLowercase:I.default,isUppercase:T.default,isAscii:A.default,isFullWidth:P.default,isHalfWidth:R.default,isVariableWidth:N.default,isMultibyte:D.default,isSemVer:O.default,isSurrogatePair:L.default,isInt:M.default,isIMEI:C.default,isFloat:x.default,isFloatLocales:x.locales,isDecimal:F.default,isHexadecimal:q.default,isOctal:B.default,isDivisibleBy:U.default,isHexColor:j.default,isRgbColor:W.default,isHSL:V.default,isISRC:H.default,isMD5:$.default,isHash:Q.default,isJWT:z.default,isJSON:Y.default,isEmpty:Z.default,isLength:X.default,isLocale:_.default,isByteLength:J.default,isUUID:ee.default,isMongoId:te.default,isAfter:ne.default,isBefore:re.default,isIn:ie.default,isCreditCard:oe.default,isIdentityCard:ae.default,isEAN:se.default,isISIN:ue.default,isISBN:ce.default,isISSN:le.default,isMobilePhone:he.default,isMobilePhoneLocales:he.locales,isPostalCode:Ce.default,isPostalCodeLocales:Ce.locales,isEthereumAddress:pe.default,isCurrency:fe.default,isBtcAddress:me.default,isISO8601:ge.default,isRFC3339:ye.default,isISO31661Alpha2:ve.default,isISO31661Alpha3:_e.default,isBase32:be.default,isBase58:we.default,isBase64:Se.default,isDataURI:Ee.default,isMagnetURI:ke.default,isMimeType:Ie.default,isLatLong:Te.default,ltrim:Ae.default,rtrim:Pe.default,trim:Re.default,escape:Ne.default,unescape:De.default,stripLow:Oe.default,whitelist:Le.default,blacklist:Me.default,isWhitelisted:xe.default,normalizeEmail:Fe.default,toString,isSlug:qe.default,isStrongPassword:Ue.default,isTaxID:de.default,isDate:y.default,isLicensePlate:Be.default,isVAT:je.default};t.default=Ge,e.exports=t.default,e.exports.default=t.default},79:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commaDecimal=t.dotDecimal=t.farsiLocales=t.arabicLocales=t.englishLocales=t.decimal=t.alphanumeric=t.alpha=void 0;var n={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ώ]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fa-IR":/^[ابپتثجچحخدذرزژسشصضطظعغفقکگلمنوهی]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๐\s]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"vi-VN":/^[A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[א-ת]+$/,fa:/^['آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی']+$/i};t.alpha=n;var r={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๙\s]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,"vi-VN":/^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[0-9א-ת]+$/,fa:/^['0-9آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی۱۲۳۴۵۶۷۸۹۰']+$/i};t.alphanumeric=r;var i={"en-US":".",ar:"٫"};t.decimal=i;var o=["AU","GB","HK","IN","NZ","ZA","ZM"];t.englishLocales=o;for(var a,s=0;s<o.length;s++)n[a="en-".concat(o[s])]=n["en-US"],r[a]=r["en-US"],i[a]=i["en-US"];var u=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];t.arabicLocales=u;for(var c,l=0;l<u.length;l++)n[c="ar-".concat(u[l])]=n.ar,r[c]=r.ar,i[c]=i.ar;var d=["IR","AF"];t.farsiLocales=d;for(var h,p=0;p<d.length;p++)r[h="fa-".concat(d[p])]=r.fa,i[h]=i.ar;var f=["ar-EG","ar-LB","ar-LY"];t.dotDecimal=f;var m=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"];t.commaDecimal=m;for(var g=0;g<f.length;g++)i[f[g]]=i["en-US"];for(var y=0;y<m.length;y++)i[m[y]]=",";n["fr-CA"]=n["fr-FR"],r["fr-CA"]=r["fr-FR"],n["pt-BR"]=n["pt-PT"],r["pt-BR"]=r["pt-PT"],i["pt-BR"]=i["pt-PT"],n["pl-Pl"]=n["pl-PL"],r["pl-Pl"]=r["pl-PL"],i["pl-Pl"]=i["pl-PL"],n["fa-AF"]=n.fa},4928:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),e.replace(new RegExp("[".concat(t,"]+"),"g"),"")};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},9466:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return(0,r.default)(e),(n=(0,o.default)(n,s)).ignoreCase?e.toLowerCase().indexOf((0,i.default)(t).toLowerCase())>=0:e.indexOf((0,i.default)(t))>=0};var r=a(n(5571)),i=a(n(1913)),o=a(n(4808));function a(e){return e&&e.__esModule?e:{default:e}}var s={ignoreCase:!1};e.exports=t.default,e.exports.default=t.default},2315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),e===t};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},5152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},3315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(e);var n=(0,i.default)(t),o=(0,i.default)(e);return!!(o&&n&&o>n)};var r=o(n(5571)),i=o(n(8469));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},9234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(e);var r=e,a=n.ignore;if(a)if(a instanceof RegExp)r=r.replace(a,"");else{if("string"!=typeof a)throw new Error("ignore should be instance of a String or RegExp");r=r.replace(new RegExp("[".concat(a.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"")}if(t in o.alpha)return o.alpha[t].test(r);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=n(79),a=Object.keys(o.alpha);t.locales=a},4583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(e);var r=e,a=n.ignore;if(a)if(a instanceof RegExp)r=r.replace(a,"");else{if("string"!=typeof a)throw new Error("ignore should be instance of a String or RegExp");r=r.replace(new RegExp("[".concat(a.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"")}if(t in o.alphanumeric)return o.alphanumeric[t].test(r);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=n(79),a=Object.keys(o.alphanumeric);t.locales=a},4094:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[\x00-\x7F]+$/;e.exports=t.default,e.exports.default=t.default},2438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),!(o.CountryCodes.indexOf(e.slice(4,6).toUpperCase())<0)&&a.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=n(1727),a=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;e.exports=t.default,e.exports.default=t.default},2782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),!(e.length%8!=0||!o.test(e))};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[A-Z2-7]+=*$/;e.exports=t.default,e.exports.default=t.default},5008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),!!o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[A-HJ-NP-Za-km-z1-9]*$/;e.exports=t.default,e.exports.default=t.default},2689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e),t=(0,i.default)(t,u);var n=e.length;if(t.urlSafe)return s.test(e);if(n%4!=0||a.test(e))return!1;var o=e.indexOf("=");return-1===o||o===n-1||o===n-2&&"="===e[n-1]};var r=o(n(5571)),i=o(n(4808));function o(e){return e&&e.__esModule?e:{default:e}}var a=/[^A-Z0-9+\/=]/i,s=/^[A-Z0-9_\-]*$/i,u={urlSafe:!1};e.exports=t.default,e.exports.default=t.default},1464:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(e);var n=(0,i.default)(t),o=(0,i.default)(e);return!!(o&&n&&o<n)};var r=o(n(5571)),i=o(n(8469));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},9493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),["true","false","1","0"].indexOf(e)>=0};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},8021:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),e.startsWith("bc1")?o.test(e):a.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(bc1)[a-z0-9]{25,39}$/,a=/^(1|3)[A-HJ-NP-Za-km-z1-9]{25,39}$/;e.exports=t.default,e.exports.default=t.default},3235:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r;(0,i.default)(e),"object"===o(t)?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var a=encodeURI(e).split(/%..|./).length-1;return a>=n&&(void 0===r||a<=r)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e.exports=t.default,e.exports.default=t.default},682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(e);var t=e.replace(/[- ]+/g,"");if(!o.test(t))return!1;for(var n,r,a,s=0,u=t.length-1;u>=0;u--)n=t.substring(u,u+1),r=parseInt(n,10),s+=a&&(r*=2)>=10?r%10+1:r,a=!a;return!(s%10!=0||!t)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(?:4[0-9]{12}(?:[0-9]{3,6})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12,15}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14})$/;e.exports=t.default,e.exports.default=t.default},94:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),function(e){var t="\\d{".concat(e.digits_after_decimal[0],"}");e.digits_after_decimal.forEach((function(e,n){0!==n&&(t="".concat(t,"|\\d{").concat(e,"}"))}));var n="(".concat(e.symbol.replace(/\W/,(function(e){return"\\".concat(e)})),")").concat(e.require_symbol?"":"?"),r="-?",i="[1-9]\\d{0,2}(\\".concat(e.thousands_separator,"\\d{3})*"),o="(".concat(["0","[1-9]\\d*",i].join("|"),")?"),a="(\\".concat(e.decimal_separator,"(").concat(t,"))").concat(e.require_decimal?"":"?"),s=o+(e.allow_decimal||e.require_decimal?a:"");return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?s+=r:e.negative_sign_before_digits&&(s=r+s)),e.allow_negative_sign_placeholder?s="( (?!\\-))?".concat(s):e.allow_space_after_symbol?s=" ?".concat(s):e.allow_space_after_digits&&(s+="( (?!$))?"),e.symbol_after_digits?s+=n:s=n+s,e.allow_negatives&&(e.parens_for_negatives?s="(\\(".concat(s,"\\)|").concat(s,")"):e.negative_sign_before_digits||e.negative_sign_after_digits||(s=r+s)),new RegExp("^(?!-? )(?=.*\\d)".concat(s,"$"))}(t=(0,r.default)(t,a)).test(e)};var r=o(n(4808)),i=o(n(5571));function o(e){return e&&e.__esModule?e:{default:e}}var a={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};e.exports=t.default,e.exports.default=t.default},8983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(e);var t=e.split(",");if(t.length<2)return!1;var n=t.shift().trim().split(";"),r=n.shift();if("data:"!==r.substr(0,5))return!1;var u=r.substr(5);if(""!==u&&!o.test(u))return!1;for(var c=0;c<n.length;c++)if((c!==n.length-1||"base64"!==n[c].toLowerCase())&&!a.test(n[c]))return!1;for(var l=0;l<t.length;l++)if(!s.test(t[l]))return!1;return!0};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[a-z]+\/[a-z0-9\-\+]+$/i,a=/^[a-z\-]+=[a-z0-9\-]+$/i,s=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;e.exports=t.default,e.exports.default=t.default},2549:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t="string"==typeof t?(0,i.default)({format:t},s):(0,i.default)(t,s),"string"==typeof e&&(m=t.format,/(^(y{4}|y{2})[\/-](m{1,2})[\/-](d{1,2})$)|(^(m{1,2})[\/-](d{1,2})[\/-]((y{4}|y{2})$))|(^(d{1,2})[\/-](m{1,2})[\/-]((y{4}|y{2})$))/gi.test(m))){var n,r=t.delimiters.find((function(e){return-1!==t.format.indexOf(e)})),a=t.strictMode?r:t.delimiters.find((function(t){return-1!==e.indexOf(t)})),u=function(e,t){for(var n=[],r=Math.min(e.length,t.length),i=0;i<r;i++)n.push([e[i],t[i]]);return n}(e.split(a),t.format.toLowerCase().split(r)),c={},l=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(u);try{for(l.s();!(n=l.n()).done;){var d=(f=n.value,2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),2!==n.length);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(f)||o(f,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=d[0],p=d[1];if(h.length!==p.length)return!1;c[p.charAt(0)]=h}}catch(e){l.e(e)}finally{l.f()}return new Date("".concat(c.m,"/").concat(c.d,"/").concat(c.y)).getDate()===+c.d}var f,m;return!t.strictMode&&("[object Date]"===Object.prototype.toString.call(e)&&isFinite(e))};var r,i=(r=n(4808))&&r.__esModule?r:{default:r};function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};e.exports=t.default,e.exports.default=t.default},5218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,i.default)(e),(t=(0,r.default)(t,u)).locale in a.decimal)return!(0,o.default)(c,e.replace(/ /g,""))&&function(e){return new RegExp("^[-+]?([0-9]+)?(\\".concat(a.decimal[e.locale],"[0-9]{").concat(e.decimal_digits,"})").concat(e.force_decimal?"":"?","$"))}(t).test(e);throw new Error("Invalid locale '".concat(t.locale,"'"))};var r=s(n(4808)),i=s(n(5571)),o=s(n(3506)),a=n(79);function s(e){return e&&e.__esModule?e:{default:e}}var u={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},c=["","-","+"];e.exports=t.default,e.exports.default=t.default},8335:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),(0,i.default)(e)%parseInt(t,10)==0};var r=o(n(5571)),i=o(n(7536));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},5807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(e);var t,n,r=Number(e.slice(-1));return o.test(e)&&r===((n=10-(t=e).slice(0,-1).split("").map((function(e,n){return Number(e)*function(e,t){return 8===e||14===e?t%2==0?3:1:t%2==0?1:3}(t.length,n)})).reduce((function(e,t){return e+t}),0)%10)<10?n:0)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(\d{8}|\d{13}|\d{14})$/;e.exports=t.default,e.exports.default=t.default},3868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),(t=(0,i.default)(t,c)).require_display_name||t.allow_display_name){var n=e.match(l);if(n){var u=n[1];if(e=e.replace(u,"").replace(/(^<|>$)/g,""),u.endsWith(" ")&&(u=u.substr(0,u.length-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(t.split('"').length!==t.split('\\"').length)return!1}return!0}(u))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var g=e.split("@"),y=g.pop(),v=g.join("@"),_=y.toLowerCase();if(t.domain_specific_validation&&("gmail.com"===_||"googlemail.com"===_)){var b=(v=v.toLowerCase()).split("+")[0];if(!(0,o.default)(b.replace(".",""),{min:6,max:30}))return!1;for(var w=b.split("."),S=0;S<w.length;S++)if(!h.test(w[S]))return!1}if(!(!1!==t.ignore_max_length||(0,o.default)(v,{max:64})&&(0,o.default)(y,{max:254})))return!1;if(!(0,a.default)(y,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,s.default)(y)){if(!y.startsWith("[")||!y.endsWith("]"))return!1;var E=y.substr(1,y.length-2);if(0===E.length||!(0,s.default)(E))return!1}}if('"'===v[0])return v=v.slice(1,v.length-1),t.allow_utf8_local_part?m.test(v):p.test(v);for(var k=t.allow_utf8_local_part?f:d,I=v.split("."),T=0;T<I.length;T++)if(!k.test(I[T]))return!1;return!t.blacklisted_chars||-1===v.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g"))};var r=u(n(5571)),i=u(n(4808)),o=u(n(3235)),a=u(n(221)),s=u(n(1028));function u(e){return e&&e.__esModule?e:{default:e}}var c={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1},l=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,h=/^[a-z\d]+$/,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,f=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default},4069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),0===((t=(0,i.default)(t,a)).ignore_whitespace?e.trim().length:e.length)};var r=o(n(5571)),i=o(n(4808));function o(e){return e&&e.__esModule?e:{default:e}}var a={ignore_whitespace:!1};e.exports=t.default,e.exports.default=t.default},2129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(0x)[0-9a-f]{40}$/i;e.exports=t.default,e.exports.default=t.default},221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e),(t=(0,i.default)(t,a)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var n=e.split("."),o=n[n.length-1];if(t.require_tld){if(n.length<2)return!1;if(!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(o))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20\u00A9\uFFFD]/.test(o))return!1}return!(!t.allow_numeric_tld&&/^\d+$/.test(o))&&n.every((function(e){return!(e.length>63||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))}))};var r=o(n(5571)),i=o(n(4808));function o(e){return e&&e.__esModule?e:{default:e}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1};e.exports=t.default,e.exports.default=t.default},9146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e),t=t||{};var n=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale?o.decimal[t.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===e||"."===e||"-"===e||"+"===e)return!1;var r=parseFloat(e.replace(",","."));return n.test(e)&&(!t.hasOwnProperty("min")||r>=t.min)&&(!t.hasOwnProperty("max")||r<=t.max)&&(!t.hasOwnProperty("lt")||r<t.lt)&&(!t.hasOwnProperty("gt")||r>t.gt)},t.locales=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=n(79),a=Object.keys(o.decimal);t.locales=a},7146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)},t.fullWidth=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.fullWidth=o},6648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(e);var t=e.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/gi,"$1");return-1!==t.indexOf(",")?o.test(t):a.test(t)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,a=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;e.exports=t.default,e.exports.default=t.default},2941:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)},t.halfWidth=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.halfWidth=o},8874:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),new RegExp("^[a-fA-F0-9]{".concat(o[t],"}$")).test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};e.exports=t.default,e.exports.default=t.default},6298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;e.exports=t.default,e.exports.default=t.default},7117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(0x|0h)?[0-9A-F]+$/i;e.exports=t.default,e.exports.default=t.default},8177:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),function(e){var t=e.replace(/[\s\-]+/gi,"").toUpperCase(),n=t.slice(0,2).toUpperCase();return n in o&&o[n].test(t)}(e)&&function(e){var t=e.replace(/[^A-Z0-9]+/gi,"").toUpperCase();return 1===(t.slice(4)+t.slice(0,4)).replace(/[A-Z]/g,(function(e){return e.charCodeAt(0)-55})).match(/\d{1,7}/g).reduce((function(e,t){return Number(e+t)%97}),"")}(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};e.exports=t.default,e.exports.default=t.default},5566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e);var n=o;if((t=t||{}).allow_hyphens&&(n=a),!n.test(e))return!1;e=e.replace(/-/g,"");for(var r=0,s=2,u=0;u<14;u++){var c=e.substring(14-u-1,14-u),l=parseInt(c,10)*s;r+=l>=10?l%10+1:l,1===s?s+=1:s-=1}return(10-r%10)%10===parseInt(e.substring(14,15),10)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[0-9]{15}$/,a=/^\d{2}-\d{6}-\d{6}-\d{1}$/;e.exports=t.default,e.exports.default=t.default},1028:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,i.default)(t),!(n=String(n)))return e(t,4)||e(t,6);if("4"===n){if(!s.test(t))return!1;var r=t.split(".").sort((function(e,t){return e-t}));return r[3]<=255}return"6"===n&&!!c.test(t)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",a="(".concat(o,"[.]){3}").concat(o),s=new RegExp("^".concat(a,"$")),u="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(u,":){7}(?:").concat(u,"|:)|")+"(?:".concat(u,":){6}(?:").concat(a,"|:").concat(u,"|:)|")+"(?:".concat(u,":){5}(?::").concat(a,"|(:").concat(u,"){1,2}|:)|")+"(?:".concat(u,":){4}(?:(:").concat(u,"){0,1}:").concat(a,"|(:").concat(u,"){1,3}|:)|")+"(?:".concat(u,":){3}(?:(:").concat(u,"){0,2}:").concat(a,"|(:").concat(u,"){1,4}|:)|")+"(?:".concat(u,":){2}(?:(:").concat(u,"){0,3}:").concat(a,"|(:").concat(u,"){1,5}|:)|")+"(?:".concat(u,":){1}(?:(:").concat(u,"){0,4}:").concat(a,"|(:").concat(u,"){1,6}|:)|")+"(?::((?::".concat(u,"){0,5}:").concat(a,"|(?::").concat(u,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default},7795:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,r.default)(e);var n=e.split("/");if(2!==n.length)return!1;if(!a.test(n[1]))return!1;if(n[1].length>1&&n[1].startsWith("0"))return!1;var o=(0,i.default)(n[0],t);if(!o)return!1;var u=null;switch(String(t)){case"4":u=32;break;case"6":u=s;break;default:u=(0,i.default)(n[0],"6")?s:32}return n[1]<=u&&n[1]>=0};var r=o(n(5571)),i=o(n(1028));function o(e){return e&&e.__esModule?e:{default:e}}var a=/^\d{1,3}$/,s=128;e.exports=t.default,e.exports.default=t.default},7612:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,i.default)(t),!(n=String(n)))return e(t,10)||e(t,13);var r,u=t.replace(/[\s-]+/g,""),c=0;if("10"===n){if(!o.test(u))return!1;for(r=0;r<9;r++)c+=(r+1)*u.charAt(r);if("X"===u.charAt(9)?c+=100:c+=10*u.charAt(9),c%11==0)return!!u}else if("13"===n){if(!a.test(u))return!1;for(r=0;r<12;r++)c+=s[r%2]*u.charAt(r);if(u.charAt(12)-(10-c%10)%10==0)return!!u}return!1};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(?:[0-9]{9}X|[0-9]{10})$/,a=/^(?:[0-9]{13})$/,s=[1,3];e.exports=t.default,e.exports.default=t.default},7148:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,i.default)(e),!o.test(e))return!1;for(var t=!0,n=0,r=e.length-2;r>=0;r--)if(e[r]>="A"&&e[r]<="Z")for(var a=e[r].charCodeAt(0)-55,s=0,u=[a%10,Math.trunc(a/10)];s<u.length;s++){var c=u[s];n+=t?c>=5?1+2*(c-5):2*c:c,t=!t}else{var l=e[r].charCodeAt(0)-"0".charCodeAt(0);n+=t?l>=5?1+2*(l-5):2*l:l,t=!t}var d=10*Math.trunc((n+9)/10)-n;return+e[e.length-1]===d};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;e.exports=t.default,e.exports.default=t.default},1727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.indexOf(e.toUpperCase())>=0},t.CountryCodes=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"],a=o;t.CountryCodes=a},6776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,i.default)(a,e.toUpperCase())};var r=o(n(5571)),i=o(n(3506));function o(e){return e&&e.__esModule?e:{default:e}}var a=["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"];e.exports=t.default,e.exports.default=t.default},5061:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(e);var n=t.strictSeparator?a.test(e):o.test(e);return n&&t.strict?s(e):n};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,a=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,s=function(e){var t=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(t){var n=Number(t[1]),r=Number(t[2]);return n%4==0&&n%100!=0||n%400==0?r<=366:r<=365}var i=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),o=i[1],a=i[2],s=i[3],u=a?"0".concat(a).slice(-2):a,c=s?"0".concat(s).slice(-2):s,l=new Date("".concat(o,"-").concat(u||"01","-").concat(c||"01"));return!a||!s||l.getUTCFullYear()===o&&l.getUTCMonth()+1===a&&l.getUTCDate()===s};e.exports=t.default,e.exports.default=t.default},4339:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;e.exports=t.default,e.exports.default=t.default},9887:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(e);var n=o;if(n=t.require_hyphen?n.replace("?",""):n,!(n=t.case_sensitive?new RegExp(n):new RegExp(n,"i")).test(e))return!1;for(var r=e.replace("-","").toUpperCase(),a=0,s=0;s<r.length;s++){var u=r[s];a+=("X"===u?10:+u)*(8-s)}return a%11==0};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o="^\\d{4}-?\\d{3}[\\dX]$";e.exports=t.default,e.exports.default=t.default},9396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,i.default)(e),t in o)return o[t](e);if("any"===t){for(var n in o)if(o.hasOwnProperty(n)&&(0,o[n])(e))return!0;return!1}throw new Error("Invalid locale '".concat(t,"'"))};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={ES:function(e){(0,i.default)(e);var t={X:0,Y:1,Z:2},n=e.trim().toUpperCase();if(!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(n))return!1;var r=n.slice(0,-1).replace(/[X,Y,Z]/g,(function(e){return t[e]}));return n.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][r%23])},IN:function(e){var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],n=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],r=e.trim();if(!/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/.test(r))return!1;var i=0;return r.replace(/\s/g,"").split("").map(Number).reverse().forEach((function(e,r){i=t[i][n[r%8][e]]})),0===i},IR:function(e){if(!e.match(/^\d{10}$/))return!1;if(e="0000".concat(e).substr(e.length-6),0===parseInt(e.substr(3,6),10))return!1;for(var t=parseInt(e.substr(9,1),10),n=0,r=0;r<9;r++)n+=parseInt(e.substr(r,1),10)*(10-r);return(n%=11)<2&&t===n||n>=2&&t===11-n},IT:function(e){return 9===e.length&&"CA00000AA"!==e&&e.search(/C[A-Z][0-9]{5}[A-Z]{2}/i)>-1},NO:function(e){var t=e.trim();if(isNaN(Number(t)))return!1;if(11!==t.length)return!1;if("00000000000"===t)return!1;var n=t.split("").map(Number),r=(11-(3*n[0]+7*n[1]+6*n[2]+1*n[3]+8*n[4]+9*n[5]+4*n[6]+5*n[7]+2*n[8])%11)%11,i=(11-(5*n[0]+4*n[1]+3*n[2]+2*n[3]+7*n[4]+6*n[5]+5*n[6]+4*n[7]+3*n[8]+2*r)%11)%11;return r===n[9]&&i===n[10]},"he-IL":function(e){var t=e.trim();if(!/^\d{9}$/.test(t))return!1;for(var n,r=t,i=0,o=0;o<r.length;o++)i+=(n=Number(r[o])*(o%2+1))>9?n-9:n;return i%10==0},"ar-LY":function(e){var t=e.trim();return!!/^(1|2)\d{11}$/.test(t)},"ar-TN":function(e){var t=e.trim();return!!/^\d{8}$/.test(t)},"zh-CN":function(e){var t,n=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],r=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],i=["1","0","X","9","8","7","6","5","4","3","2"],o=function(e){return n.includes(e)},a=function(e){var t=parseInt(e.substring(0,4),10),n=parseInt(e.substring(4,6),10),r=parseInt(e.substring(6),10),i=new Date(t,n-1,r);return!(i>new Date)&&i.getFullYear()===t&&i.getMonth()===n-1&&i.getDate()===r};return!!/^\d{15}|(\d{17}(\d|x|X))$/.test(t=e)&&(15===t.length?function(e){var t=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(e);if(!t)return!1;var n=e.substring(0,2);if(!(t=o(n)))return!1;var r="19".concat(e.substring(6,12));return!!(t=a(r))}(t):function(e){var t=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(e);if(!t)return!1;var n=e.substring(0,2);if(!(t=o(n)))return!1;var s=e.substring(6,14);return!!(t=a(s))&&function(e){return function(e){for(var t=e.substring(0,17),n=0,o=0;o<17;o++)n+=parseInt(t.charAt(o),10)*parseInt(r[o],10);return i[n%11]}(e)===e.charAt(17).toUpperCase()}(e)}(t))},"zh-TW":function(e){var t={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},n=e.trim().toUpperCase();return!!/^[A-Z][0-9]{9}$/.test(n)&&Array.from(n).reduce((function(e,n,r){if(0===r){var i=t[n];return i%10*9+Math.floor(i/10)}return 9===r?(10-e%10-Number(n))%10==0:e+Number(n)*(9-r)}),0)}};e.exports=t.default,e.exports.default=t.default},7228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n;if((0,r.default)(e),"[object Array]"===Object.prototype.toString.call(t)){var o=[];for(n in t)({}).hasOwnProperty.call(t,n)&&(o[n]=(0,i.default)(t[n]));return o.indexOf(e)>=0}return"object"===a(t)?t.hasOwnProperty(e):!(!t||"function"!=typeof t.indexOf)&&t.indexOf(e)>=0};var r=o(n(5571)),i=o(n(1913));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e.exports=t.default,e.exports.default=t.default},937:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e);var n=(t=t||{}).hasOwnProperty("allow_leading_zeroes")&&!t.allow_leading_zeroes?o:a,r=!t.hasOwnProperty("min")||e>=t.min,s=!t.hasOwnProperty("max")||e<=t.max,u=!t.hasOwnProperty("lt")||e<t.lt,c=!t.hasOwnProperty("gt")||e>t.gt;return n.test(e)&&r&&s&&u&&c};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,a=/^[-+]?[0-9]+$/;e.exports=t.default,e.exports.default=t.default},1008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e);try{t=(0,i.default)(t,s);var n=[];t.allow_primitives&&(n=[null,!1,!0]);var o=JSON.parse(e);return n.includes(o)||!!o&&"object"===a(o)}catch(e){}return!1};var r=o(n(5571)),i=o(n(4808));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var s={allow_primitives:!1};e.exports=t.default,e.exports.default=t.default},4979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,r.default)(e);var t=e.split("."),n=t.length;return!(n>3||n<2)&&t.reduce((function(e,t){return e&&(0,i.default)(t,{urlSafe:!0})}),!0)};var r=o(n(5571)),i=o(n(2689));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),t=(0,i.default)(t,l),!e.includes(","))return!1;var n=e.split(",");return!(n[0].startsWith("(")&&!n[1].endsWith(")")||n[1].endsWith(")")&&!n[0].startsWith("("))&&(t.checkDMS?u.test(n[0])&&c.test(n[1]):a.test(n[0])&&s.test(n[1]))};var r=o(n(5571)),i=o(n(4808));function o(e){return e&&e.__esModule?e:{default:e}}var a=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,s=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,u=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,c=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,l={checkDMS:!1};e.exports=t.default,e.exports.default=t.default},4958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r;(0,i.default)(e),"object"===o(t)?(n=t.min||0,r=t.max):(n=arguments[1]||0,r=arguments[2]);var a=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],s=e.length-a.length;return s>=n&&(void 0===r||s<=r)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e.exports=t.default,e.exports.default=t.default},2786:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,i.default)(e),t in o)return o[t](e);if("any"===t){for(var n in o)if((0,o[n])(e))return!0;return!1}throw new Error("Invalid locale '".concat(t,"'"))};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={"de-DE":function(e){return/^((AW|UL|AK|GA|AÖ|LF|AZ|AM|AS|ZE|AN|AB|A|KG|KH|BA|EW|BZ|HY|KM|BT|HP|B|BC|BI|BO|FN|TT|ÜB|BN|AH|BS|FR|HB|ZZ|BB|BK|BÖ|OC|OK|CW|CE|C|CO|LH|CB|KW|LC|LN|DA|DI|DE|DH|SY|NÖ|DO|DD|DU|DN|D|EI|EA|EE|FI|EM|EL|EN|PF|ED|EF|ER|AU|ZP|E|ES|NT|EU|FL|FO|FT|FF|F|FS|FD|FÜ|GE|G|GI|GF|GS|ZR|GG|GP|GR|NY|ZI|GÖ|GZ|GT|HA|HH|HM|HU|WL|HZ|WR|RN|HK|HD|HN|HS|GK|HE|HF|RZ|HI|HG|HO|HX|IK|IL|IN|J|JL|KL|KA|KS|KF|KE|KI|KT|KO|KN|KR|KC|KU|K|LD|LL|LA|L|OP|LM|LI|LB|LU|LÖ|HL|LG|MD|GN|MZ|MA|ML|MR|MY|AT|DM|MC|NZ|RM|RG|MM|ME|MB|MI|FG|DL|HC|MW|RL|MK|MG|MÜ|WS|MH|M|MS|NU|NB|ND|NM|NK|NW|NR|NI|NF|DZ|EB|OZ|TG|TO|N|OA|GM|OB|CA|EH|FW|OF|OL|OE|OG|BH|LR|OS|AA|GD|OH|KY|NP|WK|PB|PA|PE|PI|PS|P|PM|PR|RA|RV|RE|R|H|SB|WN|RS|RD|RT|BM|NE|GV|RP|SU|GL|RO|GÜ|RH|EG|RW|PN|SK|MQ|RU|SZ|RI|SL|SM|SC|HR|FZ|VS|SW|SN|CR|SE|SI|SO|LP|SG|NH|SP|IZ|ST|BF|TE|HV|OD|SR|S|AC|DW|ZW|TF|TS|TR|TÜ|UM|PZ|TP|UE|UN|UH|MN|KK|VB|V|AE|PL|RC|VG|GW|PW|VR|VK|KB|WA|WT|BE|WM|WE|AP|MO|WW|FB|WZ|WI|WB|JE|WF|WO|W|WÜ|BL|Z|GC)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(AIC|FDB|ABG|SLN|SAW|KLZ|BUL|ESB|NAB|SUL|WST|ABI|AZE|BTF|KÖT|DKB|FEU|ROT|ALZ|SMÜ|WER|AUR|NOR|DÜW|BRK|HAB|TÖL|WOR|BAD|BAR|BER|BIW|EBS|KEM|MÜB|PEG|BGL|BGD|REI|WIL|BKS|BIR|WAT|BOR|BOH|BOT|BRB|BLK|HHM|NEB|NMB|WSF|LEO|HDL|WMS|WZL|BÜS|CHA|KÖZ|ROD|WÜM|CLP|NEC|COC|ZEL|COE|CUX|DAH|LDS|DEG|DEL|RSL|DLG|DGF|LAN|HEI|MED|DON|KIB|ROK|JÜL|MON|SLE|EBE|EIC|HIG|WBS|BIT|PRÜ|LIB|EMD|WIT|ERH|HÖS|ERZ|ANA|ASZ|MAB|MEK|STL|SZB|FDS|HCH|HOR|WOL|FRG|GRA|WOS|FRI|FFB|GAP|GER|BRL|CLZ|GTH|NOH|HGW|GRZ|LÖB|NOL|WSW|DUD|HMÜ|OHA|KRU|HAL|HAM|HBS|QLB|HVL|NAU|HAS|EBN|GEO|HOH|HDH|ERK|HER|WAN|HEF|ROF|HBN|ALF|HSK|USI|NAI|REH|SAN|KÜN|ÖHR|HOL|WAR|ARN|BRG|GNT|HOG|WOH|KEH|MAI|PAR|RID|ROL|KLE|GEL|KUS|KYF|ART|SDH|LDK|DIL|MAL|VIB|LER|BNA|GHA|GRM|MTL|WUR|LEV|LIF|STE|WEL|LIP|VAI|LUP|HGN|LBZ|LWL|PCH|STB|DAN|MKK|SLÜ|MSP|TBB|MGH|MTK|BIN|MSH|EIL|HET|SGH|BID|MYK|MSE|MST|MÜR|WRN|MEI|GRH|RIE|MZG|MIL|OBB|BED|FLÖ|MOL|FRW|SEE|SRB|AIB|MOS|BCH|ILL|SOB|NMS|NEA|SEF|UFF|NEW|VOH|NDH|TDO|NWM|GDB|GVM|WIS|NOM|EIN|GAN|LAU|HEB|OHV|OSL|SFB|ERB|LOS|BSK|KEL|BSB|MEL|WTL|OAL|FÜS|MOD|OHZ|OPR|BÜR|PAF|PLÖ|CAS|GLA|REG|VIT|ECK|SIM|GOA|EMS|DIZ|GOH|RÜD|SWA|NES|KÖN|MET|LRO|BÜZ|DBR|ROS|TET|HRO|ROW|BRV|HIP|PAN|GRI|SHK|EIS|SRO|SOK|LBS|SCZ|MER|QFT|SLF|SLS|HOM|SLK|ASL|BBG|SBK|SFT|SHG|MGN|MEG|ZIG|SAD|NEN|OVI|SHA|BLB|SIG|SON|SPN|FOR|GUB|SPB|IGB|WND|STD|STA|SDL|OBG|HST|BOG|SHL|PIR|FTL|SEB|SÖM|SÜW|TIR|SAB|TUT|ANG|SDT|LÜN|LSZ|MHL|VEC|VER|VIE|OVL|ANK|OVP|SBG|UEM|UER|WLG|GMN|NVP|RDG|RÜG|DAU|FKB|WAF|WAK|SLZ|WEN|SOG|APD|WUG|GUN|ESW|WIZ|WES|DIN|BRA|BÜD|WHV|HWI|GHC|WTM|WOB|WUN|MAK|SEL|OCH|HOT|WDA)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(e)},"de-LI":function(e){return/^FL[- ]?\d{1,5}[UZ]?$/.test(e)},"pt-PT":function(e){return/^([A-Z]{2}|[0-9]{2})[ -·]?([A-Z]{2}|[0-9]{2})[ -·]?([A-Z]{2}|[0-9]{2})$/.test(e)},"sq-AL":function(e){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(e)},"pt-BR":function(e){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(e)}};e.exports=t.default,e.exports.default=t.default},7380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),"en_US_POSIX"===e||"ca_ES_VALENCIA"===e||o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[A-Za-z]{2,4}([_-]([A-Za-z]{4}|[\d]{3}))?([_-]([A-Za-z]{2}|[\d]{3}))?$/;e.exports=t.default,e.exports.default=t.default},3928:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),e===e.toLowerCase()};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},8999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),t&&(t.no_colons||t.no_separators)?a.test(e):o.test(e)||s.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,a=/^([0-9a-fA-F]){12}$/,s=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/;e.exports=t.default,e.exports.default=t.default},368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[a-f0-9]{32}$/;e.exports=t.default,e.exports.default=t.default},2776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e.trim())};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^magnet:\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+$/i;e.exports=t.default,e.exports.default=t.default},4554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)||a.test(e)||s.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+]{1,100}$/i,a=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,s=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;e.exports=t.default,e.exports.default=t.default},8355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if((0,i.default)(e),n&&n.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){return!(!o.hasOwnProperty(t)||!o[t].test(e))}));if(t in o)return o[t].test(e);if(!t||"any"===t){for(var r in o)if(o.hasOwnProperty(r)&&o[r].test(e))return!0;return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?[1|3]([0|5][0-45-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(5|79)\d{7}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[2-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|5|6|7|8)( |-)?\d)\d{6}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([2689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([3456789][0-9]|4[579]|6[67]|7[01235678]|9[012356789])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};o["en-CA"]=o["en-US"],o["fr-CA"]=o["en-CA"],o["fr-BE"]=o["nl-BE"],o["zh-HK"]=o["en-HK"],o["zh-MO"]=o["en-MO"],o["ga-IE"]=o["en-IE"],o["fr-CH"]=o["de-CH"],o["it-CH"]=o["fr-CH"];var a=Object.keys(o);t.locales=a},9131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,i.default)(e)&&24===e.length};var r=o(n(5571)),i=o(n(7117));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},3590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/[^\x00-\x7F]/;e.exports=t.default,e.exports.default=t.default},4986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),t&&t.no_symbols?a.test(e):new RegExp("^[+-]?([0-9]*[".concat((t||{}).locale?o.decimal[t.locale]:".","])?[0-9]+$")).test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=n(79),a=/^[0-9]+$/;e.exports=t.default,e.exports.default=t.default},6090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^(0o)?[0-7]+$/i;e.exports=t.default,e.exports.default=t.default},1513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e);var n=e.replace(/\s/g,"").toUpperCase();return t.toUpperCase()in o&&o[t].test(n)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$/,CH:/^[A-Z]\d{7}$/,CN:/^[GE]\d{8}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,PO:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{2}\d{2}\d{6}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$/};e.exports=t.default,e.exports.default=t.default},4595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e,{min:0,max:65535})};var r,i=(r=n(937))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},8140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,i.default)(e),t in u)return u[t].test(e);if("any"===t){for(var n in u)if(u.hasOwnProperty(n)&&u[n].test(e))return!0;return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^\d{4}$/,a=/^\d{5}$/,s=/^\d{6}$/,u={AD:/^AD\d{3}$/,AT:o,AU:o,AZ:/^AZ\d{4}$/,BE:o,BG:o,BR:/^\d{5}-\d{3}$/,BY:/2[1-4]{1}\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:o,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CZ:/^\d{3}\s?\d{2}$/,DE:a,DK:o,DO:a,DZ:a,EE:a,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:a,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:o,ID:a,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/\b(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}\b/,IS:/^\d{3}$/,IT:a,JP:/^\d{3}\-\d{4}$/,KE:a,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:o,LV:/^LV\-\d{4}$/,MX:a,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:a,NL:/^\d{4}\s?[a-z]{2}$/i,NO:o,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:o,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:s,RU:s,SA:a,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:s,SI:o,SK:/^\d{3}\s?\d{2}$/,TH:a,TN:o,TW:/^\d{3}(\d{2})?$/,UA:a,US:/^\d{5}(-\d{4})?$/,ZA:o,ZM:a},c=Object.keys(u);t.locales=c},4611:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),h.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/([01][0-9]|2[0-3])/,a=/[0-5][0-9]/,s=new RegExp("[-+]".concat(o.source,":").concat(a.source)),u=new RegExp("([zZ]|".concat(s.source,")")),c=new RegExp("".concat(o.source,":").concat(a.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),l=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),d=new RegExp("".concat(c.source).concat(u.source)),h=new RegExp("".concat(l.source,"[ tT]").concat(d.source));e.exports=t.default,e.exports.default=t.default},6454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,i.default)(e),t?o.test(e)||a.test(e)||s.test(e)||u.test(e):o.test(e)||a.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,a=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,s=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)/,u=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)/;e.exports=t.default,e.exports.default=t.default},6826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),o.test(e)};var r=i(n(5571));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,i(n(4731)).default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");e.exports=t.default,e.exports.default=t.default},8220:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;e.exports=t.default,e.exports.default=t.default},7633:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,i.default)(e);var n=d(e);return(t=(0,r.default)(t||{},l)).returnScore?h(n,t):n.length>=t.minLength&&n.lowercaseCount>=t.minLowercase&&n.uppercaseCount>=t.minUppercase&&n.numberCount>=t.minNumbers&&n.symbolCount>=t.minSymbols};var r=o(n(4808)),i=o(n(5571));function o(e){return e&&e.__esModule?e:{default:e}}var a=/^[A-Z]$/,s=/^[a-z]$/,u=/^[0-9]$/,c=/^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/ ]$/,l={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function d(e){var t,n,r=(t=e,n={},Array.from(t).forEach((function(e){n[e]?n[e]+=1:n[e]=1})),n),i={length:e.length,uniqueChars:Object.keys(r).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(r).forEach((function(e){a.test(e)?i.uppercaseCount+=r[e]:s.test(e)?i.lowercaseCount+=r[e]:u.test(e)?i.numberCount+=r[e]:c.test(e)&&(i.symbolCount+=r[e])})),i}function h(e,t){var n=0;return n+=e.uniqueChars*t.pointsPerUnique,n+=(e.length-e.uniqueChars)*t.pointsPerRepeat,e.lowercaseCount>0&&(n+=t.pointsForContainingLower),e.uppercaseCount>0&&(n+=t.pointsForContainingUpper),e.numberCount>0&&(n+=t.pointsForContainingNumber),e.symbolCount>0&&(n+=t.pointsForContainingSymbol),n}e.exports=t.default,e.exports.default=t.default},2828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;e.exports=t.default,e.exports.default=t.default},3058:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";(0,i.default)(e);var n=e.slice(0);if(t in h)return t in m&&(n=n.replace(m[t],"")),!!h[t].test(n)&&(!(t in p)||p[t](n));throw new Error("Invalid locale '".concat(t,"'"))};var i=u(n(5571)),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(n(3672)),a=u(n(2549));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function d(e){for(var t=!1,n=!1,r=0;r<3;r++)if(!t&&/[AEIOU]/.test(e[r]))t=!0;else if(!n&&t&&"X"===e[r])n=!0;else if(r>0){if(t&&!n&&!/[AEIOU]/.test(e[r]))return!1;if(n&&!/X/.test(e[r]))return!1}return!0}var h={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/^\d{11,14}$/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/};h["lb-LU"]=h["fr-LU"],h["lt-LT"]=h["et-EE"],h["nl-BE"]=h["fr-BE"];var p={"bg-BG":function(e){var t=e.slice(0,2),n=parseInt(e.slice(2,4),10);n>40?(n-=40,t="20".concat(t)):n>20?(n-=20,t="18".concat(t)):t="19".concat(t),n<10&&(n="0".concat(n));var r="".concat(t,"/").concat(n,"/").concat(e.slice(4,6));if(!(0,a.default)(r,"YYYY/MM/DD"))return!1;for(var i=e.split("").map((function(e){return parseInt(e,10)})),o=[2,4,8,5,10,9,7,3,6],s=0,u=0;u<o.length;u++)s+=i[u]*o[u];return(s=s%11==10?0:s%11)===i[9]},"cs-CZ":function(e){e=e.replace(/\W/,"");var t=parseInt(e.slice(0,2),10);if(10===e.length)t=t<54?"20".concat(t):"19".concat(t);else{if("000"===e.slice(6))return!1;if(!(t<54))return!1;t="19".concat(t)}3===t.length&&(t=[t.slice(0,2),"0",t.slice(2)].join(""));var n=parseInt(e.slice(2,4),10);if(n>50&&(n-=50),n>20){if(parseInt(t,10)<2004)return!1;n-=20}n<10&&(n="0".concat(n));var r="".concat(t,"/").concat(n,"/").concat(e.slice(4,6));if(!(0,a.default)(r,"YYYY/MM/DD"))return!1;if(10===e.length&&parseInt(e,10)%11!=0){var i=parseInt(e.slice(0,9),10)%11;if(!(parseInt(t,10)<1986&&10===i))return!1;if(0!==parseInt(e.slice(9),10))return!1}return!0},"de-AT":function(e){return o.luhnCheck(e)},"de-DE":function(e){for(var t=e.split("").map((function(e){return parseInt(e,10)})),n=[],r=0;r<t.length-1;r++){n.push("");for(var i=0;i<t.length-1;i++)t[r]===t[i]&&(n[r]+=i)}if(2!==(n=n.filter((function(e){return e.length>1}))).length&&3!==n.length)return!1;if(3===n[0].length){for(var a=n[0].split("").map((function(e){return parseInt(e,10)})),s=0,u=0;u<a.length-1;u++)a[u]+1===a[u+1]&&(s+=1);if(2===s)return!1}return o.iso7064Check(e)},"dk-DK":function(e){e=e.replace(/\W/,"");var t=parseInt(e.slice(4,6),10);switch(e.slice(6,7)){case"0":case"1":case"2":case"3":t="19".concat(t);break;case"4":case"9":t=t<37?"20".concat(t):"19".concat(t);break;default:if(t<37)t="20".concat(t);else{if(!(t>58))return!1;t="18".concat(t)}}3===t.length&&(t=[t.slice(0,2),"0",t.slice(2)].join(""));var n="".concat(t,"/").concat(e.slice(2,4),"/").concat(e.slice(0,2));if(!(0,a.default)(n,"YYYY/MM/DD"))return!1;for(var r=e.split("").map((function(e){return parseInt(e,10)})),i=0,o=4,s=0;s<9;s++)i+=r[s]*o,1==(o-=1)&&(o=7);return 1!=(i%=11)&&(0===i?0===r[9]:r[9]===11-i)},"el-CY":function(e){for(var t=e.slice(0,8).split("").map((function(e){return parseInt(e,10)})),n=0,r=1;r<t.length;r+=2)n+=t[r];for(var i=0;i<t.length;i+=2)t[i]<2?n+=1-t[i]:(n+=2*(t[i]-2)+5,t[i]>4&&(n+=2));return String.fromCharCode(n%26+65)===e.charAt(8)},"el-GR":function(e){for(var t=e.split("").map((function(e){return parseInt(e,10)})),n=0,r=0;r<8;r++)n+=t[r]*Math.pow(2,8-r);return n%11%10===t[8]},"en-IE":function(e){var t=o.reverseMultiplyAndSum(e.split("").slice(0,7).map((function(e){return parseInt(e,10)})),8);return 9===e.length&&"W"!==e[8]&&(t+=9*(e[8].charCodeAt(0)-64)),0==(t%=23)?"W"===e[7].toUpperCase():e[7].toUpperCase()===String.fromCharCode(64+t)},"en-US":function(e){return-1!==function(){var e,t=[];for(var n in l)l.hasOwnProperty(n)&&t.push.apply(t,function(e){if(Array.isArray(e))return c(e)}(e=l[n])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return t}().indexOf(e.substr(0,2))},"es-ES":function(e){var t=e.toUpperCase().split("");if(isNaN(parseInt(t[0],10))&&t.length>1){var n=0;switch(t[0]){case"Y":n=1;break;case"Z":n=2}t.splice(0,1,n)}else for(;t.length<9;)t.unshift(0);t=t.join("");var r=parseInt(t.slice(0,8),10)%23;return t[8]===["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][r]},"et-EE":function(e){var t=e.slice(1,3);switch(e.slice(0,1)){case"1":case"2":t="18".concat(t);break;case"3":case"4":t="19".concat(t);break;default:t="20".concat(t)}var n="".concat(t,"/").concat(e.slice(3,5),"/").concat(e.slice(5,7));if(!(0,a.default)(n,"YYYY/MM/DD"))return!1;for(var r=e.split("").map((function(e){return parseInt(e,10)})),i=0,o=1,s=0;s<10;s++)i+=r[s]*o,10===(o+=1)&&(o=1);if(i%11==10){i=0,o=3;for(var u=0;u<10;u++)i+=r[u]*o,10===(o+=1)&&(o=1);if(i%11==10)return 0===r[10]}return i%11===r[10]},"fi-FI":function(e){var t=e.slice(4,6);switch(e.slice(6,7)){case"+":t="18".concat(t);break;case"-":t="19".concat(t);break;default:t="20".concat(t)}var n="".concat(t,"/").concat(e.slice(2,4),"/").concat(e.slice(0,2));if(!(0,a.default)(n,"YYYY/MM/DD"))return!1;var r=parseInt(e.slice(0,6)+e.slice(7,10),10)%31;return r<10?r===parseInt(e.slice(10),10):["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"][r-=10]===e.slice(10)},"fr-BE":function(e){if("00"!==e.slice(2,4)||"00"!==e.slice(4,6)){var t="".concat(e.slice(0,2),"/").concat(e.slice(2,4),"/").concat(e.slice(4,6));if(!(0,a.default)(t,"YY/MM/DD"))return!1}var n=97-parseInt(e.slice(0,9),10)%97,r=parseInt(e.slice(9,11),10);return n===r||(n=97-parseInt("2".concat(e.slice(0,9)),10)%97)===r},"fr-FR":function(e){return e=e.replace(/\s/g,""),parseInt(e.slice(0,10),10)%511===parseInt(e.slice(10,13),10)},"fr-LU":function(e){var t="".concat(e.slice(0,4),"/").concat(e.slice(4,6),"/").concat(e.slice(6,8));return!!(0,a.default)(t,"YYYY/MM/DD")&&!!o.luhnCheck(e.slice(0,12))&&o.verhoeffCheck("".concat(e.slice(0,11)).concat(e[12]))},"hr-HR":function(e){return o.iso7064Check(e)},"hu-HU":function(e){for(var t=e.split("").map((function(e){return parseInt(e,10)})),n=8,r=1;r<9;r++)n+=t[r]*(r+1);return n%11===t[9]},"it-IT":function(e){var t=e.toUpperCase().split("");if(!d(t.slice(0,3)))return!1;if(!d(t.slice(3,6)))return!1;for(var n={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},r=0,i=[6,7,9,10,12,13,14];r<i.length;r++){var o=i[r];t[o]in n&&t.splice(o,1,n[t[o]])}var s={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"}[t[8]],u=parseInt(t[9]+t[10],10);u>40&&(u-=40),u<10&&(u="0".concat(u));var c="".concat(t[6]).concat(t[7],"/").concat(s,"/").concat(u);if(!(0,a.default)(c,"YY/MM/DD"))return!1;for(var l=0,h=1;h<t.length-1;h+=2){var p=parseInt(t[h],10);isNaN(p)&&(p=t[h].charCodeAt(0)-65),l+=p}for(var f={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},m=0;m<t.length-1;m+=2){var g=0;if(t[m]in f)g=f[t[m]];else{var y=parseInt(t[m],10);g=2*y+1,y>4&&(g+=2)}l+=g}return String.fromCharCode(65+l%26)===t[15]},"lv-LV":function(e){var t=(e=e.replace(/\W/,"")).slice(0,2);if("32"!==t){if("00"!==e.slice(2,4)){var n=e.slice(4,6);switch(e[6]){case"0":n="18".concat(n);break;case"1":n="19".concat(n);break;default:n="20".concat(n)}var r="".concat(n,"/").concat(e.slice(2,4),"/").concat(t);if(!(0,a.default)(r,"YYYY/MM/DD"))return!1}for(var i=1101,o=[1,6,3,7,9,10,5,8,4,2],s=0;s<e.length-1;s++)i-=parseInt(e[s],10)*o[s];return parseInt(e[10],10)===i%11}return!0},"mt-MT":function(e){if(9!==e.length){for(var t=e.toUpperCase().split("");t.length<8;)t.unshift(0);switch(e[7]){case"A":case"P":if(0===parseInt(t[6],10))return!1;break;default:var n=parseInt(t.join("").slice(0,5),10);if(n>32e3)return!1;if(n===parseInt(t.join("").slice(5,7),10))return!1}}return!0},"nl-NL":function(e){return o.reverseMultiplyAndSum(e.split("").slice(0,8).map((function(e){return parseInt(e,10)})),9)%11===parseInt(e[8],10)},"pl-PL":function(e){if(10===e.length){for(var t=[6,5,7,2,3,4,5,6,7],n=0,r=0;r<t.length;r++)n+=parseInt(e[r],10)*t[r];return 10!=(n%=11)&&n===parseInt(e[9],10)}var i=e.slice(0,2),o=parseInt(e.slice(2,4),10);o>80?(i="18".concat(i),o-=80):o>60?(i="22".concat(i),o-=60):o>40?(i="21".concat(i),o-=40):o>20?(i="20".concat(i),o-=20):i="19".concat(i),o<10&&(o="0".concat(o));var s="".concat(i,"/").concat(o,"/").concat(e.slice(4,6));if(!(0,a.default)(s,"YYYY/MM/DD"))return!1;for(var u=0,c=1,l=0;l<e.length-1;l++)u+=parseInt(e[l],10)*c%10,(c+=2)>10?c=1:5===c&&(c+=2);return(u=10-u%10)===parseInt(e[10],10)},"pt-BR":function(e){if(""===(e=e.replace(/[^\d]+/g,"")))return!1;if(11===e.length){var t,n;if(t=0,"11111111111"===(e=e.replace(/[^\d]+/g,""))||"22222222222"===e||"33333333333"===e||"44444444444"===e||"55555555555"===e||"66666666666"===e||"77777777777"===e||"88888888888"===e||"99999999999"===e||"00000000000"===e)return!1;for(var r=1;r<=9;r++)t+=parseInt(e.substring(r-1,r),10)*(11-r);if(10!=(n=10*t%11)&&11!==n||(n=0),n!==parseInt(e.substring(9,10),10))return!1;t=0;for(var i=1;i<=10;i++)t+=parseInt(e.substring(i-1,i),10)*(12-i);return 10!=(n=10*t%11)&&11!==n||(n=0),n===parseInt(e.substring(10,11),10)}if(14!==e.length)return!1;if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var o=e.length-2,a=e.substring(0,o),s=e.substring(o),u=0,c=o-7,l=o;l>=1;l--)u+=a.charAt(o-l)*c,(c-=1)<2&&(c=9);var d=u%11<2?0:11-u%11;if(d!==parseInt(s.charAt(0),10))return!1;o+=1,a=e.substring(0,o),u=0,c=o-7;for(var h=o;h>=1;h--)u+=a.charAt(o-h)*c,(c-=1)<2&&(c=9);return(d=u%11<2?0:11-u%11)===parseInt(s.charAt(1),10)},"pt-PT":function(e){var t=11-o.reverseMultiplyAndSum(e.split("").slice(0,8).map((function(e){return parseInt(e,10)})),9)%11;return t>9?0===parseInt(e[8],10):t===parseInt(e[8],10)},"ro-RO":function(e){if("9000"!==e.slice(0,4)){var t=e.slice(1,3);switch(e[0]){case"1":case"2":t="19".concat(t);break;case"3":case"4":t="18".concat(t);break;case"5":case"6":t="20".concat(t)}var n="".concat(t,"/").concat(e.slice(3,5),"/").concat(e.slice(5,7));if(8===n.length){if(!(0,a.default)(n,"YY/MM/DD"))return!1}else if(!(0,a.default)(n,"YYYY/MM/DD"))return!1;for(var r=e.split("").map((function(e){return parseInt(e,10)})),i=[2,7,9,1,4,6,3,5,8,2,7,9],o=0,s=0;s<i.length;s++)o+=r[s]*i[s];return o%11==10?1===r[12]:r[12]===o%11}return!0},"sk-SK":function(e){if(9===e.length){if("000"===(e=e.replace(/\W/,"")).slice(6))return!1;var t=parseInt(e.slice(0,2),10);if(t>53)return!1;t=t<10?"190".concat(t):"19".concat(t);var n=parseInt(e.slice(2,4),10);n>50&&(n-=50),n<10&&(n="0".concat(n));var r="".concat(t,"/").concat(n,"/").concat(e.slice(4,6));if(!(0,a.default)(r,"YYYY/MM/DD"))return!1}return!0},"sl-SI":function(e){var t=11-o.reverseMultiplyAndSum(e.split("").slice(0,7).map((function(e){return parseInt(e,10)})),8)%11;return 10===t?0===parseInt(e[7],10):t===parseInt(e[7],10)},"sv-SE":function(e){var t=e.slice(0);e.length>11&&(t=t.slice(2));var n="",r=t.slice(2,4),i=parseInt(t.slice(4,6),10);if(e.length>11)n=e.slice(0,4);else if(n=e.slice(0,2),11===e.length&&i<60){var s=(new Date).getFullYear().toString(),u=parseInt(s.slice(0,2),10);if(s=parseInt(s,10),"-"===e[6])n=parseInt("".concat(u).concat(n),10)>s?"".concat(u-1).concat(n):"".concat(u).concat(n);else if(n="".concat(u-1).concat(n),s-parseInt(n,10)<100)return!1}i>60&&(i-=60),i<10&&(i="0".concat(i));var c="".concat(n,"/").concat(r,"/").concat(i);if(8===c.length){if(!(0,a.default)(c,"YY/MM/DD"))return!1}else if(!(0,a.default)(c,"YYYY/MM/DD"))return!1;return o.luhnCheck(e.replace(/\W/,""))}};p["lb-LU"]=p["fr-LU"],p["lt-LT"]=p["et-EE"],p["nl-BE"]=p["fr-BE"];var f=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,m={"de-AT":f,"de-DE":/[\/\\]/g,"fr-BE":f};m["nl-BE"]=m["fr-BE"],e.exports=t.default,e.exports.default=t.default},2492:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),!e||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;if((t=(0,a.default)(t,u)).validate_length&&e.length>=2083)return!1;var n,s,d,h,p,f,m,g;if(m=e.split("#"),e=m.shift(),m=e.split("?"),e=m.shift(),(m=e.split("://")).length>1){if(n=m.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(n))return!1}else{if(t.require_protocol)return!1;if("//"===e.substr(0,2)){if(!t.allow_protocol_relative_urls)return!1;m[0]=e.substr(2)}}if(""===(e=m.join("://")))return!1;if(m=e.split("/"),""===(e=m.shift())&&!t.require_host)return!0;if((m=e.split("@")).length>1){if(t.disallow_auth)return!1;if(""===m[0]||":"===m[0].substr(0,1))return!1;if((s=m.shift()).indexOf(":")>=0&&s.split(":").length>2)return!1}f=null,g=null;var y=(h=m.join("@")).match(c);if(y?(d="",g=y[1],f=y[2]||null):(d=(m=h.split(":")).shift(),m.length&&(f=m.join(":"))),null!==f){if(p=parseInt(f,10),!/^[0-9]+$/.test(f)||p<=0||p>65535)return!1}else if(t.require_port)return!1;return!!((0,o.default)(d)||(0,i.default)(d,t)||g&&(0,o.default)(g,6))&&(d=d||g,!(t.host_whitelist&&!l(d,t.host_whitelist))&&(!t.host_blacklist||!l(d,t.host_blacklist)))};var r=s(n(5571)),i=s(n(221)),o=s(n(1028)),a=s(n(4808));function s(e){return e&&e.__esModule?e:{default:e}}var u={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,validate_length:!0},c=/^\[([^\]]+)\](?::([0-9]+))?$/;function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||(i=r,"[object RegExp]"===Object.prototype.toString.call(i)&&r.test(e)))return!0}var i;return!1}e.exports=t.default,e.exports.default=t.default},7278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";(0,i.default)(e);var n=o[t];return n&&n.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default,e.exports.default=t.default},7245:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),e===e.toUpperCase()};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},5977:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,i.default)(e),(0,i.default)(t),t in o)return o[t].test(e);throw new Error("Invalid country code: '".concat(t,"'"))},t.vatMatchers=void 0;var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o={GB:/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/,IT:/^(IT)?[0-9]{11}$/};t.vatMatchers=o},9019:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),o.fullWidth.test(e)&&a.halfWidth.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r},o=n(7146),a=n(2941);e.exports=t.default,e.exports.default=t.default},8346:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e);for(var n=e.length-1;n>=0;n--)if(-1===t.indexOf(e[n]))return!1;return!0};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},4959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e);var n=t?new RegExp("^[".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return e.replace(n,"")};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},661:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return(0,i.default)(e),"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,n)),t.test(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},2900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=(0,i.default)(t,o);var n=e.split("@"),r=n.pop(),d=[n.join("@"),r];if(d[1]=d[1].toLowerCase(),"gmail.com"===d[1]||"googlemail.com"===d[1]){if(t.gmail_remove_subaddress&&(d[0]=d[0].split("+")[0]),t.gmail_remove_dots&&(d[0]=d[0].replace(/\.+/g,l)),!d[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(d[0]=d[0].toLowerCase()),d[1]=t.gmail_convert_googlemaildotcom?"gmail.com":d[1]}else if(a.indexOf(d[1])>=0){if(t.icloud_remove_subaddress&&(d[0]=d[0].split("+")[0]),!d[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(d[0]=d[0].toLowerCase())}else if(s.indexOf(d[1])>=0){if(t.outlookdotcom_remove_subaddress&&(d[0]=d[0].split("+")[0]),!d[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(d[0]=d[0].toLowerCase())}else if(u.indexOf(d[1])>=0){if(t.yahoo_remove_subaddress){var h=d[0].split("-");d[0]=h.length>1?h.slice(0,-1).join("-"):h[0]}if(!d[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(d[0]=d[0].toLowerCase())}else c.indexOf(d[1])>=0?((t.all_lowercase||t.yandex_lowercase)&&(d[0]=d[0].toLowerCase()),d[1]="yandex.ru"):t.all_lowercase&&(d[0]=d[0].toLowerCase());return d.join("@")};var r,i=(r=n(4808))&&r.__esModule?r:{default:r},o={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},a=["icloud.com","me.com"],s=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],u=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],c=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function l(e){return e.length>1?e:""}e.exports=t.default,e.exports.default=t.default},9778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e);var n=t?new RegExp("[".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g"):/(\s)+$/g;return e.replace(n,"")};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},8035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e);var n=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,i.default)(e,n)};var r=o(n(5571)),i=o(n(4928));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),t?"1"===e||/^true$/i.test(e):"0"!==e&&!/^false$/i.test(e)&&""!==e};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},8469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),e=Date.parse(e),isNaN(e)?null:new Date(e)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},7536:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)?parseFloat(e):NaN};var r,i=(r=n(9146))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},1359:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),parseInt(e,t||10)};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},4813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)((0,i.default)(e,t),t)};var r=o(n(9778)),i=o(n(4959));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},4816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e),e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},3672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iso7064Check=function(e){for(var t=10,n=0;n<e.length-1;n++)t=(parseInt(e[n],10)+t)%10==0?9:(parseInt(e[n],10)+t)%10*2%11;return(t=1===t?0:11-t)===parseInt(e[10],10)},t.luhnCheck=function(e){for(var t=0,n=!1,r=e.length-1;r>=0;r--){if(n){var i=2*parseInt(e[r],10);t+=i>9?i.toString().split("").map((function(e){return parseInt(e,10)})).reduce((function(e,t){return e+t}),0):i}else t+=parseInt(e[r],10);n=!n}return t%10==0},t.reverseMultiplyAndSum=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*(t-r);return n},t.verhoeffCheck=function(e){for(var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],n=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],r=e.split("").reverse().join(""),i=0,o=0;o<r.length;o++)i=t[i][n[o%8][parseInt(r[o],10)]];return 0===i}},5571:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=n(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default},3506:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){return e.some((function(e){return t===e}))},e.exports=t.default,e.exports.default=t.default},4808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=t.default,e.exports.default=t.default},4731:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.join("");return new RegExp(n,t)},e.exports=t.default,e.exports.default=t.default},1913:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"object"===n(e)&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e=""),String(e)},e.exports=t.default,e.exports.default=t.default},4714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e),e.replace(new RegExp("[^".concat(t,"]+"),"g"),"")};var r,i=(r=n(5571))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e,t=__webpack_require__(8555),n=__webpack_require__.n(t),r=(__webpack_require__(606),__webpack_require__(7470),__webpack_require__(4755),__webpack_require__(4591),(0,__webpack_require__(243).initializeApp)({apiKey:"AIzaSyDpJi_qFjJKasyuK7WGmYZ1Oe8paSyTGlM",authDomain:"monster-hunter-82546.firebaseapp.com",projectId:"monster-hunter-82546",storageBucket:"monster-hunter-82546.appspot.com",messagingSenderId:"793772125228",appId:"1:793772125228:web:a6f9b2ad2fc6db932a7589",measurementId:"G-JELLT0T1F2"}),n().auth()),i=n().firestore(),o=[{type:"potion",rarity:"legendary",name:"Decoction of Cactus",description:"Straight from Texas",src:"./images/shop/potions/physicalEndurance.png",initialCost:5,properties:{physicalEndurance:10,strength:null,luck:null,defence:null},id:"f07329dd-835a-47a0-986b-70281589fccf"},{type:"potion",rarity:"legendary",name:"Kraken Blood",description:"It was not easy",src:"./images/shop/potions/strength.png",initialCost:5,properties:{strength:10,physicalEndurance:null,luck:null,defence:null},id:"76712a9c-705c-4dc6-94eb-7a742b1122fe"},{type:"potion",rarity:"legendary",name:"Magic of the Forest",description:"Good thing the witch was asleep",src:"./images/shop/potions/defence.png",initialCost:5,properties:{defence:10,physicalEndurance:null,strength:null,luck:null},id:"4a5019c6-092e-4e31-81d4-d46413f3824d"},{type:"potion",rarity:"legendary",name:"Liquid Moon Powder",description:"Imported from Area 51, aliens are still looking for it",src:"./images/shop/potions/superPotion.png",initialCost:5,properties:{physicalEndurance:15,strength:15,luck:15,defence:15},id:"8f327e73-d24f-4c22-9099-9efc94ad7bff"},{type:"potion",rarity:"legendary",name:"Mountain Rose",description:"Passed down from generation to generation, and the power is the same.",src:"./images/shop/potions/luck.png",initialCost:5,properties:{luck:10,physicalEndurance:null,strength:null,defence:null},id:"1e06bfdb-1326-43a6-991f-b9c6fabdca5c"}],a=[{type:"helmet",rarity:"common",name:"Behemot",src:"./images/shop/helmets/behemot.png",initialCost:60,properties:{strength:10,physicalEndurance:50,defence:null,luck:null},id:"546263f6-52df-47c5-81c6-169f06b0d107"},{type:"helmet",rarity:"common",name:"Colossus",src:"./images/shop/helmets/colossus.png",initialCost:45,properties:{strength:15,physicalEndurance:15,defence:15,luck:null},id:"9925fa36-6b8b-42af-a508-b59c38434448"},{type:"helmet",rarity:"common",name:"Dark Nightmare",src:"./images/shop/helmets/dark_nightmare.png",initialCost:50,properties:{strength:10,physicalEndurance:null,defence:20,luck:20},id:"438c85ad-ba49-45a2-9c1a-d1dcbfdf6100"},{type:"helmet",rarity:"common",name:"Door Opener",src:"./images/shop/helmets/door_opener.png",initialCost:60,properties:{strength:30,physicalEndurance:null,defence:30,luck:null},id:"da1cdb9d-1e00-43bb-a296-a5053dee00ee"},{type:"helmet",rarity:"common",name:"Full Focus",src:"./images/shop/helmets/full_focus.png",initialCost:40,properties:{strength:null,physicalEndurance:null,defence:20,luck:20},id:"1dca39d6-e322-488a-80e6-e44032db47e1"},{type:"helmet",rarity:"common",name:"Night Rider",src:"./images/shop/helmets/night_rider.png",initialCost:50,properties:{strength:25,physicalEndurance:null,defence:25,luck:null},id:"7f4a46a3-f031-4e44-8751-fb7037179df7"},{type:"helmet",rarity:"common",name:"Super Vision",src:"./images/shop/helmets/super_vision.png",initialCost:40,properties:{strength:null,physicalEndurance:null,defence:40,luck:null},id:"b0a6cb0f-9525-4b49-8809-68efbfdbe012"},{type:"helmet",rarity:"common",name:"True Warrior",src:"./images/shop/helmets/true_warrior.png",initialCost:40,properties:{strength:10,physicalEndurance:10,defence:10,luck:10},id:"bc398265-4c7f-4f59-85d0-d2d0a9cb03ba"},{type:"helmet",rarity:"common",name:"VR",src:"./images/shop/helmets/vr.png",initialCost:30,properties:{strength:null,physicalEndurance:null,defence:10,luck:20},id:"111ef6cd-d18a-40b7-8e34-59c8b91e4d2e"},{type:"helmet",rarity:"legendary",description:"A beautiful helmet with a very weak air intakes, causes desire to finish off your opponent as quickly as possible and take this helmet off you head",name:"Super Warrior",src:"./images/shop/helmets/super_warrior.png",initialCost:100,properties:{strength:50,physicalEndurance:null,defence:50,luck:null},id:"90801753-94ab-48a5-89bc-ff855b748d6d"},{type:"helmet",rarity:"legendary",description:"Is there anything more beautiful than technology? Of course there is, this helmet is filled with technology and spoils so often you can't afford a new one",name:"Future View",src:"./images/shop/helmets/future_view.png",initialCost:130,properties:{strength:30,physicalEndurance:30,defence:30,luck:40},id:"c16b07d1-b0a6-429f-af7b-0c291e565ea7"},{type:"helmet",rarity:"legendary",description:"Made of gold, that's all we know, and looks cool",name:"Golden Head",src:"./images/shop/helmets/golden_head.png",initialCost:150,properties:{strength:20,physicalEndurance:20,defence:90,luck:20},id:"ac96566f-b7e9-458b-9c8b-e09bd3853134"},{type:"helmet",rarity:"legendary",description:"Useful at night when you can't see anything, when you put him on your head you still can't see anything but if you hit your head on a tree you won't feel anything",name:"Dark Knight",src:"./images/shop/helmets/dark_knight.png",initialCost:130,properties:{strength:30,physicalEndurance:10,defence:60,luck:30},id:"861a1ade-d969-4107-85ef-14e1193deb60"},{type:"helmet",rarity:"legendary",description:"Not worth the price, adds nothing to the stats but looks good and has rgb lighting",name:"PCMR Helmet",src:"./images/shop/helmets/pcmr_helmet.png",initialCost:1e3,properties:{strength:null,physicalEndurance:null,defence:null,luck:null},id:"bd01be59-ec34-415b-af5b-40892bd1a5a7"}],s=[{type:"chestPlate",rarity:"common",name:"Steel of sSea",src:"./images/shop/chestPlates/steel_of_sea.png",initialCost:2,properties:{strength:2,physicalEndurance:null,defence:null,luck:null},id:"a34cb696-a8e2-47fb-9784-74be6e922347"},{type:"chestPlate",name:"Forest Guard",rarity:"common",src:"./images/shop/chestPlates/forest_guard.png",initialCost:6,properties:{strength:4,physicalEndurance:2,defence:null,luck:null},id:"f3587feb-e40e-416c-9a74-312ca3fcb3a5"},{type:"chestPlate",name:"Moon Rider",rarity:"common",src:"./images/shop/chestPlates/moon_rider.png",initialCost:24,properties:{strength:4,physicalEndurance:10,defence:10,luck:null},id:"271b6cfd-5539-4e49-a77e-ef50cd23d6b3"},{type:"chestPlate",name:"Interdimensional Traveller",rarity:"common",src:"./images/shop/chestPlates/interdimensional_traveller.png",initialCost:50,properties:{strength:0,physicalEndurance:20,defence:10,luck:20},id:"2c0fbabd-ac53-449e-b81c-8975e455363f"},{type:"chestPlate",name:"Castle Runner",rarity:"common",src:"./images/shop/chestPlates/castle_runner.png",initialCost:40,properties:{strength:0,physicalEndurance:40,defence:0,luck:0},id:"62b05c2e-6c79-4482-828f-3bc6b24fa7f2"},{type:"chestPlate",name:"Heavy Weight",rarity:"common",src:"./images/shop/chestPlates/heavy_weight.png",initialCost:60,properties:{strength:10,physicalEndurance:0,defence:50,luck:0},id:"5d80c17f-b6f2-47d0-9bda-16db695670b0"},{type:"chestPlate",name:"Climbing Mantis",rarity:"common",src:"./images/shop/chestPlates/climbing_mantis.png",initialCost:60,properties:{strength:0,physicalEndurance:20,defence:0,luck:40},id:"6aa20525-b324-4b7f-a205-afa3e185a049"},{type:"chestPlate",name:"Cyberpunk Wind",description:"Elegant jacket straight from the future, light and airy with a nice neon collar that will make monsters blind.",rarity:"legendary",src:"./images/shop/chestPlates/cyberpunk_wind.png",initialCost:125,properties:{strength:5,physicalEndurance:70,defence:40,luck:10},id:"489e2553-433b-4576-bdd2-1c786b59e1e8"},{type:"chestPlate",name:"Golden Luck",description:"And they say that gold doesn't make you happy, it's true, but this golden armour will make every monster want to catch you and you won't be bored.",rarity:"legendary",src:"./images/shop/chestPlates/golden_luck.png",initialCost:80,properties:{strength:0,physicalEndurance:40,defence:0,luck:40},id:"8b502483-10a9-422e-9cf1-447040552051"},{type:"chestPlate",name:"Light Warrior",description:"Armour ideal for gamers, it is transparent and rgb lights illumination. It may not add anything to your stats but it has lights and looks great. ",rarity:"legendary",src:"./images/shop/chestPlates/light_warrior.png",initialCost:500,properties:{strength:0,physicalEndurance:0,defence:0,luck:0},id:"bb5e5637-f891-4e88-b380-a73931b0eb76"},{type:"chestPlate",name:"Night Ninja",description:"Straight from Mauna Loa. Created on a volcanic rock, flooded with lava",rarity:"legendary",src:"./images/shop/chestPlates/night_ninja.png",initialCost:115,properties:{strength:60,physicalEndurance:20,defence:30,luck:5},id:"0464b0f3-6d8c-46a3-bdf2-71e8367ccb5b"},{type:"chestPlate",name:"Fit Shadow",description:"fits better than your own skin",rarity:"legendary",src:"./images/shop/chestPlates/fit_shadow.png",initialCost:120,properties:{strength:15,physicalEndurance:90,defence:15,luck:0},id:"2bc1b3f0-5f81-4217-b58e-31b8e93a63e4"},{type:"chestPlate",name:"Classic",description:"fits better than your own skin",rarity:"legendary",src:"./images/shop/chestPlates/classic.png",initialCost:120,properties:{strength:40,physicalEndurance:40,defence:40,luck:0},id:"32af90dc-0a1f-45ec-b378-202e29d06f62"},{type:"chestPlate",name:"Samurai Blood",description:"Blinds others with its brilliance, and makes others jealous",rarity:"legendary",src:"./images/shop/chestPlates/samurai_blood.png",initialCost:400,properties:{strength:100,physicalEndurance:100,defence:100,luck:100},id:"b56aded7-e786-494b-8ee2-e9e63681e82b"}],u=[{type:"gloves",name:"Camo Gloves",rarity:"common",src:"./images/shop/gloves/camo_gloves.png",initialCost:20,properties:{strength:20,physicalEndurance:null,defence:null,luck:null},id:"1be44a1c-8d70-4116-908c-0b73a12b5a94"},{type:"gloves",name:"Frosty Gloves",rarity:"common",src:"./images/shop/gloves/frosty_gloves.png",initialCost:30,properties:{strength:null,physicalEndurance:10,defence:20,luck:null},id:"4c602eda-cfac-4d33-ae77-5d456a1931ff"},{type:"gloves",name:"Frosty Gloves",rarity:"common",src:"./images/shop/gloves/frosty_gloves.png",initialCost:50,properties:{strength:10,physicalEndurance:10,defence:30,luck:null},id:"23d2dfe9-c7be-4fdc-938a-98bfc157482b"},{type:"gloves",name:"Heat Gloves",rarity:"common",src:"./images/shop/gloves/heat_gloves.png",initialCost:30,properties:{strength:30,physicalEndurance:null,defence:null,luck:null},id:"fc2e3856-cc9c-4ce1-864a-3bed184cbf16"},{type:"gloves",name:"Fast Gloves",rarity:"common",src:"./images/shop/gloves/fast_gloves.png",initialCost:50,properties:{strength:null,physicalEndurance:null,defence:null,luck:50},id:"255eaa5b-5d72-451f-b101-3bde01bd967f"},{type:"gloves",name:"Racing Gloves",rarity:"common",src:"./images/shop/gloves/racing_gloves.png",initialCost:40,properties:{strength:null,physicalEndurance:40,defence:null,luck:null},id:"30f2e62f-5b73-4859-b329-1b484eac7a11"},{type:"gloves",name:"Stylish Gloves",rarity:"common",src:"./images/shop/gloves/stylish_gloves.png",initialCost:40,properties:{strength:10,physicalEndurance:10,defence:10,luck:10},id:"372983b7-7e9a-4ad1-967e-aff6c0f23615"},{type:"gloves",name:"Sport Gloves",rarity:"common",src:"./images/shop/gloves/sport_gloves.png",initialCost:40,properties:{strength:null,physicalEndurance:70,defence:null,luck:null},id:"c9efdfee-7ccf-4468-a870-47afcbac9753"},{type:"gloves",name:"Climbing Gloves",rarity:"common",src:"./images/shop/gloves/climbing_gloves.png",initialCost:100,properties:{strength:null,physicalEndurance:70,defence:null,luck:30},id:"bd24a2b5-24fa-4a9c-8072-ac541eb6bfcc"},{type:"gloves",name:"Boxing Gloves",description:"Useful when you get bored with a classic sword",rarity:"legendary",src:"./images/shop/gloves/boxing_gloves.png",initialCost:120,properties:{strength:60,physicalEndurance:null,defence:60,luck:null},id:"39c76894-2f73-4a0a-b4ca-7de25066e504"},{type:"gloves",name:"Football Gloves",description:"The only thing that matters there is luck",rarity:"legendary",src:"./images/shop/gloves/football_gloves.png",initialCost:110,properties:{strength:null,physicalEndurance:null,defence:30,luck:80},id:"9d992c51-3766-40b7-9917-294efa08a8c6"},{type:"gloves",name:"Happy Gloves",description:"In combat, they are no longer so happy",rarity:"legendary",src:"./images/shop/gloves/happy_gloves.png",initialCost:105,properties:{strength:70,physicalEndurance:5,defence:5,luck:30},id:"7674b802-0f6a-4c30-9c85-84b72ea9244e"},{type:"gloves",name:"Electric Gloves",description:"Hi my name is....",rarity:"legendary",src:"./images/shop/gloves/electric_gloves.png",initialCost:100,properties:{strength:80,physicalEndurance:20,defence:0,luck:0},id:"36f5e85e-e2bf-46af-94e7-06c28adc6ff9"},{type:"gloves",name:"Wired Gloves",description:"Created by lightning on Mount Everest",rarity:"legendary",src:"./images/shop/gloves/wired_gloves.png",initialCost:130,properties:{strength:100,physicalEndurance:10,defence:10,luck:0},id:"c0376b94-b43d-4b46-9a51-2feddccf4298"},{type:"gloves",name:"Robot Gloves",description:"Others have cheats, you have this special gloves",rarity:"legendary",src:"./images/shop/gloves/robot_gloves.png",initialCost:160,properties:{strength:80,physicalEndurance:0,defence:0,luck:80},id:"9be007aa-8402-480f-8ead-760c84d02a27"}],c=[{type:"weapon",rarity:"common",name:"Agatha",src:"./images/shop/weapons/agatha.png",initialCost:30,properties:{strength:5,physicalEndurance:5,defence:10,luck:10},id:"62c2705c-4c39-46e6-9d61-081549312f08"},{type:"weapon",rarity:"common",name:"Anguish Carver",src:"./images/shop/weapons/anguish_carver.png",initialCost:40,properties:{strength:10,physicalEndurance:10,defence:10,luck:10},id:"c1ef879c-7357-4e90-8876-97cd18d4118f"},{type:"weapon",rarity:"common",name:"Arondite",src:"./images/shop/weapons/arondite.png",initialCost:40,properties:{strength:20,physicalEndurance:null,defence:null,luck:20},id:"13dcfcc0-c994-4be2-9491-029c40f0f547"},{type:"weapon",rarity:"common",name:"Blazeguard",src:"./images/shop/weapons/blazeguard.png",initialCost:45,properties:{strength:10,physicalEndurance:15,defence:15,luck:5},id:"79e4cb9e-a57f-4e41-932d-53a8c74fef1d"},{type:"weapon",rarity:"common",name:"Broken Promise",src:"./images/shop/weapons/broken_promise.png",initialCost:50,properties:{strength:30,physicalEndurance:null,defence:null,luck:20},id:"6e88a8b0-70cc-4468-b95a-6a34a250459b"},{type:"weapon",rarity:"common",name:"Deathraze",src:"./images/shop/weapons/deathraze.png",initialCost:50,properties:{strength:50,physicalEndurance:null,defence:null,luck:null},id:"80b92b3d-dd88-43ec-9ac4-cdf42e5f98f7"},{type:"weapon",rarity:"common",name:"Ghostwalker",src:"./images/shop/weapons/ghostwalker.png",initialCost:70,properties:{strength:40,physicalEndurance:20,defence:null,luck:10},id:"c4065ce2-dbc4-4150-819a-9d8542719021"},{type:"weapon",rarity:"common",name:"Gladius",src:"./images/shop/weapons/gladius.png",initialCost:65,properties:{strength:30,physicalEndurance:30,defence:null,luck:5},id:"5d03ab72-f197-4cf8-ab9e-3a9696572a6f"},{type:"weapon",rarity:"common",name:"Infamy",src:"./images/shop/weapons/Infamy.png",initialCost:65,properties:{strength:20,physicalEndurance:20,defence:5,luck:20},id:"ef8dcfab-7779-408b-bdde-faaddc83c761"},{type:"weapon",rarity:"common",name:"Mangler",src:"./images/shop/weapons/mangler.png",initialCost:30,properties:{strength:15,physicalEndurance:null,defence:15,luck:null},id:"9fa7d603-d4a4-4f14-892c-eb0282ac5b30"},{type:"weapon",rarity:"common",name:"Mournblade",src:"./images/shop/weapons/mournblade.png",initialCost:75,properties:{strength:45,physicalEndurance:25,defence:5,luck:null},id:"f6aea361-f886-4583-881e-396a79605642"},{type:"weapon",rarity:"common",name:"Nightcrackle",src:"./images/shop/weapons/nightcrackle.png",initialCost:55,properties:{strength:25,physicalEndurance:30,defence:null,luck:null},id:"b66c4aa2-52df-4fcb-8763-85cf0dd5878b"},{type:"weapon",rarity:"common",name:"Nights Fall",src:"./images/shop/weapons/nights_fall.png",initialCost:80,properties:{strength:60,physicalEndurance:10,defence:5,luck:5},id:"5ff9ffd9-2744-4937-a9b6-0fbed6633068"},{type:"weapon",rarity:"common",name:"Peacekeeper Protector",src:"./images/shop/weapons/peacekeeper_protector.png",initialCost:70,properties:{strength:20,physicalEndurance:null,defence:null,luck:50},id:"3998f24a-4a9c-48a2-b0a8-29c381f4696f"},{type:"weapon",rarity:"common",name:"Reaper Of Wraiths",src:"./images/shop/weapons/reaper_of_wraiths.png",initialCost:20,properties:{strength:5,physicalEndurance:5,defence:5,luck:5},id:"e2d0a501-451e-454f-8e39-98f2d12d55f0"},{type:"weapon",rarity:"common",name:"Strorm Breaker",src:"./images/shop/weapons/strorm_breaker.png",initialCost:60,properties:{strength:10,physicalEndurance:25,defence:25,luck:null},id:"cb0b8e86-9b45-4887-92d6-f1abf9ff913c"},{type:"weapon",rarity:"common",name:"Sun Strike",src:"./images/shop/weapons/sun_strike.png",initialCost:75,properties:{strength:70,physicalEndurance:null,defence:null,luck:5},id:"5f698b40-3136-4ed3-b0ba-eb61d0ef6e8b"},{type:"weapon",rarity:"common",name:"Thorn",src:"./images/shop/weapons/thorn.png",initialCost:75,properties:{strength:10,physicalEndurance:10,defence:null,luck:55},id:"2dcd70d4-0461-4147-b065-610c26323531"},{type:"weapon",rarity:"common",name:"Venom Greatsword",src:"./images/shop/weapons/venom_greatsword.png",initialCost:75,properties:{strength:10,physicalEndurance:10,defence:null,luck:55},id:"86dae6a4-cf8a-460b-b2a7-78e7406b5ae8"},{type:"weapon",rarity:"legendary",name:"Blood Infused Quickblade",description:"Made of mountain emerald and black magic",src:"./images/shop/weapons/blood_infused_quickblade.png",initialCost:130,properties:{strength:80,physicalEndurance:null,defence:20,luck:30},id:"9c312ec0-02a9-44ac-99fa-a52d0a3b9109"},{type:"weapon",rarity:"legendary",name:"Destiny's Song",description:"I've already seen this somewhere",src:"./images/shop/weapons/destinys_song.png",initialCost:120,properties:{strength:50,physicalEndurance:10,defence:50,luck:10},id:"74b01b95-9380-462a-b3ff-5c9eda500ba7"},{type:"weapon",rarity:"legendary",name:"Dire Steel Crusader",description:"Perfect for a Friday night monster party",src:"./images/shop/weapons/dire_steel_crusader.png",initialCost:140,properties:{strength:30,physicalEndurance:100,defence:10,luck:null},id:"654c25d4-a92b-4419-b1ed-5825cd0bb468"},{type:"weapon",rarity:"legendary",name:"Heartless Copper Slicer",description:"Small but crazy",src:"./images/shop/weapons/heartless_copper_slicer.png",initialCost:120,properties:{strength:90,physicalEndurance:15,defence:5,luck:10},id:"3fbc9f18-6f3d-4f3d-9084-30fb0b9eacc6"},{type:"weapon",rarity:"legendary",name:"Memory of Shadow Strikes",description:"Stolen from a sale, but still usable",src:"./images/shop/weapons/memory_of_shadow_strikes.png",initialCost:170,properties:{strength:120,physicalEndurance:20,defence:20,luck:10},id:"cfcc2db7-2b9d-4293-93b0-120cbf57306c"},{type:"weapon",rarity:"legendary",name:"Scar",description:"So beautiful sword that monsters want to be cut with it",src:"./images/shop/weapons/scar.png",initialCost:160,properties:{strength:50,physicalEndurance:50,defence:10,luck:50},id:"7c9dc4e9-5915-44fb-82f0-e1bd2600495b"},{type:"weapon",rarity:"legendary",name:"Voice of Light's Hope",description:"Classic of classics",src:"./images/shop/weapons/voice_of_lights_hope.png",initialCost:130,properties:{strength:100,physicalEndurance:5,defence:5,luck:5},id:"9cb2455e-17a0-4fb4-a385-e10d43d050f4"},{type:"weapon",rarity:"legendary",name:"Dark Side Laser",description:"Just Dark side",src:"./images/shop/weapons/red_laser.png",initialCost:300,properties:{strength:300,physicalEndurance:null,defence:null,luck:null},id:"e8f73ed7-81f0-4940-92b7-517674ddc166"},{type:"weapon",rarity:"legendary",name:"Light Side Laser",description:"Just Light side",src:"./images/shop/weapons/blue_laser.png",initialCost:300,properties:{strength:null,physicalEndurance:null,defence:300,luck:null},id:"45b16d2a-cb00-42c1-87fb-a4cd0e458e13"},{type:"weapon",rarity:"legendary",name:"Happy Slicer",description:"Always smiling :)",src:"./images/shop/weapons/happy_sword.png",initialCost:200,properties:{strength:100,physicalEndurance:null,defence:100,luck:null},id:"cf1f5051-754b-402d-8f48-2b78119e69e3"},{type:"weapon",rarity:"legendary",name:"Power of whole universe",description:"Yes, it's the best sword in the whole game, I didn't get the graphics or the name wrong, the real power is in your head.",src:"./images/shop/weapons/wooden_sword.png",initialCost:1e5,properties:{strength:250,physicalEndurance:250,defence:250,luck:250},id:"143f458f-6210-4d72-9c93-221a01047e7d"}],l=[{type:"shield",rarity:"common",name:"Classic",src:"./images/shop/shields/classic_shield.png",initialCost:40,properties:{strength:10,physicalEndurance:10,defence:10,luck:10},id:"4ed68396-4dbe-44c3-b330-3240f85a375e"},{type:"shield",rarity:"common",name:"Camo shield",src:"./images/shop/shields/camo_shield.png",initialCost:50,properties:{strength:20,physicalEndurance:null,defence:10,luck:20},id:"fde5a925-18ed-4bdb-8aec-74f94ec29c03"},{type:"shield",rarity:"common",name:"Dazzler shield",src:"./images/shop/shields/dazzler_shield.png",initialCost:60,properties:{strength:null,physicalEndurance:null,defence:30,luck:30},id:"7b32fe2c-e930-4ecd-8435-c17a5ea11b58"},{type:"shield",rarity:"common",name:"Double Armored Shield",src:"./images/shop/shields/double_armored.png",initialCost:60,properties:{strength:null,physicalEndurance:null,defence:60,luck:null},id:"a97c3288-63ad-4fe1-8a21-552eb323e043"},{type:"shield",rarity:"common",name:"King Guard Shield",src:"./images/shop/shields/king_guard.png",initialCost:60,properties:{strength:20,physicalEndurance:10,defence:20,luck:10},id:"756140a9-9613-481d-819a-f58a6b0e19fa"},{type:"shield",rarity:"common",name:"Pain Maker",src:"./images/shop/shields/pain_maker.png",initialCost:40,properties:{strength:20,physicalEndurance:null,defence:20,luck:null},id:"0a11d865-0df5-40ea-a12e-90cbb78842d0"},{type:"shield",rarity:"common",name:"Runic Shield",src:"./images/shop/shields/runic_shield.png",initialCost:50,properties:{strength:null,physicalEndurance:null,defence:10,luck:40},id:"9b44c27c-cc15-483a-8d0d-1ce1ce3f3f62"},{type:"shield",rarity:"common",name:"Sect Shield",src:"./images/shop/shields/sect_shield.png",initialCost:70,properties:{strength:30,physicalEndurance:null,defence:20,luck:20},id:"6ba7e35b-a965-44b8-b8e2-748d0bc63657"},{type:"shield",rarity:"common",name:"Spinning Shield",src:"./images/shop/shields/spinning_shield.png",initialCost:70,properties:{strength:null,physicalEndurance:null,defence:70,luck:null},id:"a0335e26-4d79-4c80-9514-b8bb570dd04c"},{type:"shield",rarity:"legendary",name:"Skeleton Coffin",description:"Shield filled with the souls of the fallen",src:"./images/shop/shields/skeleton_coffin.png",initialCost:120,properties:{strength:30,physicalEndurance:null,defence:90,luck:null},id:"6ac498c4-c420-4057-8bd5-46f4bc861eaa"},{type:"shield",rarity:"legendary",name:"Aether Fear",description:"Not from earth",src:"./images/shop/shields/aether_fear.png",initialCost:190,properties:{strength:60,physicalEndurance:10,defence:100,luck:20},id:"32f314e9-f472-4987-8f95-af0668b2c543"},{type:"shield",rarity:"legendary",name:"Best friend",description:"Your new friend who will defend you in every situation even when you don't expect it",src:"./images/shop/shields/best_friend.png",initialCost:140,properties:{strength:null,physicalEndurance:null,defence:140,luck:null},id:"357e6434-d2f3-4cbf-b7dd-73cf95e29fa3"},{type:"shield",rarity:"legendary",name:"Angry Iron",description:"Instead of defending it attacks",src:"./images/shop/shields/angry_iron.png",initialCost:130,properties:{strength:80,physicalEndurance:20,defence:30,luck:null},id:"f481aad5-10b4-4dfa-9f76-429e469b0760"},{type:"shield",rarity:"legendary",name:"PCMR Shield",description:"Transparent shield with rgb lighting, protects nothing",src:"./images/shop/shields/pcmr_shild.png",initialCost:1e3,properties:{strength:null,physicalEndurance:null,defence:null,luck:null},id:"50ebdd07-8ed0-448c-a763-0239323728d6"}],d=__webpack_require__(3465),h=function(e){return d(e[Math.floor(Math.random()*e.length)])},p=function(e,t){if(null!==e){var n=t/100*e,r=Math.ceil(n+Math.random()*n)+Math.random()*t;return Math.random(),Math.ceil(r/8)+1}return e},f=[{type:"special",rarity:"legendary",name:"Clock",description:"Hurry up",src:"./images/shop/special/alarm_clock.png",initialCost:30,properties:{strength:null,physicalEndurance:15,defence:null,luck:15},id:"006761fc-3478-40b5-9161-0eb0ad69828f"},{type:"special",rarity:"legendary",name:"Clover",description:"Brings happiness where it is lacking",src:"./images/shop/special/clover.png",initialCost:100,properties:{strength:null,physicalEndurance:null,defence:20,luck:80},id:"bd33272c-2424-4645-a1b8-269f55b749be"},{type:"special",rarity:"legendary",name:"Heavy Backpack",description:"Why you need a gym, keep that backpack",src:"./images/shop/special/bag.png",initialCost:100,properties:{strength:50,physicalEndurance:50,defence:null,luck:null},id:"55f2a756-682d-4e88-8ffb-4ebfeb2aed66"},{type:"special",rarity:"legendary",name:"Superhero Comic",description:"Bored? Hold this comic, does not contain pictures",src:"./images/shop/special/comic_book.png",initialCost:80,properties:{strength:20,physicalEndurance:20,defence:20,luck:20},id:"f420df5a-8ede-4872-ba86-0370e35dd49d"},{type:"special",rarity:"legendary",name:"Cookies Jar",description:"Hungry, keep that gluten and sugar free cookies",src:"./images/shop/special/cookies_jar.png",initialCost:80,properties:{strength:null,physicalEndurance:90,defence:null,luck:null},id:"1d77c1b4-226a-4a00-833a-db1a876aa031"},{type:"special",rarity:"legendary",name:"Crown",description:"This crown is not stolen at all.... well, she was lying next to the throne, but who wouldn't take she",src:"./images/shop/special/crown.png",initialCost:160,properties:{strength:40,physicalEndurance:40,defence:40,luck:40},id:"25f5a332-6640-4605-a625-23b0a9d60e1c"},{type:"special",rarity:"legendary",name:"Diamond",description:"Original",src:"./images/shop/special/diamond.png",initialCost:10,properties:{strength:null,physicalEndurance:null,defence:null,luck:10},id:"6f21084d-208a-4439-8743-ff2a00dd1df5"},{type:"special",rarity:"legendary",name:"Reaper",description:"Your servant, you have to watch out for him",src:"./images/shop/special/grim_reaper.png",initialCost:110,properties:{strength:100,physicalEndurance:null,defence:null,luck:10},id:"388ce7e6-f1cd-4c3d-a6bf-6dfa491a2023"},{type:"special",rarity:"legendary",name:"Golden Necklace",description:"Heavy, but useless",src:"./images/shop/special/necklace.png",initialCost:1e3,properties:{strength:null,physicalEndurance:null,defence:null,luck:null},id:"70c90957-7262-4974-a34c-9efd7886962c"},{type:"special",rarity:"legendary",name:"Octopus",description:"It's a prank, for real it's kraken",src:"./images/shop/special/octopus.png",initialCost:160,properties:{strength:70,physicalEndurance:null,defence:90,luck:null},id:"4180cb65-7d07-4c4f-b620-7cac77ad466d"},{type:"special",rarity:"legendary",name:"Discount",description:"Discount for food, everyone wants this discount, and you have to run away",src:"./images/shop/special/price_tag.png",initialCost:160,properties:{strength:null,physicalEndurance:120,defence:null,luck:null},id:"b78fc21a-9132-4181-b7b7-bf77d71ea20f"},{type:"special",rarity:"legendary",name:"Rabbit",description:"Inside is enchanted werewolf, be careful!",src:"./images/shop/special/rabbit.png",initialCost:150,properties:{strength:50,physicalEndurance:50,defence:50,luck:null},id:"00c71a5f-c772-47a0-8290-c0d6b4bd5c62"},{type:"special",rarity:"legendary",name:"Socks",description:"Red socks = running faster",src:"./images/shop/special/socks.png",initialCost:110,properties:{strength:null,physicalEndurance:80,defence:30,luck:null},id:"2c41ccc2-1947-45ca-8532-39ce4198c408"},{type:"special",rarity:"legendary",name:"Cola",description:"Almost like gold",src:"./images/shop/special/soda.png",initialCost:50,properties:{strength:null,physicalEndurance:null,defence:null,luck:50},id:"c8888dc-3197-41c7-b257-6915178d90c0"},{type:"special",rarity:"legendary",name:"Wings",description:"Attack your opponents from above",src:"./images/shop/special/wings.png",initialCost:200,properties:{strength:null,physicalEndurance:null,defence:100,luck:100},id:"ddd3d033-d97c-470f-b376-20db1730d5c3"}],m=__webpack_require__(6104),g=__webpack_require__.n(m),y=(__webpack_require__(3465),function(e,t){var n=[];return n.push(h(a)),n.push(h(s)),n.push(h(u)),n.push(h(c)),n.push(h(l)),n.push(h(f)),(n=n.sort((function(){return Math.random()-.5}))).forEach((function(n){var r=Math.floor(10*Math.random())+1;n.properties.strength=p(n.properties.strength,e.strength),n.properties.defence=p(n.properties.defence,e.defence),n.properties.physicalEndurance=p(n.properties.defence,e.defence),n.properties.luck=p(n.properties.luck,e.luck),n.initialCost=Math.ceil((n.initialCost+r)*t/100)+Math.ceil(n.initialCost/5*r/10),n.id=g()()})),n}),v=function(e){return i.collection("users").doc(r.currentUser.uid).update(e).catch((function(e){console.log(e)}))},_=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},b=_(_(_(_(_(_([],s,!0),u,!0),a,!0),l,!0),c,!0),f,!0),w=["Broken swords","The Smoke Forest","The Fallen Island","Town of Onyx","Lands of the Damned","The Windy Town","Vault of Coal","The Inferno Town","Cove of Nightmares","The Dark Outpost","Farms of Necrosis","Borough of Fire","The Shadow Shore","City of Dread","The Molded River","Shore of Ghosts","Cove of Ash","The Crumbled Labyrinth","The Bleak Isle","Reef of Hauntings","Cove of Whispers","The Smoke Borough","Temple of Remnants","The Doom Lands","Forest of Ruins","The Agony Vault","The Chaos City","Reef of the Unknown","The Necrotic Borough","The Crumbling Fields","Town of Phantoms","Island of Undoing","Borough of Waste","Village of Ghosts","The End Cove","Cove of Death","Farms of the Fallen","Cove of Death","Harbor of Illusions","Borough of the Abandoned","The Destruction Temple","The Molten Reef","Lands of the Forgotten"],S=["I've been meaning to reach out to you for a long time. \n    There is a very strange monster in the garden behind my house and I'm afraid to go there myself. \n    Help me get rid of the monster and I will give you award.","\n    Welcome hunter. Today I was crossing the bridge to the castle today, I saw monsters destroying the castle's foundation. \n    You must get rid of them or they will steal all the gold from our treasure room,\n     as you know, the king is planning to buy a new castle door next week.\n    ","\n    I need help , there are lots of monsters in my basement that are eating my food. Please kill these monsters away from my house, \n    I don't want my whole basement to be covered in blood.\n     These monsters like the smell of strawberries, this maybe helps you.\n    ","Hunter I was looking for you all day, when I woke up in the morning \n    I saw monsters stealing apples from my orchard. Kill them as soon as possible, otherwise they will eat all the apples.","\n    As you know, a large monster has appeared in the canals under the castle. \n    They say he's not dangerous, and even better, others have played cards with it.\n     Apparently the monster is able to influence people's consciousness, so that anyone who plays with him loses to him, and he gets richer and richer\n    ","\n    Monsters have appeared in the royal stable. I don't know what to say, you know what to do","\n    In the diamond cave, sometimes a monster appears, scares the mine workers and steals their wagons of diamonds,\n     their boss is upset and doesn't believe in the monster, he thinks that it is his workers who are stealing his diamonds, \n     and they must works longer every day.","\n     A bane has appeared in our royal harbor that destroys royal ships. You must kill her or it will destroy all the ships and we will have nothing to sail with. Next week we're going for exploration.\n     ","The king's daughter was trapped in a cage by a monster. \n     You must kill it as soon as possible. Otherwise, the king's daughter will be taken out of  our kingdom and the king will fall into despair.","\n     Long ago I saw a beast that turns into a dragon during the night. It kidnapped all our animals and then hid for a long time before returning to hunt again.\n      Recently some of the animals have disappeared again, the beast has returned and you must kill this beast before it does the same to the animals.\n     ","Under the earth there are terrible monsters who fear light, but they are drilling tunnels under our kingdom, \n     they will drill some more and our kingdom will collapse under the earth. The entrance to their hiding place is under the bridge leading to the eastern part of the castle.","\n     I know you are very busy but I really need help. Last night a monster stole my sheep. Get him as soon as you can before it's too late.\n     ","Where have you been? I've been looking everywhere for you. My wife was attacked by a monster and turned into a frog, he told me that \n     if I paid four thousand gold he would disenchant her. I don't believe him, but I believe you know better ways to solve this problem.","\n     I just came back from the forest, hiding in the bushes I heard monsters planning to storm the castle through the south bridge. \n     I ran as fast as I could to tell you about it. You must go to that bridge as soon as possible and thwart their plans. \n     ","\n     The royal knights have been surrounded by a bunch of monsters. You have to help them, even though they are knights they have no chance against the beasts, \n     it is good that there is someone like you in the kingdom. \n     "],E=["./images/missions/papyrus/papyrus_1.png","./images/missions/papyrus/papyrus_2.png","./images/missions/papyrus/papyrus_3.png","./images/missions/papyrus/papyrus_4.png","./images/missions/papyrus/papyrus_5.png","./images/missions/papyrus/papyrus_6.png","./images/missions/papyrus/papyrus_7.png","./images/missions/papyrus/papyrus_8.png","./images/missions/papyrus/papyrus_9.png","./images/missions/papyrus/papyrus_10.png","./images/missions/papyrus/papyrus_11.png","./images/missions/papyrus/papyrus_12.png","./images/missions/papyrus/papyrus_13.png","./images/missions/papyrus/papyrus_14.png"],k=["./images/missions/monsters/monster_1.png","./images/missions/monsters/monster_2.png","./images/missions/monsters/monster_3.png","./images/missions/monsters/monster_4.png","./images/missions/monsters/monster_5.png","./images/missions/monsters/monster_6.png","./images/missions/monsters/monster_7.png","./images/missions/monsters/monster_8.png","./images/missions/monsters/monster_9.png","./images/missions/monsters/monster_10.png","./images/missions/monsters/monster_11.png","./images/missions/monsters/monster_12.png","./images/missions/monsters/monster_13.png","./images/missions/monsters/monster_1.png","./images/missions/monsters/monster_15.png","./images/missions/monsters/monster_16.png","./images/missions/monsters/monster_17.png","./images/missions/monsters/monster_18.png","./images/missions/monsters/monster_19.png","./images/missions/monsters/monster_20.png","./images/missions/monsters/monster_21.png","./images/missions/monsters/monster_22.png","./images/missions/monsters/monster_23.png","./images/missions/monsters/monster_24.png","./images/missions/monsters/monster_25.png","./images/missions/monsters/monster_26.png","./images/missions/monsters/monster_27.png","./images/missions/monsters/monster_28.png","./images/missions/monsters/monster_29.png","./images/missions/monsters/monster_30.png","./images/missions/monsters/monster_31.png","./images/missions/monsters/monster_32.png","./images/missions/monsters/monster_33.png","./images/missions/monsters/monster_34.png","./images/missions/monsters/monster_35.png","./images/missions/monsters/monster_36.png","./images/missions/monsters/monster_37.png","./images/missions/monsters/monster_38.png","./images/missions/monsters/monster_39.png","./images/missions/monsters/monster_40.png","./images/missions/monsters/monster_41.png","./images/missions/monsters/monster_42.png"],I=["./images/missions/characters/character_1.png","./images/missions/characters/character_2.png","./images/missions/characters/character_3.png","./images/missions/characters/character_4.png","./images/missions/characters/character_5.png","./images/missions/characters/character_6.png","./images/missions/characters/character_7.png","./images/missions/characters/character_8.png","./images/missions/characters/character_9.png","./images/missions/characters/character_10.png"],T=[{attribute:"<a href='https://www.freepik.com/vectors/tree'>Tree vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_1.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/character'>Character vector created by macrovector - www.freepik.com</a>",src:"./images/missions/backgrounds/background_2.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/star'>Star vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_3.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_4.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_5.jpg"},{attribute:"<a href='<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_6.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_7.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_8.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_9.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",src:"./images/missions/backgrounds/background_10.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/character'>Character vector created by macrovector - www.freepik.com</a>",src:"./images/missions/backgrounds/background_11.jpg"},{attribute:"<a href='https://www.freepik.com/vectors/nature'>Nature vector created by brgfx - www.freepik.com</a>",src:"./images/missions/backgrounds/background_12.jpg"}],C=S,A=w,P=E,R=k,N=I,D=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},O=function(e,t,n,r){0===A.length&&(A=w),0===C.length&&(C=S),0===P.length&&(P=E),0===N.length&&(N=I),0===R.length&&(R=k);var i=D(1,20),o=D(1,20),a={exp:Math.ceil(o*(10*Math.random()/3)/e),gold:Math.ceil(t/10*(i/3)*.7),title:A[Math.floor(Math.random()*A.length)],dsc:C[Math.floor(Math.random()*C.length)],time:Math.ceil((i+o)/2),id:m.process()+"-"+Math.floor(1e3*Math.random()),papyrus:P[Math.floor(Math.random()*P.length)],character:N[Math.floor(Math.random()*N.length)],background:T[Math.floor(Math.random()*T.length)],monster:{src:R[Math.floor(Math.random()*k.length)],strength:Math.ceil(.8*n.strength),defence:Math.ceil(.8*n.defence),physicalEndurance:Math.ceil(.8*n.physicalEndurance),luck:Math.ceil(.8*n.luck),damage:Math.ceil(.8*n.damage),health:Math.ceil(.8*n.health),damageReduce:Math.ceil(.8*n.damageReduce),critical:Math.ceil(.8*n.critical)}};if(null!==r&&r.properties.travelTime){var s=Math.floor(a.time-a.time*r.properties.travelTime/100);a.time=s}return C.splice(C.indexOf(a.dsc),1),A.splice(A.indexOf(a.title),1),P.splice(P.indexOf(a.papyrus),1),N.splice(N.indexOf(a.character),1),R.splice(R.indexOf(a.monster.src),1),a},L=function(e){var t,n={strength:0,damage:0,physicalEndurance:0,health:0,defence:0,damageReduce:0,luck:0,critical:0};if(n.strength=e.rawStats.strength,n.damage=Math.floor(.7*n.strength),n.luck=e.rawStats.luck,n.critical=n.critical=Math.floor(.3*n.luck),n.physicalEndurance=e.rawStats.physicalEndurance,n.health=Math.floor(.8*n.physicalEndurance),n.defence=e.rawStats.defence,n.damageReduce=Math.floor(.5*n.defence),e.equipmentItems.forEach((function(e){null!==e.properties.strength&&(n.strength+=e.properties.strength,n.damage+=Math.floor(.7*n.strength)),null!==e.properties.luck&&(n.luck+=e.properties.luck,n.critical+=Math.floor(.3*n.luck)),null!==e.properties.physicalEndurance&&(n.physicalEndurance=e.properties.physicalEndurance,n.health+=Math.floor(.8*n.physicalEndurance)),null!==e.properties.defence&&(n.defence+=e.properties.defence,n.damageReduce=Math.floor(.5*n.defence))})),null!==e.pet){var r=e.pet.properties;null!==r.strength&&(n.strength+=Math.floor(e.rawStats.strength*(r.strength/100)),n.damage=Math.floor(.7*n.strength)),null!==r.luck&&(n.luck+=Math.floor(e.rawStats.luck*(r.luck/100)),n.critical=Math.floor(.3*n.luck)),null!==r.physicalEndurance&&(n.physicalEndurance+=Math.floor(e.rawStats.physicalEndurance*(r.physicalEndurance/100)),n.health=Math.floor(.8*n.physicalEndurance)),null!==r.defence&&(n.defence+=Math.floor(e.rawStats.defence*(r.defence/100)),n.damageReduce=Math.floor(.5*n.defence))}return null!==e.potions.first&&(null!==(t=o[o.findIndex((function(t){return t.id===e.potions.first.id}))]).properties.strength&&(n.strength+=Math.floor(e.rawStats.strength*(t.properties.strength/100)),n.damage=Math.floor(.7*n.strength)),null!==t.properties.luck&&(n.luck+=Math.floor(e.rawStats.luck*(t.properties.luck/100)),n.critical=Math.floor(.3*n.luck)),null!==t.properties.physicalEndurance&&(n.physicalEndurance+=Math.floor(e.rawStats.physicalEndurance*(t.properties.physicalEndurance/100)),n.health=Math.floor(.8*n.physicalEndurance)),null!==t.properties.defence&&(n.defence+=Math.floor(e.rawStats.defence*(t.properties.defence/100)),n.damageReduce=Math.floor(.5*n.defence))),null!==e.potions.second&&(null!==(t=o[o.findIndex((function(t){return t.id===e.potions.second.id}))]).properties.strength&&(n.strength+=Math.floor(e.rawStats.strength*(t.properties.strength/100)),n.damage=Math.floor(.7*n.strength)),null!==t.properties.luck&&(n.luck+=Math.floor(e.rawStats.luck*(t.properties.luck/100)),n.critical=Math.floor(.3*n.luck)),null!==t.properties.physicalEndurance&&(n.physicalEndurance+=Math.floor(e.rawStats.physicalEndurance*(t.properties.physicalEndurance/100)),n.health=Math.floor(.8*n.physicalEndurance)),null!==t.properties.defence&&(n.defence+=Math.floor(e.rawStats.defence*(t.properties.defence/100)),n.damageReduce=Math.floor(.5*n.defence))),n},M=function(){function e(){this.mobileNav=document.querySelector(".mobileNav__content"),this.freepikAttributeWrapper=document.querySelector("#freepik-attribute"),this.userData=null,this.userStats={strength:0,damage:0,physicalEndurance:0,health:0,defence:0,damageReduce:0,luck:0,critical:0},this.root=document.getElementById("game__view"),this.loadingContainer=document.querySelector(".loading"),this.freepikAttribute="",this.bodyBackgroundSrc="",this.init()}return e.prototype.checkPetAndPotions=function(){var e=new Date;null!==this.userData.pet&&this.userData.pet.rentEnd.getTime()<=e.getTime()&&(this.userData.pet=null,v(this.userData)),null!==this.userData.potions.first&&this.userData.potions.first.end.getTime()<=e.getTime()&&(this.userData.potions.first=null,v(this.userData)),null!==this.userData.potions.second&&this.userData.potions.second.end.getTime()<=e.getTime()&&(this.userData.potions.second=null,v(this.userData))},e.prototype.setHeroStats=function(){this.userStats=L(this.userData)},e.prototype.getUserData=function(){return e=this,t=void 0,o=function(){var e,t=this;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(n){switch(n.label){case 0:return e=r.currentUser.uid,[4,i.collection("users").where("__name__","==",e).get().then((function(e){e.forEach((function(e){t.userData=e.data(),t.setHeroStats()}))})).catch((function(e){console.log("Error getting documents: ",e)}))];case 1:return n.sent(),[4,i.collection("users").where("__name__","==",e).onSnapshot((function(e){e.docChanges.forEach((function(e){"modified"===e.type&&(t.userData=e.doc.data(),t.onDataChange(),t.setHeroStats())}))}))];case 2:return n.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((o=o.apply(e,t||[])).next())}));var e,t,n,o},e.prototype.setMagicWheel=function(){var e=y(this.userData.rawStats,this.userData.guardPayout),t={type:"gold",name:"Gold",rarity:"legendary",src:"./images/gold_chest.png",description:this.userData.gold+Math.ceil(10*this.userData.guardPayout)+" gold will always comforting",initialCost:0,properties:{strength:null,physicalEndurance:null,luck:null,defence:null},id:""};e.push(t),null===this.userData.potions.first||null===this.userData.potions.second?e.push(h(o)):e.push(h(b)),this.userData.magicWheel={items:e,wonItem:e[Math.floor(Math.random()*e.length)]}},e.prototype.dateOperations=function(){this.checkPetAndPotions();var e,t,n,r,i,o=new Date;this.userData.lastVisit.getDay()!==o.getDay()&&(this.userData.shop.blacksmith=y(this.userData.rawStats,this.userData.guardPayout),this.userData.shopPicks.blacksmith=[{index:0,picks:2},{index:1,picks:2},{index:2,picks:2},{index:3,picks:2},{index:4,picks:2},{index:5,picks:2}],this.userData.wizardWheelSpin=!0,this.setMagicWheel(),this.userData.availableMissions=(e=this.userData.nextLevelAt,t=this.userData.guardPayout,n=this.userStats,r=this.userData.pet,(i=[]).push(O(e,t,n,r)),i.push(O(e,t,n,r)),i.push(O(e,t,n,r)),i),this.userData.lastVisit=o,this.userData.missionWillingness=100,v(this.userData)),this.userData.lastVisit=o,v(this.userData)},e.prototype.removeLoading=function(){this.loadingContainer.classList.add("disabled")},e.prototype.clearMobileNav=function(){this.mobileNav.innerHTML=""},e.prototype.setBodyBackground=function(){document.querySelector("body").style.backgroundImage="url("+this.bodyBackgroundSrc+")",this.freepikAttributeWrapper.innerHTML=this.freepikAttribute},e.prototype.onDataChange=function(){window.alert("dataChange method should be implemented in inheriting class")},e.prototype.render=function(){window.alert("render method hould be implemented in inheriting class")},e.prototype.getDOMElements=function(){window.alert("getDOMElements method  should be implemented in inheriting class")},e.prototype.initScripts=function(){window.alert("initScripts method  should be implemented in inheriting class")},e.prototype.init=function(){var e=this;this.clearMobileNav(),this.getUserData().then((function(){e.setBodyBackground(),e.dateOperations(),e.render(),e.getDOMElements(),e.initScripts()})).then((function(){e.removeLoading()})).catch((function(e){return console.error(e)}))},e}(),x=function(e){switch(e){case"helmet":return"/images/profile_equipment_helmet.png";case"shield":return"/images/profile_equipment_shield.png";case"special":return"/images/profile_equipment_special.png";case"weapon":return"/images/profile_equipment_weapon.png";case"chestPlate":return"/images/profile_equipment_armor.png";case"gloves":return"/images/profile_equipment_gloves.png";default:return""}},F=function(e){return 1===e?10:2===e?15:3===e?25:4===e?70:5===e?115:6===e?160:7===e?205:8===e?260:9===e?365:10===e?470:11===e?575:12===e?680:13===e?810:14===e?940:15===e?1070:16===e?1200:17===e?1330:18===e?1460:19===e?1590:20===e?1720:21===e?1850:22===e?1980:23===e?2110:24===e?2240:25===e?2370:26===e?2515:27===e?2705:28===e?2905:29===e?3155:30===e?3455:31===e?3805:32===e?4205:33===e?4655:34===e?5155:35===e?5755:36===e?6455:37===e?7255:38===e?8155:39===e?9155:40===e?10255:41===e?11455:42===e?12755:43===e?14155:44===e?15655:45===e?17255:46===e?18955:47===e?20755:48===e?22655:49===e?24655:50===e?26755:51===e?28955:52===e?31255:53===e?33655:54===e?36155:55===e?38755:56===e?41455:57===e?44255:58===e?47255:59===e?50455:60===e?53755:61===e?57355:62===e?61055:63===e?64855:64===e?68755:65===e?72755:66===e?76855:67===e?81055:68===e?85355:69===e?89755:70===e?94255:71===e?99755:72===e?106355:73===e?114055:74===e?122855:75===e?132755:76===e?143755:77===e?155855:78===e?169055:79===e?183355:80===e?198755:81===e?215155:25e4},q=function(e){var t=new Date,n=new Date;n.setDate(n.getDate()+1),n.setHours(0,0,0,0);var r=n-t,i=Math.floor(r/1e3/60),o=(new Date).getTime()+60*i*1e3;return setInterval((function(){var t,n,r,i=(new Date).getTime(),a=(o-i)/1e3;a>=0?(a%=86400,t=parseInt((a/3600).toString()),a%=3600,n=parseInt((a/60).toString()),r=parseInt((a%60).toString()),e.innerHTML=t+"h : "+n+"m : "+r+"s"):location.reload()}),1e3)},B=function(e,t){var n=e-t;return n>0?"<strong class='better'>/ +"+n+"</strong>":n<0?"<strong class='worse'>/ "+n+"</strong>":""},U=function(e,t){return void 0===t?"\n              <div class='market__itemInfo' id='blacksmith_item_info'>\n                 <h3 class='market__itemTitle "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n                 \n                 "+e.name+"\n              \n                 </h3>\n              \n                 "+("common"===e.rarity?" <strong class='market__itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n                 "+(void 0!==e.description?" <p class='market__itemDsc'>'"+e.description+"' </p>":"")+"\n                 <table class='market__itemStats'>\n                   <tbody>\n\n                   "+(null!==e.properties.strength?"<tr>\n                       <td>Strength</td>\n                       <td>"+e.properties.strength+"</td>\n                     </tr>":"")+"\n                 \n                      \n\n                    "+(null!==e.properties.physicalEndurance?"<tr>\n                        <td>Physical endurance</td>\n                        <td>"+e.properties.physicalEndurance+"</td>\n                       </tr>":"")+"   \n                    \n                     "+(null!==e.properties.defence?" \n                     <tr>\n                       <td>Defence</td>\n                       <td>"+e.properties.defence+"</td>\n                     </tr>":"")+"\n                     \n                     "+(null!==e.properties.luck?"\n                     <tr>\n                       <td>Luck</td>\n                       <td>"+e.properties.luck+"</td>\n                     </tr>\n                     ":"")+"\n                     \n                   </tbody>\n                 </table>\n             \n                 <div class='market__itemPriceWrapper'>\n                   <img class='market__itemPriceIcon' src='./images/coin.png' alt='coin'/>\n                   <strong class='market__itemPrice'>"+e.initialCost+"</strong>\n                 </div>\n\n               </div>\n    ":"\n              <div class='market__itemInfo' id='blacksmith_item_info'>\n                 <h3 class='market__itemTitle "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n                 \n                 "+e.name+"\n              \n                 </h3>\n              \n                 "+("common"===e.rarity?" <strong class='market__itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n                 "+(void 0!==e.description?" <p class='market__itemDsc'>'"+e.description+"' </p>":"")+"\n                 <table class='market__itemStats'>\n                   <tbody>\n\n\n                   "+(null!==e.properties.strength?"<tr>\n                       <td>Strength</td>\n                       <td>"+e.properties.strength+" "+(null!==t.properties.strength?B(e.properties.strength,t.properties.strength):"")+"</td>\n                     </tr>":"")+"\n                 \n                      \n\n                    "+(null!==e.properties.physicalEndurance?"<tr>\n                        <td>Physical endurance</td>\n                        <td>"+e.properties.physicalEndurance+" "+(null!==t.properties.physicalEndurance?B(e.properties.physicalEndurance,t.properties.physicalEndurance):"")+"</td>\n                       </tr>":"")+"   \n                    \n                     "+(null!==e.properties.defence?" \n                     <tr>\n                       <td>Defence</td>\n                       <td>"+e.properties.defence+" "+(null!==t.properties.defence?B(e.properties.defence,t.properties.defence):"")+"</td>\n                     </tr>":"")+"\n                     \n                     "+(null!==e.properties.luck?"\n                     <tr>\n                       <td>Luck</td>\n                       <td>"+e.properties.luck+" "+(null!==t.properties.luck?B(e.properties.luck,t.properties.luck):"")+"</td>\n                     </tr>\n                     ":"")+"\n                     \n                   </tbody>\n                 </table>\n             \n                 <div class='market__itemPriceWrapper'>\n                   <img class='market__itemPriceIcon' src='./images/coin.png' alt='coin'/>\n                   <strong class='market__itemPrice'>"+e.initialCost+"</strong>\n                 </div>\n\n               </div>\n    "},j=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),W=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},V=function(e){function t(){var t=this;return(t=e.call(this)||this).freepikAttribute="<a href='https://www.freepik.com/vectors/frame'>Frame vector created by upklyak - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_blacksmith.jpg",t.dom={portraitImg:document.querySelector(".profile__portraitImg"),level:document.querySelector(".profile__level"),market:document.querySelector("#market_slots"),marketSlots:document.querySelectorAll("#market_slots .market__slotWrapper"),itemLabel:document.querySelector("#blacksmith_item_label"),equipmentSlots:document.querySelectorAll("#blacksmith_equipment_slots div[data-slot-name]"),goldAmount:document.querySelector("#blacksmith_gold_amount"),goldBar:document.querySelector("#blacksmith_gold_bar"),goldSubstract:document.querySelector("#blacksmith_gold_substract"),backpack:document.querySelector("#blacksmith_backpack_slots"),body:document.querySelector("body"),error:document.querySelector("#blacksmith__error"),countdown:document.querySelector("#blacksmith_countdown_time"),backpackSlots:document.querySelectorAll("#blacksmith_backpack_slots .profile__backpackItem"),backpackLabelRoot:document.querySelector("#blacksmith_backpack_item_label"),equipmentLabelRoot:document.querySelector("#blacksmith_equipment__item_label"),blacksmithContainer:document.querySelector(".blacksmith__item:last-child"),profileContainer:document.querySelector(".blacksmith__item:first-child"),mobileNavFristSwitch:document.querySelector(".mobileNav__item:first-child"),mobileNavSecondSwitch:document.querySelector(".mobileNav__item:last-child")},t.market=[],t.selectedMarketItem=null,t.showBlacksmithLabel=null,t.hideLabelInterval={potion:null,equipment:null,backpack:null},t}return j(t,e),t.prototype.setShop=function(){var e=this;this.market=this.userData.shop.blacksmith,this.dom.marketSlots.forEach((function(t,n){var r=t,i=r.firstElementChild;e.userData.shopPicks.blacksmith[n].picks>0?(i.dataset.itemId=e.market[n].id,i.innerHTML="<img src='"+e.market[n].src+"'/>",i.dataset.slotName=e.market[n].type):(i.removeAttribute("data-slot-name"),i.removeAttribute("data-item-id"),i.innerHTML="<img src='./images/market_sold_out.png'/>"),r.addEventListener("mouseover",(function(){var t=r.firstElementChild,n=e.market[e.market.findIndex((function(e){return e.id===t.dataset.itemId}))];void 0!==n&&(clearTimeout(e.showBlacksmithLabel),e.showBlacksmithLabel=setTimeout((function(){var t=document.querySelector("#blacksmith_equipment_slots div[data-slot-name = "+n.type+"] img"),i=e.userData.equipmentItems[e.userData.equipmentItems.findIndex((function(e){return e.id===t.dataset.currentItemId}))];e.dom.itemLabel.classList.remove("afford-yes","afford-no"),e.dom.goldAmount.classList.remove("profile__goldAmount-afford","profile__goldAmount-noAfford"),e.dom.itemLabel.classList.add(e.userData.gold>=n.initialCost?"afford-yes":"afford-no"),e.dom.goldAmount.classList.add(e.userData.gold>=n.initialCost?"profile__goldAmount-afford":"profile__goldAmount-noAfford"),t.classList.add("profile__equipmentIcon-pulse"),e.dom.itemLabel.innerHTML=U(n,i),e.dom.itemLabel.classList.remove("disabled"),e.dom.itemLabel.querySelector(".market__itemPriceWrapper").addEventListener("click",(function(){return e.buyItem(n,r)}))}),1e3))})),r.addEventListener("mouseleave",(function(){document.querySelectorAll("#blacksmith_equipment_slots div[data-slot-name]").forEach((function(e){e.firstElementChild.classList.remove("profile__equipmentIcon-pulse")}))}))})),this.dom.market.addEventListener("mouseleave",(function(){e.dom.goldAmount.classList.remove("profile__goldAmount-afford","profile__goldAmount-noAfford"),clearInterval(e.showBlacksmithLabel)}))},t.prototype.getAvailbleMarketPicks=function(){var e=[];return this.dom.marketSlots.forEach((function(t,n){e.push({picks:2,index:n})})),e},t.prototype.dragAndDrop=function(){var e=this,t=this.userData.shopPicks.blacksmith,n=null,r=null,i=null,o=null,a=document.querySelectorAll("#market_slots .market__slotWrapper"),s=document.querySelectorAll("#blacksmith_equipment_slots div[data-slot-name]"),u=document.querySelector("#blacksmith_backpack_slots");a.forEach((function(t){return t.addEventListener("dragstart",(function(o){var a=t.firstElementChild;n=t,t.classList.add("dragging"),r=a.dataset.slotName,i=e.market[e.market.findIndex((function(e){return e.id===a.dataset.itemId}))]}))})),s.forEach((function(e){return e.addEventListener("dragover",(function(e){e.preventDefault()}))})),a.forEach((function(e){return e.addEventListener("dragend",(function(t){t.preventDefault(),e.classList.remove("dragging")}))})),s.forEach((function(a){return a.addEventListener("mouseover",(function(){var s=a,u=a.firstElementChild;if(o=s.dataset.slotName,r===o&&null!=i){var c=e.market[e.market.findIndex((function(e){return e.id===i.id}))];if(i.id!==u.dataset.currentItemId&&c.initialCost<=e.userData.gold){var l=W([],marketSlotsArr,!0).indexOf(n);if(t[l].picks>0)if(e.userData.backpackItems.length<10){t[l].picks-=1;var d=e.userData.equipmentItems[e.userData.equipmentItems.findIndex((function(e){return e.id===u.dataset.currentItemId}))];void 0!==d&&e.userData.backpackItems.push(d);var h=e.market.findIndex((function(e){return e.id===i.id})),p=y(e.userData.rawStats,e.userData.guardPayout),f=p[Math.floor(Math.random()*p.length)];e.market[h]=f,e.userData.gold-=i.initialCost,e.dom.goldSubstract.innerText=""+i.initialCost,e.dom.goldSubstract.classList.remove("disabled"),setTimeout((function(){e.dom.goldSubstract.classList.add("disabled"),e.dom.goldSubstract.innerText=""}),1300);var m=e.userData.equipmentItems.findIndex((function(e){return e.type===c.type}));e.dom.itemLabel.innerHTML="",e.dom.itemLabel.classList.add("disabled"),m>-1?(e.userData.backpackItems.push(e.userData.equipmentItems[m]),e.userData.equipmentItems[m]=c):e.userData.equipmentItems.push(c),e.userData.shopPicks.blacksmith=t,v(e.userData)}else e.dom.error.innerText="Your backpack is full",e.dom.error.classList.remove("disabled"),setTimeout((function(){e.dom.error.innerText="",e.dom.error.classList.add("disabled")}),3500)}else i.id!==u.dataset.currentItemId&&c.initialCost>e.userData.gold&&(e.dom.goldBar.classList.add("profile__goldBar-noAfford"),setTimeout((function(){e.dom.goldBar.classList.remove("profile__goldBar-noAfford")}),1e3))}}))})),u.addEventListener("mouseover",(function(){if(null!==i)if(e.userData.backpackItems.length<10){var r=W([],e.dom.marketSlots,!0).indexOf(n),o=t[r].picks;if(e.userData.gold>=i.initialCost&&o>0){e.userData.gold-=i.initialCost;var a=e.market.findIndex((function(e){return e.id===i.id})),s=y(e.userData.rawStats,e.userData.guardPayout),u=s[Math.floor(Math.random()*s.length)];e.market[a]=u,e.dom.goldSubstract.innerText=""+i.initialCost,e.dom.goldSubstract.classList.remove("disabled"),setTimeout((function(){e.dom.goldSubstract.classList.add("disabled"),e.dom.goldSubstract.innerText=""}),1300),e.userData.backpackItems.push(i),t[r].picks-=1,e.userData.shopPicks.blacksmith=t,e.dom.itemLabel.innerHTML="",e.dom.itemLabel.classList.add("disabled"),v(e.userData)}}else e.dom.error.innerText="Your backpack is full",e.dom.error.classList.remove("disabled"),setTimeout((function(){e.dom.error.innerText="",e.dom.error.classList.add("disabled")}),3500)})),this.dom.body.addEventListener("mouseover",(function(){n=null,r=null,i=null,o=null}))},t.prototype.buyItem=function(e,t){var n=this,r=W([],this.dom.marketSlots,!0).indexOf(t),i=function(){if(n.userData.shopPicks.blacksmith[r].picks>0){var t=n.market.findIndex((function(t){return t.id===e.id})),i=y(n.userData.rawStats,n.userData.guardPayout),o=i[Math.floor(Math.random()*i.length)];n.market[t]=o}n.userData.shopPicks.blacksmith[r].picks-=1,n.dom.itemLabel.innerHTML="",n.dom.itemLabel.classList.add("disabled"),n.dom.goldSubstract.innerText=""+e.initialCost,n.dom.goldSubstract.classList.remove("disabled"),setTimeout((function(){n.dom.goldSubstract.classList.add("disabled"),n.dom.goldSubstract.innerText=""}),1300),window.innerWidth<1024&&(n.dom.blacksmithContainer.classList.add("disabled"),n.dom.profileContainer.classList.remove("disabled"))};void 0===this.userData.equipmentItems[this.userData.equipmentItems.findIndex((function(t){return t.type===e.type}))]?this.userData.gold>=e.initialCost&&this.userData.shopPicks.blacksmith[r].picks>0&&(this.userData.equipmentItems.push(e),this.userData.gold-=e.initialCost,this.dom.goldSubstract.innerText=""+e.initialCost,this.dom.goldSubstract.classList.remove("disabled"),setTimeout((function(){n.dom.goldSubstract.classList.add("disabled"),n.dom.goldSubstract.innerText=""}),1300),i(),v(this.userData)):this.userData.backpackItems.length<=10?this.userData.shopPicks.blacksmith[r].picks>0&&this.userData.gold>=e.initialCost&&(this.userData.backpackItems.push(e),this.userData.gold-=e.initialCost,this.dom.goldSubstract.innerText=""+e.initialCost,this.dom.goldSubstract.classList.remove("disabled"),setTimeout((function(){n.dom.goldSubstract.classList.add("disabled"),n.dom.goldSubstract.innerText=""}),1300),i(),v(this.userData)):(this.dom.error.innerText="Your backpack is full",this.dom.error.classList.remove("disabled"),setTimeout((function(){n.dom.error.innerText="",n.dom.error.classList.add("disabled")}),3500))},t.prototype.buyItemByLabel=function(){var e=this;this.dom.marketSlots.forEach((function(t){return t.addEventListener("click",(function(){clearInterval(e.showBlacksmithLabel);var n=t.firstElementChild;e.selectedMarketItem=e.market[e.market.findIndex((function(e){return e.id===n.dataset.itemId}))];var r=t;if(void 0!==e.selectedMarketItem&&void 0!==r){var i=document.querySelector("#blacksmith_equipment_slots div[data-slot-name = "+e.selectedMarketItem.type+"] img"),o=e.userData.equipmentItems[e.userData.equipmentItems.findIndex((function(e){return e.id===i.dataset.currentItemId}))];e.dom.itemLabel.classList.remove("afford-yes","afford-no"),e.dom.goldAmount.classList.remove("profile__goldAmount-afford","profile__goldAmount-noAfford"),e.dom.itemLabel.classList.add(e.userData.gold>=e.selectedMarketItem.initialCost?"afford-yes":"afford-no"),e.dom.goldAmount.classList.add(e.userData.gold>=e.selectedMarketItem.initialCost?"profile__goldAmount-afford":"profile__goldAmount-noAfford"),e.dom.itemLabel.innerHTML=U(e.selectedMarketItem,o),i.classList.add("profile__equipmentIcon-pulse"),e.dom.itemLabel.classList.remove("disabled"),e.dom.itemLabel.querySelector(".market__itemPriceWrapper").addEventListener("click",(function(){return e.buyItem(e.selectedMarketItem,r)}))}}))}))},t.prototype.sellBackpackItem=function(e){this.userData.gold+=Math.ceil(.4*e.initialCost);var t=this.userData.backpackItems.findIndex((function(t){return t.id===e.id}));this.userData.backpackItems.splice(t,1),v(this.userData),this.dom.backpackLabelRoot.innerHTML="",this.dom.backpackLabelRoot.className="profile__itemSpecs disabled"},t.prototype.moveItemToEquipment=function(e){var t=this.userData.equipmentItems.findIndex((function(t){return t.type===e.type})),n=this.userData.backpackItems.findIndex((function(t){return t.id===e.id}));-1!==t?(this.userData.backpackItems.splice(n,1),this.userData.backpackItems.push(this.userData.equipmentItems[t]),this.userData.equipmentItems[t]=e,this.dom.backpackLabelRoot.classList.add("disabled"),v(this.userData)):(this.userData.backpackItems.splice(n,1),this.userData.equipmentItems.push(e),this.dom.backpackLabelRoot.classList.add("disabled"),v(this.userData))},t.prototype.backpackLabel=function(e,t){var n=this;this.dom.equipmentSlots.forEach((function(e){return e.firstElementChild.classList.remove("profile__equipmentIcon-pulse")})),this.dom.equipmentLabelRoot.innerHTML="",this.dom.equipmentLabelRoot.classList.add("disabled"),clearInterval(this.hideLabelInterval.backpack);var r=document.querySelector("#blacksmith_equipment_slots div[data-slot-name = "+e.type+"]");r.firstElementChild.classList.add("profile__equipmentIcon-pulse"),this.dom.backpackLabelRoot.innerHTML="";var i=this.userData.equipmentItems[this.userData.equipmentItems.findIndex((function(t){return t.type===e.type}))],o=document.createElement("div");o.innerHTML=function(e,t){return void 0===t?"\n      <h3 class='market__itemTitle itemTitle "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n      \n      "+e.name+"\n      </h3>\n      \n      "+("common"===e.rarity?" <strong class='market__itemRarity itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n      "+(void 0!==e.description?" <p class='market__itemDsc itemDsc '>'"+e.description+"' </p>":"")+"\n      <table class='market__itemStats itemStats'>\n        <tbody>\n        "+(null!==e.properties.strength?"<tr>\n            <td>Strength</td>\n            <td>"+e.properties.strength+"</td>\n          </tr>":"")+"\n      \n           \n         "+(null!==e.properties.physicalEndurance?"<tr>\n             <td>Physical endurance</td>\n             <td>"+e.properties.physicalEndurance+"</td>\n            </tr>":"")+"   \n         \n          "+(null!==e.properties.defence?" \n          <tr>\n            <td>Defence</td>\n            <td>"+e.properties.defence+"</td>\n          </tr>":"")+"\n          \n          "+(null!==e.properties.luck?"\n          <tr>\n            <td>Luck</td>\n            <td>"+e.properties.luck+"</td>\n          </tr>\n          ":"")+"\n          \n        </tbody>\n      </table>\n      \n      <div class='profile__actionWrapper' id='blacksmith_backpack_move_item_btn'>\n      <img src='./images/profile_icon_backpack.png' class='profile__equipmentItemSellIcon' id='blacksmith_backpack_replace_item_icon'/>\n      <strong class='profile__actionName'>Equip</strong>\n    </div>\n              \n    <div class='profile__equipmentItemSellWrapper' id='blacksmith_backpack_sell_item_btn'> \n      <img src='./images/profile_sell_item_icon.png' class='profile__equipmentItemSellIcon'/>\n      <strong class='profile__equipmentItemSellPrice' id='blacksmith_backpack_sell_item_price'></strong>\n    </div>\n      ":"\n      <h3 class='market__itemTitle itemTitle "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n      \n      "+e.name+"\n      </h3>\n      "+("common"===e.rarity?" <strong class='market__itemRarity itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n      "+(void 0!==e.description?" <p class='market__itemDsc itemDsc'>'"+e.description+"' </p>":"")+"\n      <table class='market__itemStats itemStats'>\n        <tbody>\n        "+(null!==e.properties.strength?"<tr>\n            <td>Strength</td>\n            <td>"+e.properties.strength+" "+(null!==t.properties.strength?B(e.properties.strength,t.properties.strength):"")+"</td>\n          </tr>":"")+"\n      \n           \n         "+(null!==e.properties.physicalEndurance?"<tr>\n             <td>Physical endurance</td>\n             <td>"+e.properties.physicalEndurance+" "+(null!==t.properties.physicalEndurance?B(e.properties.physicalEndurance,t.properties.physicalEndurance):"")+"</td>\n            </tr>":"")+"   \n         \n          "+(null!==e.properties.defence?" \n          <tr>\n            <td>Defence</td>\n            <td>"+e.properties.defence+" "+(null!==t.properties.defence?B(e.properties.defence,t.properties.defence):"")+"</td>\n          </tr>":"")+"\n          \n          "+(null!==e.properties.luck?"\n          <tr>\n            <td>Luck</td>\n            <td>"+e.properties.luck+" "+(null!==t.properties.luck?B(e.properties.luck,t.properties.luck):"")+"</td>\n          </tr>\n          ":"")+"\n        </tbody>\n      </table>\n\n      <div class='profile__actionWrapper' id='blacksmith_backpack_move_item_btn'>\n      <img src='./images/profile_icon_backpack.png' class='profile__equipmentItemSellIcon' id='blacksmith_backpack_replace_item_icon'/>\n      <strong class='profile__actionName'>Equip</strong>\n    </div>\n              \n    <div class='profile__equipmentItemSellWrapper' id='blacksmith_backpack_sell_item_btn'> \n      <img src='./images/profile_sell_item_icon.png' class='profile__equipmentItemSellIcon'/>\n      <strong class='profile__equipmentItemSellPrice' id='blacksmith_backpack_sell_item_price'></strong>\n    </div>\n      "}(e,i),this.dom.backpackLabelRoot.className="profile__itemSpecs disabled",this.dom.backpackLabelRoot.classList.add("profile__itemSpecs-backpackSlot"+(t+1)),this.dom.backpackLabelRoot.classList.remove("disabled"),o.querySelector("#blacksmith_backpack_sell_item_price").innerText=""+Math.ceil(.4*e.initialCost),o.querySelector("#blacksmith_backpack_replace_item_icon").src=x(e.type),o.querySelector("#blacksmith_backpack_sell_item_btn").addEventListener("click",(function(){return n.sellBackpackItem(e)})),o.querySelector("#blacksmith_backpack_move_item_btn").addEventListener("click",(function(){return n.moveItemToEquipment(e)})),o.addEventListener("mouseover",(function(){return r.firstElementChild.classList.add("profile__equipmentIcon-pulse"),clearInterval(n.hideLabelInterval.backpack)})),o.addEventListener("mouseleave",(function(){n.dom.backpackLabelRoot.innerHTML="",r.firstElementChild.classList.remove("profile__equipmentIcon-pulse")})),this.dom.backpackLabelRoot.classList.remove("disabled"),this.dom.backpackLabelRoot.appendChild(o)},t.prototype.setUserBackpack=function(){var e=this;this.dom.backpackSlots.forEach((function(e){e.innerHTML=""})),this.userData.backpackItems.forEach((function(t,n){e.dom.backpackSlots[n].innerHTML="<img src='"+t.src+"'/>",e.dom.backpackSlots[n].addEventListener("mouseover",(function(){return e.backpackLabel(t,n)})),e.dom.backpackSlots[n].addEventListener("mouseleave",(function(){e.hideLabelInterval.backpack=setTimeout((function(){e.dom.backpackLabelRoot.innerHTML="",e.dom.backpackLabelRoot.classList.add("disabled")}),800),e.dom.equipmentSlots.forEach((function(e){return e.firstElementChild.classList.remove("profile__equipmentIcon-pulse")}))}))}))},t.prototype.sellEquipmentItem=function(e){this.userData.gold+=Math.ceil(.4*e.initialCost);var t=this.userData.equipmentItems.findIndex((function(t){return t.id===e.id}));this.userData.equipmentItems.splice(t,1),v(this.userData),this.dom.equipmentLabelRoot.innerHTML="",this.dom.equipmentLabelRoot.className="profile__itemSpecs disabled"},t.prototype.moveItemToBackpack=function(e,t){if(this.userData.backpackItems.length<this.dom.backpackSlots.length){var n=this.userData.equipmentItems.findIndex((function(t){return t.id===e.id}));this.userData.equipmentItems.splice(n,1),this.userData.backpackItems.push(e),v(this.userData),this.dom.equipmentLabelRoot.className="profile__itemSpecs disabled"}else t.innerText="Your backpack is full"},t.prototype.equipmentLabel=function(e){var t,n=this;this.dom.backpackLabelRoot.innerHTML="",this.dom.backpackLabelRoot.classList.add("disabled"),clearInterval(this.hideLabelInterval.equipment),this.dom.equipmentLabelRoot.className="profile__itemSpecs disabled",this.dom.equipmentLabelRoot.classList.add("legendary"===e.rarity?"profile__itemSpecs-legendary":"profile__itemSpecs-common"),this.dom.equipmentLabelRoot.classList.add("profile__itemSpecs-"+e.type),this.dom.equipmentLabelRoot.innerHTML="\n    <h3 class='market__itemTitle itemTitle "+("legendary"===(t=e).rarity?"market__itemTitle-legendary":"market__itemTitle-common")+"'>"+t.name+"</h3>\n                          <strong class='market__itemRarity itemRarity  "+("legendary"===t.rarity?"market__itemRarity-legendary":"market__itemRarity-common")+"'>"+t.rarity+"</strong>\n                          "+(void 0!==t.description?"<p class='market__itemDsc itemDsc'>'"+t.description+"' </p>":"")+"\n                          <table class='market__itemStats itemStats'>\n                          <tbody>\n             \n                          "+(null!==t.properties.strength?"<tr>\n                              <td>Strength</td>\n                              <td>"+t.properties.strength+"</td>\n                            </tr>":"")+"\n                           \n                        \n                          "+(null!==t.properties.physicalEndurance?"<tr>\n                                <td>Physical endurance</td>\n                                <td>"+t.properties.physicalEndurance+"</td>\n                              </tr>":"")+"\n                             \n                            "+(null!==t.properties.defence?"<tr>\n                                    <td>Defence</td>\n                                    <td>"+t.properties.defence+"</td>\n                                  </tr>":"")+"\n                                                                                                                    \n                            "+(null!==t.properties.luck?"<tr>\n                                    <td>Luck</td>\n                                    <td>"+t.properties.luck+"</td>\n                                </tr>":"")+"                                  \n                          </tbody>\n                        </table>\n\n                        <div class='profile__actionError' id='blacksmith_equipment_move_item_error'></div>\n                        <div class='profile__actionWrapper' id='profile_equipment_move_item_btn'>\n                          <img src='./images/profile_icon_backpack.png' class='profile__equipmentItemSellIcon'/>\n                          <strong class='profile__actionName'>Move to backpack</strong>\n                        </div>\n\n                        <div class='profile__equipmentItemSellWrapper' id='blacksmith_equipment_sell_item_btn'> \n                        <img src='./images/profile_sell_item_icon.png' class='profile__equipmentItemSellIcon'/>\n                        <strong class='profile__equipmentItemSellPrice' id='blacksmith_equipment_sell_item_price'></strong>\n                      </div>\n                        \n                        ",this.dom.equipmentLabelRoot.classList.remove("disabled"),this.dom.equipmentLabelRoot.addEventListener("mouseover",(function(){return clearInterval(n.hideLabelInterval.equipment)})),this.dom.equipmentLabelRoot.addEventListener("mouseleave",(function(){n.dom.equipmentLabelRoot.innerHTML="",n.dom.equipmentLabelRoot.classList.add("disabled")}));var r=this.dom.equipmentLabelRoot.querySelector("#profile_equipment_move_item_btn"),i=this.dom.equipmentLabelRoot.querySelector("#blacksmith_equipment_move_item_error");r.addEventListener("click",(function(){return n.moveItemToBackpack(e,i)})),this.dom.equipmentLabelRoot.querySelector("#blacksmith_equipment_sell_item_price").innerText=""+Math.ceil(.4*e.initialCost),this.dom.equipmentLabelRoot.querySelector("#blacksmith_equipment_sell_item_btn").addEventListener("click",(function(){return n.sellEquipmentItem(e)}))},t.prototype.clearEquipmentSlots=function(){this.dom.equipmentSlots.forEach((function(e){var t=e;e.innerHTML="<img src='"+x(t.dataset.slotName)+"' class='profile__equipmentIcon'/>"}))},t.prototype.setUserEquipment=function(){var e=this;this.clearEquipmentSlots(),this.userData.equipmentItems.forEach((function(t){var n=document.querySelector("#blacksmith_equipment_slots div[data-slot-name = '"+t.type+"']");n.innerHTML="  <img src='"+t.src+'\' class="profile__equipmentIcon"/>',n.addEventListener("mouseover",(function(){return e.equipmentLabel(t)})),n.addEventListener("mouseleave",(function(t){e.hideLabelInterval.equipment=setTimeout((function(){e.dom.equipmentLabelRoot.innerHTML="",e.dom.equipmentLabelRoot.classList.add("disabled")}),800)}))}))},t.prototype.removeEvents=function(){var e=document.querySelector("#blacksmith_backpack_slots");e.replaceWith(e.cloneNode(!0)),this.dom.backpackLabelRoot=document.querySelector("#blacksmith_backpack_item_label"),this.dom.backpackSlots=document.querySelectorAll("#blacksmith_backpack_slots .profile__backpackItem");var t=document.querySelector(".profile__equipment");t.replaceWith(t.cloneNode(!0)),this.dom.equipmentLabelRoot=document.querySelector("#blacksmith_equipment__item_label"),this.dom.equipmentSlots=document.querySelectorAll("#blacksmith_equipment_slots div[data-slot-name]"),this.dom.goldSubstract=document.querySelector("#blacksmith_gold_substract"),this.dom.error=document.querySelector("#blacksmith__error"),this.dom.level=document.querySelector(".profile__level"),this.dom.portraitImg=document.querySelector(".profile__portraitImg"),this.dom.goldAmount=document.querySelector("#blacksmith_gold_amount")},t.prototype.setNewShopCountdown=function(){return q(this.dom.countdown)},t.prototype.generalOnDataChange=function(){this.dom.goldAmount.innerText=""+this.userData.gold,this.dom.level.innerHTML="<div class='profile__levelProgress' \n         style='width: "+Math.floor(100*this.userData.exp/F(this.userData.level))+"%'></div>\n         "+this.userData.level,this.dom.portraitImg.src=this.userData.portrait},t.prototype.toogleView=function(){var e=this,t=function(){document.querySelector(".nav").style.display="none",document.querySelector(".mobileNav__icon").src="./images/menu.png"};this.dom.mobileNavFristSwitch.addEventListener("click",(function(){t(),e.dom.blacksmithContainer.classList.remove("disabled"),e.dom.profileContainer.classList.add("disabled")})),this.dom.mobileNavSecondSwitch.addEventListener("click",(function(){t(),e.dom.blacksmithContainer.classList.add("disabled"),e.dom.profileContainer.classList.remove("disabled")}))},t.prototype.mobile=function(){var e=this;window.innerWidth<1024&&(this.dom.profileContainer.classList.add("disabled"),this.toogleView()),window.addEventListener("resize",(function(){window.innerWidth<1024?(e.dom.profileContainer.classList.add("disabled"),!e.dom.profileContainer.classList.contains("disabled")&&e.toogleView()):window.innerWidth>=1024&&(e.dom.profileContainer.classList.remove("disabled"),e.dom.blacksmithContainer.classList.remove("disabled"))}))},t.prototype.bugfix=function(){var e=this;document.querySelector("#blacksmith_backpack_slots").addEventListener("mouseleave",(function(){e.dom.backpackLabelRoot.className="profile__itemSpecs disabled",e.dom.backpackLabelRoot.innerHTML=""}))},t.prototype.onDataChange=function(){this.removeEvents(),this.setShop(),this.setUserBackpack(),this.setUserEquipment(),this.generalOnDataChange(),this.dragAndDrop(),this.bugfix()},t.prototype.getDOMElements=function(){this.dom={blacksmithContainer:document.querySelector(".blacksmith__item:last-child"),profileContainer:document.querySelector(".blacksmith__item:first-child"),mobileNavFristSwitch:document.querySelector(".mobileNav__item:first-child"),mobileNavSecondSwitch:document.querySelector(".mobileNav__item:last-child"),level:document.querySelector(".profile__level"),portraitImg:document.querySelector(".profile__portraitImg"),market:document.querySelector("#market_slots"),marketSlots:document.querySelectorAll("#market_slots .market__slotWrapper"),itemLabel:document.querySelector("#blacksmith_item_label"),equipmentSlots:document.querySelectorAll("#blacksmith_equipment_slots div[data-slot-name]"),goldAmount:document.querySelector("#blacksmith_gold_amount"),goldBar:document.querySelector("#blacksmith_gold_bar"),goldSubstract:document.querySelector("#blacksmith_gold_substract"),backpack:document.querySelector("#blacksmith_backpack_slots"),body:document.querySelector("body"),error:document.querySelector("#blacksmith__error"),countdown:document.querySelector("#blacksmith_countdown_time"),backpackLabelRoot:document.querySelector("#blacksmith_backpack_item_label"),equipmentLabelRoot:document.querySelector("#blacksmith_equipment__item_label"),backpackSlots:document.querySelectorAll("#blacksmith_backpack_slots .profile__backpackItem")}},t.prototype.render=function(){var e;this.root.innerHTML="\n  <section class='blacksmith background'>\n    <div class='blacksmith__item'>\n        <div class='game__errorWrapper disabled' id='blacksmith__error'>Your backpack is full</div>\n\n        <div class='profile__equipment profile__equipment-currentUser' id='blacksmith_equipment_slots'>\n\n            <div class='profile__equipmentItem profile__equipmentItem-helmet' data-slot-name='helmet' title='Helmet'>\n                <img src='/images/profile_equipment_helmet.png' class=\"profile__equipmentIcon\" />\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-armor' data-slot-name='chestPlate'\n                title='Chest plate'>\n                <img src='/images/profile_equipment_armor.png' class=\"profile__equipmentIcon\" />\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-gloves' data-slot-name='gloves' title='Gloves'>\n                <img src='/images/profile_equipment_gloves.png' class=\"profile__equipmentIcon\" />\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-weapon' data-slot-name='weapon' title='Weapon'>\n                <img src='/images/profile_equipment_weapon.png' class=\"profile__equipmentIcon\" />\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-shield' data-slot-name='shield' title='Shield'>\n                <img src='/images/profile_equipment_shield.png' class=\"profile__equipmentIcon\" />\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-special' data-slot-name='special' title='Special'>\n                <img src='/images/profile_equipment_special.png' class=\"profile__equipmentIcon\" />\n            </div>\n\n            <div class='profile__portrait'>\n                <img class='profile__portraitImg' src='"+(e=this.userData).portrait+"' />\n            </div>\n\n            <div class='profile__info'>\n\n                <div class='profile__itemSpecs disabled' id='blacksmith_equipment__item_label'>\n\n                    <div id='blacksmith_equipment_label_wrapper'> </div>\n\n                    <div class='profile__actionError' id='blacksmith_equipment_move_item_error'></div>\n                    <div class='profile__actionWrapper' id='blacksmith_equipment_move_item_btn'>\n                        <img src='./images/profile_icon_backpack.png' class='profile__equipmentItemSellIcon' />\n                        <strong class='profile__actionName'>Move to backpack</strong>\n                    </div>\n\n                    <div class='profile__equipmentItemSellWrapper'>\n                        <img src='./images/profile_sell_item_icon.png' class='profile__equipmentItemSellIcon' />\n                        <strong class='profile__equipmentItemSellPrice' id='blacksmith_sell_item_value'></strong>\n                    </div>\n\n                </div>\n\n                <div class='profile__level' title='Level exp: "+e.exp+"/"+e.nextLevelAt+"'>\n                    <div class='profile__levelProgress'\n                        style='width: "+Math.floor(100*e.exp/F(e.level))+"%'></div>\n                    "+e.level+"\n                </div>\n\n                <strong class='profile__nickname'>"+e.nick+"</strong>\n                <div class='profile__goldBar' id='blacksmith_gold_bar'>\n                    <img class='profile__goldIcon' src='./images/coin.png' alt='coin' />\n                    <strong class='profile__goldAmount' id='blacksmith_gold_amount'>"+e.gold+"</strong>\n                </div>\n\n                <div class='profile__goldSubstract disabled' id='blacksmith_gold_substract'></div>\n\n            </div>\n        </div>\n\n        <div class='profile__backpack' id='blacksmith_backpack_slots'>\n\n            <div>\n\n                <div class='profile__backpackRow'> \n                    <div class='profile__backpackItem' data-backpack-slot='1'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='2'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='3'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='4'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='5'> </div>\n                </div>\n\n                <div class='profile__backpackLabelWrapper profile__backpackLabelWrapper-blacksmith'>\n\n                    <div class='profile__itemSpecs  profile__itemSpecs-backpackSlot disabled'\n                        id='blacksmith_backpack_item_label'>\n                        <div id='blacksmith_backpack_label_wrapper'></div>\n                        <div class='profile__actionError' id='blacksmith_backpack_move_item_error'></div>\n                    </div>\n\n                </div>\n\n                <div class='profile__backpackRow'>\n                    <div class='profile__backpackItem' data-backpack-slot='6'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='7'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='8'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='9'> </div>\n                    <div class='profile__backpackItem' data-backpack-slot='10'> </div>\n                </div>\n\n            </div>\n\n            <img src='./images/profile_treasure_chest.png' class='profile__mobileTreasureChest' />\n\n        </div>\n\n    </div>\n\n    <div class='blacksmith__item market__shop' id='blacksmith_shop_wrapper'>\n\n        <div class='market__deliveryWrapper market__deliveryWrapper-blacksmith'>\n            <div class='market__deliveryTitle'>Next delivery in</div>\n            <div class='market__deliveryTime' id='blacksmith_countdown_time'></div>\n        </div>\n\n        <div class='market__characterWrapper'>\n            <div class='market__itemInfoWrapper disabled' id='blacksmith_item_label'></div>\n            <img class='market__characterImg' src='./images/blacksmith.png' alt='blacksmith' />\n            <img class='blacksmith__mobileTable' src='./images/blacksmith_table.png' />\n        </div>\n\n        <div class='market__itemsList' id='market_slots'>\n            <div class='market__shopRow'>\n\n                <div class='market__shopFrame blacksmith__frame'>\n                    <div class='market__slotWrapper'>\n                        <div class='market__slot' draggable='true'></div>\n                    </div>\n                </div>\n\n                <div class='market__shopFrame blacksmith__frame'>\n                    <div class='market__slotWrapper'>\n                        <div class='market__slot' draggable='true'></div>      \n                    </div>\n                </div>\n\n\n                <div class='market__shopFrame blacksmith__frame'>\n                    <div class='market__slotWrapper'>\n                        <div class='market__slot' draggable='true'></div>\n                    </div>\n                </div>\n\n\n            </div>\n\n            <div class='market__shopRow'>\n                <div class='market__shopFrame blacksmith__frame'>\n                    <div class='market__slotWrapper'>\n                        <div class='market__slot' draggable='true'></div>  \n                    </div>\n                </div>\n\n\n                <div class='market__shopFrame blacksmith__frame'>\n                    <div class='market__slotWrapper'>\n                        <div class='market__slot' draggable='true'> </div>\n                    </div>\n                </div>\n\n                <div class='market__shopFrame blacksmith__frame'>\n                    <div class='market__slotWrapper'>\n                        <div class='market__slot' draggable='true'></div>\n                    </div>\n                </div>\n\n            </div>\n            \n        </div>\n\n    </div>\n\n</section>\n  ",this.mobileNav.innerHTML="\n<div class='mobileNav__item'>\n\n<div class='mobileNav__itemIcon'> \n   <img src='./images/mobileNav_blacksmith_anvil.png' />\n</div>\n\n<div class='mobileNav__itemName'> \n   Blacksmith\n</div>\n\n</div>\n\n<div class='mobileNav__item'>\n\n<div class='mobileNav__itemIcon'> \n <img src='./images/mobileNav_blacksmith_knight.png' />\n</div>\n\n<div class='mobileNav__itemName'> \n   Profile\n</div>\n\n</div>\n"},t.prototype.initScripts=function(){this.mobile(),this.setNewShopCountdown(),this.setUserBackpack(),this.setUserEquipment(),this.setShop(),this.buyItemByLabel(),this.dragAndDrop(),this.bugfix()},t}(M),H=["./images/hero_portraits/hero_portrait_1.png","./images/hero_portraits/hero_portrait_2.png","./images/hero_portraits/hero_portrait_3.png","./images/hero_portraits/hero_portrait_4.png","./images/hero_portraits/hero_portrait_5.png","./images/hero_portraits/hero_portrait_6.png","./images/hero_portraits/hero_portrait_7.png","./images/hero_portraits/hero_portrait_8.png","./images/hero_portraits/hero_portrait_9.png","./images/hero_portraits/hero_portrait_10.png","./images/hero_portraits/hero_portrait_11.png","./images/hero_portraits/hero_portrait_12.png","./images/hero_portraits/hero_portrait_13.png"],G=function(e,t){return Math.ceil(e+.05*t*.5)},K=function(e,t){return"\n      <div class=' profile__itemSpecs potion__label potion__label-"+t+"'>\n      <h3 class='market__itemTitle white  "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n                 \n      "+e.name+"\n   \n      </h3>\n   \n      <strong class='market__itemRarity itemRarity market__itemRarity-legendary'>Legendary</strong>\n      "+(void 0!==e.description?" <p class='market__itemDsc white'>'"+e.description+"' </p>":"")+"\n      <table class='market__itemStats itemStats'>\n        <tbody>\n\n\n        "+(null!==e.properties.strength?"<tr>\n            <td>Strength</td>\n            <td><strong class='better'> + "+e.properties.strength+"%</strong></td>\n          </tr>":"")+"\n      \n           \n\n         "+(null!==e.properties.physicalEndurance?"<tr>\n             <td>Physical endurance</td>\n             <td><strong class='better'> + "+e.properties.physicalEndurance+"%</strong></td>\n            </tr>":"")+"   \n         \n          "+(null!==e.properties.defence?" \n          <tr>\n            <td>Defence</td>\n            <td><strong class='better'> + "+e.properties.defence+"%</strong></td>\n          </tr>":"")+"\n          \n          "+(null!==e.properties.luck?"\n          <tr>\n            <td>Luck</td>\n            <td><strong class='better'> + "+e.properties.luck+"%</strong></td>\n          </tr>\n          ":"")+"\n        </tbody>\n      </table>\n      </div>\n    "},$=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="   <a href='https://www.freepik.com/vectors/background' target=\"_black\">Background vector created by upklyak -\n        www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_profile.jpg",t.dom={mobileNavFristSwitch:document.querySelector(".mobileNav__item:first-child"),mobileNavSecondSwitch:document.querySelector(".mobileNav__item:last-child"),profileContainer:document.querySelector(".profile__item:first-child"),backpackContainer:document.querySelector(".profile__item:last-child"),potionLabel:document.querySelector(".profile__generalLabelWrapper"),stats:{strength:document.querySelector("#profile_strength_stat .profile__item--amount"),strengthCost:document.querySelector("#profile_strength_stat .profile__item--cost strong"),strengthBtn:document.querySelector("#profile_strength_stat .profile__item--buyBtn button"),damage:document.querySelector("#profile_damage_stat .profile__item--amount"),physicalEndurance:document.querySelector("#profile_PE_stat .profile__item--amount"),physicalEnduranceCost:document.querySelector("#profile_PE_stat .profile__item--cost strong"),physicalEnduranceBtn:document.querySelector("#profile_PE_stat .profile__item--buyBtn button"),health:document.querySelector("#profile_health_stat .profile__item--amount"),defence:document.querySelector("#profile_defence_stat .profile__item--amount"),defenceCost:document.querySelector("#profile_defence_stat .profile__item--cost strong"),defenceBtn:document.querySelector("#profile_defence_stat .profile__item--buyBtn button"),damageReduce:document.querySelector("#profile_damegeReduce_stat .profile__item--amount"),luck:document.querySelector("#profile_luck_stat .profile__item--amount"),luckCost:document.querySelector("#profile_luck_stat .profile__item--cost strong"),luckBtn:document.querySelector("#profile_luck_stat .profile__item--buyBtn button"),critical:document.querySelector("#profile_critical_stat .profile__item--amount")},level:document.querySelector(".profile__level"),portrait:{img:document.querySelector(".profile__portraitImg"),prevBtn:document.querySelector(".profile__portraitBtn-left"),nextBtn:document.querySelector(".profile__portraitBtn-right")},equipmentLabelRoot:document.querySelector("#profile_equipment__item_label"),backpackLabelRoot:document.querySelector("#profile_backpack_item_label"),general:{goldAmount:document.querySelector("#profile_general_gold .profile__generalText"),petImg:document.querySelector("#profile_general_pet .profile__generalImg"),petRentTime:document.querySelector("#profile_general_pet .profile__generalText"),potionImgFirst:document.querySelector("#profile_general_potion_first .profile__generalImg"),potionTimeFirst:document.querySelector("#profile_general_potion_first .profile__generalText"),potionImgSecond:document.querySelector("#profile_general_potion_second .profile__generalImg"),potionTimeSecond:document.querySelector("#profile_general_potion_second .profile__generalText")},equipmentSlots:document.querySelectorAll("#profile_equipment_slots div[data-slot-name]"),backpackSlots:document.querySelectorAll("#profile_backpack_slots .profile__backpackItem"),description:document.querySelector(".profile__description textarea")},t.hideLabelInterval={potion:null,equipment:null,backpack:null},t.generalInterval={pet:null,potionFirst:null,potionSecond:null},t}return $(t,e),t.prototype.labelForPotions=function(){var e=this;if(null!==this.userData.potions.first){var t=o[o.findIndex((function(t){return t.id===e.userData.potions.first.id}))];this.dom.general.potionImgFirst.addEventListener("mouseover",(function(){e.dom.equipmentLabelRoot.classList.add("disabled"),e.dom.backpackLabelRoot.classList.add("disabled"),e.dom.potionLabel.innerHTML=K(t,1)})),this.dom.general.potionImgFirst.addEventListener("mouseleave",(function(){e.dom.potionLabel.innerHTML=""}))}if(null!==this.userData.potions.second){var n=o[o.findIndex((function(t){return t.id===e.userData.potions.second.id}))];this.dom.general.potionImgSecond.addEventListener("mouseover",(function(){e.dom.equipmentLabelRoot.classList.add("disabled"),e.dom.backpackLabelRoot.classList.add("disabled"),e.dom.potionLabel.innerHTML=K(n,2)})),this.dom.general.potionImgSecond.addEventListener("mouseleave",(function(){e.dom.potionLabel.innerHTML=""}))}},t.prototype.increaseStatistic=function(e,t){var n=G(this.userData.rawStats[e],this.userData.guardPayout);this.userData.gold>=n?(this.userData.rawStats[e]+=1,this.userData.gold-=n,v(this.userData)):(t.classList.add("profile__item-notAfford"),setTimeout((function(){t.classList.remove("profile__item-notAfford")}),1e3))},t.prototype.increaseStatisticEvents=function(){var e=this;this.dom.stats.strengthBtn.addEventListener("click",(function(){return e.increaseStatistic("strength",e.dom.stats.strengthCost)})),this.dom.stats.luckBtn.addEventListener("click",(function(){return e.increaseStatistic("luck",e.dom.stats.luckCost)})),this.dom.stats.physicalEnduranceBtn.addEventListener("click",(function(){return e.increaseStatistic("physicalEndurance",e.dom.stats.physicalEnduranceCost)})),this.dom.stats.defenceBtn.addEventListener("click",(function(){return e.increaseStatistic("defence",e.dom.stats.defenceCost)}))},t.prototype.setTableStats=function(){this.dom.stats.strength.innerText=""+this.userStats.strength,this.dom.stats.strengthCost.innerText=""+G(this.userData.rawStats.strength,this.userData.guardPayout),this.dom.stats.damage.innerText=""+this.userStats.damage,this.dom.stats.physicalEndurance.innerText=""+this.userStats.physicalEndurance,this.dom.stats.physicalEnduranceCost.innerText=""+G(this.userData.rawStats.physicalEndurance,this.userData.guardPayout),this.dom.stats.health.innerText=""+this.userStats.health,this.dom.stats.defence.innerText=""+this.userStats.defence,this.dom.stats.defenceCost.innerText=""+G(this.userData.rawStats.defence,this.userData.guardPayout),this.dom.stats.damageReduce.innerText=""+this.userStats.damageReduce,this.dom.stats.luck.innerText=""+this.userStats.luck,this.dom.stats.luckCost.innerText=""+G(this.userData.rawStats.luck,this.userData.guardPayout),this.dom.stats.critical.innerText=""+this.userStats.critical},t.prototype.changePortrait=function(){var e=this,t=H.indexOf(this.userData.portrait);this.dom.portrait.nextBtn.addEventListener("click",(function(){t<H.length-1?(t++,e.userData.portrait=H[t]):(t=0,e.userData.portrait=H[t]),v(e.userData)})),this.dom.portrait.prevBtn.addEventListener("click",(function(){0===t?(t=H.length-1,e.userData.portrait=H[t]):(t--,e.userData.portrait=H[t]),v(e.userData)}))},t.prototype.changeUserDescription=function(){var e=this;this.dom.description.addEventListener("focusout",(function(){e.userData.description=e.dom.description.value,v(e.userData)}))},t.prototype.setCountdown=function(e,t,n){var r=this,i=(new Date).getTime(),o=(e.getTime()-i)/1e3/60,a=(new Date).getTime()+60*o*1e3;return setInterval((function(){var o,s,u,c=(new Date).getTime(),l=(a-c)/1e3;if(l>=0){l%=86400,o=parseInt((l/3600).toString()),l%=3600,s=parseInt((l/60).toString()),u=parseInt((l%60).toString());var d=Math.floor(Math.abs(e.getTime()-i)/864e5);t.innerText=0!==d?1===d?d+" Day left":d+" Days left":(0!==o?o+"h : ":"")+" "+s+"m : "+u+"s"}else"pet"===n?(r.dom.general.petRentTime.innerText="No pet",r.dom.general.petImg.innerHTML='<img src="/images/profile_pet_slot.png" title="Pet slot" />',r.dom.general.petImg.classList.remove("profile__generalImg-item"),clearInterval(r.generalInterval.pet)):"potion1"===n?(r.dom.general.potionTimeFirst.innerText="No potion",r.dom.general.potionImgFirst.innerHTML='<img src="/images/profile_elixir_slot.png" title="Elixir slot #2" />',r.dom.general.potionImgFirst.classList.remove("profile__generalImg-item"),clearInterval(r.generalInterval.potionFirst)):"potion2"===n&&(r.dom.general.potionTimeSecond.innerText="No potion",r.dom.general.potionImgSecond.innerHTML='<img src="/images/profile_elixir_slot.png" title="Elixir slot #2" />',r.dom.general.potionImgSecond.classList.remove("profile__generalImg-item"),clearInterval(r.generalInterval.potionSecond)),v(r.userData)}),1e3)},t.prototype.setGeneral=function(){var e=this;if(null!==this.userData.pet?(this.dom.general.petImg.innerHTML="<img src="+this.userData.pet.imgSmallSrc+" title='Pet slot' />",this.dom.general.petImg.classList.add("profile__generalImg-item"),this.generalInterval.pet=this.setCountdown(this.userData.pet.rentEnd,this.dom.general.petRentTime,"pet")):this.dom.general.petRentTime.innerText="No pet",null!==this.userData.potions.first){var t=o[o.findIndex((function(t){return t.id===e.userData.potions.first.id}))];this.dom.general.potionImgFirst.innerHTML="<img src="+t.src+" title='Elixir slot #1'/>",this.dom.general.potionImgFirst.classList.add("profile__generalImg-item"),this.generalInterval.potionFirst=this.setCountdown(this.userData.potions.first.end,this.dom.general.potionTimeFirst,"potion1")}else this.dom.general.potionTimeFirst.innerText="No potion";null!==this.userData.potions.second?(t=o[o.findIndex((function(t){return t.id===e.userData.potions.second.id}))],this.dom.general.potionImgSecond.innerHTML="<img src="+t.src+" title='Elixir slot #1'/>",this.dom.general.potionImgSecond.classList.add("profile__generalImg-item"),this.generalInterval.potionSecond=this.setCountdown(this.userData.potions.second.end,this.dom.general.potionTimeSecond,"potion2")):this.dom.general.potionTimeSecond.innerText="No potion",this.dom.description.value=this.userData.description},t.prototype.generalOnUpdate=function(){this.dom.level.innerHTML=" <div class='profile__levelProgress'\n        style='width: "+Math.floor(100*this.userData.exp/F(this.userData.level))+"%'></div>\n        "+this.userData.level,this.dom.portrait.img.src=this.userData.portrait,this.dom.general.goldAmount.innerText=""+this.userData.gold},t.prototype.moveItemToEquipment=function(e){var t=this.userData.equipmentItems.findIndex((function(t){return t.type===e.type})),n=this.userData.backpackItems.findIndex((function(t){return t.id===e.id}));-1!==t?(this.userData.backpackItems.splice(n,1),this.userData.backpackItems.push(this.userData.equipmentItems[t]),this.userData.equipmentItems[t]=e,this.dom.backpackLabelRoot.classList.add("disabled"),v(this.userData)):(this.userData.backpackItems.splice(n,1),this.userData.equipmentItems.push(e),this.dom.backpackLabelRoot.classList.add("disabled"),v(this.userData))},t.prototype.moveItemToBackpack=function(e,t){if(this.userData.backpackItems.length<this.dom.backpackSlots.length){var n=this.userData.equipmentItems.findIndex((function(t){return t.id===e.id}));n>-1&&this.userData.equipmentItems.splice(n,1),this.userData.backpackItems.push(e),v(this.userData),this.dom.equipmentLabelRoot.className="profile__itemSpecs disabled"}else t.innerText="Your backpack is full"},t.prototype.backpackLabel=function(e,t){var n=this;this.dom.equipmentSlots.forEach((function(e){return e.firstElementChild.classList.remove("profile__equipmentIcon-pulse")})),this.dom.equipmentLabelRoot.innerHTML="",this.dom.equipmentLabelRoot.classList.add("disabled"),clearInterval(this.hideLabelInterval.backpack);var r=document.querySelector("#profile_equipment_slots div[data-slot-name = "+e.type+"]");r.firstElementChild.classList.add("profile__equipmentIcon-pulse"),this.dom.backpackLabelRoot.innerHTML="";var i=this.userData.equipmentItems[this.userData.equipmentItems.findIndex((function(t){return t.type===e.type}))],o=document.createElement("div");o.className="profile__itemSpecs profile__itemSpecs-backpackSlot profile__backpackLabel-"+(t+1),o.innerHTML=function(e,t){return void 0===t?"\n\n        <h3 class='market__itemTitle itemTitle "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n        \n        "+e.name+"\n        </h3>\n        \n        "+("common"===e.rarity?" <strong class='market__itemRarity itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n        "+(void 0!==e.description?" <p class='market__itemDsc itemDsc '>'"+e.description+"' </p>":"")+"\n        <table class='market__itemStats itemStats'>\n          <tbody>\n\n\n          "+(null!==e.properties.strength?"<tr>\n              <td>Strength</td>\n              <td>"+e.properties.strength+"</td>\n            </tr>":"")+"\n        \n             \n\n           "+(null!==e.properties.physicalEndurance?"<tr>\n               <td>Physical endurance</td>\n               <td>"+e.properties.physicalEndurance+"</td>\n              </tr>":"")+"   \n           \n            "+(null!==e.properties.defence?" \n            <tr>\n              <td>Defence</td>\n              <td>"+e.properties.defence+"</td>\n            </tr>":"")+"\n            \n            "+(null!==e.properties.luck?"\n            <tr>\n              <td>Luck</td>\n              <td>"+e.properties.luck+"</td>\n            </tr>\n            ":"")+"\n          \n          </tbody>\n        </table>\n\n        <div class='profile__actionError' id='profile_backpack_move_item_error'></div>\n        <div class='profile__actionWrapper' id='profile_backpack_move_item_btn'>\n          <img src='./images/profile_icon_backpack.png' class='profile__equipmentItemSellIcon' id='profile_backpack_replace_item_icon'/>\n          <strong class='profile__actionName'>Equip</strong>\n        </div>\n    \n        ":"\n\n        \n        <h3 class='market__itemTitle itemTitle "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n        \n        "+e.name+"\n        </h3>\n        "+("common"===e.rarity?" <strong class='market__itemRarity itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n        "+(void 0!==e.description?" <p class='market__itemDsc itemDsc'>'"+e.description+"' </p>":"")+"\n        <table class='market__itemStats itemStats'>\n          <tbody>\n\n\n          "+(null!==e.properties.strength?"<tr>\n              <td>Strength</td>\n              <td>"+e.properties.strength+" "+(null!==t.properties.strength?B(e.properties.strength,t.properties.strength):"")+"</td>\n            </tr>":"")+"\n        \n             \n\n           "+(null!==e.properties.physicalEndurance?"<tr>\n               <td>Physical endurance</td>\n               <td>"+e.properties.physicalEndurance+" "+(null!==t.properties.physicalEndurance?B(e.properties.physicalEndurance,t.properties.physicalEndurance):"")+"</td>\n              </tr>":"")+"   \n           \n            "+(null!==e.properties.defence?" \n            <tr>\n              <td>Defence</td>\n              <td>"+e.properties.defence+" "+(null!==t.properties.defence?B(e.properties.defence,t.properties.defence):"")+"</td>\n            </tr>":"")+"\n            \n            "+(null!==e.properties.luck?"\n            <tr>\n              <td>Luck</td>\n              <td>"+e.properties.luck+" "+(null!==t.properties.luck?B(e.properties.luck,t.properties.luck):"")+"</td>\n            </tr>\n            ":"")+"\n          </tbody>\n        </table>\n\n        <div class='profile__actionError' id='profile_backpack_move_item_error'></div>\n        <div class='profile__actionWrapper' id='profile_backpack_move_item_btn'>\n          <img src='./images/profile_icon_backpack.png' class='profile__equipmentItemSellIcon' id='profile_backpack_replace_item_icon'/>\n          <strong class='profile__actionName'>Equip</strong>\n        </div>\n        "}(e,i),o.querySelector("#profile_backpack_move_item_btn").addEventListener("click",(function(){return n.moveItemToEquipment(e)})),o.addEventListener("mouseover",(function(){return r.firstElementChild.classList.add("profile__equipmentIcon-pulse"),clearInterval(n.hideLabelInterval.backpack)})),o.addEventListener("mouseleave",(function(){n.dom.backpackLabelRoot.innerHTML="",r.firstElementChild.classList.remove("profile__equipmentIcon-pulse")})),this.dom.backpackLabelRoot.classList.remove("disabled"),this.dom.backpackLabelRoot.appendChild(o)},t.prototype.equipmentLabel=function(e){var t,n=this;this.dom.backpackLabelRoot.innerHTML="",this.dom.backpackLabelRoot.classList.add("disabled"),clearInterval(this.hideLabelInterval.equipment),this.dom.backpackLabelRoot.classList.add("disabled"),this.dom.equipmentLabelRoot.className="profile__itemSpecs disabled",this.dom.equipmentLabelRoot.classList.add("legendary"===e.rarity?"profile__itemSpecs-legendary":"profile__itemSpecs-common"),this.dom.equipmentLabelRoot.classList.add("profile__itemSpecs-"+e.type),this.dom.equipmentLabelRoot.innerHTML="\n    <h3 class='market__itemTitle itemTitle "+("legendary"===(t=e).rarity?"market__itemTitle-legendary":"market__itemTitle-common")+"'>"+t.name+"</h3>\n                          <strong class='market__itemRarity itemRarity  "+("legendary"===t.rarity?"market__itemRarity-legendary":"market__itemRarity-common")+"'>"+t.rarity+"</strong>\n                          "+(void 0!==t.description?"<p class='market__itemDsc itemDsc'>'"+t.description+"' </p>":"")+"\n                          <table class='market__itemStats itemStats'>\n                          <tbody>\n             \n                          "+(null!==t.properties.strength?"<tr>\n                              <td>Strength</td>\n                              <td>"+t.properties.strength+"</td>\n                            </tr>":"")+"\n                           \n                        \n                          "+(null!==t.properties.physicalEndurance?"<tr>\n                                <td>Physical endurance</td>\n                                <td>"+t.properties.physicalEndurance+"</td>\n                              </tr>":"")+"\n                             \n                            "+(null!==t.properties.defence?"<tr>\n                                    <td>Defence</td>\n                                    <td>"+t.properties.defence+"</td>\n                                  </tr>":"")+"\n                                                                                                                    \n                            "+(null!==t.properties.luck?"<tr>\n                                    <td>Luck</td>\n                                    <td>"+t.properties.luck+"</td>\n                                </tr>":"")+"                                  \n                          </tbody>\n                        </table>\n                        <div class='profile__actionError' id='profile_equipment_move_item_error'></div>\n                        <div class='profile__actionWrapper' id='profile_equipment_move_item_btn'>\n                          <img src='./images/profile_icon_backpack.png' class='profile__equipmentItemSellIcon'/>\n                          <strong class='profile__actionName'>Move to backpack</strong>\n                        </div>\n    ",this.dom.equipmentLabelRoot.classList.remove("disabled"),this.dom.equipmentLabelRoot.addEventListener("mouseover",(function(){return clearInterval(n.hideLabelInterval.equipment)})),this.dom.equipmentLabelRoot.addEventListener("mouseleave",(function(){n.dom.equipmentLabelRoot.innerHTML="",n.dom.equipmentLabelRoot.classList.add("disabled")}));var r=this.dom.equipmentLabelRoot.querySelector("#profile_equipment_move_item_btn"),i=this.dom.equipmentLabelRoot.querySelector("#profile_equipment_move_item_error");r.addEventListener("click",(function(){return n.moveItemToBackpack(e,i)}))},t.prototype.setUserBackpack=function(){var e=this;this.dom.backpackSlots.forEach((function(e){e.innerHTML=""})),this.userData.backpackItems.forEach((function(t,n){e.dom.backpackSlots[n].innerHTML="<img src='"+t.src+"' data-backpack-item-id='"+t.id+"' data-slot-name='"+t.type+"'/>",e.dom.backpackSlots[n].addEventListener("mouseover",(function(){return e.backpackLabel(t,n)})),e.dom.backpackSlots[n].addEventListener("mouseleave",(function(){e.hideLabelInterval.backpack=setTimeout((function(){e.dom.backpackLabelRoot.innerHTML=""}),800),e.dom.equipmentSlots.forEach((function(e){return e.firstElementChild.classList.remove("profile__equipmentIcon-pulse")}))}))}))},t.prototype.setUserEquipment=function(){var e=this;this.clearEquipmentSlots(),this.userData.equipmentItems.forEach((function(t){var n=document.querySelector("#profile_equipment_slots div[data-slot-name = '"+t.type+"']");n.innerHTML="  <img src='"+t.src+'\' class="profile__equipmentIcon"/>',n.addEventListener("mouseover",(function(){return e.equipmentLabel(t)})),n.addEventListener("mouseleave",(function(t){e.hideLabelInterval.equipment=setTimeout((function(){e.dom.equipmentLabelRoot.innerHTML="",e.dom.equipmentLabelRoot.classList.add("disabled")}),800)}))}))},t.prototype.clearEquipmentSlots=function(){this.dom.equipmentSlots.forEach((function(e){var t=e;e.innerHTML="<img src='"+x(t.dataset.slotName)+"' class='profile__equipmentIcon'/>"}))},t.prototype.removeEvents=function(){var e=document.querySelector(".profile__equipment");e.replaceWith(e.cloneNode(!0)),this.dom.equipmentLabelRoot=document.querySelector("#profile_equipment__item_label"),this.dom.equipmentSlots=document.querySelectorAll("#profile_equipment_slots div[data-slot-name]");var t=document.querySelector("#profile_backpack_slots");t.replaceWith(t.cloneNode(!0)),this.dom.backpackLabelRoot=document.querySelector(".profile__backpackLabelWrapper"),this.dom.backpackSlots=document.querySelectorAll("#profile_backpack_slots .profile__backpackItem");var n=document.querySelector(".profile__general");n.replaceWith(n.cloneNode(!0)),this.dom.potionLabel=document.querySelector(".profile__generalLabelWrapper"),this.dom.general={goldAmount:document.querySelector("#profile_general_gold .profile__generalText"),petImg:document.querySelector("#profile_general_pet .profile__generalImg"),petRentTime:document.querySelector("#profile_general_pet .profile__generalText"),potionImgFirst:document.querySelector("#profile_general_potion_first .profile__generalImg"),potionTimeFirst:document.querySelector("#profile_general_potion_first .profile__generalText"),potionImgSecond:document.querySelector("#profile_general_potion_second .profile__generalImg"),potionTimeSecond:document.querySelector("#profile_general_potion_second .profile__generalText")},this.dom.portrait={img:document.querySelector(".profile__portraitImg"),prevBtn:document.querySelector(".profile__portraitBtn-left"),nextBtn:document.querySelector(".profile__portraitBtn-right")}},t.prototype.toogleView=function(){var e=this,t=function(){document.querySelector(".nav").style.display="none",document.querySelector(".mobileNav__icon").src="./images/menu.png"};this.dom.mobileNavFristSwitch.addEventListener("click",(function(){t(),e.dom.backpackContainer.classList.add("disabled"),e.dom.profileContainer.classList.remove("disabled")})),this.dom.mobileNavSecondSwitch.addEventListener("click",(function(){t(),e.dom.backpackContainer.classList.remove("disabled"),e.dom.profileContainer.classList.add("disabled")}))},t.prototype.mobile=function(){var e=this;window.innerWidth<1024&&(this.dom.backpackContainer.classList.add("disabled"),this.toogleView()),window.addEventListener("resize",(function(){window.innerWidth<1024?(e.dom.backpackContainer.classList.add("disabled"),!e.dom.backpackContainer.classList.contains("disabled")&&e.toogleView()):window.innerWidth>=1024&&(e.dom.backpackContainer.classList.remove("disabled"),e.dom.profileContainer.classList.remove("disabled"))}))},t.prototype.getDOMElements=function(){this.dom={mobileNavFristSwitch:document.querySelector(".mobileNav__item:first-child"),mobileNavSecondSwitch:document.querySelector(".mobileNav__item:last-child"),profileContainer:document.querySelector(".profile__item:first-child"),backpackContainer:document.querySelector(".profile__item:last-child"),potionLabel:document.querySelector(".profile__generalLabelWrapper"),stats:{strength:document.querySelector("#profile_strength_stat .profile__item--amount"),strengthCost:document.querySelector("#profile_strength_stat .profile__item--cost strong"),strengthBtn:document.querySelector("#profile_strength_stat .profile__item--buyBtn button"),damage:document.querySelector("#profile_damage_stat .profile__item--amount"),physicalEndurance:document.querySelector("#profile_PE_stat .profile__item--amount"),physicalEnduranceCost:document.querySelector("#profile_PE_stat .profile__item--cost strong"),physicalEnduranceBtn:document.querySelector("#profile_PE_stat .profile__item--buyBtn button"),health:document.querySelector("#profile_health_stat .profile__item--amount"),defence:document.querySelector("#profile_defence_stat .profile__item--amount"),defenceCost:document.querySelector("#profile_defence_stat .profile__item--cost strong"),defenceBtn:document.querySelector("#profile_defence_stat .profile__item--buyBtn button"),damageReduce:document.querySelector("#profile_damegeReduce_stat .profile__item--amount"),luck:document.querySelector("#profile_luck_stat .profile__item--amount"),luckCost:document.querySelector("#profile_luck_stat .profile__item--cost strong"),luckBtn:document.querySelector("#profile_luck_stat .profile__item--buyBtn button"),critical:document.querySelector("#profile_critical_stat .profile__item--amount")},level:document.querySelector(".profile__level"),portrait:{img:document.querySelector(".profile__portraitImg"),prevBtn:document.querySelector(".profile__portraitBtn-left"),nextBtn:document.querySelector(".profile__portraitBtn-right")},general:{goldAmount:document.querySelector("#profile_general_gold .profile__generalText"),petImg:document.querySelector("#profile_general_pet .profile__generalImg"),petRentTime:document.querySelector("#profile_general_pet .profile__generalText"),potionImgFirst:document.querySelector("#profile_general_potion_first .profile__generalImg"),potionTimeFirst:document.querySelector("#profile_general_potion_first .profile__generalText"),potionImgSecond:document.querySelector("#profile_general_potion_second .profile__generalImg"),potionTimeSecond:document.querySelector("#profile_general_potion_second .profile__generalText")},backpackLabelRoot:document.querySelector("#profile_backpack_item_label"),equipmentLabelRoot:document.querySelector("#profile_equipment__item_label"),equipmentSlots:document.querySelectorAll("#profile_equipment_slots div[data-slot-name]"),backpackSlots:document.querySelectorAll("#profile_backpack_slots .profile__backpackItem"),description:document.querySelector(".profile__description textarea")}},t.prototype.initScripts=function(){this.mobile(),this.setUserEquipment(),this.setGeneral(),this.setUserBackpack(),this.changeUserDescription(),this.changePortrait(),this.setTableStats(),this.increaseStatisticEvents(),this.labelForPotions()},t.prototype.onDataChange=function(){this.setHeroStats(),this.setTableStats(),this.removeEvents(),this.generalOnUpdate(),this.setUserBackpack(),this.setUserEquipment(),this.setGeneral(),this.labelForPotions(),this.changePortrait()},t.prototype.render=function(){var e;this.root.innerHTML="\n    <section class=' profile background'>\n\n    <div class='profile__item'>\n        <div class='game__errorWrapper disabled' id='profile__error'></div>\n\n        <div class='profile__equipment profile__equipment-currentUser' id='profile_equipment_slots' title='Helmet'>\n            \n            <div class='profile__equipmentItem profile__equipmentItem-helmet' data-slot-name='helmet'>\n                <img src='/images/profile_equipment_helmet.png' class=\"profile__equipmentIcon\">\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-armor' data-slot-name='chestPlate'\n                title='Chest plate'>\n                <img src='/images/profile_equipment_armor.png' class=\"profile__equipmentIcon\">\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-gloves' data-slot-name='gloves' title='Gloves'>\n                <img src='/images/profile_equipment_gloves.png' class=\"profile__equipmentIcon\">\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-weapon' data-slot-name='weapon' title='Weapon'>\n                <img src='/images/profile_equipment_weapon.png' class=\"profile__equipmentIcon\">\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-shield' data-slot-name='shield' title='Shield'>\n                <img src='/images/profile_equipment_shield.png' class=\"profile__equipmentIcon\">\n            </div>\n\n            <div class='profile__equipmentItem profile__equipmentItem-special' data-slot-name='special' title='Special'>\n                <img src='/images/profile_equipment_special.png' class=\"profile__equipmentIcon\">\n            </div>\n\n            <div class='profile__portrait'>\n\n                <img class='profile__portraitImg' src='"+(e=this.userData).portrait+"' />\n                <div class='profile__portraitActionBar'>\n                    <div class='profile__portraitBtn profile__portraitBtn-left'></div>\n                    <img src='./images/change_portrait_icon.png' class='profile__portraitActionIcon' />\n                    <div class='profile__portraitBtn profile__portraitBtn-right'></div>\n                </div>\n\n            </div>\n\n            <div class='profile__info'>\n\n                <div class='profile__itemSpecs disabled' id='profile_equipment__item_label'></div>\n                <div class='profile__level' title='Level exp: "+e.exp+"/"+e.nextLevelAt+"'>\n                    <div class='profile__levelProgress'\n                        style='width: "+Math.floor(100*e.exp/F(e.level))+"%'></div>\n                    <i>"+e.level+"</i>\n                </div>\n                <strong class='profile__nickname'>"+e.nick+'</strong>\n\n            </div>\n\n        </div>\n\n        <div class=\'profile__description\'>\n            <textarea type="textarea" name="user-description" value=\''+e.description+"' placeholder='Your description'\n                maxLength=\"440\"></textarea>\n        </div>\n\n    </div>\n\n    <div class='profile__item'>\n\n        <div class='profile__backpack' id='profile_backpack_slots'>\n\n            <div class='profile__backpackRow'>\n                <div class='profile__backpackItem' data-backpack-slot='1'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='2'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='3'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='4'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='5'> </div>\n            </div>\n\n            <div class='profile__backpackLabelWrapper'>\n                <div id='profile_backpack_item_label'> </div>\n            </div>\n\n            <div class='profile__backpackRow'>\n                <div class='profile__backpackItem' data-backpack-slot='6'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='7'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='8'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='9'> </div>\n                <div class='profile__backpackItem' data-backpack-slot='10'> </div>\n            </div>\n\n        </div>\n\n\n        <div class='profile__general'>\n            <div class='profile__generalLabelWrapper'></div>\n\n            <div class='profile__generalItem' id='profile_general_gold'>\n                <div class='profile__generalImg'> <img src=\"/images/profile_coins.png\" title=\"Your gold\" /></div>\n                <strong class='profile__generalText'>"+e.gold+"</strong>\n            </div>\n\n            <div class='profile__generalItem' id='profile_general_pet'>\n                <div class='profile__generalImg'> <img src=\"/images/profile_pet_slot.png\" title=\"Pet slot\" /></div>\n                <strong class='profile__generalText'></strong>\n            </div>\n\n            <div class='profile__generalItem' id='profile_general_potion_first'>\n                <div class='profile__generalImg'> <img src=\"/images/profile_elixir_slot.png\" title=\"Elixir slot #1\" />\n                </div>\n                <strong class='profile__generalText'></strong>\n            </div>\n\n            <div class='profile__generalItem' id='profile_general_potion_second'>\n                <div class='profile__generalImg'> <img src=\"/images/profile_elixir_slot.png\" title=\"Elixir slot #2\" />\n                </div>\n                <strong class='profile__generalText'></strong>\n            </div>\n            \n        </div>\n\n        <div class='profile__stats'>\n\n            <table>\n\n                <tbody>\n\n                    <tr id='profile_strength_stat'>\n                        <td class='profile__item--name'> <img src=\"/images/stats_strength.png\" alt=\"strength\" />\n                            <strong>Strength</strong>\n                        </td>\n                        <td class='profile__item--amount'></td>\n                        <td class='profile__item--cost'>\n                            <img src=\"/images/coin.png\" alt=\"coin\" />\n                            <strong></strong>\n                        </td>\n                        <td class='profile__item--buyBtn'>\n                            <button>+</button>\n                        </td>\n                    </tr>\n\n                    <tr id='profile_damage_stat'>\n                        <td class='profile__item--name profile__item--nameBlue'><strong>Damage</strong></td>\n                        <td class='profile__item--amount profile__item--nameBlue'></td>\n                    </tr>\n\n\n                    <tr id='profile_PE_stat'>\n                        <td class='profile__item--name'> <img src=\"/images/stats_runner.png\" alt=\"physical endurance\" />\n                            <strong>physical endurance</strong>\n                        </td>\n                        <td class='profile__item--amount'></td>\n                        <td class='profile__item--cost'>\n                            <img src=\"/images/coin.png\" alt=\"coin\" />\n                            <strong></strong>\n                        </td>\n                        <td class='profile__item--buyBtn'>\n                            <button>+</button>\n                        </td>\n                    </tr>\n\n                    <tr id='profile_health_stat'>\n                        <td class='profile__item--name profile__item--nameBlue'><strong>Health</strong></td>\n                        <td class='profile__item--amount profile__item--nameBlue'></td>\n                    </tr>\n\n                    <tr id='profile_defence_stat'>\n                        <td class='profile__item--name'> <img src=\"/images/stats_defence.png\" alt=\"Defence\" />\n                            <strong>Defence</strong>\n                        </td>\n                        <td class='profile__item--amount'></td>\n                        <td class='profile__item--cost'>\n                            <img src=\"/images/coin.png\" alt=\"coin\" />\n                            <strong></strong>\n                        </td>\n                        <td class='profile__item--buyBtn'>\n                            <button>+</button>\n                        </td>\n                    </tr>\n\n                    <tr id='profile_damegeReduce_stat'>\n                        <td class='profile__item--name profile__item--nameBlue'><strong>Damage reduce</strong></td>\n                        <td class='profile__item--amount profile__item--nameBlue'></td>\n                    </tr>\n\n                    <tr id='profile_luck_stat'>\n\n                        <td class='profile__item--name'> <img src=\"/images/stats_clover.png\" alt=\"Luck\" />\n                            <strong>Luck</strong>\n                        </td>\n\n                        <td class='profile__item--amount'></td>\n\n                        <td class='profile__item--cost'>\n                            <img src=\"/images/coin.png\" alt=\"coin\" />\n                            <strong></strong>\n                        </td>\n                        <td class='profile__item--buyBtn'>\n                            <button>+</button>\n                        </td>\n                    </tr>\n\n                    <tr id='profile_critical_stat'>\n                        <td class='profile__item--name profile__item--nameBlue'><strong>Chance for critical</strong>\n                        </td>\n                        <td class='profile__item--amount profile__item--nameBlue'>11000</td>\n                    </tr>\n\n                </tbody>\n            </table>\n\n        </div>\n\n    </div>\n\n</section>\n    ",this.mobileNav.innerHTML="\n<div class='mobileNav__item'>\n\n    <div class='mobileNav__itemIcon'>\n        <img src='./images/mobileNav_blacksmith_knight.png' />\n    </div>\n\n    <div class='mobileNav__itemName'>\n        Profile\n    </div>\n\n</div>\n\n<div class='mobileNav__item'>\n\n    <div class='mobileNav__itemIcon'>\n        <img src='./images/mobileNav_profile_chest.png' />\n    </div>\n    \n    <div class='mobileNav__itemName'>\n        Backpack\n    </div>\n\n</div>\n"},t}(M),z=["I know it wasn't easy, but you did it","I know it was hard, but at least your work will be well rewarded","One monster killed won't do anything, there are plenty of people in the kingdom who need help","One less monster","The King's Guard needs people like you","I don't know what i will do without you","Good work"],Y=function(e){return e>=400?9e3:e>=300?8e3:e>=250?7e3:e>=250?6e3:e>=200?5e3:e>=160?4e3:e>=130?3e3:e>=100?2e3:e>=75?1e3:e>=50?800:e>=40?690:e>=30?500:e>=20?410:e>=15?330:e>=10?220:e>=5?160:100},Z=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="<a href='https://www.freepik.com/vectors/nature'>Nature vector created by brgfx - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_monster_fight.jpg",t.fightInterval=null,t.dom={fightContainer:document.querySelector("#fight_container"),successSummary:document.querySelector("#successful_fight_summary"),failedSummary:document.querySelector("#failed_fight_summary"),summaryBtns:document.querySelectorAll(".fight__summaryBtn"),monster:{wrapper:document.querySelector(".fight__characterWrapper-monster"),explosion:document.querySelector(".monster__explosionImg"),HP:document.querySelector("#monster_HP"),HPBar:document.querySelector("#monster_HPBar")},user:{weaponWrapper:document.querySelector(".fight__weaponWrapper"),sword:document.querySelector(".fight__sword"),explosion:document.querySelector(".fight__explosion"),HP:document.querySelector("#user_HP"),HPBar:document.querySelector("#user_HPBar")}},t}return Z(t,e),t.prototype.successfulMission=function(){var e=this;setTimeout((function(){e.dom.fightContainer.classList.add("disabled"),e.dom.successSummary.classList.remove("disabled")}),2e3);var t=this.userData.availableMissions.findIndex((function(t){return t.id===e.userData.currentMission.id}));this.userData.availableMissions[t]=O(this.userData.nextLevelAt,this.userData.guardPayout,this.userStats,this.userData.pet),this.userData.exp+=this.userData.currentMission.exp,this.userData.gold+=this.userData.currentMission.gold,this.userData.exp>=this.userData.nextLevelAt&&(this.userData.level++,this.userData.nextLevelAt=F(this.userData.level),this.userData.exp=0,this.userData.guardPayout=Y(this.userData.level)),this.userData.status="free",this.userData.currentMission=null,v(this.userData)},t.prototype.failedMission=function(){var e=this;setTimeout((function(){e.dom.fightContainer.classList.add("disabled"),e.dom.failedSummary.classList.remove("disabled")}),2e3);var t=this.userData.availableMissions.findIndex((function(t){return t.id===e.userData.currentMission.id}));this.userData.availableMissions[t]=O(this.userData.nextLevelAt,this.userData.guardPayout,this.userStats,this.userData.pet),this.userData.status="free",this.userData.currentMission=null,v(this.userData)},t.prototype.summaryBtnsEvents=function(){var e=this;this.dom.summaryBtns.forEach((function(t){return t.addEventListener("click",(function(){null===e.userData.currentMission&&new ie}))}))},t.prototype.checkMonsterHP=function(){var e=Math.floor(this.monsterHP/this.userData.currentMission.monster.health*100);e>0?(this.dom.monster.HP.innerText=""+this.monsterHP,this.dom.monster.HPBar.style.width=e+"%"):(this.dom.monster.HP.innerText="0",this.dom.monster.HPBar.style.width="0%",this.successfulMission())},t.prototype.checkUserHP=function(){var e=Math.floor(this.userHP/this.userStats.health*100);e>0?(this.dom.user.HP.innerText=""+this.userHP,this.dom.user.HPBar.style.width=e+"%"):(this.dom.user.HP.innerText="0",this.dom.user.HPBar.style.width="0%",this.failedMission())},t.prototype.userDamage=function(){var e=100-100*this.userData.currentMission.monster.defence/this.userStats.defence,t=100-100*this.userData.currentMission.monster.luck/this.userStats.luck;t=Math.floor(Math.random()*t)+1;var n=(this.userStats.damage*e/100+this.userStats.damage*t/100)/2;this.monsterHP-=Math.ceil(n)},t.prototype.monsterDamage=function(){var e=100-100*this.userData.currentMission.monster.defence/this.userStats.defence,t=100-100*this.userData.currentMission.monster.luck/this.userStats.luck;t=Math.floor(Math.random()*t)+1;var n,r,i=(this.userStats.damage*e/100+this.userStats.damage*t/100)/2,o=(n=Math.floor(.7*i)+1,r=i,n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n))+n);this.userHP-=Math.ceil(o)},t.prototype.fightAnimation=function(){var e=this;this.dom.user.explosion.classList.add("fight__explosion-an"),this.dom.user.sword.classList.add("fight__sword-an"),this.dom.user.weaponWrapper.classList.add("fight__weaponWrapper-an"),this.dom.monster.explosion.classList.remove("monster__explosionImg-an"),this.dom.monster.wrapper.classList.remove("monster-an"),this.userDamage(),setTimeout((function(){e.checkMonsterHP()}),1500),setTimeout((function(){e.monsterHP>0&&(e.dom.user.explosion.classList.remove("fight__explosion-an"),e.dom.user.sword.classList.remove("fight__sword-an"),e.dom.user.weaponWrapper.classList.remove("fight__weaponWrapper-an"),e.dom.monster.explosion.classList.add("monster__explosionImg-an"),e.dom.monster.wrapper.classList.add("monster-an"),e.monsterDamage(),setTimeout((function(){e.checkUserHP()}),1700))}),2e3)},t.prototype.fightAnimationInterval=function(){var e=this;this.fightAnimation(),this.fightInterval=setInterval((function(){e.userHP>0&&e.monsterHP>0?e.fightAnimation():clearInterval(e.fightInterval)}),4e3)},t.prototype.general=function(){this.monsterHP=this.userData.currentMission.monster.health,this.userHP=this.userStats.health},t.prototype.render=function(){var e,t,n;this.root.innerHTML=(e=this.userStats,t=this.userData,"\n    <section class='fight background'>\n\n    <div id='fight_container'>\n\n        <div class='fight__container'>\n\n            <div class='fight__weaponWrapper '>\n                <img src='./images/explosion.png' class='fight__explosion' />\n                "+(void 0!==(n=t.equipmentItems[t.equipmentItems.findIndex((function(e){return"weapon"===e.type}))])?"<img src='"+n.src+"' class='fight__sword' />":"<img src='./images/fist.png' class='fight__sword' />")+"\n            </div>\n\n            <div class='fight__characterWrapper fight__characterWrapper-user'>\n\n                <img class='fight__characterImg' src='"+t.portrait+"' />\n                <div class='fight__healthBar'>\n                    <div class='fight__healthPoints'> <span id='user_HP'>"+e.health+"</span>/ "+e.health+"\n                    </div>\n                    <div class='fight__health' id='user_HPBar'></div>\n                </div>\n\n                <table class='fight__statsTable'>\n                    <tbody>\n                        <tr>\n                            <td>Strength</td>\n                            <td>"+e.strength+"</td>\n                        </tr>\n                        <tr>\n                            <td>Physical endurance</td>\n                            <td>"+e.physicalEndurance+"</td>\n                        </tr>\n                        <tr>\n                            <td>Defence</td>\n                            <td>"+e.defence+"</td>\n                        </tr>\n                        <tr>\n                            <td>luck</td>\n                            <td>"+e.luck+"</td>\n                        </tr>\n                    </tbody>\n                </table>\n\n            </div>\n\n\n            \x3c!-- <div class='fight__characterWrapper fight__characterWrapper-monster monster-an'> --\x3e\n            <div class='fight__characterWrapper fight__characterWrapper-monster'>\n\n                <div class='monster__explosionWrapper'>\n                    \x3c!--  <img src='./images/explosion.png'  class='monster__explosionImg monster__explosionImg-an'/> --\x3e\n                    <img src='./images/explosion.png' class='monster__explosionImg monster__explosionImg' />\n                </div>\n\n                <img class='fight__characterImg' src='"+t.currentMission.monster.src+"' />\n                <div class='fight__healthBar'>\n                    <div class='fight__healthPoints'><span\n                            id='monster_HP'>"+t.currentMission.monster.health+"</span> /\n                        "+t.currentMission.monster.health+"</div>\n                    <div class='fight__health' id='monster_HPBar'></div>\n                </div>\n\n                <div style='width: 100%;'>\n\n                    <table class='fight__statsTable'>\n                        <tbody>\n                            <tr>\n                                <td>Strength</td>\n                                <td>"+t.currentMission.monster.strength+"</td>\n                            </tr>\n                            <tr>\n                                <td>Physical endurance</td>\n                                <td>"+t.currentMission.monster.physicalEndurance+"</td>\n                            </tr>\n                            <tr>\n                                <td>Defence</td>\n                                <td>"+t.currentMission.monster.defence+"</td>\n                            </tr>\n                            <tr>\n                                <td>luck</td>\n                                <td>"+t.currentMission.monster.luck+"</td>\n                            </tr>\n                        </tbody>\n                    </table>\n\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n    <div class='fight__summaryWrapper disabled' id='successful_fight_summary'>\n\n        <div class='fight__summary'>\n            <img class='fight__characterImg' src='"+t.currentMission.character+"' />\n            <h2 class='fight__summaryTitle'>"+z[Math.floor(Math.random()*z.length)]+"</h2>\n            <div class='fight__summaryPayout'>\n                <div><img src='./images/coin.png' alt='coin' /> <strong>Gold: "+t.currentMission.gold+"</strong>\n                </div>\n                <div><img src='./images/mission_detail_increase.png' alt='coin' /> <strong>Experience:\n                        "+t.currentMission.exp+"</strong></div>\n            </div>\n            <button class='fight__summaryBtn fight__summaryBtn-green' id='mission_success_btn'>Back to tavern</button>\n        </div>\n\n    </div>\n\n    <div class='fight__summaryWrapper disabled' id='failed_fight_summary'>\n\n        <div class='fight__summary'>\n            <h2 class='fight__failed'>Mission failed</h2>\n            <button class='fight__summaryBtn fight__summaryBtn-red' id='mission_failed_btn'>Back to tavern</button>\n        </div>\n        \n    </div>\n\n</section>\n    ")},t.prototype.getDOMElements=function(){this.dom={fightContainer:document.querySelector("#fight_container"),successSummary:document.querySelector("#successful_fight_summary"),failedSummary:document.querySelector("#failed_fight_summary"),summaryBtns:document.querySelectorAll(".fight__summaryBtn"),monster:{wrapper:document.querySelector(".fight__characterWrapper-monster"),explosion:document.querySelector(".monster__explosionImg"),HP:document.querySelector("#monster_HP"),HPBar:document.querySelector("#monster_HPBar")},user:{weaponWrapper:document.querySelector(".fight__weaponWrapper"),sword:document.querySelector(".fight__sword"),explosion:document.querySelector(".fight__explosion"),HP:document.querySelector("#user_HP"),HPBar:document.querySelector("#user_HPBar")}}},t.prototype.initScripts=function(){var e=this;this.general(),this.summaryBtnsEvents(),setTimeout((function(){e.fightAnimationInterval()}),2e3)},t.prototype.onDataChange=function(){return!0},t}(M),J=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},te=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ne=function(e){function t(){var t=e.call(this)||this;return t.countdownInterval=null,t.dom={travelTimeLeft:document.querySelector(".countdown__time"),countdownProgressBar:document.querySelector(".countdown__progressBar"),cancelBtn:document.querySelector(".countdown__cancelBtn")},t}return J(t,e),t.prototype.travelCountdown=function(){var e=this,t=(new Date).getTime(),n=(this.userData.currentMission.end.getTime()-t)/1e3/60,r=(new Date).getTime()+60*n*1e3;this.countdownInterval=setInterval((function(){var t,n,i,o=(new Date).getTime(),a=(r-o)/1e3;if(a>=0){a%=86400,t=parseInt((a/3600).toString()),a%=3600,n=parseInt((a/60).toString()),i=parseInt((a%60).toString()),e.dom.travelTimeLeft.innerText=(0!==t?t+"h : ":"")+" "+n+"m : "+i+"s";var s=e.userData.currentMission.start.getTime(),u=e.userData.currentMission.end.getTime()-s,c=(new Date).getTime()-s,l=Math.round(c/u*100)+"%";e.dom.countdownProgressBar.style.width=l}else ee(e,void 0,void 0,(function(){return te(this,(function(e){switch(e.label){case 0:return[4,clearInterval(this.countdownInterval)];case 1:return e.sent(),[2]}}))})),new X}),1e3)},t.prototype.cancelMissionEvent=function(){var e=this;this.dom.cancelBtn.addEventListener("click",(function(){e.userData.currentMission=null,e.userData.status="free",v(e.userData),ee(e,void 0,void 0,(function(){return te(this,(function(e){switch(e.label){case 0:return[4,clearInterval(this.countdownInterval)];case 1:return e.sent(),[2]}}))})),new ie}))},t.prototype.setBackground=function(){this.freepikAttribute=this.userData.currentMission.background.attribute,this.bodyBackgroundSrc=this.userData.currentMission.background.src,this.setBodyBackground()},t.prototype.render=function(){var e;this.root.innerHTML="\n    <section class='travel background' style='background-image: url("+(e=this.userData).currentMission.background.src+")'>\n\n           <h2 class='travel__title'>"+e.currentMission.title+"</h2>\n\n           <div class='travel__countdownWrapper'>\n\n              <div class='countdown__wrapper'>\n                 <div class='countdown__progressBar'> </div>\n                 <div class='countdown__time'></div>\n              </div>\n\n              <button class='countdown__cancelBtn'>Cancel</button>\n\n           </div>\n\n    </section>\n    "},t.prototype.getDOMElements=function(){this.dom={travelTimeLeft:document.querySelector(".countdown__time"),countdownProgressBar:document.querySelector(".countdown__progressBar"),cancelBtn:document.querySelector(".countdown__cancelBtn")}},t.prototype.initScripts=function(){this.cancelMissionEvent(),this.travelCountdown(),this.setBackground()},t.prototype.onDataChange=function(){return!0},t}(M),re=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ie=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="<a href='https://www.freepik.com/vectors/restaurant'>Restaurant vector created by upklyak - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_missions.jpg",t.dom={startMissionBtn:document.querySelector(".mission__acceptBtn"),missionContentWrapper:document.querySelector(".mission__informations"),missionDetails:document.querySelector("#mission_content_wrapper"),character:document.querySelector(".mission__character"),willingnessBarGreen:document.querySelector(" .tavern__willingnessBar-green"),missionError:document.querySelector(".tavern__missionError"),willingnessBarWrapper:document.querySelector(".tavern__willingnessBarWrapper"),countdown:document.querySelector(".tavern__countdownWrapper span"),missionsListWrapper:document.querySelector(".tavern__listWrapper")},t.selectedMission=null,t}return re(t,e),t.prototype.chooseMission=function(e){var t;this.dom.missionError.innerText="",this.dom.missionContentWrapper.classList.add("disabled");var n=this.userData.availableMissions.findIndex((function(t){return t.id===e}));t=this.userData.availableMissions[n],this.dom.missionDetails.innerHTML=function(e){return"\n   <h2 class='mission__title'>"+e.title+"</h2>\n\n   <p class='mission__description'>\n       "+e.dsc+"\n   </p>\n\n   <div class='mission__general'>\n\n       <div>\n           <div class='mission__detail'>\n               <img class='mission__detailImg' src='./images/coin.png' alt='coin' />\n               <span class='mission__detailName'>Gold: </span>\n               <strong class='mission__detailResult'>"+e.gold+"</strong>\n           </div>\n           <div class='mission__detail'>\n               <img class='mission__detailImg' src='./images/mission_detail_increase.png'\n                   alt='Level increase' />\n               <span class='mission__detailName'>Experience: </span>\n               <strong class='mission__detailResult'>"+e.exp+"</strong>\n           </div>\n           <div class='mission__detail'>\n               <img class='mission__detailImg' src='./images/mission_detail_hourglass.png'\n                   alt='hourglass' />\n               <span class='mission__detailName'>Time: </span>\n               <strong class='mission__detailResult'>"+e.time+"</strong>\n           </div>\n       </div>\n       <img src='"+e.monster.src+"' class='mission__monsterWrapper'> </img>\n\n   </div>\n   "}(t),this.dom.character.src=t.character,this.dom.character.classList.remove("disabled"),this.dom.missionContentWrapper.classList.remove("disabled"),this.selectedMission=t,this.dom.missionContentWrapper.scrollIntoView()},t.prototype.startMission=function(){var e=this;this.dom.startMissionBtn.addEventListener("click",(function(){if(null!==e.selectedMission&&"free"===e.userData.status)if(e.selectedMission.time<=e.userData.missionWillingness){var t=new Date,n=new Date;n.setMinutes(n.getMinutes()+e.selectedMission.time);var r={id:e.selectedMission.id,exp:e.selectedMission.exp,gold:e.selectedMission.gold,time:e.selectedMission.time,title:e.selectedMission.title,character:e.selectedMission.character,monster:e.selectedMission.monster,background:e.selectedMission.background,start:t,end:n};e.userData.currentMission=r,e.userData.status="mission",e.userData.missionWillingness-=e.selectedMission.time,v(e.userData).then((function(){new ne}))}else e.dom.missionError.innerText="You don't have enough willingness to start new mission",e.dom.willingnessBarWrapper.classList.add("tavern__willingnessBarWrapper-error"),setTimeout((function(){e.dom.missionError.innerText="",e.dom.willingnessBarWrapper.classList.remove("tavern__willingnessBarWrapper-error")}),2e3)}))},t.prototype.renderAvailableMissions=function(){var e=this;this.userData.availableMissions.forEach((function(t){var n=document.createElement("img");n.src=t.papyrus,n.className="tavern__papyrus",n.addEventListener("click",(function(){return e.chooseMission(t.id)})),e.dom.missionsListWrapper.appendChild(n)}))},t.prototype.onBtnHover=function(){var e=this;this.dom.startMissionBtn.addEventListener("mouseover",(function(){e.dom.willingnessBarGreen.style.height=e.userData.missionWillingness-e.selectedMission.time+"%"})),this.dom.startMissionBtn.addEventListener("mouseleave",(function(){e.dom.willingnessBarGreen.style.height=e.userData.missionWillingness+"%"}))},t.prototype.onDataChange=function(){this.dom.willingnessBarGreen.style.height=this.userData.missionWillingness+"%"},t.prototype.getDOMElements=function(){this.dom={startMissionBtn:document.querySelector(".mission__acceptBtn"),missionContentWrapper:document.querySelector(".mission__informations"),missionDetails:document.querySelector("#mission_content_wrapper"),character:document.querySelector(".mission__character"),willingnessBarGreen:document.querySelector(" .tavern__willingnessBar-green"),missionError:document.querySelector(".tavern__missionError"),willingnessBarWrapper:document.querySelector(".tavern__willingnessBarWrapper"),countdown:document.querySelector(".tavern__countdownWrapper span"),missionsListWrapper:document.querySelector(".tavern__listWrapper")}},t.prototype.initScripts=function(){q(this.dom.countdown),this.renderAvailableMissions(),this.onBtnHover(),this.startMission()},t.prototype.render=function(){var e;this.root.innerHTML="\n    <section class='tavern '>\n\n    <div class='tavern__item'>\n\n        <div class='tavern__characterWrapper'>\n\n            <div class='tavern__willingnessBarWrapper' title='Mission willingness: "+(e=this.userData).missionWillingness+"/100'>\n                <div class='tavern__willingnessBar tavern__willingnessBar-green'\n                    style='height: "+e.missionWillingness+"%;'> </div>\n                <div class='tavern__willingnessBar tavern__willingnessBar-red'\n                    style='height: "+e.missionWillingness+"%;'> </div>\n            </div>\n\n            <img class='mission__character disabled' alt='character'>\n            <span></span>\n\n            <div class='tavern__countdownWrapper "+(e.missionWillingness>100&&" disabled")+"'>Missions wiligness\n                reset in <span> </span></div>\n                \n        </div>\n\n        <div class='tavern__detailsWrapper'>\n\n            <div class='tavern__details'>\n\n                <div class='mission__informations disabled'>\n\n                    <div class='textRool'></div>\n\n                    <div class='mission__contentWrapper'>\n\n                        <div class='mission__content'>\n                            <div class='mission__detailsWrapper'>\n                                <div id='mission_content_wrapper'> </div>\n                                <div class='tavern__missionError'></div>\n                                <button class='mission__acceptBtn'>Accept this mission</button>\n                            </div>\n                        </div>\n\n                        <div class='textRool textRool-bottom'></div>\n\n                    </div>\n\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n    <div class='tavern__item'>\n\n        <div class='tavern__list'>\n            <h2 class='tavern__title'>Available missions</h2>\n            <div class='tavern__listWrapper'> </div>\n        </div>\n\n    </div>\n\n</section>\n    "},t}(M),oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ae=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="<a href='https://www.freepik.com/vectors/restaurant'>Restaurant vector created by upklyak - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_missions.jpg",t}return oe(t,e),t.prototype.render=function(){this.root.innerHTML="\n      <section class='onGuardTavern background'>\n         <h2 class='onGuardTavern__title'>You currently work as a guard for the king</h2>\n      </setion>  \n    "},t.prototype.onDataChange=function(){return!0},t.prototype.initScripts=function(){return!0},t.prototype.getDOMElements=function(){return!0},t}(M),se=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ue=function(e){function t(){return e.call(this)||this}return se(t,e),t.prototype.render=function(){var e=(new Date).getTime();"free"===this.userData.status?new ie:"guard"===this.userData.status?new ae:"mission"===this.userData.status&&(this.userData.currentMission.end.getTime()>e?new ne:this.userData.currentMission.end.getTime()<=e&&new X)},t.prototype.initScripts=function(){console.log("script initialization")},t.prototype.onDataChange=function(){return!0},t.prototype.getDOMElements=function(){console.log("DOM loaded")},t}(M),ce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),le=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="<a href='https://www.freepik.com/vectors/background'>Background vector created by vectorpouch - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_wizard.jpg",t.dom={spinningWheel:document.querySelector(".spinningWheel__content"),spinningWheelItems:document.querySelectorAll(".spinningWheel__content div[data-spinningWheel]"),spinBtn:document.querySelector(".wizard__btn"),spinningCircle:document.querySelector(".spinningWheel__content .circle"),wonItemLabel:document.querySelector(".wonItem__wrapper"),actionError:document.querySelector(".wizard__actionError"),actionBar:document.querySelector(".wizard__actionBar"),countdown:document.querySelector(".wizard__countdown")},t}return ce(t,e),t.prototype.addWonItem=function(){if(this.userData.wizardWheelSpin=!1,this.dom.countdown.parentElement.classList.remove("disabled"),q(this.dom.countdown),this.dom.actionBar.innerHTML="","gold"===this.userData.magicWheel.wonItem.type)this.userData.gold+=Math.ceil(10*this.userData.guardPayout);else if("potion"===this.userData.magicWheel.wonItem.type){var e=new Date;e.setHours(e.getHours()+168);var t={id:this.userData.magicWheel.wonItem.id,end:e};null===this.userData.potions.first?this.userData.potions.first=t:this.userData.potions.second=t}else this.userData.backpackItems.push(this.userData.magicWheel.wonItem);v(this.userData)},t.prototype.startSpinningEvent=function(){var e=this;this.dom.spinBtn.addEventListener("click",(function(){e.userData.wizardWheelSpin&&function(){if(e.userData.backpackItems.length<10){e.dom.spinningWheel.classList.add("spinningWheel__content-animation"),setTimeout((function(){e.dom.spinningCircle.classList.add("circle-animation")}),7e3),setTimeout((function(){var t;e.dom.spinningWheel.classList.remove("spinningWheel__content-animation"),e.dom.wonItemLabel.innerHTML="\n    <div class='wonItem__wrapper'> \n    <img class='wonItem__img' src='"+(t=e.userData.magicWheel.wonItem).src+"'/>\n    <h3 class='market__itemTitle itemTitle "+("common"===t.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n        \n    "+t.name+"\n    </h3>\n    \n    "+("common"===t.rarity?" <strong class='market__itemRarity itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n    "+(void 0!==t.description?" <p class='market__itemDsc itemDsc '>'"+t.description+"' </p>":"")+"\n    <table class='market__itemStats itemStats'>\n      <tbody>\n\n\n      "+(null!==t.properties.strength?"<tr>\n          <td>Strength</td>\n          <td>"+t.properties.strength+"</td>\n        </tr>":"")+"\n    \n         \n\n       "+(null!==t.properties.physicalEndurance?"<tr>\n           <td>Physical endurance</td>\n           <td>"+t.properties.physicalEndurance+"</td>\n          </tr>":"")+"   \n       \n        "+(null!==t.properties.defence?" \n        <tr>\n          <td>Defence</td>\n          <td>"+t.properties.defence+"</td>\n        </tr>":"")+"\n        \n        "+(null!==t.properties.luck?"\n        <tr>\n          <td>Luck</td>\n          <td>"+t.properties.luck+"</td>\n        </tr>\n        ":"")+"\n        \n\n\n      </tbody>\n    </table>\n    </div>\n    ",e.dom.wonItemLabel.classList.remove("disabled")}),1e4);var t=e.dom.spinningWheel.parentElement.parentElement;t.scrollTop=t.scrollHeight,e.addWonItem()}else e.dom.actionError.innerText="Your backpack is full",setTimeout((function(){e.dom.actionError.innerText=""}),3e3)}()}))},t.prototype.setSpinningWheelItems=function(){var e=this;this.userData.magicWheel.items.forEach((function(t,n){e.dom.spinningWheelItems[n].innerHTML="<img src='"+t.src+"' class='spinningWheel__itemImg'/>"}))},t.prototype.getDOMElements=function(){this.dom={spinningWheel:document.querySelector(".spinningWheel__content"),spinningWheelItems:document.querySelectorAll(".spinningWheel__content div[data-spinningWheel]"),spinBtn:document.querySelector(".wizard__btn"),spinningCircle:document.querySelector(".spinningWheel__content .circle"),wonItemLabel:document.querySelector("#wonItem_wrapper"),actionError:document.querySelector(".wizard__actionError"),actionBar:document.querySelector(".wizard__actionBar"),countdown:document.querySelector(".wizard__countdown")}},t.prototype.render=function(){var e;this.root.innerHTML="\n   <section class='wizard background'>\n\n   <div class='wizard__characterWrapper'>\n       <img class='wizard__characterImg' src='./images/wizard.png' alt='wizard' />\n   </div>\n\n   <div class='wizard__descriptionWrapper'>\n\n       <div class='wizard__description glass'>\n           <h2 class='wizard__title'>try one's fortune </h2>\n           <p class='wizard__text'>\n               Here's the magic circle created by the legendary gods.\n               It has served warriors since the beginning of the war against monsters. It has all the necessary items\n               for battles with monsters. The magic circle requires a lot of mana to spin,\n               the mana is renewed every midnight when one of the legendary gods gives up some of his mana.\n           </p>\n\n           <div class='wizard__countdownWrapper "+((e=this.userData).wizardWheelSpin&&" disabled")+"'>\n               <div>Next spin in</div>\n               <div class='wizard__countdown'>\n\n               </div>\n           </div>\n\n           "+(e.wizardWheelSpin?"<div class='wizard__actionBar'>\n               <strong class='wizard__actionError'></strong>\n               <button class='wizard__btn'>SPIN</button>\n           </div>":"")+'\n           \n       </div>\n   </div>\n\n   <div class=\'spinningWheel__wrapper\'>\n\n       <div class=\'spinningWheel__content\'>\n           <div class="one" data-spinningWheel></div>\n           <div class="two" data-spinningWheel>2</div>\n           <div class="three" data-spinningWheel>3</div>\n           <div class="four" data-spinningWheel>4</div>\n           <div class="five" data-spinningWheel>5</div>\n           <div class="six" data-spinningWheel>6</div>\n           <div class="seven" data-spinningWheel>7</div>\n           <div class="eight" data-spinningWheel>8</div>\n           <div class=\'circle\'></div>\n       </div>\n\n       <div id=\'wonItem_wrapper\'></div>\n   </div>\n   <section>\n     '},t.prototype.initScripts=function(){this.setSpinningWheelItems(),this.userData.wizardWheelSpin?this.startSpinningEvent():q(this.dom.countdown)},t.prototype.onDataChange=function(){return!0},t}(M),de=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],he=["January","February","March","April","May","June","July","August","September","October","November","December"],pe=new Date,fe=function(e,t){var n=Math.abs(t.getTime()-e.getTime());return Math.floor(n/864e5)},me=function(e){var t=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();return e.getDay()===pe.getDay()?e.getHours()+":"+t:fe(e,pe)<7?de[e.getDay()]+", "+e.getHours()+":"+t:e.getMonth()===pe.getMonth()?he[e.getMonth()+1]+", "+e.getDate()+", "+de[e.getDay()]:he[e.getMonth()+1]},ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="<a href='https://www.freepik.com/vectors/character'>Character vector created by macrovector - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_inbox.jpg",t.dom={mailListContainer:document.querySelector(".inbox__item:first-child"),closeMailIcon:document.querySelector(".closeIcon__email"),emailContainer:document.querySelector("#email-container"),emailList:document.querySelector(".inbox__list"),emailAmount:document.querySelector(".inbox__emailAmount")},t}return ge(t,e),t.prototype.openEMail=function(e){this.dom.emailContainer.innerHTML=e,window.innerWidth<1024&&this.toggleMail()},t.prototype.toggleMail=function(){this.dom.emailContainer.classList.contains("disabled")?(this.dom.emailContainer.classList.remove("disabled"),this.dom.mailListContainer.classList.add("disabled"),this.dom.closeMailIcon.classList.remove("disabled")):(this.dom.emailContainer.classList.add("disabled"),this.dom.mailListContainer.classList.remove("disabled"),this.dom.closeMailIcon.classList.add("disabled"))},t.prototype.deleteEMail=function(e){var t=this.userData.inbox.findIndex((function(t){return t.id===e}));this.userData.inbox.splice(t,1),this.dom.emailAmount.innerText=""+this.userData.inbox.length,v(this.userData)},t.prototype.closeEMail=function(){var e=this;this.dom.closeMailIcon.addEventListener("click",(function(){e.dom.emailContainer.classList.add("disabled"),e.dom.mailListContainer.classList.remove("disabled"),e.dom.closeMailIcon.classList.add("disabled")}))},t.prototype.mobile=function(){var e=this;window.innerWidth<1024&&this.dom.emailContainer.classList.add("disabled"),window.addEventListener("resize",(function(){e.dom.emailContainer.classList.contains("disabled")||e.dom.emailContainer.classList.add("disabled")}))},t.prototype.renderEMails=function(){var e=this;this.dom.emailList.innerHTML="",this.userData.inbox.forEach((function(t){var n,r,i,o=document.createElement("li");o.innerHTML="\n  <div class='inbox__deleteIcon'>\n  <i class=\"fas fa-trash-alt\"></i>\n</div>\n\n<div class='inbox__listItem glass'>\n  <h2 class='inbox__listTitle '>"+(n=t).title+"</h2>\n  <div class='inbox__listSubTitle'><span>From: "+n.createdBy+"</span></div>\n      \n\n  \n  <div class='inbox__listDate'>"+(i=(r=n.createdAt).getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),(r.getDay()===pe.getDay()?"  Today </br>"+r.getHours()+":"+i:fe(r,pe)<7?de[r.getDay()]+" </br> "+r.getHours()+":"+i:r.getMonth()===pe.getMonth()?he[r.getMonth()+1]+", "+r.getDate()+", "+de[r.getDay()]+";\n        </br>  "+r.getHours()+":"+i+"\n        ":he[r.getMonth()+1]+" "+r.getDate())+"</div>\n</div>  \n  ");var a=o.querySelector(".inbox__deleteIcon i"),s=o.querySelector(".inbox__listItem");a.addEventListener("click",(function(){return e.deleteEMail(t.id)})),s.addEventListener("click",(function(){return e.openEMail(t.content)})),e.dom.emailList.appendChild(o)}))},t.prototype.initScripts=function(){this.renderEMails(),this.mobile(),this.closeEMail()},t.prototype.getDOMElements=function(){this.dom={mailListContainer:document.querySelector("#email-list"),closeMailIcon:document.querySelector(".closeIcon__email"),emailContainer:document.querySelector("#email-container"),emailList:document.querySelector(".inbox__list"),emailAmount:document.querySelector(".inbox__emailAmount")}},t.prototype.render=function(){this.root.innerHTML="\n    <section class='inbox background'>\n\n    <div class='closeIcon closeIcon__email disabled'>\n        <img src='./images/close.png' />\n    </div>\n\n    <div class='inbox__item' id='email-list'>\n\n        <div class='inbox__header glass'>\n            <img src='./images/inbox_icon_message.png' alt='_message' class='inbox__emailIcon'\n                title='Amount of e-mails' />\n            <strong class='inbox__emailAmount'>"+this.userData.inbox.length+"</strong>\n        </div>\n\n        <ul class='inbox__list'> </ul>\n\n    </div>\n\n\n    <div class='inbox__item' id='email-container'> </div>\n\n    </section>\n    "},t.prototype.onDataChange=function(){this.renderEMails()},t}(M),ve=[{name:"cat",imgSrc:"./images/pet_cat.png",imgSmallSrc:"./images/pet_cat_small.png",initialCost:.5,properties:{travelTime:10,luck:5,defence:null,strength:null,physicalEndurance:null},id:"11b2be9f-4879-484d-9a8a-e5b801592fde"},{name:"scorpion",imgSrc:"./images/pet_scorpion.png",imgSmallSrc:"./images/pet_scorpion_small.png",initialCost:10,properties:{travelTime:25,defence:10,physicalEndurance:null,strength:null,luck:null},id:"40e5a642-a861-4395-9cb7-053bff579d8d"},{name:"cheetah",imgSrc:"./images/pet_cheetah.png",imgSmallSrc:"./images/pet_cheetah_small.png",initialCost:15,properties:{travelTime:50,defence:10,physicalEndurance:10,strength:null,luck:null},id:"1ae08920-976d-4c75-920c-398b81c80e6e"},{name:"dragon",imgSrc:"./images/pet_dragon.png",imgSmallSrc:"./images/pet_dragon_small.png",initialCost:25,properties:{travelTime:50,defence:10,physicalEndurance:10,strength:10,luck:10},id:"ad266f93-8a66-47b8-a5a9-1ec9383ad7e7"}],_e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="<a href='https://www.freepik.com/vectors/background'>Background vector created by upklyak - www.freepik.com</a>",t.bodyBackgroundSrc="/images/pets_background.jpg",t.countdownInterval=null,t.dom={rentBtns:document.querySelectorAll(".pets__buy button"),rent:{cat:document.querySelector(".pets__buy button[data-pet-name='cat']"),scorpion:document.querySelector(".pets__buy button[data-pet-name='scorpion']"),cheetah:document.querySelector(".pets__buy button[data-pet-name='cheetah']"),dragon:document.querySelector(".pets__buy button[data-pet-name='dragon']")},goldAmount:document.querySelector(".pets__userGoldAmount"),goldSubtract:document.querySelector(".pets__goldSubtract"),petsWrappers:document.querySelectorAll(".pets__item"),countdownWrappers:document.querySelectorAll(".pets__countdownWrapper")},t}return _e(t,e),t.prototype.setCountdown=function(){var e=this;if(clearInterval(this.countdownInterval),this.dom.countdownWrappers.forEach((function(e){var t=e;t.classList.add("disabled"),t.innerText=""})),null!==this.userData.pet){var t=Array.from(this.dom.countdownWrappers).find((function(t){return t.dataset.petCountdownId===e.userData.pet.id})),n=new Date,r=this.userData.pet.rentEnd,i=r.getTime()-n.getTime(),o=Math.floor(i/1e3/60),a=(new Date).getTime()+60*o*1e3;this.countdownInterval=setInterval((function(){var i,o,s,u=(new Date).getTime(),c=(a-u)/1e3;if(c>=0){c%=86400,i=parseInt((c/3600).toString()),c%=3600,o=parseInt((c/60).toString()),s=parseInt((c%60).toString());var l=Math.floor(Math.abs(r.getTime()-n.getTime())/864e5);t.innerText=0!==l?1===l?l+" Day left":l+" Days left":(0!==i?i+"h : ":"")+" "+o+"m : "+s+"s left"}else e.userData.pet=null,clearInterval(e.countdownInterval),e.dom.countdownWrappers.forEach((function(e){var t=e;t.classList.add("disabled"),t.innerText=""})),v(e.userData);t.classList.remove("disabled")}),1e3)}},t.prototype.setNewPet=function(e){var t=this,n=ve[ve.findIndex((function(t){return t.name===e}))],r=Math.floor(n.initialCost*this.userData.guardPayout),i=function(){t.userData.gold-=r,t.userData.pet=n,t.userData.pet.rentEnd=new Date,t.userData.pet.rentEnd.setHours(t.userData.pet.rentEnd.getHours()+168),v(t.userData),t.dom.goldSubtract.innerText="-"+r,t.dom.goldSubtract.classList.remove("disabled"),setTimeout((function(){t.dom.goldSubtract.innerText="",t.dom.goldSubtract.classList.add("disabled")}),1500)};if(this.userData.gold>=r)if(null===this.userData.pet)i();else{var o=this.userData.pet.rentEnd.getTime(),a=(new Date).getTime(),s=Math.ceil(Math.abs(o-a)/864e5);s<=100&&this.userData.pet.id===n.id?(this.userData.gold-=r,this.userData.pet.rentEnd.setHours(this.userData.pet.rentEnd.getHours()+168),v(this.userData)):s<=100&&this.userData.pet.id!==n.id?i():window.alert("You have reached maxiumum rent time.")}},t.prototype.setPetRentEvents=function(){var e=this;this.dom.rent.cat.addEventListener("click",(function(){return e.setNewPet("cat")})),this.dom.rent.scorpion.addEventListener("click",(function(){return e.setNewPet("scorpion")})),this.dom.rent.cheetah.addEventListener("click",(function(){return e.setNewPet("cheetah")})),this.dom.rent.dragon.addEventListener("click",(function(){return e.setNewPet("dragon")}))},t.prototype.setStyles=function(){var e=this;this.dom.rentBtns.forEach((function(t){var n=t,r=ve[ve.findIndex((function(e){return e.name===n.dataset.petName}))],i=Math.floor(r.initialCost*e.userData.guardPayout);t.className="",t.classList.add(e.userData.gold>=i?"pets__buy-afford":"pets__buy-notAfford")})),this.dom.petsWrappers.forEach((function(t){var n=t;n.classList.remove("pets__current"),null!==e.userData.pet&&e.userData.pet.name===n.dataset.petName&&t.classList.add("pets__current")}))},t.prototype.setGoldAmount=function(){this.dom.goldAmount.innerText=""+this.userData.gold},t.prototype.render=function(){var e;this.root.innerHTML="\n  <section class='pets background'>\n\n  <div class='pets__userGoldWrapper'>\n\n      <div class='pets__userGold'>\n          <img src='./images/coin.png' class='pets__userGoldIcon' alt='coin' />\n          <strong class='pets__userGoldAmount'>"+(e=this.userData).gold+"</strong>\n      </div>\n      <div class='pets__goldSubtract disabled'></div>\n\n  </div>\n\n  <div class='pets__wrapper'>\n\n      "+ve.map((function(t){return"\n      <div class='pets__item "+(null!==e.pet&&(e.pet.name===t.name?"pets__current":""))+"'\n          data-pet-name="+t.name+">\n\n          <div class='pets__imgWrapper'>\n              <img class='pets__img' src="+t.imgSrc+" alt="+t.name+" />\n          </div>\n\n          <div class='pets__label'>\n\n              <h2 class='pets__name pets__name-"+t.name+"'>"+t.name+"</h2>\n              <div class='pets__cost'>\n                  <img src='./images/coin.png' alt='coin' />\n                  <strong>"+Math.floor(t.initialCost*e.guardPayout)+"</strong>\n              </div>\n\n              <ul class='pets__benefits'>\n                  "+(null!==t.properties.travelTime?"<li class='pets__benefitsItem'>-"+t.properties.travelTime+"%\n                      of travel time </li>":"")+"\n                  "+(null!==t.properties.defence?"<li class='pets__benefitsItem'>+"+t.properties.defence+"% to\n                      Defence </li>":"")+"\n                  "+(null!==t.properties.physicalEndurance?" <li class='pets__benefitsItem'>\n                      +"+t.properties.physicalEndurance+"% to Physical endurance </li>":"")+"\n                  "+(null!==t.properties.strength?"<li class='pets__benefitsItem'>+"+t.properties.strength+"% to\n                      Strength </li>":"")+"\n                  "+(null!==t.properties.luck?" <li class='pets__benefitsItem'>+"+t.properties.luck+"% to Luck\n                  </li>":"")+"\n              </ul>\n\n              <div class='pets__countdownWrapper disabled' data-pet-countdown-id="+t.id+">12h 13m 12s left </div>\n\n              <div class='pets__buy'><button class='\n    "+(e.gold>=Math.floor(t.initialCost*e.guardPayout)?" pets__buy-afford":" pets__buy-notAfford")+" ' data-pet-name="+t.name+">\n    \n    Rent for 7 days\n    </button>\n  </div>\n\n   </div>\n\n   </div>\n\n "}))+"\n </div>   \n\n</section>\n    "},t.prototype.getDOMElements=function(){this.dom={rentBtns:document.querySelectorAll(".pets__buy button"),rent:{cat:document.querySelector(".pets__buy button[data-pet-name='cat']"),scorpion:document.querySelector(".pets__buy button[data-pet-name='scorpion']"),cheetah:document.querySelector(".pets__buy button[data-pet-name='cheetah']"),dragon:document.querySelector(".pets__buy button[data-pet-name='dragon']")},goldAmount:document.querySelector(".pets__userGoldAmount"),goldSubtract:document.querySelector(".pets__goldSubtract"),petsWrappers:document.querySelectorAll(".pets__item"),countdownWrappers:document.querySelectorAll(".pets__countdownWrapper")}},t.prototype.initScripts=function(){this.setCountdown(),this.setStyles(),this.setPetRentEvents()},t.prototype.onDataChange=function(){this.setStyles(),this.setCountdown(),this.setGoldAmount()},t}(M),we=__webpack_require__(8966),Se=__webpack_require__.n(we),Ee=function(e){return/[A-Z]/.test(e)},ke=function(e){return/\d/.test(e)},Ie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Te=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute="<a href='https://www.freepik.com/vectors/light'>Light vector created by vectorpouch - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_account.jpg",t.data={email:r.currentUser.email,password:"",passwordRepeat:"",deleteCode:""},t.deleteCode=g()("","delete"),t.dom={updateFormContainer:document.querySelector("#update-account"),deleteAccountFormContainer:document.querySelector("#delete-account"),formInputs:document.querySelectorAll(".account__elementContent"),actionBtn:document.querySelector("#btn-update-account"),errorWrapper:document.querySelector("#update_profile_error"),successEmailUpdate:document.querySelector("#update_profile_email"),successPasswordUpdate:document.querySelector("#update_profile_password"),toogleIcon:document.querySelector(".account__deleteIcon img"),deleteAccountBtn:document.querySelector("#btn-delete-account")},t}return Ie(t,e),t.prototype.deleteAccount=function(){var e=this.userData;return r.currentUser.delete().then((function(){console.log("Your account has been deleted")})).catch((function(t){return i.collection("users").doc(r.currentUser.uid).set(e).then((function(){return console.log(t),alert("This operation is sensitive and requires recent authentication. Log in again before retrying this request."),r.signOut().then((function(){console.log("Sign-out successful")})).catch((function(e){console.log(e)}))}))}))},t.prototype.deleteAccountEvent=function(){var e=this;this.dom.deleteAccountBtn.addEventListener("click",(function(t){if(t.preventDefault(),e.deleteCode===e.data.deleteCode){console.log(1);var n=r.currentUser.uid;return i.collection("users").doc(n).delete().then((function(){e.deleteAccount()})).catch((function(e){return console.log(e)}))}}))},t.prototype.toggleForm=function(){var e=this;this.dom.toogleIcon.addEventListener("click",(function(){e.dom.updateFormContainer.classList.contains("disabled")?(e.dom.updateFormContainer.classList.remove("disabled"),e.dom.deleteAccountFormContainer.classList.add("disabled"),e.dom.toogleIcon.src="./images/account_delete_icon.png",e.dom.toogleIcon.title="Delete your account"):(e.dom.updateFormContainer.classList.add("disabled"),e.dom.deleteAccountFormContainer.classList.remove("disabled"),e.dom.toogleIcon.src="./images/account_back_icon.png",e.dom.toogleIcon.title="Back")}))},t.prototype.changeDataEvent=function(){var e=this,t=function(t){var n,r=t.name,i=t.value;e.data=((n={email:e.data.email,password:e.data.password,passwordRepeat:e.data.passwordRepeat,deleteCode:e.data.deleteCode})[r]=i,n),e.dom.errorWrapper.classList.add("disabled"),e.data.deleteCode===e.deleteCode?e.dom.deleteAccountBtn.classList.remove("disabled"):e.dom.deleteAccountBtn.classList.add("disabled")};this.dom.formInputs.forEach((function(e){return e.addEventListener("change",(function(){return t(e)}))})),this.dom.formInputs.forEach((function(e){return e.addEventListener("keyup",(function(){return t(e)}))}))},t.prototype.updatePassword=function(){var e=this;if(this.data.password.length>=6&&ke(this.data.password)&&Ee(this.data.password)&&this.data.password===this.data.passwordRepeat)return r.currentUser.updatePassword(this.data.password).then((function(){console.log("Password updated successfully");var t=document.querySelector(".account__element input[name='password']"),n=document.querySelector(".account__element input[name='passwordRepeat']");t.value="",n.value="",e.dom.errorWrapper.classList.add("disabled"),e.dom.successPasswordUpdate.classList.remove("disabled"),e.dom.actionBtn.classList.add("disabled"),setTimeout((function(){e.dom.actionBtn.classList.remove("disabled"),e.dom.successPasswordUpdate.classList.add("disabled")}),3e3)})).catch((function(e){return console.log(e),alert("This operation is sensitive and requires recent authentication. Log in again before retrying this request."),r.signOut().then((function(){console.log("Sign-out successful")})).catch((function(e){console.log(e)}))}));0===this.data.password.length?this.dom.errorWrapper.classList.add("disabled"):this.data.password.length<6?(this.dom.errorWrapper.classList.remove("disabled"),this.dom.errorWrapper.innerText="Password must have min. 6 characters"):ke(this.data.password)?Ee(this.data.password)?this.data.password!==this.data.passwordRepeat&&(this.dom.errorWrapper.classList.remove("disabled"),this.dom.errorWrapper.innerText="Passwords do not match"):(this.dom.errorWrapper.classList.remove("disabled"),this.dom.errorWrapper.innerText="Password must have upper letter"):(this.dom.errorWrapper.classList.remove("disabled"),this.dom.errorWrapper.innerText="Password must have number")},t.prototype.updateEmail=function(){var e=this;if(r.currentUser.email!==this.data.email&&Se().isEmail(this.data.email)&&0!==this.data.email.length)return r.currentUser.updateEmail(this.data.email).then((function(){console.log("Email updated successfully"),e.dom.errorWrapper.classList.add("disabled"),e.dom.successEmailUpdate.classList.remove("disabled"),e.dom.actionBtn.classList.add("disabled"),setTimeout((function(){e.dom.actionBtn.classList.remove("disabled"),e.dom.successEmailUpdate.classList.add("disabled")}),3e3)})).catch((function(e){return console.log(e),alert("This operation is sensitive and requires recent authentication. Log in again before retrying this request."),r.signOut().then((function(){console.log("Sign-out successful")})).catch((function(e){console.log(e)}))}));Se().isEmail(this.data.email)||0===this.data.email.length||(console.log(this.dom.errorWrapper),this.dom.errorWrapper.classList.remove("disabled"),this.dom.errorWrapper.innerText="Invalid e-mail")},t.prototype.updateProfileEvent=function(){var e=this;this.dom.actionBtn.addEventListener("click",(function(t){t.preventDefault(),e.updatePassword(),e.updateEmail()}))},t.prototype.initScripts=function(){this.changeDataEvent(),this.updateProfileEvent(),this.toggleForm(),this.deleteAccountEvent()},t.prototype.getDOMElements=function(){this.dom={updateFormContainer:document.querySelector("#update-account"),deleteAccountFormContainer:document.querySelector("#delete-account"),formInputs:document.querySelectorAll(".account__elementContent"),actionBtn:document.querySelector("#btn-update-account"),errorWrapper:document.querySelector("#update_profile_error"),successEmailUpdate:document.querySelector("#update_profile_email"),successPasswordUpdate:document.querySelector("#update_profile_password"),toogleIcon:document.querySelector(".account__deleteIcon img"),deleteAccountBtn:document.querySelector("#btn-delete-account")}},t.prototype.onDataChange=function(){return!0},t.prototype.render=function(){var e,t;this.root.innerHTML=(e=this.userData.nick,t=this.deleteCode,"\n    <section class='account background'>\n\n    <div class='account__item glass' id='update-account'>\n\n        <h2 class='account__title account__title-nick'>"+e+"</h2>\n\n        <div class='account__element'>\n\n            <div class='account__elementIcon'>\n                <img src='./images/account_date.png' alt='calendar' />\n            </div>\n\n            <div class='account__elementContent'>\n                12 November 2020\n            </div>\n\n        </div>\n\n        <form id='account-update'>\n\n            <div class='account__element'>\n                <div class='account__elementIcon'>\n                    <img src='./images/account_email.png' alt='email' />\n                </div>\n                <input type='text' name='email' value="+r.currentUser.email+"\n                    class='account__elementContent account__elementContent-email'\n                    placeholder='Leave blank to keep email same'>\n            </div>\n\n            <div class='account__element account__element-password'>\n                <div class='account__elementIcon'>\n                    <img src='./images/account_password.png' alt='lock' />\n                </div>\n                <input type='password' name='password' class='account__elementContent account__elementContent-password'\n                    placeholder='New password'>\n            </div>\n\n            <div class='account__element account__element-password'>\n                <div class='account__elementIcon'>\n                    <img src='./images/account_password.png' alt='lock' />\n                </div>\n                <input type='password' class='account__elementContent account__elementContent-password'\n                    placeholder='Repeat new password' name='passwordRepeat'>\n            </div>\n\n            <div class='account__msg account__msg-error disabled' id='update_profile_error'>\n                Password do not match!\n            </div>\n\n\n            <div class='account__msg account__msg-success disabled' id='update_profile_email'>\n                E-mail has been updated.\n            </div>\n\n            <div class='account__msg account__msg-success disabled' id='update_profile_password'>\n                Password has been updated.\n            </div>\n\n            <button class='account__btn account__btn-update' id='btn-update-account'>Update your account</button>\n            <div class='account__succcessfullUpdate disabled'>Successfully updated</div>\n\n        </form>\n    </div>\n\n\n    <div class='account__item disabled glass' id='delete-account'>\n\n        <h2 class='account__title account__title-delete'>Delete your account</h2>\n        <strong class='account__deleteCode'>"+t+"</strong>\n\n        <div class='account__element account__element-password'>\n            <div class='account__elementIcon'>\n                <img src='./images/account_signature.png' alt='lock' />\n            </div>\n            <input type='text' name='deleteCode' class='account__elementContent account__elementContent-password'\n                placeholder='Rewrite above code to delete account'>\n        </div>\n        \n        <button class='account__btn account__btn-delete disabled' id='btn-delete-account'>Delete your account</button>\n\n    </div>\n\n    <div class='account__deleteIcon'>\n        <img src='./images/account_delete_icon.png' title='Delete your account' />\n    </div>\n\n    </section>\n    ")},t}(M),Ce=function(){function e(e,t,n){this.root=e,this.currentUser=t,this.searchedUser=n,this.hideLabelInterval={potion:null,equipment:null},this.dom={switch:document.querySelector("#searched_user_switch"),friendAction:document.querySelector("#searched_user_friend_action"),description:document.querySelector(".profile__description"),potionLabel:document.querySelector(".profile__generalLabelWrapper"),equipmentLabelRoot:document.querySelector("#specificUser_equipment__item_label"),general:{wrapper:document.querySelector("#searched_user_general"),potionImgFirst:document.querySelector("#profile_general_potion_first .profile__generalImg"),potionImgSecond:document.querySelector("#profile_general_potion_second .profile__generalImg")}},this.init()}return e.prototype.equipmentLabel=function(e){var t=this;clearInterval(this.hideLabelInterval.equipment),this.dom.equipmentLabelRoot.className="profile__itemSpecs disabled",this.dom.equipmentLabelRoot.classList.add("legendary"===e.rarity?"profile__itemSpecs-legendary":"profile__itemSpecs-common"),this.dom.equipmentLabelRoot.classList.add("profile__itemSpecs-"+e.type),this.dom.equipmentLabelRoot.innerHTML=function(e){return"\n\n  <h3 class='market__itemTitle itemTitle "+("common"===e.rarity?"market__itemTitle-common":"market__itemTitle-legendary")+"'>\n  \n  "+e.name+"\n  </h3>\n  \n  "+("common"===e.rarity?" <strong class='market__itemRarity itemRarity market__itemRarity-common'>Common</strong>":"<strong class='market__itemRarity itemRarity market__itemRarity-legendary'>Legendary</strong>")+"\n  "+(void 0!==e.description?" <p class='market__itemDsc itemDsc '>'"+e.description+"' </p>":"")+"\n  <table class='market__itemStats itemStats'>\n    <tbody>\n\n\n    "+(null!==e.properties.strength?"<tr>\n        <td>Strength</td>\n        <td>"+e.properties.strength+"</td>\n      </tr>":"")+"\n  \n     "+(null!==e.properties.physicalEndurance?"<tr>\n         <td>Physical endurance</td>\n         <td>"+e.properties.physicalEndurance+"</td>\n        </tr>":"")+"   \n     \n      "+(null!==e.properties.defence?" \n      <tr>\n        <td>Defence</td>\n        <td>"+e.properties.defence+"</td>\n      </tr>":"")+"\n      \n      "+(null!==e.properties.luck?"\n      <tr>\n        <td>Luck</td>\n        <td>"+e.properties.luck+"</td>\n      </tr>\n      ":"")+"\n\n    </tbody>\n  </table>\n  "}(e),this.dom.equipmentLabelRoot.classList.remove("disabled"),this.dom.equipmentLabelRoot.addEventListener("mouseover",(function(){return clearInterval(t.hideLabelInterval.equipment)})),this.dom.equipmentLabelRoot.addEventListener("mouseleave",(function(){t.dom.equipmentLabelRoot.innerHTML="",t.dom.equipmentLabelRoot.classList.add("disabled")}))},e.prototype.setEquipment=function(){var e=this;this.searchedUser.equipmentItems.forEach((function(t){var n=document.querySelector(".profile__equipment div[data-slot-name = '"+t.type+"']");n.innerHTML="  <img src='"+t.src+'\' class="profile__equipmentIcon"/>',n.addEventListener("mouseover",(function(){return e.equipmentLabel(t)})),n.addEventListener("mouseleave",(function(t){e.hideLabelInterval.equipment=setInterval((function(){e.dom.equipmentLabelRoot.innerHTML="",e.dom.equipmentLabelRoot.classList.add("disabled")}),800)}))}))},e.prototype.labelForPotions=function(){var e=this;if(null!==this.searchedUser.potions.first){var t=o[o.findIndex((function(t){return t.id===e.searchedUser.potions.first.id}))];this.dom.general.potionImgFirst.addEventListener("mouseover",(function(){e.dom.potionLabel.innerHTML=K(t,1)})),this.dom.general.potionImgFirst.addEventListener("mouseleave",(function(){e.dom.potionLabel.innerHTML=""})),this.dom.general.potionImgFirst.classList.add("profile__generalImg-item")}if(null!==this.searchedUser.potions.second){var n=o[o.findIndex((function(t){return t.id===e.searchedUser.potions.second.id}))];this.dom.general.potionImgSecond.addEventListener("mouseover",(function(){e.dom.potionLabel.innerHTML=K(n,2)})),this.dom.general.potionImgSecond.addEventListener("mouseleave",(function(){e.dom.potionLabel.innerHTML=""})),this.dom.general.potionImgSecond.classList.add("profile__generalImg-item")}},e.prototype.createChat=function(){return e=this,t=void 0,o=function(){var e,t;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(n){switch(n.label){case 0:return e={messages:[],createdAt:new Date,participants:[""+r.currentUser.uid,""+this.searchedUser.id],updatedAt:new Date,recipientId:this.searchedUser.id,createdBy:r.currentUser.uid},[4,i.collection("chat").doc(r.currentUser.uid).collection("conversations").where("recipientId","==",this.searchedUser.id).get().then((function(e){e.forEach((function(){t=!0}))})).catch((function(e){console.log("Error getting documents: ",e)}))];case 1:return n.sent(),t?[3,3]:[4,i.collection("chat").doc(r.currentUser.uid).collection("conversations").add(e).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))];case 2:n.sent(),n.label=3;case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((o=o.apply(e,t||[])).next())}));var e,t,n,o},e.prototype.addOrRemoveFriendEvent=function(){var e=this;this.dom.friendAction.addEventListener("click",(function(){var t=e.currentUser.friends.findIndex((function(t){return t.id===e.searchedUser.id}));if(t<0){var n={nick:e.searchedUser.nick,id:e.searchedUser.id};e.currentUser.friends.push(n),e.dom.friendAction.src="./images/active_friend.png",e.createChat(),v(e.currentUser)}else e.currentUser.friends.splice(t,1),e.dom.friendAction.src="./images/add_friend.png",e.dom.friendAction.title="Add to friends",v(e.currentUser)}))},e.prototype.changeFriendIconEvents=function(){var e=this;this.dom.friendAction.addEventListener("mouseover",(function(){e.currentUser.friends.findIndex((function(t){return t.id===e.searchedUser.id}))>=0&&(e.dom.friendAction.src="./images/remove_friend.png",e.dom.friendAction.title="Remove friend")})),this.dom.friendAction.addEventListener("mouseleave",(function(){e.currentUser.friends.findIndex((function(t){return t.id===e.searchedUser.id}))>=0&&(e.dom.friendAction.src="./images/active_friend.png",e.dom.friendAction.title=e.searchedUser.nick+" is your friend")}))},e.prototype.switchElements=function(){var e=this;this.dom.switch.addEventListener("click",(function(){e.dom.general.wrapper.classList.contains("disabled")?(e.dom.general.wrapper.classList.remove("disabled"),e.dom.description.classList.add("disabled"),e.dom.switch.title="Switch to description"):(e.dom.general.wrapper.classList.add("disabled"),e.dom.description.classList.remove("disabled"),e.dom.switch.title="Switch to stats")}))},e.prototype.render=function(){var e,t,n,r;this.root.innerHTML=(e=this.currentUser.friends,(t=this.searchedUser).rawStats.strength,t.rawStats.physicalEndurance,t.rawStats.defence,t.rawStats.luck,r=L(t),"\n    <div class='profile__equipment  profile__equipment-specificUser'>\n\n    <div class='profile__equipmentItem profile__equipmentItem-helmet' data-slot-name='helmet' title='Helmet'>\n        <img src='/images/profile_equipment_helmet.png' class=\"profile__equipmentIcon\">\n    </div>\n\n    <div class='profile__equipmentItem profile__equipmentItem-armor' data-slot-name='chestPlate' title='Chest plate'>\n        <img src='/images/profile_equipment_chestPlate.png' class=\"profile__equipmentIcon\">\n    </div>\n\n    <div class='profile__equipmentItem profile__equipmentItem-gloves' data-slot-name='gloves' title='Gloves'>\n        <img src='/images/profile_equipment_gloves.png' class=\"profile__equipmentIcon\">\n    </div>\n\n    <div class='profile__equipmentItem profile__equipmentItem-weapon' data-slot-name='weapon' title='Weapon'>\n        <img src='/images/profile_equipment_weapon.png' class=\"profile__equipmentIcon\">\n    </div>\n\n    <div class='profile__equipmentItem profile__equipmentItem-shield' data-slot-name='shield' title='Shield'>\n        <img src='/images/profile_equipment_shield.png' class=\"profile__equipmentIcon\">\n    </div>\n\n    <div class='profile__equipmentItem profile__equipmentItem-special' data-slot-name='special' title='Special'>\n        <img src='/images/profile_equipment_special.png' class=\"profile__equipmentIcon\">\n    </div>\n\n    <div class='profile__portrait'>\n        <img class='profile__portraitImg' src='"+t.portrait+"' />\n    </div>\n\n    <div class='profile__info'>\n\n        <div class='profile__itemSpecs disabled' id='specificUser_equipment__item_label'>\n            <div id='specificUser_equipment_label_wrapper'></div>\n        </div>\n\n        <div class='profile__level' title='Level exp: "+t.exp+"/"+t.nextLevelAt+"'>\n            <div class='profile__levelProgress'\n                style='width: "+Math.floor(100*t.exp/F(t.level))+"%'></div>\n            <i>"+t.level+"</i>\n        </div>\n\n        <strong class='profile__nickname'>"+t.nick+"</strong>\n        <div class='searchedUser__actionBar'>\n            <img src='./images/switch.png' class='searchedUser__actionIcon' id='searched_user_switch'\n                title='Switch to description' />\n            <img src='"+(e.findIndex((function(e){return e.id===t.id}))<0?"./images/add_friend.png":"./images/active_friend.png")+"' class='searchedUser__actionIcon' id='searched_user_friend_action'\n                title='Add to friends' />\n        </div>\n\n    </div>\n</div>\n\n<div class='profile__description "+(t.description.length<6&&" disabled")+"'>\n    <p>"+t.description+"</p>\n</div>\n\n\n<div id='searched_user_general'>\n\n    <div class='profile__general profile__general-searchedUser'>\n\n        <div class='profile__generalLabelWrapper'> </div>\n\n        <div class='profile__generalItem' id='profile_general_pet'>\n            <div class='profile__generalImg "+(null!==t.pet&&" profile__generalImg-item")+"'>"+(null!==t.pet?"<img src="+t.pet.imgSmallSrc+" alt="+t.pet.name+" class='profile__generalImg-item'/>":' <img src="/images/profile_pet_slot.png" title="Pet slot" />')+"\n            </div>\n            <strong class='profile__generalText'>"+(null!==t.pet?t.pet.name:"No pet")+"\n                </strong>\n        </div>\n\n        <div class='profile__generalItem' id='profile_general_potion_first'>\n\n            <div class='profile__generalImg "+(null!==t.pet&&" profile__generalImg-item")+"'>\n                "+(void 0!==(n=o[o.findIndex((function(e){return t.potions.first}))])?"<img src="+n.src+" class='profile__generalImg-item'/>":'<img src="/images/profile_elixir_slot.png" title="Elixir slot #1" />')+"\n            </div>\n            <strong class='profile__generalText'>"+(null!==t.potions.first?o[o.findIndex((function(e){return t.potions.first}))].name:"No potion")+"\n                </strong>\n\n        </div>\n\n        <div class='profile__generalItem' id='profile_general_potion_second'>\n            <div class='profile__generalImg "+(null!==t.pet&&" profile__generalImg-item")+"'>\n                "+function(){var e=o[o.findIndex((function(e){return t.potions.second}))];return void 0!==e?"<img src="+e.src+" class='profile__generalImg-item'/>":'<img src="/images/profile_elixir_slot.png" title="Elixir slot #2" />'}()+"\n            </div>\n            <strong class='profile__generalText'>"+(null!==t.potions.second?o[o.findIndex((function(e){return t.potions.second}))].name:"No potion")+"</strong>\n                \n        </div>\n\n    </div>\n\n\n    <div class='searchedUser__statsWrapper'>\n\n        <table class='searchedUser__statsTable'>\n\n            <tbody>\n\n                <tr>\n                    <td>Strength:</td>\n                    <td>"+r.strength+"</td>\n                </tr>\n\n                <tr>\n                    <td>Physical endurance:</td>\n                    <td>"+r.physicalEndurance+"</td>\n                </tr>\n\n                <tr>\n                    <td>Defence:</td>\n                    <td>"+r.defence+"</td>\n                </tr>\n\n                <tr>\n                    <td>Luck:</td>\n                    <td>"+r.luck+"</td>\n                </tr>\n\n            </tbody>\n\n        </table>\n\n\n        <table class='searchedUser__statsTable'>\n\n            <tbody>\n\n                <tr>\n                    <td>Damage:</td>\n                    <td>"+r.damage+"</td>\n                </tr>\n\n                <tr>\n                    <td>Health:</td>\n                    <td>"+r.health+"</td>\n                </tr>\n\n                <tr>\n                    <td>Damage reduce:</td>\n                    <td>"+r.damageReduce+"</td>\n                </tr>\n\n                <tr>\n                    <td>Chance for critical:</td>\n                    <td>"+r.critical+"</td>\n                </tr>\n\n            </tbody>\n\n        </table>\n\n    </div>\n\n</div>\n   ")},e.prototype.getDOMElements=function(){this.dom={switch:document.querySelector("#searched_user_switch"),friendAction:document.querySelector("#searched_user_friend_action"),description:document.querySelector(".profile__description"),potionLabel:document.querySelector(".profile__generalLabelWrapper"),equipmentLabelRoot:document.querySelector("#specificUser_equipment__item_label"),general:{wrapper:document.querySelector("#searched_user_general"),potionImgFirst:document.querySelector("#profile_general_potion_first .profile__generalImg"),potionImgSecond:document.querySelector("#profile_general_potion_second .profile__generalImg")}}},e.prototype.initScripts=function(){this.setEquipment(),this.labelForPotions(),this.switchElements(),this.addOrRemoveFriendEvent(),this.changeFriendIconEvents()},e.prototype.init=function(){this.render(),this.getDOMElements(),this.initScripts()},e}(),Ae=["./images/emoji/emoji_1.png","./images/emoji/emoji_2.png","./images/emoji/emoji_3.png","./images/emoji/emoji_4.png","./images/emoji/emoji_5.png","./images/emoji/emoji_6.png","./images/emoji/emoji_7.png","./images/emoji/emoji_8.png","./images/emoji/emoji_9.png","./images/emoji/emoji_10.png","./images/emoji/emoji_12.png","./images/emoji/emoji_13.png","./images/emoji/emoji_14.png","./images/emoji/emoji_15.png","./images/emoji/emoji_16.png","./images/emoji/emoji_17.png","./images/emoji/emoji_18.png","./images/emoji/emoji_19.png","./images/emoji/emoji_20.png","./images/emoji/emoji_21.png","./images/emoji/emoji_22.png","./images/emoji/emoji_23.png","./images/emoji/emoji_24.png","./images/emoji/emoji_25.png","./images/emoji/emoji_26.png","./images/emoji/emoji_27.png","./images/emoji/emoji_28.png","./images/emoji/emoji_29.png","./images/emoji/emoji_30.png","./images/emoji/emoji_31.png","./images/emoji/emoji_32.png","./images/emoji/emoji_33.png","./images/emoji/emoji_34.png","./images/emoji/emoji_35.png","./images/emoji/emoji_36.png","./images/emoji/emoji_37.png","./images/emoji/emoji_38.png","./images/emoji/emoji_39.png","./images/emoji/emoji_40.png","./images/emoji/emoji_41.png","./images/emoji/emoji_42.png","./images/emoji/emoji_43.png","./images/emoji/emoji_44.png","./images/emoji/emoji_45.png","./images/emoji/emoji_46.png","./images/emoji/emoji_47.png","./images/emoji/emoji_48.png","./images/emoji/emoji_49.png","./images/emoji/emoji_50.png","./images/emoji/emoji_51.png","./images/emoji/emoji_52.png","./images/emoji/emoji_53.png","./images/emoji/emoji_54.png","./images/emoji/emoji_55.png","./images/emoji/emoji_56.png","./images/emoji/emoji_57.png","./images/emoji/emoji_58.png","./images/emoji/emoji_59.png","./images/emoji/emoji_60.png","./images/emoji/emoji_61.png","./images/emoji/emoji_62.png","./images/emoji/emoji_63.png","./images/emoji/emoji_64.png","./images/emoji/emoji_65.png","./images/emoji/emoji_66.png","./images/emoji/emoji_67.png","./images/emoji/emoji_68.png","./images/emoji/emoji_69.png"],Pe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Re=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ne=function(){function e(e,t,n){this.root=e,this.friend=n,this.currentUser=t,this.conversation={general:null,user:null,friend:null},this.dom={emojiList:document.querySelectorAll(".chat__emojiContainer img"),emojiBtn:document.querySelector(".chat__emojiIcon img"),emojiContainer:document.querySelector(".chat__emojiContainer"),newMessageText:document.querySelector(".chat__message"),sendMessageBtn:document.querySelector(".chat__btn"),chatContainer:document.querySelector(".chat__content")},this.init()}return e.prototype.updateChatData=function(e){return Pe(this,void 0,void 0,(function(){var t=this;return Re(this,(function(n){switch(n.label){case 0:return[4,i.collection("chat").doc(""+r.currentUser.uid).collection("conversations").where("recipientId","==",""+this.friend.id).get().then((function(n){n.docs.forEach((function(n){return i.collection("chat").doc(""+r.currentUser.uid).collection("conversations").doc(n.id).update(e).then((function(){t.dom.newMessageText.innerHTML=""})).catch((function(e){console.log(e)}))}))}))];case 1:return n.sent(),[2]}}))}))},e.prototype.dataChangeListener=function(){return Pe(this,void 0,void 0,(function(){var e=this;return Re(this,(function(t){switch(t.label){case 0:return[4,i.collection("chat").doc(""+r.currentUser.uid).collection("conversations").where("recipientId","==",""+this.friend.id).onSnapshot((function(t){t.docChanges.forEach((function(t){var n;"modified"===t.type&&(e.conversation.user=t.doc.data(),e.conversation.general.messages=t.doc.data().messages,null!==e.conversation.friend&&(n=e.conversation.general.messages).push.apply(n,e.conversation.friend.messages),e.renderChat()),"removed"===t.type&&location.reload()}))}))];case 1:return t.sent(),[4,i.collection("chat").doc(""+this.friend.id).collection("conversations").where("recipientId","==",""+r.currentUser.uid).onSnapshot((function(t){t.docChanges.forEach((function(t){var n;"modified"===t.type&&(e.conversation.friend=t.doc.data(),e.conversation.general.messages=t.doc.data().messages,null!==e.conversation.user&&(n=e.conversation.general.messages).push.apply(n,e.conversation.user.messages),e.renderChat()),"removed"===t.type&&location.reload()}))}))];case 2:return t.sent(),[2]}}))}))},e.prototype.getChatroomData=function(){return Pe(this,void 0,void 0,(function(){var e,t,n;return Re(this,(function(o){switch(o.label){case 0:return e={messages:[],createdAt:new Date,participants:[],updatedAt:new Date,recipientId:"",createdBy:r.currentUser.uid},t=null,n=null,[4,i.collection("chat").doc(""+r.currentUser.uid).collection("conversations").where("recipientId","==",""+this.friend.id).get().then((function(n){n.forEach((function(n){var r;(t=n.data()).messages.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()})),(r=e.messages).push.apply(r,t.messages),e.createdAt=n.data().createdAt,e.updatedAt=n.data().updatedAt,e.participants=n.data().participants}))})).catch((function(e){return console.log(e)}))];case 1:return o.sent(),[4,i.collection("chat").doc(""+this.friend.id).collection("conversations").where("recipientId","==",""+r.currentUser.uid).get().then((function(t){t.forEach((function(t){var r;(n=t.data()).messages.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()})),(r=e.messages).push.apply(r,n.messages)}))})).catch((function(e){return console.log(e)}))];case 2:return o.sent(),this.conversation.user=t,this.conversation.friend=n,this.conversation.general=e,[2]}}))}))},e.prototype.renderChat=function(){var e=this;this.conversation.general.messages.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}));var t="";this.conversation.general.messages.forEach((function(n){var i,o,a;t+=" <div class='message'>"+(i=e.friend,o=e.currentUser,((a=n).userId!==r.currentUser.uid?"\n    <div class='message__portraitWrapper'>\n       <div class='message__portrait'> \n         <img src='"+i.portrait+"'/>\n       </div>\n    </div>\n\n    <div class='message__content message__content-friend'> \n      <strong class='message__nick'>"+i.nick+"</strong>\n      "+a.content.map((function(e,t){return"<div class='message__cloud message__cloud-friend "+function(e,t){return 0===e?"message__cloud-friendFirst":t?"message__cloud-friendLast":void 0}(t,t===a.content.length-1)+"'>\n          "+e+"\n          </div>"})).join("")+"\n        <strong>"+me(a.createdAt)+"</strong>\n    </div>\n    ":"\n    <div class='message__content message__content-user'> \n      <strong class='message__nick'>You</strong>\n      "+a.content.map((function(e,t){return"\n          <div class='message__cloud message__cloud-user "+function(e,t){return 0===e?"message__cloud-userFirst":t?"message__cloud-userLast":void 0}(t,t===a.content.length-1)+"'>"+e+"</div>\n          \n          "})).join("")+"\n        <strong>"+me(a.createdAt)+"</strong>\n    </div>\n\n    <div class='message__portraitWrapper'>\n       <div class='message__portrait'> \n         <img src='"+o.portrait+"'/>\n       </div>\n    </div>\n    ")+"</div>")})),this.dom.chatContainer.innerHTML=t,this.dom.chatContainer.scrollTop=this.dom.chatContainer.scrollHeight},e.prototype.sendMessage=function(){var e=this;this.dom.sendMessageBtn.addEventListener("click",(function(){var t=e.dom.newMessageText.innerHTML;if(""!==t){var n=function(){var n={content:[],createdAt:new Date,nick:e.currentUser.nick,userId:r.currentUser.uid};n.content.push(t),e.dom.sendMessageBtn.classList.add("disabled"),e.conversation.user.messages.push(n)},i=new Date,o=e.conversation.user.messages.length-1,a=e.conversation.general.messages.length-1;if(e.conversation.user.messages[o]){var s=e.conversation.general.messages[a].createdAt,u=Math.abs(s.getTime()-i.getTime())/1e3;if(Math.floor(u/60)%60<=3&&e.conversation.general.messages[a].nick===e.currentUser.nick){var c=e.conversation.user.messages[o];e.dom.sendMessageBtn.classList.add("disabled"),c.content.push(t),c.createdAt=new Date,e.updateChatData(e.conversation.user)}else n(),e.updateChatData(e.conversation.user)}else n(),e.updateChatData(e.conversation.user)}}))},e.prototype.addEmoji=function(){var e=this;this.dom.emojiList.forEach((function(t){return t.addEventListener("click",(function(){var n=t,r=e.dom.newMessageText.innerHTML;r+="<img src='"+n.src+"'/>",e.dom.newMessageText.innerHTML=r}))}))},e.prototype.scrollToBottomMessage=function(){var e=this,t=function(){e.dom.newMessageText.scrollTop=e.dom.newMessageText.scrollHeight};this.dom.newMessageText.addEventListener("mouseover",t),this.dom.newMessageText.addEventListener("mouseleave",t)},e.prototype.toggleEmojiList=function(){var e=this;this.dom.emojiBtn.addEventListener("click",(function(){e.dom.emojiContainer.classList.contains("disabled")?(e.dom.emojiContainer.classList.remove("disabled"),e.dom.emojiBtn.src="./images/close.png"):(e.dom.emojiContainer.classList.add("disabled"),e.dom.emojiBtn.src="./images/chat_emoji_icon.png")}))},e.prototype.checkMessage=function(){var e=this,t=function(){0!==e.dom.newMessageText.innerText.length?e.dom.sendMessageBtn.classList.remove("disabled"):e.dom.sendMessageBtn.classList.add("disabled")};this.dom.newMessageText.addEventListener("keyup",t),this.dom.newMessageText.addEventListener("change",t)},e.prototype.general=function(){this.dom.chatContainer.scrollTop=this.dom.chatContainer.scrollHeight},e.prototype.render=function(){var e;this.root.innerHTML="\n    <section class='chat'>\n\n    <div class='chat__topBar'>\n\n        <div class=' chat__portrait chat__portrait-small'>\n            <img src='"+(e=this.friend).portrait+"' />\n            <h3 class='chat__friendNick'>\n                "+e.nick+"\n                "+(e.confirmedFriend?"":"<strong>(Not accepted yet)</strong>")+"\n            </h3>\n        </div>\n\n    </div>\n\n    <div class='chat__content'> </div>\n\n    <div class='chat__botBar'>\n\n        <div class='chat__emojiContainer disabled'>\n            "+Ae.map((function(e){return"<img src='"+e+"' />"})).join("")+"\n        </div>\n\n        <div class='chat__emojiIcon'>\n            <img src='./images/chat_emoji_icon.png' />\n        </div>\n\n        <div class='chat__form'>\n            <img src='./images/chat_text_icon.png' class='chat__textIcon' />\n            <div class='chat__messageWrapper' style='border: none; outline: none;'>\n                <div class='chat__message' contenteditable='true'></div>\n            </div>\n            <button class='chat__btn disabled'>SEND</button>\n        </div>\n\n    </div>\n    \n</section>\n    "},e.prototype.getDOMElements=function(){this.dom={emojiList:document.querySelectorAll(".chat__emojiContainer img"),emojiBtn:document.querySelector(".chat__emojiIcon img"),emojiContainer:document.querySelector(".chat__emojiContainer"),newMessageText:document.querySelector(".chat__message"),sendMessageBtn:document.querySelector(".chat__btn"),chatContainer:document.querySelector(".chat__content")}},e.prototype.initScripts=function(){this.dataChangeListener(),this.renderChat(),this.toggleEmojiList(),this.addEmoji(),this.scrollToBottomMessage(),this.sendMessage(),this.checkMessage(),this.dataChangeListener()},e.prototype.init=function(){var e=this;this.getChatroomData().then((function(){e.render(),e.getDOMElements(),e.initScripts(),e.general()})).catch((function(e){return console.log(e)}))},e}(),De=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Le=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Me=function(e){function t(){var t=e.call(this)||this;return t.secondView=null,t.friendsList=[],t.friendsListBackup=[],t.friendNick=null,t.freepikAttribute="<a href='https://www.freepik.com/vectors/building'>Building vector created by macrovector - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_friends.jpg",t.dom={mobileCloseBtn:document.querySelector(".closeIcon"),friendsContainer:document.querySelector("#friends_container"),sortBtn:document.querySelector("#friends_sort_btn"),filterBtn:document.querySelector("#friends_filter_btn"),closeBtn:document.querySelector("#friends_close_btn"),sortForm:document.querySelector("#friends_sort_form"),filterForm:document.querySelector("#friends_filter_form"),branch:document.querySelector("#friends_branch"),friendsList:document.querySelector(".friends__list"),friendsWrappers:document.querySelectorAll(".friend"),sortCheckboxes:document.querySelectorAll("#friends_sort_form input"),filterCheckboxes:document.querySelectorAll("#friends_filter_form input"),searchFriendInput:document.querySelector(".searchFriend__input"),nicks:document.querySelectorAll(".friend__name")},t}return De(t,e),t.prototype.showFormsEvents=function(){var e=this;this.dom.filterBtn.addEventListener("click",(function(){e.dom.sortForm.classList.add("disabled"),e.dom.filterForm.classList.contains("disabled")?e.dom.filterForm.classList.remove("disabled"):e.dom.filterForm.classList.add("disabled")})),this.dom.sortBtn.addEventListener("click",(function(){e.dom.filterForm.classList.add("disabled"),e.dom.sortForm.classList.contains("disabled")?e.dom.sortForm.classList.remove("disabled"):e.dom.sortForm.classList.add("disabled")}))},t.prototype.showFriendProfile=function(e,t){this.unmarkFriends(),this.dom.closeBtn.classList.remove("disabled"),this.secondView=new Ce(this.dom.branch,this.userData,e),this.shrinkFriendsList(),this.friendNick=e.nick,t.classList.add("friend__name-active"),window.innerWidth<1024&&(this.dom.mobileCloseBtn.className="closeIcon closeIcon__searchFriend")},t.prototype.showChat=function(e,t){this.unmarkFriends(),this.dom.closeBtn.classList.remove("disabled"),this.shrinkFriendsList(),this.secondView=new Ne(this.dom.branch,this.userData,e),this.friendNick=e.nick,t.classList.add("friend__name-active"),window.innerWidth<1024&&(this.dom.mobileCloseBtn.className="closeIcon closeIcon__chat")},t.prototype.createFriendWrapper=function(e){var t=this,n=document.createElement("div");n.className="friends__item",n.innerHTML=function(e){return"\n    <div class='friend glass'>\n\n    <div class='friend__portraitWrapper'>\n        <img src='"+e.portrait+"' alt='portait' class='friend__portrait' />\n    </div>\n\n    <h2 class='friend__name'>"+e.nick+"</h2>\n    <div class='friend__actionBar'>\n        <div class='friend__actionBtn friend__actionBtn-profile'>\n            <img src='./images/menu_profile.png' class='friend__icon' /> Profile\n        </div>\n        <div class='friend__actionBtn friend__actionBtn-chat'>\n            <img src='./images/friends_message_icon.png' class='friend__icon' /> Chat\n        </div>\n    </div>\n    \n</div>\n    "}(e);var r=n.querySelector(".friend__actionBtn-chat"),i=n.querySelector(".friend__actionBtn-profile");r.addEventListener("click",(function(){return t.showChat(e,r.parentElement.previousElementSibling)})),i.addEventListener("click",(function(){return t.showFriendProfile(e,r.parentElement.previousElementSibling)})),this.dom.friendsList.appendChild(n)},t.prototype.getFriendsData=function(){return Oe(this,void 0,void 0,(function(){var e=this;return Le(this,(function(t){switch(t.label){case 0:return this.friendsList=[],[4,i.collection("users").get().then((function(t){t.forEach((function(t){if(-1!==e.userData.friends.findIndex((function(e){return e.id===t.id}))){var n=t.data().friends.map((function(e){return e.id})),i={description:t.data().description,equipmentItems:t.data().equipmentItems,exp:t.data().exp,level:t.data().level,rawStats:t.data().rawStats,portrait:t.data().portrait,potions:t.data().potions,status:t.data().status,nick:t.data().nick,lastVisit:t.data().lastVisit,id:t.id,pet:t.data().pet,confirmedFriend:-1!==n.indexOf(r.currentUser.uid),nextLevelAt:F(t.data().level)};e.friendsList.push(i),e.friendsListBackup.push(i),e.createFriendWrapper(i)}}))}))];case 1:return t.sent(),[2]}}))}))},t.prototype.sortFriends=function(){var e=this;this.dom.sortCheckboxes.forEach((function(t){return t.addEventListener("change",(function(){"sort-by-highest-level"===t.value?e.friendsList=e.friendsList.sort((function(e,t){return t.level-e.level})):e.friendsList=e.friendsList.sort((function(e,t){return e.level-t.level})),e.rerenderFriendsList(),e.getDOMElements(),e.markFriend(),setTimeout((function(){e.dom.sortForm.classList.add("disabled")}),850)}))}))},t.prototype.filterFriends=function(){var e=this;this.dom.filterCheckboxes.forEach((function(t){return t.addEventListener("change",(function(){var n=t;"lower-level"===n.value?e.friendsList=e.friendsList.filter((function(t){return t.level<e.userData.level})):"higher-level"===n.value?e.friendsList=e.friendsList.filter((function(t){return t.level>e.userData.level})):e.friendsList=e.friendsListBackup,e.rerenderFriendsList(),e.getDOMElements(),e.markFriend(),setTimeout((function(){e.dom.filterForm.classList.add("disabled")}),850)}))}))},t.prototype.closeViewEvent=function(){var e=this;this.dom.closeBtn.addEventListener("click",(function(){return e.hideFriendView()})),this.dom.mobileCloseBtn.addEventListener("click",(function(){e.dom.branch.classList.add("disabled"),e.dom.friendsContainer.classList.remove("disabled"),e.dom.mobileCloseBtn.className="closeIcon disabled",e.dom.branch.innerHTML="",e.secondView=null,e.dom.closeBtn.classList.add("disabled"),e.unmarkFriends(),e.growFriendList()}))},t.prototype.rerenderFriendsList=function(){var e=this;this.dom.friendsList.innerHTML="",this.friendsList.forEach((function(t){return e.createFriendWrapper(t)})),null!==this.secondView&&this.shrinkFriendsList()},t.prototype.unmarkFriends=function(){document.querySelectorAll(".friend__name-active").forEach((function(e){return e.classList.remove("friend__name-active")}))},t.prototype.markFriend=function(){var e=this;document.querySelectorAll(".friend__name").forEach((function(t){return t.innerHTML===e.friendNick&&t.classList.add("friend__name-active")}))},t.prototype.shrinkFriendsList=function(){this.dom.branch.classList.remove("disabled"),document.querySelectorAll(".friend").forEach((function(e){return e.parentElement.classList.add("friends__item-active")})),window.innerWidth<1024&&this.hideFriendsContainer()},t.prototype.growFriendList=function(){document.querySelectorAll(".friend").forEach((function(e){return e.parentElement.classList.remove("friends__item-active")}))},t.prototype.hideFriendView=function(){this.dom.closeBtn.classList.add("disabled"),this.dom.branch.classList.add("disabled"),this.showFriendsContainer(),this.unmarkFriends(),this.growFriendList(),this.secondView=null},t.prototype.searchFriend=function(){var e=this,t=function(t){return Oe(e,void 0,void 0,(function(){var e;return Le(this,(function(n){return t.length>0?(e=[],this.dom.nicks.forEach((function(n){n.innerHTML===t&&e.push(n.parentElement.parentElement)})),this.dom.friendsWrappers.forEach((function(e){return e.parentElement.classList.add("disabled")})),e.forEach((function(e){return e.classList.remove("disabled")}))):this.dom.friendsWrappers.forEach((function(e){return e.parentElement.classList.remove("disabled")})),[2]}))}))};this.dom.searchFriendInput.addEventListener("change",(function(){return t(e.dom.searchFriendInput.value)})),this.dom.searchFriendInput.addEventListener("keyup",(function(){return t(e.dom.searchFriendInput.value)}))},t.prototype.hideFriendsContainer=function(){this.dom.friendsContainer.classList.add("disabled")},t.prototype.showFriendsContainer=function(){this.dom.friendsContainer.classList.remove("disabled"),this.dom.mobileCloseBtn.classList.add("disabled")},t.prototype.mobile=function(){var e=this;window.innerWidth<1024&&this.dom.branch.classList.add("disabled"),window.addEventListener("resize",(function(){window.innerWidth<1024?(e.dom.branch.classList.add("disabled"),e.unmarkFriends(),e.showFriendsContainer()):window.innerWidth>=1024&&(e.unmarkFriends(),e.dom.branch.classList.add("disabled"),e.growFriendList())}))},t.prototype.onDataChange=function(){this.hideFriendView(),this.initScripts(),this.rerenderFriendsList()},t.prototype.initScripts=function(){var e=this;this.getFriendsData().then((function(){e.getDOMElements(),e.showFormsEvents(),e.sortFriends(),e.filterFriends(),e.closeViewEvent(),e.searchFriend(),e.mobile()}))},t.prototype.render=function(){this.root.innerHTML='\n    <section class="friends background">\n\n    <div class=\'closeIcon closeIcon__chat disabled\'>\n        <img src=\'./images/close.png\' />\n    </div>\n\n    <div class="friends__itemWrapper" id=\'friends_container\'>\n\n        <div class="friends__topBar">\n\n            <div class="friends__searchWrapper">\n                <div class=\'searchFriend__searchIcon\'>\n                    <img src=\'./images/friends_icon_search.png\' alt=\'search\' />\n                </div>\n                <input type=\'text\' name=\'search_friends_input\' class=\'searchFriend__input\'>\n            </div>\n\n            <div class="friends__settingsWrapper">\n\n                <img src="./images/close.png" alt="filter" title=\'Close\' class="friends__settingsIcon disabled"\n                    id="friends_close_btn">\n                <img src="./images/friends_icon_sort.png" alt="sort" title=\'Sort friends list\'\n                    class="friends__settingsIcon" id="friends_sort_btn">\n                <img src="./images/friends_icon_filter.png" alt="filter" title=\'Filter friends list\'\n                    class="friends__settingsIcon" id="friends_filter_btn">\n\n\n                <form class="friends__settingsForm disabled" id="friends_sort_form">\n\n                    <h3 class=\'friends__settingsTitle\'>Sort</h3>\n                    <fieldset>\n\n                        <div class="friends__checkboxWrapper friends__checkboxWrapper-highestLevel">\n                            <label>\n                                From highest level\n                                <input type="radio" name=\'friends-sort\' value=\'sort-by-highest-level\'>\n                                <span></span>\n                                <i class="fas fa-check" aria-hidden="true"></i>\n                            </label>\n                        </div>\n\n                        <div class="friends__checkboxWrapper friends__checkboxWrapper-LowestLevel">\n                            <label>\n                                From lowest level\n                                <input type="radio" name=\'friends-sort\' value=\'sort-by-lowest-level\'>\n                                <span></span>\n                                <i class="fas fa-check" aria-hidden="true"></i>\n                            </label>\n                        </div>\n\n                    </fieldset>\n                </form>\n\n\n\n\n\n                <form class="friends__settingsForm friends__settingsForm-filter disabled" id="friends_filter_form">\n\n                    <h3 class=\'friends__settingsTitle\'>Filter</h3>\n\n\n                    <fieldset>\n\n                        <div class="friends__checkboxWrapper friends__checkboxWrapper-highestGold">\n                            <label>\n                                With a higher level than yours\n                                <input type="radio" name=\'friends-filter\' value=\'higher-level\'>\n                                <span></span>\n                                <i class="fas fa-check" aria-hidden="true"></i>\n                            </label>\n                        </div>\n\n                        <div class="friends__checkboxWrapper friends__checkboxWrapper-LowestGold">\n                            <label>\n                                With a lower level than yours\n                                <input type="radio" name=\'friends-filter\' value=\'lower-level\'>\n                                <span></span>\n                                <i class="fas fa-check" aria-hidden="true"></i>\n                            </label>\n                        </div>\n\n                        <div class="friends__checkboxWrapper friends__checkboxWrapper-LowestGold">\n                            <label>\n                                None\n                                <input type="radio" name=\'friends-filter\' value=\'none\' checked>\n                                <span></span>\n                                <i class="fas fa-check" aria-hidden="true"></i>\n                            </label>\n                        </div>\n\n                    </fieldset>\n\n                </form>\n\n            </div>\n        </div>\n\n        <div class="friends__list"></div>\n\n    </div>\n\n    <div class="friends__itemWrapper disabled" id=\'friends_branch\'> </div>\n\n</section>\n    '},t.prototype.getDOMElements=function(){this.dom={mobileCloseBtn:document.querySelector(".closeIcon"),friendsContainer:document.querySelector("#friends_container"),sortBtn:document.querySelector("#friends_sort_btn"),filterBtn:document.querySelector("#friends_filter_btn"),sortForm:document.querySelector("#friends_sort_form"),closeBtn:document.querySelector("#friends_close_btn"),filterForm:document.querySelector("#friends_filter_form"),branch:document.querySelector("#friends_branch"),friendsList:document.querySelector(".friends__list"),friendsWrappers:document.querySelectorAll(".friend"),sortCheckboxes:document.querySelectorAll("#friends_sort_form input"),filterCheckboxes:document.querySelectorAll("#friends_filter_form input"),searchFriendInput:document.querySelector(".searchFriend__input"),nicks:document.querySelectorAll(".friend__name")}},t}(M),xe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},qe=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Be=function(e){function t(){var t=e.call(this)||this;return t.freepikAttribute=" <a href='https://www.freepik.com/vectors/tree'>Tree vector created by upklyak - www.freepik.com</a>",t.bodyBackgroundSrc="/images/background_search_friend.jpg",t.allUsersData=[],t.searchedUser=null,t.dom={closeViewIcon:document.querySelector(".closeIcon__searchFriend"),usersContainer:document.querySelector(".searchFriend__item-search"),searchedUserContainer:document.querySelector("#searched_user_root"),allUsersList:document.querySelector("#all_users"),allUsersRow:document.querySelectorAll("#all_users tr"),userRoot:document.querySelector("#searched_user_root"),nicks:document.querySelectorAll("#all_users .searchFriend__nick"),searchFriendInput:document.querySelector(".searchFriend__input")},t}return xe(t,e),t.prototype.showSearchedUserEvent=function(e){this.dom.nicks.forEach((function(e){return e.parentElement.classList.remove("searchFriend__nick-selected")}));var t=this.allUsersData.findIndex((function(t){return t.id===e})),n=this.allUsersData[t];this.searchedUser=new Ce(this.dom.userRoot,this.userData,n),window.innerWidth<1024&&this.toogleView()},t.prototype.createFriendTableElement=function(e){var t,n,r=this,i=document.createElement("tr");i.innerHTML="\n         <td><div class='searchFriend__status searchFriend__status-an'> <img src='"+("mission"===(n=e.status)?"./images/menu_mission.png":"guard"===n?"./images/menu_guard.png":"free"===n?"./images/beer.png":void 0)+"'/><strong>"+e.status+"</strong></div></td>\n         <td><div class='searchFriend__nick'><div class='searchFriend__level'>"+e.level+"</div><strong>"+e.nick+"</strong></div></td>\n         <td><div class='searchFriend__lastVisit searchFriend__lastVisit-an'>"+((t=e.lastVisit).getDay()===pe.getDay()?"Today":1===fe(t,pe)?"Yesterday":fe(t,pe)<7?""+de[t.getDay()]:t.getDate()+" "+he[t.getMonth()])+" <img src='./images/computer.png'/></div></td>",i.addEventListener("click",(function(){r.showSearchedUserEvent(e.id),i.children[1].firstElementChild.classList.add("searchFriend__nick-selected")})),this.dom.allUsersList.appendChild(i)},t.prototype.getAllUsers=function(){return Fe(this,void 0,void 0,(function(){var e=this;return qe(this,(function(t){switch(t.label){case 0:return[4,i.collection("users").get().then((function(t){t.forEach((function(t){var n=t.data().friends.map((function(e){return e.id})),i={description:t.data().description,equipmentItems:t.data().equipmentItems,exp:t.data().exp,level:t.data().level,rawStats:t.data().rawStats,portrait:t.data().portrait,potions:t.data().potions,status:t.data().status,nick:t.data().nick,lastVisit:t.data().lastVisit,id:t.id,pet:t.data().pet,confirmedFriend:n.indexOf(r.currentUser.uid)>=0,nextLevelAt:F(t.data().level)};i.id!==r.currentUser.uid&&(e.allUsersData.push(i),e.createFriendTableElement(i))})),e.dom.allUsersRow=document.querySelectorAll("#all_users tr"),e.dom.nicks=document.querySelectorAll("#all_users .searchFriend__nick strong")}))];case 1:return t.sent(),[2]}}))}))},t.prototype.mobile=function(){var e=this;window.innerWidth<1024&&this.dom.searchedUserContainer.classList.add("disabled"),window.addEventListener("resize",(function(){window.innerWidth<1024?(e.dom.searchedUserContainer.classList.add("disabled"),e.dom.usersContainer.classList.remove("disabled"),e.dom.closeViewIcon.classList.add("disabled")):window.innerWidth>=1024&&e.dom.searchedUserContainer.classList.remove("disabled")}))},t.prototype.searchFriend=function(){var e=this,t=function(t){return Fe(e,void 0,void 0,(function(){var e;return qe(this,(function(n){return t.length>0?(e=[],this.dom.nicks.forEach((function(n){n.innerHTML===t&&e.push(n.parentElement.parentElement.parentElement)})),this.dom.allUsersRow.forEach((function(e){return e.classList.add("disabled")})),e.forEach((function(e){return e.classList.remove("disabled")}))):this.dom.allUsersRow.forEach((function(e){return e.classList.remove("disabled")})),[2]}))}))};this.dom.searchFriendInput.addEventListener("change",(function(){return t(e.dom.searchFriendInput.value)})),this.dom.searchFriendInput.addEventListener("keyup",(function(){return t(e.dom.searchFriendInput.value)}))},t.prototype.toogleView=function(){this.dom.usersContainer.classList.contains("disabled")?(this.dom.searchedUserContainer.classList.add("disabled"),this.dom.usersContainer.classList.remove("disabled"),this.dom.closeViewIcon.classList.add("disabled")):(this.dom.searchedUserContainer.classList.remove("disabled"),this.dom.usersContainer.classList.add("disabled"),this.dom.closeViewIcon.classList.remove("disabled"))},t.prototype.hideSearchedFriend=function(){var e=this;this.dom.closeViewIcon.addEventListener("click",(function(){e.dom.searchedUserContainer.classList.add("disabled"),e.dom.usersContainer.classList.remove("disabled"),e.dom.closeViewIcon.classList.add("disabled")}))},t.prototype.initScripts=function(){var e=this;this.getAllUsers().then((function(){e.hideSearchedFriend(),e.mobile(),e.searchFriend()}))},t.prototype.onDataChange=function(){return!0},t.prototype.getDOMElements=function(){this.dom={closeViewIcon:document.querySelector(".closeIcon__searchFriend"),allUsersList:document.querySelector("#all_users"),allUsersRow:document.querySelectorAll("#all_users tr"),userRoot:document.querySelector("#searched_user_root"),nicks:document.querySelectorAll("#all_users .searchFriend__nick strong"),searchFriendInput:document.querySelector(".searchFriend__input"),usersContainer:document.querySelector(".searchFriend__item-search"),searchedUserContainer:document.querySelector("#searched_user_root")}},t.prototype.render=function(){this.root.innerHTML="\n  <section class='searchFriend background'>\n\n    <div class='closeIcon closeIcon__searchFriend disabled'>\n        <img src='./images/close.png' />\n    </div>\n\n    <div class='searchFriend__item searchFriend__item-search'>\n\n        <div class='searchFriend__list'>\n            <table>\n\n                <thead>\n                    <tr>\n                        <th>Status</th>\n                        <th>Nickname</th>\n                        <th>Last visit</th>\n                    </tr>\n                </thead>\n\n                <tbody id='all_users'></tbody>\n\n            </table>\n\n        </div>\n\n        <div class='searchFriend__searchBar'>\n            <div class='searchFriend__searchIcon'>\n                <img src='./images/friends_icon_search.png' alt='search' />\n            </div>\n            <input type='text' name='search_friends_input' class='searchFriend__input'>\n        </div>\n\n    </div>\n\n    <div class='searchFriend__item "+(window.innerWidth<1024?" disabled":"")+"' id='searched_user_root'></div>\n\n</section>\n  "},t}(M),Ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(e){function t(){var t=e.call(this)||this;return t.guardPayout=0,t.guardTime=1,t.countdownInterval=null,t.dom={inputProgressBar:document.querySelector(".progressBar"),sliderValue:document.querySelector("#slider_value"),inputSlider:document.querySelector("#guard_input_slider"),guardPayout:document.querySelector(".guard__awardAmount"),acceptBtn:document.querySelector(".guard__acceptBtn"),menu:document.querySelector("#guard_menu"),castleCity:document.querySelector("#guard_castleCity"),cancelGuardBtn:document.querySelector(".countdown__cancelBtn"),summaryBtn:document.querySelector(".guard__summaryBtn"),guardTimeLeft:document.querySelector(".countdown__time"),countdownProgressBar:document.querySelector(".countdown__bar"),summary:document.querySelector(".guard__summary"),summaryPayout:document.querySelector(".guard__summaryPayout"),countdownWrapper:document.querySelector("#guard_countdown_elements"),rangeIcon:document.querySelector(".rangeIcon")},t}return Ue(t,e),t.prototype.guardSlider=function(){var e=this;this.dom.inputSlider.oninput=function(t){var n=t.target;e.dom.sliderValue.innerText=n.value+"h",e.guardPayout=parseFloat((Y(e.userData.level)*(parseFloat(n.value)/10)).toFixed()),e.dom.guardPayout.innerHTML="Reward: <strong>"+e.guardPayout+"</strong>",e.guardTime=parseFloat(n.value);var r=10*parseInt(n.value);e.dom.sliderValue.style.left=r<50?r-10+"%":r>50?r-9+"%":"40%";var i=10*parseInt(n.value);e.dom.rangeIcon.style.left=r<50?i-10+"%":r>50?i-9+"%":"40%",e.dom.inputProgressBar.className="progressBar progressBar-"+n.value}},t.prototype.startGuard=function(){var e=this;this.dom.acceptBtn.addEventListener("click",(function(){"free"===e.userData.status&&(e.userData.status="guard",e.userData.guard.start=new Date,e.userData.guard.current=new Date,e.userData.guard.end=new Date,e.userData.guard.end.setHours(e.userData.guard.end.getHours()+e.guardTime),e.userData.guard.payout=e.guardPayout,v(e.userData))}))},t.prototype.guardCountdown=function(){var e=this;this.dom.summary.classList.add("disabled");var t=(new Date).getTime(),n=(this.userData.guard.end.getTime()-t)/1e3/60,r=(new Date).getTime()+60*n*1e3;this.countdownInterval=setInterval((function(){var t,n,i,o=(new Date).getTime(),a=(r-o)/1e3;if(a>=0){e.dom.countdownWrapper.classList.remove("disabled"),a%=86400,t=parseInt((a/3600).toString()),a%=3600,n=parseInt((a/60).toString()),i=parseInt((a%60).toString()),e.dom.guardTimeLeft.innerText=(0!==t?t+"h : ":"")+" "+n+"m : "+i+"s";var s=e.userData.guard.start.getTime(),u=e.userData.guard.end.getTime()-s,c=(new Date).getTime()-s,l=Math.round(c/u*100)+"%";e.dom.countdownProgressBar.style.width=l}else e.dom.summaryPayout.innerText=""+e.userData.guard.payout,e.dom.summary.classList.remove("disabled"),e.dom.countdownWrapper.classList.add("disabled"),e.dom.guardTimeLeft.innerText="",clearInterval(e.countdownInterval)}),1e3)},t.prototype.getGuardPayout=function(){var e=this;this.dom.summaryBtn.addEventListener("click",(function(){null!==e.userData.guard.payout&&e.userData.guard.end.getTime()<=(new Date).getTime()&&(e.userData.gold+=e.userData.guard.payout,e.userData.guard={end:null,start:null,current:null,payout:null},e.userData.status="free",v(e.userData))}))},t.prototype.cancelGuardEvent=function(){var e=this;this.dom.cancelGuardBtn.addEventListener("click",(function(){e.userData.status="free",e.dom.guardTimeLeft.innerText="",clearInterval(e.countdownInterval),e.userData.guard={start:null,current:null,payout:null,end:null},v(e.userData)}))},t.prototype.checkStatus=function(){"free"===this.userData.status?(this.dom.menu.className="guard__wrapper",this.dom.castleCity.className="guard__wrapper disabled",null!==this.countdownInterval&&clearInterval(this.countdownInterval),this.freepikAttribute="<a href='https://www.freepik.com/vectors/background'>Background vector created by vectorpocket - www.freepik.com</a>",this.bodyBackgroundSrc="/images/background_guard.jpg",this.setBodyBackground()):"guard"===this.userData.status?(null!==this.countdownInterval&&clearInterval(this.countdownInterval),this.dom.menu.className="guard__wrapper disabled",this.dom.castleCity.className="guard__wrapper",this.freepikAttribute="<a href='https://www.freepik.com/vectors/book'>Book vector created by upklyak - www.freepik.com</a>",this.bodyBackgroundSrc="/images/background_guard_city.jpg",this.setBodyBackground(),this.guardCountdown()):"mission"===this.userData.status&&(this.dom.menu.className="guard__wrapper",this.dom.castleCity.className="guard__wrapper disabled",this.dom.acceptBtn.parentElement.innerHTML="",this.freepikAttribute="<a href='https://www.freepik.com/vectors/background'>Background vector created by vectorpocket - www.freepik.com</a>",this.bodyBackgroundSrc="/images/background_guard.jpg",this.setBodyBackground())},t.prototype.general=function(){this.guardPayout=parseFloat((.1*Y(this.userData.level)).toFixed()),this.dom.guardPayout.innerHTML="Reward: <strong>"+this.guardPayout+"</strong>"},t.prototype.render=function(){this.root.innerHTML="\n    <div class='guard__wrapper disabled' id='guard_menu'>\n\n    <section class='guard-menu background'>\n\n        <div class='guard__item glass'>\n\n            <div class='guard__kingWrapper'>\n                <img src='./images/guard_king.png' alt='King' class='guard__king' />\n            </div>\n\n            <div class='guard__infoWrapper'>\n\n                <h2 class='guard__title'>King guard</h2>\n                <p class='guard__text'>As you know, there are lots of monsters around my castle.\n                    I can't even do my job. I have heard that you are a brave knight who is not afraid of monsters,\n                    and they hide in their hiding places when they see you.\n                    Protect this castle from monsters and I will reward you.\n                </p>\n\n                <div class='range'>\n\n                    <div class='sliderValue'>\n                        <span id='slider_value'>1h</span>\n                    </div>\n\n                    <div class='field'>\n                        <span class='progressBar'></span>\n                        <div class='rangeIcon'> </div>\n                        <input type='range' name='guard_time_slider' class='field__progressBar-1'\n                            id='guard_input_slider' min='1' max='10' value='1'>\n                    </div>\n\n                </div>\n\n                <div class='guard__award'>\n                    <img src='./images/guard_reward_icon.png' alt='King' class='guard__awardIcon' />\n                    <div class='guard__awardAmount'></div>\n                </div>\n\n                <div class='guard__acceptBtnWrapper'>\n                    <button class='guard__acceptBtn'>START</button>\n                </div>\n\n            </div>\n\n        </div>\n\n    </section>\n</div>\n\n\n<div class='guard__wrapper disabled' id='guard_castleCity'>\n\n\n    <setion class='guard-city background'>\n\n        <div class='guard__summaryWrapper'>\n\n            <div class='guard__summary glass'>\n                <img class='guard__summaryIcon' src='./images/gold_bag_big.png' alt='gold bag' />\n                <h2 class='guard__summaryTitle'>Your payout</h2>\n                <strong class='guard__summaryPayout'></strong>\n                <button class='guard__summaryBtn'>TAKE</button>\n            </div>\n\n        </div>\n\n        <div id='guard_countdown_elements' class='disabled'>\n\n            <div class='countdown__wrapper glass'>\n\n                <div class='countdown__progressBar'>\n\n                </div>\n\n                <div class='countdown__time'></div>\n\n            </div>\n\n            <button class='countdown__cancelBtn'>Cancel</button>\n\n        </div>\n\n    </setion>\n</div>\n "},t.prototype.onDataChange=function(){this.checkStatus()},t.prototype.getDOMElements=function(){this.dom={inputProgressBar:document.querySelector(".progressBar"),sliderValue:document.querySelector("#slider_value"),inputSlider:document.querySelector("#guard_input_slider"),guardPayout:document.querySelector(".guard__awardAmount"),acceptBtn:document.querySelector(".guard__acceptBtn"),menu:document.querySelector("#guard_menu"),castleCity:document.querySelector("#guard_castleCity"),cancelGuardBtn:document.querySelector(".countdown__cancelBtn"),summaryBtn:document.querySelector(".guard__summaryBtn"),guardTimeLeft:document.querySelector(".countdown__time"),countdownProgressBar:document.querySelector(".countdown__progressBar"),summary:document.querySelector(".guard__summary"),summaryPayout:document.querySelector(".guard__summaryPayout"),countdownWrapper:document.querySelector("#guard_countdown_elements"),rangeIcon:document.querySelector(".rangeIcon")}},t.prototype.initScripts=function(){this.checkStatus(),this.general(),this.guardSlider(),this.startGuard(),this.cancelGuardEvent(),this.getGuardPayout()},t}(M),We=function(){return e=void 0,t=void 0,r=function(){var e,t,n,r;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(i){return t=(e=[{path:"/profile",view:Q},{path:"/missions",view:ue},{path:"/blacksmith",view:V},{path:"/wizard",view:le},{path:"/inbox",view:ye},{path:"/pets",view:be},{path:"/friends",view:Me},{path:"/search",view:Be},{path:"/guard",view:je},{path:"/account",view:Te}]).map((function(e){return{route:e,isMatch:location.pathname===e.path}})),(n=t.find((function(e){return e.isMatch})))?(r=e.indexOf(e.find((function(e){return e.path===n.route.path}))),new e[r].view):new e[0].view,document.querySelector(".loading").classList.remove("disabled"),[2]}))},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}));var e,t,n,r},Ve=function(){function e(){this.logoutBtn=document.querySelector("#btn-logout"),this.nav=document.querySelector(".nav"),this.init()}return e.prototype.logoutEvent=function(){this.logoutBtn.addEventListener("click",(function(){return r.signOut()}))},e.prototype.mobile=function(){var e=this;window.addEventListener("resize",(function(){window.innerHeight<=1e3&&window.innerWidth>=1024&&"none"===e.nav.style.display&&(e.nav.style.display="block")}))},e.prototype.init=function(){this.logoutEvent(),this.mobile()},e}(),He=function(){function e(){this.dom={navContainer:document.querySelector(".nav"),navIcon:document.querySelector(".mobileNav__icon"),links:document.querySelectorAll(".nav a")},this.init()}return e.prototype.toggleNav=function(){var e=this;this.dom.navIcon.addEventListener("click",(function(){"block"===e.dom.navContainer.style.display?(e.dom.navContainer.style.display="none",e.dom.navIcon.src="./images/menu.png"):(e.dom.navContainer.style.display="block",e.dom.navIcon.src="./images/close.png")}))},e.prototype.hideNav=function(){var e=this;this.dom.links.forEach((function(t){return t.addEventListener("click",(function(){"block"===e.dom.navContainer.style.display&&(e.dom.navContainer.style.display="none"),e.dom.navIcon.src="./images/menu.png"}))}))},e.prototype.init=function(){this.toggleNav(),this.hideNav()},e}();window.addEventListener("DOMContentLoaded",(function(){r.onAuthStateChanged((function(e){var t;e?(t=window.location.pathname,document.querySelectorAll(".nav a").forEach((function(e){return e.dataset.link===window.location.pathname&&e.classList.add("nav__link-active")})),history.pushState(null,null,t),We(),window.addEventListener("popstate",We),new Ve,new He):location.href="/login.html"}))}))})()})();